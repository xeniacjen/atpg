cscope 15 $HOME/Github/atpg/pkg -q 0000001695 0000407660
	@atpg/src/atpg_cmd.cpp

8 
	~<c¡dlib
>

9 
	~<iomª
>

10 
	~<f¡»am
>

12 
	~"©pg_cmd.h
"

13 
	~"cÜe/·‰”n_rw.h
"

14 
	~"cÜe/simuÏtÜ.h
"

16 
usšg
 
Çme¥aû
 
	g¡d
;

17 
usšg
 
Çme¥aû
 
	gCommÚNs
;

18 
usšg
 
Çme¥aû
 
	gIÁfNs
;

19 
usšg
 
Çme¥aû
 
	gCÜeNs
;

20 
usšg
 
Çme¥aû
 
	gFªNs
;

22 
	g¹ime
;

25 
	gR—dP©Cmd
::
	$R—dP©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
è: 
	$Cmd
(
Çme
) {

26 
çnMgr_
 = 
çnMgr
;

27 
İtMgr_
.
	`£tName
(
Çme
);

28 
İtMgr_
.
	`£tShÜtDes
("read…atterns");

29 
İtMgr_
.
	`£tDes
("read…attern form FILE");

30 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "pattern file", "FILE"));

31 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

32 
İt
->
	`addFÏg
("h");

33 
İt
->
	`addFÏg
("help");

34 
İtMgr_
.
	`»gO±
(
İt
);

35 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "verbose on. Default is off", "");

36 
İt
->
	`addFÏg
("v");

37 
İt
->
	`addFÏg
("verbose");

38 
İtMgr_
.
	`»gO±
(
İt
);

39 
	}
}

40 
	gR—dP©Cmd
::~
	$R—dP©Cmd
(è{
	}
}

43 
boŞ
 
R—dP©Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

44 
İtMgr_
.
·r£
(
¬gv
);

46 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

47 
	gİtMgr_
.
u§ge
();

48  
	gŒue
;

51 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

52 
	gû¼
 << "**ERROR ReadPatCmd::exec(): circuit‚eeded";

53 
	gû¼
 << 
	g’dl
;

54  
	gçl£
;

57 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

58 
	gû¼
 << "**ERROR ReadPatCmd::exec():…attern file‚eeded";

59 
	gû¼
 << 
	g’dl
;

60  
	gçl£
;

64 
d–‘e
 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
;

65 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
 = 
Ãw
 
P©‹ºProûssÜ
;

66 
P©Fe
 *
	g·tBld”
 = 
Ãw
 
P©‹ºR—d”
(
çnMgr_
->
©pg_mgr
->
pcŞl_
, fªMgr_->©pg_mgr->
cœ_
);

69 
	gçnMgr_
->
	gtmusg
.
³riodS¹
();

70 
	gcout
 << "# R—dšg…©‹º ..." << 
	g’dl
;

71 
boŞ
 
	gv”bo£
 = 
İtMgr_
.
isFÏgS‘
("v");

72 ià(!
	g·tBld”
->
»ad
(
İtMgr_
.
g‘P¬£dArg
(0).
c_¡r
(), 
v”bo£
)) {

73 
	gû¼
 << "**ERROR R—dP©Cmd()::exec():…©‹º bud”ƒ¼Ü" << 
	g’dl
;

74 
d–‘e
 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
;

75 
d–‘e
 
	g·tBld”
;

76 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
 = 
NULL
;

77  
	gçl£
;

80 
TmSt
 
	g¡©
;

81 
	gçnMgr_
->
	gtmusg
.
g‘P”iodU§ge
(
¡©
);

82 
	gcout
 << "# Fšished„—dšg…©‹º `" << 
	gİtMgr_
.
g‘P¬£dArg
(0) << "'";

83 
	gcout
 << " " << ()
	g¡©
.
	grTime
 / 1000000.0 << " s";

84 
	gcout
 << " " << ()
	g¡©
.
	gvmSize
 / 1024.0 << " MB" << 
	g’dl
;

86 
d–‘e
 
	g·tBld”
;

87  
	gŒue
;

91 
	gR•ÜtP©Cmd
::
	$R•ÜtP©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

92 
	$Cmd
(
Çme
) {

93 
çnMgr_
 = 
çnMgr
;

94 
İtMgr_
.
	`£tName
(
Çme
);

95 
İtMgr_
.
	`£tShÜtDes
("report…attern");

96 
İtMgr_
.
	`£tDes
("report…attern information");

97 
Arg
 *
¬g
 = 
Ãw
 
	`Arg
(Arg::
REQ_INF
, "pattern‚umbero be„eported", "NUM");

98 
İtMgr_
.
	`»gArg
(
¬g
);

99 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

100 
İt
->
	`addFÏg
("h");

101 
İt
->
	`addFÏg
("help");

102 
İtMgr_
.
	`»gO±
(
İt
);

103 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "don't…rint order information", "");

104 
İt
->
	`addFÏg
("disable-order");

105 
İtMgr_
.
	`»gO±
(
İt
);

106 
	}
}

107 
	gR•ÜtP©Cmd
::~
	$R•ÜtP©Cmd
(è{
	}
}

110 
boŞ
 
R•ÜtP©Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

111 
İtMgr_
.
·r£
(
¬gv
);

113 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

114 
	gİtMgr_
.
u§ge
();

115  
	gŒue
;

118 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
) {

119 
	gû¼
 << "**ERROR R•ÜtP©Cmd::exec():…©‹º‚“ded" << 
	g’dl
;

120  
	gçl£
;

123 
	gcout
 << "#…©‹º infÜm©iÚ" << 
	g’dl
;

124 
	gcout
 << "#‚umb” oà·‰”n: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	g·ts_
.
size
(è<< 
	g’dl
;

125 ià(!
	gİtMgr_
.
isFÏgS‘
("disable-order")) {

126 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
PrštPÜts
();

128 
	gcout
 << "#" << 
	g’dl
;

129 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
PrštP©‹ºs
();

131  
	gŒue
;

135 
	gAddFauÉCmd
::
	$AddFauÉCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

136 
	$Cmd
(
Çme
) {

137 
çnMgr_
 = 
çnMgr
;

138 
İtMgr_
.
	`£tName
(
Çme
);

139 
İtMgr_
.
	`£tShÜtDes
("add faults");

140 
İtMgr_
.
	`£tDes
("adds faultsƒither byƒxtract from circuit or from file");

141 
Arg
 *
¬g
 = 
Ãw
 
	`Arg
(Arg::
OPT
, "faultype. Can be SA0, SA1, STR, STF",

143 
İtMgr_
.
	`»gArg
(
¬g
);

144 
¬g
 = 
Ãw
 
	`Arg
(
Arg
::
OPT
, "pin†ocation. Hierachy separated by '/'",

146 
İtMgr_
.
	`»gArg
(
¬g
);

147 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

148 
İt
->
	`addFÏg
("h");

149 
İt
->
	`addFÏg
("help");

150 
İtMgr_
.
	`»gO±
(
İt
);

151 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, "custom fault file", "FILE");

152 
İt
->
	`addFÏg
("f");

153 
İt
->
	`addFÏg
("file");

154 
İtMgr_
.
	`»gO±
(
İt
);

155 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "add‡ll faults", "");

156 
İt
->
	`addFÏg
("a");

157 
İt
->
	`addFÏg
("all");

158 
İtMgr_
.
	`»gO±
(
İt
);

159 
	}
}

160 
	gAddFauÉCmd
::~
	$AddFauÉCmd
(è{
	}
}

163 
boŞ
 
AddFauÉCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

164 
İtMgr_
.
·r£
(
¬gv
);

166 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

167 
	gİtMgr_
.
u§ge
();

168  
	gŒue
;

171 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

172 
	gû¼
 << "**ERROR AddFaultCmd::exec(): circuit‚eeded";

173 
	gû¼
 << 
	g’dl
;

174  
	gçl£
;

177 ià(!
	gçnMgr_
->
	g©pg_mgr
)

178 
	gçnMgr_
->
	g©pg_mgr
 = 
Ãw
 
AgMgr
;

180 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
)

181 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
 = 
Ãw
 
FauÉLi¡ExŒaù
;

183 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
exŒaù
(
çnMgr_
->
©pg_mgr
->
cœ_
);

186 ià(
	gİtMgr_
.
isFÏgS‘
("a"))

187 
addAÎFauÉ
();

189 ià(
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
	gty³_
 =ğ
FauÉLi¡ExŒaù
::
SAF


190 || 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
ty³_
 =ğ
FauÉLi¡ExŒaù
::
TDF
) {

191 ià(
İtMgr_
.
g‘NP¬£dArg
() < 2) {

192 
û¼
 << "**ERROR AddFaultCmd::exec():‚eed faultype ";

193 
	gû¼
 << "ªd…š†oÿtiÚ" << 
	g’dl
;

194  
	gçl£
;

196 
¡ršg
 
	gty³
 = 
İtMgr_
.
g‘P¬£dArg
(0);

197 ià(
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
	gty³_
 =ğ
FauÉLi¡ExŒaù
::
SAF
 &&

198 (
ty³
 != "SA0" &&ype != "SA1")) {

199 
û¼
 << "**ERROR AddFaultCmd::exec(): stuck-at fault only ";

200 
	gû¼
 << "suµÜt SA0‡nd SA1" << 
	g’dl
;

201  
	gçl£
;

203 ià(
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
	gty³_
 =ğ
FauÉLi¡ExŒaù
::
TDF
 &&

204 (
ty³
 != "STR" &&ype != "STF")) {

205 
û¼
 << "**ERROR AddFaultCmd::exec():ransition delay ";

206 
	gû¼
 << "çuÉ oÆy suµÜt STR‡nd STF" << 
	g’dl
;

207  
	gçl£
;

209 
¡ršg
 
	gpšloc
 = 
İtMgr_
.
g‘P¬£dArg
(1);

210 
¡ršg
 
	gûÎ
 = 
pšloc
.
sub¡r
(0,…šloc.
fšd_fœ¡_of
('/'));

211 
¡ršg
 
	gpš
 = 
pšloc
.
sub¡r
(
ûÎ
.
size
());

212 ià(
	gpš
.
size
() > 0)

213 
	gpš
 = 
pš
.
sub¡r
(1);

214 ià(
	gpš
.
size
() == 0) {

215 ià(!
addPšFauÉ
(
ty³
, 
ûÎ
))

216  
çl£
;

219 ià(!
addC–lFauÉ
(
ty³
, 
ûÎ
, 
pš
))

220  
	gçl£
;

225  
	gŒue
;

228 
	gAddFauÉCmd
::
	$addAÎFauÉ
() {

229 
cout
 << "# Budšg fauÉ†i¡ ..." << 
’dl
;

230 
çnMgr_
->
tmusg
.
	`³riodS¹
();

232 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
	`»size
(çnMgr_->©pg_mgr->fLi¡ExŒaù_->
çuÉs_
.
	`size
());

233 
FauÉLi¡I‹r
 
™
 = 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
	`begš
();

234 
size_t
 
i
 = 0; i < 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
çuÉs_
.
	`size
(); ++i, ++
™
)

235 (*
™
èğ
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
çuÉs_
[
i
];

237 
TmSt
 
¡©
;

238 
çnMgr_
->
tmusg
.
	`g‘P”iodU§ge
(
¡©
);

239 
cout
 << "# Finished building fault†ist";

240 
cout
 << " " << ()
¡©
.
rTime
 / 1000000.0 << " s";

241 
cout
 << " " << ()
¡©
.
vmSize
 / 1024.0 << " MB" << 
’dl
;

242 
	}
}

244 
boŞ
 
	gAddFauÉCmd
::
	$addPšFauÉ
(cÚ¡ 
¡ršg
 &
ty³
, cÚ¡ sŒšg &
pš
) {

245 
PÜt
 *
p
 = 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘PÜt
(
pš
.
	`c_¡r
());

246 ià(!
p
) {

247 
û¼
 << "**ERROR AddFaultCmd::exec():…ort `";

248 
û¼
 << 
pš
 << "' dÛ nÙƒxi¡" << 
’dl
;

249  
çl£
;

251 
gid
 = 
çnMgr_
->
©pg_mgr
->
cœ_
->
pÜtToG©e_
[
p
->
id_
];

252 
off£t
 = (
ty³
 == "SA0" ||ype == "STR") ? 0 : 1;

253 
fid
 = 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
g©eToFauÉ_
[
gid
] + 
off£t
;

254 
FauÉ
 *
f
 = 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
çuÉs_
[
fid
];

255 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
	`push_back
(
f
);

256  
Œue
;

257 
	}
}

259 
boŞ
 
	gAddFauÉCmd
::
	$addC–lFauÉ
(cÚ¡ 
¡ršg
 &
ty³
, cÚ¡ sŒšg &
ûÎ
,

260 cÚ¡ 
¡ršg
 &
pš
) {

261 
C–l
 *
c
 = 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘C–l
(
ûÎ
.
	`c_¡r
());

262 ià(!
c
) {

263 
û¼
 << "**ERROR AddFaultCmd::exec(): cell `";

264 
û¼
 << 
ûÎ
 << "' dÛ nÙƒxi¡" << 
’dl
;

265  
çl£
;

267 
C–l
 *
libc
 = 
c
->
libc_
;

268 
PÜt
 *
p
 = 
libc
->
	`g‘PÜt
(
pš
.
	`c_¡r
());

269 ià(!
p
) {

270 
û¼
 << "**ERROR AddFaultCmd::exec():…ort `";

271 
û¼
 << 
ûÎ
 << "/" << 
pš
 << "' dÛ nÙƒxi¡" << 
’dl
;

272  
çl£
;

274 
PÜtS‘
 
p£t
 = 
libc
->
	`g‘N‘PÜts
(
p
->
šN‘_
->
id_
);

275 
PÜtS‘
::
™”©Ü
 
™
 = 
p£t
.
	`begš
();

276  ; 
™
 !ğ
p£t
.
	`’d
(); ++it) {

277 ià((*
™
)->
tİ_
 =ğ
libc
)

279 
C–l
 *
pmt
 = (*
™
)->
tİ_
;

280 
pmtid
 = 
pmt
->
id_
;

281 
gid
 = 
çnMgr_
->
©pg_mgr
->
cœ_
->
ûÎToG©e_
[
c
->
id_
] + 
pmtid
;

282 
pid
 = 0;

283 ià((*
™
)->
ty³_
 =ğ
PÜt
::
INPUT
) {

284 
nOuut
 = 0;

285 
i
 = 0; i < (*
™
)->
id_
; ++i)

286 ià(
pmt
->
	`g‘PÜt
(
i
)->
ty³_
 =ğ
PÜt
::
OUTPUT
)

287 
nOuut
++;

288 
pid
 = (*
™
)->
id_
 - 
nOuut
 + 1;

290 
off£t
 = (
ty³
 == "SA0" ||ype == "STR") ? 0 : 1;

291 
fid
 = 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
g©eToFauÉ_
[
gid
] + 2 * 
pid
 + 
off£t
;

292 
FauÉ
 *
f
 = 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
çuÉs_
[
fid
];

293 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
	`push_back
(
f
);

295  
Œue
;

296 
	}
}

299 
	gR•ÜtFauÉCmd
::
	$R•ÜtFauÉCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

300 
	$Cmd
(
Çme
) {

301 
çnMgr_
 = 
çnMgr
;

302 
İtMgr_
.
	`£tName
(
Çme
);

303 
İtMgr_
.
	`£tShÜtDes
("report fault");

304 
İtMgr_
.
	`£tDes
("report fault information");

305 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

306 
İt
->
	`addFÏg
("h");

307 
İt
->
	`addFÏg
("help");

308 
İtMgr_
.
	`»gO±
(
İt
);

309 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, "print only faults with state STATE",

311 
İt
->
	`addFÏg
("s");

312 
İt
->
	`addFÏg
("state");

313 
İtMgr_
.
	`»gO±
(
İt
);

314 
	}
}

315 
	gR•ÜtFauÉCmd
::~
	$R•ÜtFauÉCmd
(è{
	}
}

318 
boŞ
 
R•ÜtFauÉCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

319 
İtMgr_
.
·r£
(
¬gv
);

321 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

322 
	gİtMgr_
.
u§ge
();

323  
	gŒue
;

326 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
) {

327 
	gû¼
 << "**ERROR R•ÜtFauÉCmd::exec(): fauÉ†i¡‚“ded" << 
	g’dl
;

328  
	gçl£
;

331 
boŞ
 
	g¡©eS‘
 = 
çl£
;

332 
	gFauÉ
::
S‹
 
¡©e
 = 
FauÉ
::
UD
;

333 ià(
	gİtMgr_
.
isFÏgS‘
("s")) {

334 
	g¡©eS‘
 = 
Œue
;

335 
¡ršg
 
	g¡©eSŒ
 = 
İtMgr_
.
g‘FÏgV¬
("s");

336 ià(
	g¡©eSŒ
 =ğ"ud" || 
¡©eSŒ
 == "UD")

337 
¡©e
 = 
FauÉ
::
UD
;

338 ià(
	g¡©eSŒ
 =ğ"dt" || 
¡©eSŒ
 == "DT")

339 
¡©e
 = 
FauÉ
::
DT
;

340 ià(
	g¡©eSŒ
 =ğ"au" || 
¡©eSŒ
 == "AU")

341 
¡©e
 = 
FauÉ
::
AU
;

342 ià(
	g¡©eSŒ
 =ğ"ti" || 
¡©eSŒ
 == "TI")

343 
¡©e
 = 
FauÉ
::
TI
;

344 ià(
	g¡©eSŒ
 =ğ"»" || 
¡©eSŒ
 == "RE")

345 
¡©e
 = 
FauÉ
::
RE
;

346 ià(
	g¡©eSŒ
 =ğ"ab" || 
¡©eSŒ
 == "AB")

347 
¡©e
 = 
FauÉ
::
AB
;

348 ià(
	g¡©eSŒ
 =ğ"±" || 
¡©eSŒ
 == "PT")

349 
¡©e
 = 
FauÉ
::
PT
;

351 
	g¡©eS‘
 = 
Œue
;

352 
	gû¼
 << "**WARN ReportFaultCmd::exec(): fault state `";

353 
	gû¼
 << 
	g¡©eSŒ
 << "' i nÙ suµÜ‹d" << 
	g’dl
;

357 
	gcout
 << "# fauÉ infÜm©iÚ" << 
	g’dl
;

358 
	gcout
 << "# faultype: ";

359 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
	gty³_
) {

360 
	gFauÉLi¡ExŒaù
::
SAF
:

361 
cout
 << "¡uck-© fauÉ" << 
’dl
;

363 
	gFauÉLi¡ExŒaù
::
TDF
:

364 
cout
 << "Œªs™iÚ d–ay fauÉ" << 
’dl
;

366 
	gFauÉLi¡ExŒaù
::
BRF
:

367 
cout
 << "bridgšg fauÉ" << 
’dl
;

370 
cout
 << 
’dl
;

373 
	gcout
 << "#‚umb” oàçuÉs: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
	gcu¼’t_
.
size
();

374 
	gcout
 << 
	g’dl
;

375 
	gcout
 << "#y³ cod…š (ûÎ)" << 
	g’dl
;

376 
	gcout
 << "# ---- ---- ----------------------------------" << 
	g’dl
;

377 
FauÉLi¡I‹r
 
	g™
 = 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
begš
();

378  ; 
	g™
 !ğ
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
’d
(); ++it) {

379 ià(!
	g¡©eS‘
 || (*
	g™
)->
	g¡©e_
 !ğ
¡©e
)

381 
	gcout
 << "# ";

382 (*
	g™
)->
	gty³_
) {

383 
	gFauÉ
::
SA0
:

384 
cout
 << "SA0 ";

386 
	gFauÉ
::
SA1
:

387 
cout
 << "SA1 ";

389 
	gFauÉ
::
STR
:

390 
cout
 << "STR ";

392 
	gFauÉ
::
STF
:

393 
cout
 << "STF ";

395 
	gFauÉ
::
BR
:

396 
cout
 << "BR ";

399 (*
	g™
)->
	g¡©e_
) {

400 
	gFauÉ
::
UD
:

401 
cout
 << " UD ";

403 
	gFauÉ
::
DT
:

404 
cout
 << " DT ";

406 
	gFauÉ
::
PT
:

407 
cout
 << " PT ";

409 
	gFauÉ
::
AU
:

410 
cout
 << " AU ";

412 
	gFauÉ
::
TI
:

413 
cout
 << " TI ";

415 
	gFauÉ
::
RE
:

416 
cout
 << " RE ";

418 
	gFauÉ
::
AB
:

419 
cout
 << " AB ";

422 
	gcid
 = 
çnMgr_
->
©pg_mgr
->
cœ_
->
g©es_
[(*
™
)->
g©e_
].
cid_
;

423 
	gpid
 = (*
™
)->
lše_
;

424 
	gpmtid
 = 
çnMgr_
->
©pg_mgr
->
cœ_
->
g©es_
[(*
™
)->
g©e_
].
pmtid_
;

425 ià((*
	g™
)->
	gg©e_
 == -1) {

426 
cout
 << "CK";

428 ià((*
	g™
)->
	gg©e_
 == -2) {

429 
cout
 << "test_si";

431 ià((*
	g™
)->
	gg©e_
 == -3) {

432 
cout
 << "test_so";

434 ià((*
	g™
)->
	gg©e_
 == -4) {

435 
cout
 << "test_se";

437 ià(
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gg©es_
[(*
™
)->
g©e_
].
	gty³_
 =ğ
G©e
::
PI
) {

438 
cout
 << 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘PÜt
(
cid
)->
Çme_
 << " ";

439 
	gcout
 << "(primary input)";

441 ià(
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gg©es_
[(*
™
)->
g©e_
].
	gty³_
 =ğ
G©e
::
PO
) {

442 
cout
 << 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘PÜt
(
cid
)->
Çme_
 << " ";

443 
	gcout
 << "(primary output)";

446 
C–l
 *
	gc
 = 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘C–l
(
cid
);

448 
C–l
 *
	glibc
 = 
c
->
libc_
;

449 
C–l
 *
	gpmt
 = 
libc
->
g‘C–l
(
pmtid
);

450 
PÜt
 *
	gp
 = 
NULL
;

451 ià(
	gpid
 < 0) {

452 ià(
	gpid
 == -1)

453 
cout
 << 
c
->
Çme_
 << "/CK ";

454 ià(
	gpid
 == -2)

455 
cout
 << 
c
->
Çme_
 << "/SE ";

456 ià(
	gpid
 == -3)

457 
cout
 << 
c
->
Çme_
 << "/SI ";

459 
	gcout
 << 
	gc
->
	gÇme_
 << "/QN ";

461 ià(
	gpid
 == 0) {

462 ià(!
¡rcmp
(
libc
->
Çme_
,"SDFFXL"))

463 
cout
 << 
c
->
Çme_
 << "/" << "Q" << " ";

465 
size_t
 
	gi
 = 0; i < 
	gpmt
->
g‘NPÜt
(); ++i) {

466 ià(
	gpmt
->
g‘PÜt
(
i
)->
	gty³_
 !ğ
PÜt
::
OUTPUT
)

468 
N‘
 *
	gn
 = 
pmt
->
g‘PÜt
(
i
)->
exN‘_
;

469 ià(!
	gn
)

471 
PÜtS‘
 
	gp£t
 = 
libc
->
g‘N‘PÜts
(
n
->
id_
);

472 
	gPÜtS‘
::
™”©Ü
 
p™
 = 
p£t
.
begš
();

473  ; 
	gp™
 !ğ
p£t
.
’d
(); ++pit) {

474 ià((*
	gp™
)->
	gtİ_
 !ğ
libc
)

476 
	gp
 = (*
p™
);

479 ià(
	gp
)

485 
	gšCouÁ
 = 0;

486 
size_t
 
	gi
 = 0; i < 
	gpmt
->
g‘NPÜt
(); ++i) {

487 ià(
	gpmt
->
g‘PÜt
(
i
)->
	gty³_
 =ğ
PÜt
::
INPUT
)

488 
šCouÁ
++;

489 ià(
	gšCouÁ
 !ğ
pid
)

491 
N‘
 *
	gn
 = 
pmt
->
g‘PÜt
(
i
)->
exN‘_
;

492 ià(!
	gn
)

494 
PÜtS‘
 
	gp£t
 = 
libc
->
g‘N‘PÜts
(
n
->
id_
);

495 
	gPÜtS‘
::
™”©Ü
 
p™
 = 
p£t
.
begš
();

496  ; 
	gp™
 !ğ
p£t
.
’d
(); ++pit) {

497 ià((*
	gp™
)->
	gtİ_
 !ğ
libc
)

499 
	gp
 = (*
p™
);

502 ià(
	gp
)

506 ià(
	gp
)

507 
	gcout
 << 
	gc
->
	gÇme_
 << "/" << 
	gp
->name_ << " ";

508 
	gcout
 << "(" << 
	glibc
->
	gÇme_
 << ")";

510 
	gcout
 << 
	g’dl
;

512 
	gcout
 << 
	g’dl
;

514  
	gŒue
;

518 
	gR•ÜtCœcu™Cmd
::
	$R•ÜtCœcu™Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

519 
	$Cmd
(
Çme
) {

520 
çnMgr_
 = 
çnMgr
;

521 
İtMgr_
.
	`£tName
(
Çme
);

522 
İtMgr_
.
	`£tShÜtDes
("report circuit");

523 
İtMgr_
.
	`£tDes
("report circuit information");

524 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

525 
İt
->
	`addFÏg
("h");

526 
İt
->
	`addFÏg
("help");

527 
İtMgr_
.
	`»gO±
(
İt
);

528 
	}
}

529 
	gR•ÜtCœcu™Cmd
::~
	$R•ÜtCœcu™Cmd
(è{
	}
}

532 
boŞ
 
R•ÜtCœcu™Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

533 
İtMgr_
.
·r£
(
¬gv
);

535 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

536 
	gİtMgr_
.
u§ge
();

537  
	gŒue
;

540 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

541 
	gû¼
 << "**ERROR R•ÜtCœcu™Cmd::exec(): cœcu™‚“ded" << 
	g’dl
;

542  
	gçl£
;

545 
C–l
 *
	gtİ
 = 
çnMgr_
->
©pg_mgr
->
cœ_
->
Æ_
->
g‘Tİ
();

546 
	gcout
 << "# cœcu™ infÜm©iÚ" << 
	g’dl
;

547 
	gcout
 << "#‚‘li¡: " << 
	gtİ
->
	gÇme_
 << 
	g’dl
;

548 
	gcout
 << "#‚umb” oàPIs: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gÅi_
 << 
	g’dl
;

549 
	gcout
 << "#‚umb” oàPPIs: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gÅpi_
 << 
	g’dl
;

550 
	gcout
 << "#‚umb” oàPOs: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gÅo_
 << 
	g’dl
;

551 
	gcout
 << "#‚umb” oàcombs: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gncomb_
 << 
	g’dl
;

552 
	gcout
 << "#‚umb” oàg©es: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gng©e_
 << 
	g’dl
;

553 
	gcout
 << "#‚umb” oàÃts: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gÂ‘_
 << 
	g’dl
;

555  
	gŒue
;

559 
	gR•ÜtG©eCmd
::
	$R•ÜtG©eCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

560 
	$Cmd
(
Çme
) {

561 
çnMgr_
 = 
çnMgr
;

562 
İtMgr_
.
	`£tName
(
Çme
);

563 
İtMgr_
.
	`£tShÜtDes
("report gate information");

564 
İtMgr_
.
	`£tDes
("reports GATE information inhe circuit");

565 
Arg
 *
¬g
 = 
Ãw
 
	`Arg
(Arg::
OPT_INF
,

568 
İtMgr_
.
	`»gArg
(
¬g
);

569 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

570 
İt
->
	`addFÏg
("h");

571 
İt
->
	`addFÏg
("help");

572 
İtMgr_
.
	`»gO±
(
İt
);

573 
	}
}

574 
	gR•ÜtG©eCmd
::~
	$R•ÜtG©eCmd
(è{
	}
}

577 
boŞ
 
R•ÜtG©eCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

578 
İtMgr_
.
·r£
(
¬gv
);

580 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

581 
	gİtMgr_
.
u§ge
();

582  
	gŒue
;

585 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

586 
	gû¼
 << "**ERROR R•ÜtG©eCmd::exec(): cœcu™‚“ded" << 
	g’dl
;

587  
	gçl£
;

590 ià(
	gİtMgr_
.
g‘NP¬£dArg
() == 0) {

591 
i
 = 0; 
	gi
 < 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
ng©e_
 * fªMgr_->©pg_mgr->cœ_->
	gnäame_
; ++i)

592 
»pÜtG©e
(
i
);

595 
size_t
 
	gi
 = 0; i < 
	gİtMgr_
.
g‘NP¬£dArg
(); ++i) {

596 
¡ršg
 
	gÇme
 = 
İtMgr_
.
g‘P¬£dArg
(
i
);

597 
C–l
 *
	gc
 = 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘C–l
(
Çme
.
c_¡r
());

598 ià(
	gc
) {

599 ià(
	gc
->
	glibc_
) {

600 
size_t
 
	gj
 = 0; j < 
	gc
->
	glibc_
->
g‘NC–l
(); ++j)

601 
»pÜtG©e
(
çnMgr_
->
©pg_mgr
->
cœ_
->
ûÎToG©e_
[
c
->
id_
] + 
j
);

603 
»pÜtG©e
(
çnMgr_
->
©pg_mgr
->
cœ_
->
ûÎToG©e_
[
c
->
id_
]);

606 
PÜt
 *
	gp
 = 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘PÜt
(
Çme
.
c_¡r
());

607 ià(
	gp
)

608 
»pÜtG©e
(
çnMgr_
->
©pg_mgr
->
cœ_
->
pÜtToG©e_
[
p
->
id_
]);

609 ià(!
	gc
 && !
	gp
) {

610 
	gû¼
 << "**ERROR ReportGateCmd::exec(): cell or…ort `";

611 
	gû¼
 << 
	gÇme
 << "' dÛ nÙƒxi¡" << 
	g’dl
;

616  
	gŒue
;

619 
	gR•ÜtG©eCmd
::
	$»pÜtG©e
(cÚ¡ &
i
) const {

620 
G©e
 *
g
 = &
çnMgr_
->
©pg_mgr
->
cœ_
->
g©es_
[
i
];

621 
cout
 << "# ";

622 ià(
g
->
ty³_
 =ğ
G©e
::
PI
 || g->ty³_ =ğG©e::
PO
)

623 
cout
 << 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘PÜt
((
size_t
)
g
->
cid_
)->
Çme_
;

625 
cout
 << 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘C–l
((
size_t
)
g
->
cid_
)->
Çme_
;

626 
cout
 << " id(" << 
i
 << ") ";

627 
cout
 << "lvl(" << 
g
->
lvl_
 << ") ";

628 
cout
 << "ty³(" << 
g
->
	`g‘Ty³Name
() << ") ";

629 
cout
 << "äame(" << 
g
->
äame_
 << ")";

630 
cout
 << 
’dl
;

631 
cout
 << "# fi[" << 
g
->
nfi_
 << "]";

632 
j
 = 0; j < 
g
->
nfi_
; ++j)

633 
cout
 << " " << 
g
->
fis_
[
j
];

634 
cout
 << 
’dl
;

635 
cout
 << "# fo[" << 
g
->
nfo_
 << "]";

636 
j
 = 0; j < 
g
->
nfo_
; ++j)

637 
cout
 << " " << 
g
->
fos_
[
j
];

638 
cout
 << 
’dl
 <<ƒndl;

639 
	}
}

642 
	gR•ÜtV®ueCmd
::
	$R•ÜtV®ueCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

643 
	$Cmd
(
Çme
) {

644 
çnMgr_
 = 
çnMgr
;

645 
İtMgr_
.
	`£tName
(
Çme
);

646 
İtMgr_
.
	`£tShÜtDes
("report gate values");

647 
İtMgr_
.
	`£tDes
("reports GATE values inhe circuit");

648 
Arg
 *
¬g
 = 
Ãw
 
	`Arg
(Arg::
OPT_INF
,

651 
İtMgr_
.
	`»gArg
(
¬g
);

652 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

653 
İt
->
	`addFÏg
("h");

654 
İt
->
	`addFÏg
("help");

655 
İtMgr_
.
	`»gO±
(
İt
);

656 
	}
}

657 
	gR•ÜtV®ueCmd
::~
	$R•ÜtV®ueCmd
(è{
	}
}

660 
boŞ
 
R•ÜtV®ueCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

661 
İtMgr_
.
·r£
(
¬gv
);

663 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

664 
	gİtMgr_
.
u§ge
();

665  
	gŒue
;

668 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

669 
	gû¼
 << "**ERROR R•ÜtV®ueCmd::exec(): cœcu™‚“ded" << 
	g’dl
;

670  
	gçl£
;

673 ià(
	gİtMgr_
.
g‘NP¬£dArg
() == 0) {

674 
i
 = 0; 
	gi
 < 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gtg©e_
; ++i)

675 
»pÜtV®ue
(
i
);

678 
size_t
 
	gi
 = 0; i < 
	gİtMgr_
.
g‘NP¬£dArg
(); ++i) {

679 
¡ršg
 
	gÇme
 = 
İtMgr_
.
g‘P¬£dArg
(
i
);

680 
C–l
 *
	gc
 = 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘C–l
(
Çme
.
c_¡r
());

681 ià(
	gc
)

682 
size_t
 
	gj
 = 0; j < 
	gc
->
	glibc_
->
g‘NC–l
(); ++j)

683 
»pÜtV®ue
(
çnMgr_
->
©pg_mgr
->
cœ_
->
ûÎToG©e_
[
c
->
id_
] + 
j
);

684 
PÜt
 *
	gp
 = 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘PÜt
(
Çme
.
c_¡r
());

685 ià(
	gp
)

686 
»pÜtV®ue
(
çnMgr_
->
©pg_mgr
->
cœ_
->
pÜtToG©e_
[
p
->
id_
]);

687 ià(!
	gc
 && !
	gp
) {

688 
	gû¼
 << "**ERROR ReportValueCmd::exec(): cell or…ort `";

689 
	gû¼
 << 
	gÇme
 << "' dÛ nÙƒxi¡" << 
	g’dl
;

694  
	gŒue
;

697 
	gR•ÜtV®ueCmd
::
	$»pÜtV®ue
(cÚ¡ &
i
) const {

698 
G©e
 *
g
 = &
çnMgr_
->
©pg_mgr
->
cœ_
->
g©es_
[
i
];

699 
cout
 << "# ";

700 ià(
g
->
ty³_
 =ğ
G©e
::
PI
 || g->ty³_ =ğG©e::
PO
)

701 
cout
 << 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘PÜt
((
size_t
)
g
->
cid_
)->
Çme_
;

703 
cout
 << 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘C–l
((
size_t
)
g
->
cid_
)->
Çme_
;

704 
cout
 << " id(" << 
i
 << ") ";

705 
cout
 << "lvl(" << 
g
->
lvl_
 << ") ";

706 
cout
 << "ty³(" << 
g
->
ty³_
 << ") ";

707 
cout
 << "äame(" << 
g
->
äame_
 << ")";

708 
cout
 << 
’dl
;

709 
cout
 << "# good: ";

710 
	`´štV®ue
(
g
->
gl_
, g->
gh_
);

711 
cout
 << 
’dl
;

712 
cout
 << "# faulty: ";

713 
	`´štV®ue
(
g
->
æ_
, g->
fh_
);

714 
cout
 << 
’dl
 <<ƒndl;

715 
	}
}

718 
	gR•ÜtStsCmd
::
	$R•ÜtStsCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

719 
	$Cmd
(
Çme
) {

720 
çnMgr_
 = 
çnMgr
;

721 
İtMgr_
.
	`£tName
(
Çme
);

722 
İtMgr_
.
	`£tShÜtDes
("report statistics");

723 
İtMgr_
.
	`£tDes
("reports statistics on fault coverage");

724 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

725 
İt
->
	`addFÏg
("h");

726 
İt
->
	`addFÏg
("help");

727 
İtMgr_
.
	`»gO±
(
İt
);

728 
	}
}

729 
	gR•ÜtStsCmd
::~
	$R•ÜtStsCmd
(è{
	}
}

732 
boŞ
 
R•ÜtStsCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

733 
İtMgr_
.
·r£
(
¬gv
);

735 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

736 
	gİtMgr_
.
u§ge
();

737  
	gŒue
;

740 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
 || fªMgr_->©pg_mgr->fLi¡ExŒaù_->
	gcu¼’t_
.
size
() == 0) {

741 
û¼
 << "**WARN R•ÜtStsCmd::exec():‚Ø¡©i¡ics" << 
’dl
;

742  
	gçl£
;

746 
¡ršg
 
	gáy³
 = "";

747 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
	gty³_
) {

748 
	gFauÉLi¡ExŒaù
::
SAF
:

749 
áy³
 = "SAF";

751 
	gFauÉLi¡ExŒaù
::
TDF
:

752 
áy³
 = "TDF";

754 
	gFauÉLi¡ExŒaù
::
BRF
:

755 
áy³
 = "BRF";

760 
¡ršg
 
	g±y³
 = "";

761 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gty³_
) {

762 
	gP©‹ºProûssÜ
::
BASIC_SCAN
:

763 
±y³
 = "BASIC";

765 
	gP©‹ºProûssÜ
::
LAUNCH_CAPTURE
:

766 
±y³
 = "LOC";

768 
	gP©‹ºProûssÜ
::
LAUNCH_SHIFT
:

769 
±y³
 = "LOS";

777 
size_t
 
	gÅ©
 = 0;

778 
size_t
 
	gÅ©_h¬d
 = 0;

779 
size_t
 
	gnb™
 = 0;

780 
size_t
 
	gnb™_max
 = 0;

781 
size_t
 
	gÁb™
 = 0;

783 ià(
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
) {

784 
	gÅ©
 = 
çnMgr_
->
©pg_mgr
->
pcŞl_
->
·ts_
.
size
();

785 
	gÅ©_h¬d
 = 
çnMgr_
->
©pg_mgr
->
pcŞl_
->
Å©_h¬d_
;

786 
	gnb™
 = 
çnMgr_
->
©pg_mgr
->
pcŞl_
->
nb™_¥ec_
;

787 
	gnb™_max
 = 
çnMgr_
->
©pg_mgr
->
pcŞl_
->
nb™_¥ec_max
;

788 
	gÁb™
ğ
çnMgr_
->
©pg_mgr
->
pcŞl_
->
Åi_


789 + 
çnMgr_
->
©pg_mgr
->
pcŞl_
->
Åpi_


790 + 
çnMgr_
->
©pg_mgr
->
pcŞl_
->
nsi_
;

793 
size_t
 
	gfu
 = 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
size
();

794 
size_t
 
	gud
 = 0;

795 
size_t
 
	gdt
 = 0;

796 
size_t
 
	g±
 = 0;

797 
size_t
 
	gau
 = 0;

798 
size_t
 
	gti
 = 0;

799 
size_t
 
	g»
 = 0;

800 
size_t
 
	gab
 = 0;

802 
FauÉLi¡I‹r
 
	g™
 = 
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
begš
();

803  ; 
	g™
 !ğ
çnMgr_
->
©pg_mgr
->
fLi¡ExŒaù_
->
cu¼’t_
.
’d
(); ++it) {

804 (*
	g™
)->
	g¡©e_
) {

805 
	gFauÉ
::
UD
:

807 
ud
++;

809 
	gFauÉ
::
DT
:

810 
dt
++;

812 
	gFauÉ
::
PT
:

813 
±
++;

815 
	gFauÉ
::
AU
:

817 
au
++;

819 
	gFauÉ
::
TI
:

820 
ti
++;

822 
	gFauÉ
::
RE
:

823 
»
++;

825 
	gFauÉ
::
AB
:

826 
ab
++;

831 
	gfc
 = ()(
dt
 + 
±
è/ ()
fu
 * 100;

832 
	gtc
 = ()(
dt
 + 
±
è/ ()(
ud
 + dˆ+…ˆ+ 
ab
) * 100;

833 
	g«
 = ()(
dt
 + 
au
 + 
ti
 + 
»
è/ ()
fu
 * 100;

835 
	g¤
 = ()
nb™
 / ()
Å©_h¬d
 / ()
Áb™
 * 100;

836 
	g¤_max
 = ()
nb™_max
 / ()
Áb™
 * 100;

838 
	gcout
 << 
	gright
;

839 
	gcout
 << 
£»cisiÚ
(4);

840 
	gcout
 << "# Sti¡ic R•Üt" << 
	g’dl
;

841 
	gcout
 << "# Cœcu™‚am " << 
£tw
(19);

842 
	gcout
 << 
	gçnMgr_
->
	gÆ
->
g‘Tİ
()->
	gÇme_
 << 
	g’dl
;

843 
	gcout
 << "# FauÉ mod– " << 
£tw
(19è<< 
	gáy³
 << 
	g’dl
;

844 
	gcout
 << "# P©‹ºy³ " << 
£tw
(19è<< 
	g±y³
 << 
	g’dl
;

845 
	gcout
 << "# -------------------------------------------------" << 
	g’dl
;

846 
	gcout
 << "# FauÉ cÏs£  #çuÉs" << 
	g’dl
;

847 
	gcout
 << "# ---------------------------- -------------------" << 
	g’dl
;

848 
	gcout
 << "# FU (fuÎè " << 
£tw
(19è<< 
	gfu
 << 
	g’dl
;

849 
	gcout
 << "# -------------------------- -------------------" << 
	g’dl
;

850 
	gcout
 << "# UD (und‘eùedè " << 
£tw
(19è<< 
	gud
 << 
	g’dl
;

851 
	gcout
 << "# PT (possiblye¡abËè " << 
£tw
(19è<< 
	g±
 << 
	g’dl
;

852 
	gcout
 << "# AU (©pg uÁe¡abËè " << 
£tw
(19è<< 
	gau
 << 
	g’dl
;

853 
	gcout
 << "# RE (»dundªtè " << 
£tw
(19è<< 
	g»
 << 
	g’dl
;

854 
	gcout
 << "# AB (©pg‡bÜtè " << 
£tw
(19è<< 
	gab
 << 
	g’dl
;

855 
	gcout
 << "# TI (t›dè " << 
£tw
(19è<< 
	gti
 << 
	g’dl
;

856 
	gcout
 << "# -------------------------- -------------------" << 
	g’dl
;

857 
	gcout
 << "# DT (d‘eùedè " << 
£tw
(19è<< 
	gdt
 << 
	g’dl
;

858 
	gcout
 << "# -------------------------------------------------" << 
	g’dl
;

859 
	gcout
 << "# Cov”ag…”ûÁage" << 
	g’dl
;

860 
	gcout
 << "# -------------------------- -------------------" << 
	g’dl
;

861 
	gcout
 << "#est coverage ";

862 
	gcout
 << 
£tw
(5è<< 
	gtc
 << "%" << 
	g’dl
;

863 
	gcout
 << "# fault coverage ";

864 
	gcout
 << 
£tw
(5è<< 
	gfc
 << "%" << 
	g’dl
;

865 
	gcout
 << "#‡tpgƒffectiveness ";

866 
	gcout
 << 
£tw
(5è<< 
	g«
 << "%" << 
	g’dl
;

867 
	gcout
 << "# -------------------------------------------------" << 
	g’dl
;

868 
	gcout
 << "# #P©‹º  " << 
£tw
(19è<< 
	gÅ©
 << 
	g’dl
;

869 
	gcout
 << "# Ave.S³c-¿‹ " << 
£tw
(19è<< 
	g¤
 << "%" << 
	g’dl
;

870 
	gcout
 << "# Max.S³c-¿‹ " << 
£tw
(19è<< 
	g¤_max
 << "%" << 
	g’dl
;

871 
	gcout
 << "# -------------------------------------------------" << 
	g’dl
;

872 
	gcout
 << "# ATPG„uÁim " << 
£tw
(17è<< 
	g¹ime
;

873 
	gcout
 << " s" << 
	g’dl
;

874 
	gcout
 << "# -------------------------------------------------" << 
	g’dl
;

876  
	gŒue
;

880 
	gAddPšCÚsCmd
::
	$AddPšCÚsCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
,

881 
FªMgr
 *
çnMgr
è: 
	$Cmd
(
Çme
) {

882 
çnMgr_
 = 
çnMgr
;

883 
İtMgr_
.
	`£tName
(
Çme
);

884 
İtMgr_
.
	`£tShÜtDes
("add…in constraint");

885 
İtMgr_
.
	`£tDes
("constraint PI(s)o 0 or 1");

886 
Arg
 *
¬g
 = 
Ãw
 
	`Arg
(Arg::
REQ_INF
, "PIso be constrainted", "PI");

887 
İtMgr_
.
	`»gArg
(
¬g
);

888 
¬g
 = 
Ãw
 
	`Arg
(
Arg
::
REQ
, "constraint value, 0 or 1", "<0|1>");

889 
İtMgr_
.
	`»gArg
(
¬g
);

890 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

891 
İt
->
	`addFÏg
("h");

892 
İt
->
	`addFÏg
("help");

893 
İtMgr_
.
	`»gO±
(
İt
);

894 
	}
}

895 
	gAddPšCÚsCmd
::~
	$AddPšCÚsCmd
(è{
	}
}

898 
boŞ
 
AddPšCÚsCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

899 
İtMgr_
.
·r£
(
¬gv
);

901 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

902 
	gİtMgr_
.
u§ge
();

903  
	gŒue
;

906 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

907 
	gû¼
 << "**ERROR AddPinConsCmd::exec(): circuit‚eeded";

908 
	gû¼
 << 
	g’dl
;

909  
	gçl£
;

912 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 2) {

913 
	gû¼
 << "**ERROR AddPinConsCmd::exec():‚eed‡t†east one PI ";

914 
	gû¼
 << "ªdhcÚ¡¿šˆv®ue" << 
	g’dl
;

915  
	gçl£
;

918 
size_t
 
	gÅi
 = 
İtMgr_
.
g‘NP¬£dArg
() - 1;

919 
	gcÚs
 = 
©oi
(
İtMgr_
.
g‘P¬£dArg
(
Åi
).
c_¡r
());

920 
size_t
 
	gi
 = 0; i < 
	gÅi
; ++i) {

921 
¡ršg
 
	gpšame
 = 
İtMgr_
.
g‘P¬£dArg
(
i
);

922 
PÜt
 *
	gp
 = 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘PÜt
(
pšame
.
c_¡r
());

923 ià(!
	gp
) {

924 
	gû¼
 << "**ERROR AddPšCÚsCmd::exec(): PÜˆ`" << 
	gpšame
;

925 
	gû¼
 << "'‚Ù found" << 
	g’dl
;

928 
	ggid
 = 
çnMgr_
->
©pg_mgr
->
cœ_
->
pÜtToG©e_
[
p
->
id_
];

929 ià(
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gg©es_
[
gid
].
	gty³_
 !ğ
G©e
::
PI
) {

930 
û¼
 << "**ERROR AddPšCÚsCmd::exec(): PÜˆ`" << 
pšame
;

931 
	gû¼
 << "' i nÙ PI" << 
	g’dl
;

934 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gg©es_
[
gid
].
	ghasCÚs_
 = 
Œue
;

935 ià(
	gcÚs
)

936 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gg©es_
[
gid
].
	gcÚs_
 = 
PARA_H
;

938 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gg©es_
[
gid
].
	gcÚs_
 = 
PARA_L
;

941  
	gŒue
;

945 
	gRunLogicSimCmd
::
	$RunLogicSimCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

946 
	$Cmd
(
Çme
) {

947 
çnMgr_
 = 
çnMgr
;

948 
İtMgr_
.
	`£tName
(
Çme
);

949 
İtMgr_
.
	`£tShÜtDes
("run†ogic simulation");

950 
İtMgr_
.
	`£tDes
("run†ogic simulation onhe given…attern");

951 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

952 
İt
->
	`addFÏg
("h");

953 
İt
->
	`addFÏg
("help");

954 
İtMgr_
.
	`»gO±
(
İt
);

955 
	}
}

956 
	gRunLogicSimCmd
::~
	$RunLogicSimCmd
(è{
	}
}

959 
boŞ
 
RunLogicSimCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

960 
İtMgr_
.
·r£
(
¬gv
);

962 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

963 
	gİtMgr_
.
u§ge
();

964  
	gŒue
;

967 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

968 
	gû¼
 << "**ERROR RunLogicSimCmd::exec(): cœcu™‚“ded" << 
	g’dl
;

969  
	gçl£
;

972 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
) {

973 
	gû¼
 << "**ERROR RunLogicSimCmd::exec():…©‹º‚“ded" << 
	g’dl
;

974  
	gçl£
;

977 
	gçnMgr_
->
	gtmusg
.
³riodS¹
();

978 
	gcout
 << "# P”fÜmšg†ogiøsimuÏtiÚ ..." << 
	g’dl
;

980 
SimuÏtÜ
 
sim
(
çnMgr_
->
©pg_mgr
->
cœ_
);

981 
	gsim
.
µGoodSim
(
çnMgr_
->
©pg_mgr
->
pcŞl_
);

983 
TmSt
 
	g¡©
;

984 
	gçnMgr_
->
	gtmusg
.
g‘P”iodU§ge
(
¡©
);

985 
	gcout
 << "# Finished†ogic simulation";

986 
	gcout
 << " " << ()
	g¡©
.
	grTime
 / 1000000.0 << " s";

987 
	gcout
 << " " << ()
	g¡©
.
	gvmSize
 / 1024.0 << " MB" << 
	g’dl
;

989  
	gŒue
;

993 
	gRunFauÉSimCmd
::
	$RunFauÉSimCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

994 
	$Cmd
(
Çme
) {

995 
çnMgr_
 = 
çnMgr
;

996 
İtMgr_
.
	`£tName
(
Çme
);

997 
İtMgr_
.
	`£tShÜtDes
("run fault simulation");

998 
İtMgr_
.
	`£tDes
("run fault simulation onhe given…attern");

999 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

1000 
İt
->
	`addFÏg
("h");

1001 
İt
->
	`addFÏg
("help");

1002 
İtMgr_
.
	`»gO±
(
İt
);

1003 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, "simulation METHOD. Chooseƒither…p (parallel…attern) or…f (parallel fault)", "METHOD");

1004 
İt
->
	`addFÏg
("m");

1005 
İt
->
	`addFÏg
("method");

1006 
İtMgr_
.
	`»gO±
(
İt
);

1007 
	}
}

1008 
	gRunFauÉSimCmd
::~
	$RunFauÉSimCmd
(è{
	}
}

1011 
boŞ
 
RunFauÉSimCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

1012 
İtMgr_
.
·r£
(
¬gv
);

1014 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

1015 
	gİtMgr_
.
u§ge
();

1016  
	gŒue
;

1019 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

1020 
	gû¼
 << "**ERROR RunFauÉSimCmd::exec(): cœcu™‚“ded" << 
	g’dl
;

1021  
	gçl£
;

1024 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
) {

1025 
	gû¼
 << "**ERROR RunFauÉSimCmd::exec():…©‹º‚“ded" << 
	g’dl
;

1026  
	gçl£
;

1029 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
 || fªMgr_->©pg_mgr->fLi¡ExŒaù_->
	gçuÉs_
.
size
() == 0) {

1030 
û¼
 << "**ERROR RunFauÉSimCmd::exec(): fauÉ†i¡‚“ded" << 
’dl
;

1031  
	gçl£
;

1034 ià(!
	gçnMgr_
->
	g©pg_mgr
)

1035 
	gçnMgr_
->
	g©pg_mgr
 = 
Ãw
 
AgMgr
;

1037 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gsim_
)

1038 
	gçnMgr_
->
	g©pg_mgr
->
	gsim_
 = 
Ãw
 
SimuÏtÜ
(
çnMgr_
->
©pg_mgr
->
cœ_
);

1040 
	gcout
 << "# P”fÜmšg fauÉ simuÏtiÚ ..." << 
	g’dl
;

1041 
	gçnMgr_
->
	gtmusg
.
³riodS¹
();

1043 ià(
	gİtMgr_
.
isFÏgS‘
("m"è&& o±Mgr_.
g‘FÏgV¬
("m") == "pf")

1044 
çnMgr_
->
©pg_mgr
->
sim_
->
pfFauÉSim
(çnMgr_->©pg_mgr->
pcŞl_
, fªMgr_->©pg_mgr->
fLi¡ExŒaù_
);

1046 
	gçnMgr_
->
	g©pg_mgr
->
	gsim_
->
µFauÉSim
(
çnMgr_
->
©pg_mgr
->
pcŞl_
, fªMgr_->©pg_mgr->
fLi¡ExŒaù_
);

1048 
TmSt
 
	g¡©
;

1049 
	gçnMgr_
->
	gtmusg
.
g‘P”iodU§ge
(
¡©
);

1050 
	gcout
 << "# Finished fault simulation";

1051 
	gcout
 << " " << ()
	g¡©
.
	grTime
 / 1000000.0 << " s";

1052 
	gcout
 << " " << ()
	g¡©
.
	gvmSize
 / 1024.0 << " MB" << 
	g’dl
;

1053 
	g¹ime
 = ()
¡©
.
rTime
 / 1000000.0;

1055  
	gŒue
;

1059 
	gRunAgCmd
::
	$RunAgCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

1060 
	$Cmd
(
Çme
) {

1061 
çnMgr_
 = 
çnMgr
;

1062 
İtMgr_
.
	`£tName
(
Çme
);

1063 
İtMgr_
.
	`£tShÜtDes
("run‡utomaticest…attern generation");

1064 
İtMgr_
.
	`£tDes
("run‡utomaticest…attern generation");

1065 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

1066 
İt
->
	`addFÏg
("h");

1067 
İt
->
	`addFÏg
("help");

1068 
İtMgr_
.
	`»gO±
(
İt
);

1069 
	}
}

1070 
	gRunAgCmd
::~
	$RunAgCmd
(è{
	}
}

1073 
boŞ
 
RunAgCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

1074 
İtMgr_
.
·r£
(
¬gv
);

1076 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

1077 
	gİtMgr_
.
u§ge
();

1078  
	gŒue
;

1081 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

1082 
	gû¼
 << "**ERROR RunFauÉSimCmd::exec(): cœcu™‚“ded" << 
	g’dl
;

1083  
	gçl£
;

1086 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
) {

1087 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
 = 
Ãw
 
P©‹ºProûssÜ
;

1090 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
) {

1091 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
 = 
Ãw
 
FauÉLi¡ExŒaù
;

1092 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
exŒaù
(
çnMgr_
->
©pg_mgr
->
cœ_
);

1095 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gsim_
)

1096 
	gçnMgr_
->
	g©pg_mgr
->
	gsim_
 = 
Ãw
 
SimuÏtÜ
(
çnMgr_
->
©pg_mgr
->
cœ_
);

1098 
	gcout
 << "# Performing…attern generation ...\n";

1099 
	gçnMgr_
->
	gtmusg
.
³riodS¹
();

1101 
	gçnMgr_
->
	g©pg_mgr
->
g’”©iÚ
();

1103 
	gçnMgr_
->
	gtmusg
.
g‘P”iodU§ge
(
çnMgr_
->
©pgSt
);

1104 
	gcout
 << "# Finished…attern generation";

1105 
	gcout
 << " " << ()
	gçnMgr_
->
	g©pgSt
.
	grTime
 / 1000000.0 << " s";

1106 
	gcout
 << " " << ()
	gçnMgr_
->
	g©pgSt
.
	gvmSize
 / 1024.0 << " MB";

1107 
	gcout
 << 
	g’dl
;

1108 
	g¹ime
 = ()
çnMgr_
->
©pgSt
.
rTime
 / 1000000.0;

1110  
	gŒue
;

1114 
	gWr™eP©Cmd
::
	$Wr™eP©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

1115 
	$Cmd
(
Çme
) {

1116 
çnMgr_
 = 
çnMgr
;

1117 
İtMgr_
.
	`£tName
(
Çme
);

1118 
İtMgr_
.
	`£tShÜtDes
("write…atterns");

1119 
İtMgr_
.
	`£tDes
("writes…atternso FILE");

1120 
Arg
 *
¬g
 = 
Ãw
 
	`Arg
(Arg::
REQ
, "output…attern file", "FILE");

1121 
İtMgr_
.
	`»gArg
(
¬g
);

1122 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

1123 
İt
->
	`addFÏg
("h");

1124 
İt
->
	`addFÏg
("help");

1125 
İtMgr_
.
	`»gO±
(
İt
);

1126 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, "pattern format. Currently supports `pat'‡nd `ascii'", "FORMAT");

1127 
İt
->
	`addFÏg
("f");

1128 
İt
->
	`addFÏg
("format");

1129 
İtMgr_
.
	`»gO±
(
İt
);

1130 
	}
}

1131 
	gWr™eP©Cmd
::~
	$Wr™eP©Cmd
(è{
	}
}

1134 
boŞ
 
Wr™eP©Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

1135 
İtMgr_
.
·r£
(
¬gv
);

1137 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

1138 
	gİtMgr_
.
u§ge
();

1139  
	gŒue
;

1142 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

1143 
	gû¼
 << "**ERROR WritePatternCmd::exec(): output file‚eeded";

1144 
	gû¼
 << 
	g’dl
;

1145  
	gçl£
;

1148 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

1149 
	gû¼
 << "**ERROR Wr™eP©‹ºCmd::exec(): cœcu™‚“ded" << 
	g’dl
;

1150  
	gçl£
;

1153 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
) {

1154 
	gû¼
 << "**ERROR Wr™eP©‹ºCmd::exec():…©‹º‚“ded" << 
	g’dl
;

1155  
	gçl£
;

1158 
	gcout
 << "# Wr™šg…©‹ºØ`" << 
	gİtMgr_
.
g‘P¬£dArg
(0) << "' ...";

1159 
	gcout
 << 
	g’dl
;

1160 
P©‹ºWr™”
 
wr™”
(
çnMgr_
->
©pg_mgr
->
pcŞl_
, fªMgr_->©pg_mgr->
cœ_
);

1161 ià(
	gİtMgr_
.
g‘FÏgV¬
("f") == "lht") {

1162 ià(!
wr™”
.
wr™eLht
(
İtMgr_
.
g‘P¬£dArg
(0).
c_¡r
())) {

1163 
û¼
 << "**ERROR Wr™eP©‹ºCmd::exec(): wr™” faed" << 
’dl
;

1164  
	gçl£
;

1167 ià(
	gİtMgr_
.
g‘FÏgV¬
("f") == "ascii") {

1168 ià(!
wr™”
.
wr™eAscii
(
İtMgr_
.
g‘P¬£dArg
(0).
c_¡r
())) {

1169 
û¼
 << "**ERROR Wr™eP©‹ºCmd::exec(): wr™” faed" << 
’dl
;

1170  
	gçl£
;

1173 ià(
	gİtMgr_
.
g‘FÏgV¬
("f"è=ğ"·t" || 
İtMgr_
.getFlagVar("f") == "") {

1174 ià(!
wr™”
.
wr™eP©
(
İtMgr_
.
g‘P¬£dArg
(0).
c_¡r
())) {

1175 
û¼
 << "**ERROR Wr™eP©‹ºCmd::exec(): wr™” faed" << 
’dl
;

1176  
	gçl£
;

1180 
	gû¼
 << "**ERROR Wr™eP©‹ºCmd::exec(): undefšed…¬am‘” iÀ-f" << 
	g’dl
;

1182  
	gŒue
;

1187 
	gAddSÿnChašsCmd
::
	$AddSÿnChašsCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

1188 
	$Cmd
(
Çme
) {

1189 
çnMgr_
 = 
çnMgr
;

1190 
İtMgr_
.
	`£tName
(
Çme
);

1191 
İtMgr_
.
	`£tShÜtDes
("Add Scan Chains");

1192 
İtMgr_
.
	`£tDes
("Add Scan Chainso FFs");

1193 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

1194 
İt
->
	`addFÏg
("h");

1195 
İt
->
	`addFÏg
("help");

1196 
İtMgr_
.
	`»gO±
(
İt
);

1197 
	}
}

1198 
	gAddSÿnChašsCmd
::~
	$AddSÿnChašsCmd
(è{
	}
}

1201 
boŞ
 
AddSÿnChašsCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

1202 
İtMgr_
.
·r£
(
¬gv
);

1204 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

1205 
	gİtMgr_
.
u§ge
();

1206  
	gŒue
;

1209 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

1210 
	gû¼
 << "**ERROR AddSÿnChašsCmd::exec(): cœcu™‚“ded" << 
	g’dl
;

1211  
	gçl£
;

1214 
	gcout
 << "# Add SÿÀChaš " << 
	g’dl
;

1216  
	gŒue
;

1221 
	gWr™eProcCmd
::
	$Wr™eProcCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

1222 
	$Cmd
(
Çme
) {

1223 
çnMgr_
 = 
çnMgr
;

1224 
İtMgr_
.
	`£tName
(
Çme
);

1225 
İtMgr_
.
	`£tShÜtDes
("writeest…rocedure file");

1226 
İtMgr_
.
	`£tDes
("createest…rocedure file ");

1227 
Arg
 *
¬g
 = 
Ãw
 
	`Arg
(Arg::
REQ
, "outputest…rocedure file", "FILE");

1228 
İtMgr_
.
	`»gArg
(
¬g
);

1229 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

1230 
İt
->
	`addFÏg
("h");

1231 
İt
->
	`addFÏg
("help");

1232 
İtMgr_
.
	`»gO±
(
İt
);

1233 
	}
}

1234 
	gWr™eProcCmd
::~
	$Wr™eProcCmd
(è{
	}
}

1237 
boŞ
 
Wr™eProcCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

1238 
İtMgr_
.
·r£
(
¬gv
);

1240 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

1241 
	gİtMgr_
.
u§ge
();

1242  
	gŒue
;

1245 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

1246 
	gû¼
 << "**ERROR WritePatternCmd::exec(): output file‚eeded";

1247 
	gû¼
 << 
	g’dl
;

1248  
	gçl£
;

1251 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

1252 
	gû¼
 << "**ERROR Wr™eP©‹ºCmd::exec(): cœcu™‚“ded" << 
	g’dl
;

1253  
	gçl£
;

1257 
	gcout
 << "# Writingest…rocedure file ...";

1258 
	gcout
 << 
	g’dl
;

1259 
Proûdu»Wr™”
 
wr™”
(
çnMgr_
->
©pg_mgr
->
cœ_
);

1260 ià(!
	gwr™”
.
wr™eProc
(
İtMgr_
.
g‘P¬£dArg
(0).
c_¡r
())) {

1261 
	gû¼
 << "**ERROR Wr™eP©‹ºCmd::exec(): wr™” faed" << 
	g’dl
;

1262  
	gçl£
;

1265  
	gŒue
;

1270 
	gR•ÜtScßpCmd
::
	$R•ÜtScßpCmd
(cÚ¡ 
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

1271 
	$Cmd
(
Çme
) {

1272 
çnMgr_
 = 
çnMgr
;

1273 
İtMgr_
.
	`£tName
(
Çme
);

1274 
İtMgr_
.
	`£tShÜtDes
("reportestability‡nd/or observability");

1275 
İtMgr_
.
	`£tDes
("reportestability‡nd/or observability forƒach‚et");

1276 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

1277 
İt
->
	`addFÏg
("h");

1278 
İt
->
	`addFÏg
("help");

1279 
İtMgr_
.
	`»gO±
(
İt
);

1280 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "report option", "OPTION");

1281 
İt
->
	`addFÏg
("CC1");

1282 
İtMgr_
.
	`»gO±
(
İt
);

1283 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "report option", "OPTION");

1284 
İt
->
	`addFÏg
("CC0");

1285 
İtMgr_
.
	`»gO±
(
İt
);

1286 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "report option", "OPTION");

1287 
İt
->
	`addFÏg
("CO");

1288 
İtMgr_
.
	`»gO±
(
İt
);

1289 
	}
}

1292 
	gR•ÜtScßpCmd
::~
	$R•ÜtScßpCmd
(){
	}
}

1295 
boŞ
 
R•ÜtScßpCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

1296 
İtMgr_
.
·r£
(
¬gv
);

1298 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

1299 
	gİtMgr_
.
u§ge
();

1300  
	gŒue
;

1303 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
) {

1304 
	gû¼
 << "**ERROR AddFaultCmd::exec(): circuit‚eeded";

1305 
	gû¼
 << 
	g’dl
;

1306  
	gçl£
;

1310 
	gcout
 << "Cœcu™: " << 
	gçnMgr_
->
	gÆ
->
g‘Tİ
()->
	gÇme_
 << 
	g’dl
;

1311 
	gcout
 << "SCOAP ";

1313 
Ty³
 
	gty³
;

1314 if(
	gİtMgr_
.
isFÏgS‘
("CC1")) {

1315 
	gty³
 = 
CC1
;

1316 
	gcout
 << "CC1 \n";

1318 if(
	gİtMgr_
.
isFÏgS‘
("CC0")) {

1319 
	gty³
 = 
CC0
;

1320 
	gcout
 << "CC0 \n";

1322 if(
	gİtMgr_
.
isFÏgS‘
("CO")) {

1323 
	gty³
 = 
CO
;

1324 
	gcout
 << "CO \n";

1327 
	gcout
 << "Numb”_of_Nodes: " << 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gÅi_


1328 + 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
	gÅpi_
+çnMgr_->©pg_mgr->cœ_->
	gncomb_
 << 
	g’dl
;

1329 
	gcout
 << "Format: SCOAP‚ode\n";

1330 
»pÜtScßp
(
ty³
);

1331 
	gcout
 << "END\n\n";

1333  
	gŒue
;

1337 
boŞ
 
scßp_cmp
(
·œ
<, 
¡ršg
> 
l1
,…aœ<, sŒšg> 
l2
);

1338 
	gR•ÜtScßpCmd
::
	$»pÜtScßp
(
Ty³
 
ty³
) {

1339 
li¡
<
·œ
<, 
¡ršg
> > 
lšesToPršt
;

1340 
i
=0; i<
çnMgr_
->
©pg_mgr
->
cœ_
->
tg©e_


1341 - 
çnMgr_
->
©pg_mgr
->
cœ_
->
Åpi_


1342 - 
çnMgr_
->
©pg_mgr
->
cœ_
->
Åo_
; ++
i
) {

1343 
·œ
<, 
¡ršg
> 
lše
;

1344 
G©e
 *
g
 = &
çnMgr_
->
©pg_mgr
->
cœ_
->
g©es_
[
i
];

1345 ià(
g
->
ty³_
 =ğ
G©e
::
PO
 || g->ty³_ =ğG©e::
PPO
)

1348 
c
 = -1;

1349 if(
ty³
==
CC1
)

1350 
c
 = 
g
->
cc1_
;

1351 if(
ty³
==
CC0
)

1352 
c
 = 
g
->
cc0_
;

1353 if(
ty³
==
CO
)

1354 
c
 = 
g
->
co_o_
;

1357 
lše
.
fœ¡
 = 
c
;

1358 ià(
g
->
ty³_
 =ğ
G©e
::
PI
)

1360 
lše
.
£cÚd
 = 
	`¡ršg
(
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘PÜt
((
size_t
)
g
->
cid_
)->
Çme_
);

1362 
C–l
 *
c
 = 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘C–l
((
size_t
)
g
->
cid_
);

1364 
PÜt
 *
p
 = 0;

1365 
size_t
 
j
=0; j<
c
->
	`g‘NPÜt
(); ++j)

1366 if(
c
->
	`g‘PÜt
(
j
)->
ty³_
==
PÜt
::
OUTPUT
) {

1367 
p
 = 
c
->
	`g‘PÜt
(
j
);

1372 
lše
.
£cÚd
 = 
	`¡ršg
(
p
->
exN‘_
->
Çme_
);

1374 
lšesToPršt
.
	`push_back
(
lše
);

1376 
lšesToPršt
.
	`sÜt
(
scßp_cmp
);

1377 !
lšesToPršt
.
	`em±y
()) {

1378 
cout
 << 
lšesToPršt
.
	`äÚt
().
fœ¡
 << " ";

1379 
cout
 << 
lšesToPršt
.
	`äÚt
().
£cÚd
 << 
’dl
;

1380 
lšesToPršt
.
	`pİ_äÚt
();

1382 
	}
}

1384 
boŞ
 
scßp_cmp
(
·œ
<, 
¡ršg
> 
l1
,…aœ<, sŒšg> 
l2
) {

1385  
	gl2
.
	gfœ¡
 < 
	gl1
.first;

	@atpg/src/atpg_cmd.h

8 #iâdeà
_FAN_ATPG_CMD_H_


9 
	#_FAN_ATPG_CMD_H_


	)

11 
	~"commÚ/cmd.h
"

13 
	~"çn_mgr.h
"

15 
Çme¥aû
 
	gFªNs
 {

18 şas 
	cR—dP©Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

19 
public
:

20 
R—dP©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

21 ~
R—dP©Cmd
();

23 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

25 
	g´iv©e
:

26 
FªMgr
 *
çnMgr_
;

29 şas 
	cR•ÜtP©Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

30 
public
:

31 
R•ÜtP©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

32 ~
R•ÜtP©Cmd
();

34 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

36 
	g´iv©e
:

37 
FªMgr
 *
çnMgr_
;

40 şas 
	cAddFauÉCmd
 : 
public
 
CommÚNs
::
Cmd
 {

41 
public
:

42 
AddFauÉCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

43 ~
AddFauÉCmd
();

45 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

47 
	g´iv©e
:

48 
addAÎFauÉ
();

49 
boŞ
 
addPšFauÉ
(cÚ¡ 
¡d
::
¡ršg
 &
ty³
, cÚ¡ std::¡ršg &
pš
);

50 
boŞ
 
addC–lFauÉ
(cÚ¡ 
¡d
::
¡ršg
 &
ty³
, cÚ¡ std::¡ršg &
ûÎ
,

51 cÚ¡ 
¡d
::
¡ršg
 &
pš
);

52 
FªMgr
 *
	gçnMgr_
;

55 şas 
	cR•ÜtFauÉCmd
 : 
public
 
CommÚNs
::
Cmd
 {

56 
public
:

57 
R•ÜtFauÉCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

58 ~
R•ÜtFauÉCmd
();

60 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

62 
	g´iv©e
:

63 
FªMgr
 *
çnMgr_
;

66 şas 
	cR•ÜtCœcu™Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

67 
public
:

68 
R•ÜtCœcu™Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

69 ~
R•ÜtCœcu™Cmd
();

71 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

73 
	g´iv©e
:

74 
FªMgr
 *
çnMgr_
;

77 şas 
	cR•ÜtG©eCmd
 : 
public
 
CommÚNs
::
Cmd
 {

78 
public
:

79 
R•ÜtG©eCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

80 ~
R•ÜtG©eCmd
();

82 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

84 
	g´iv©e
:

85 
»pÜtG©e
(cÚ¡ &
i
) const;

86 
FªMgr
 *
	gçnMgr_
;

89 şas 
	cR•ÜtV®ueCmd
 : 
public
 
CommÚNs
::
Cmd
 {

90 
public
:

91 
R•ÜtV®ueCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

92 ~
R•ÜtV®ueCmd
();

94 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

96 
	g´iv©e
:

97 
»pÜtV®ue
(cÚ¡ &
i
) const;

98 
FªMgr
 *
	gçnMgr_
;

101 şas 
	cR•ÜtStsCmd
 : 
public
 
CommÚNs
::
Cmd
 {

102 
public
:

103 
R•ÜtStsCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

104 ~
R•ÜtStsCmd
();

106 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

108 
	g´iv©e
:

109 
FªMgr
 *
çnMgr_
;

112 şas 
	cAddPšCÚsCmd
 : 
public
 
CommÚNs
::
Cmd
 {

113 
public
:

114 
AddPšCÚsCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

115 ~
AddPšCÚsCmd
();

117 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

119 
	g´iv©e
:

120 
FªMgr
 *
çnMgr_
;

123 şas 
	cRunLogicSimCmd
 : 
public
 
CommÚNs
::
Cmd
 {

124 
public
:

125 
RunLogicSimCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

126 ~
RunLogicSimCmd
();

128 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

130 
	g´iv©e
:

131 
FªMgr
 *
çnMgr_
;

134 şas 
	cRunFauÉSimCmd
 : 
public
 
CommÚNs
::
Cmd
 {

135 
public
:

136 
RunFauÉSimCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

137 ~
RunFauÉSimCmd
();

139 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

141 
	g´iv©e
:

142 
FªMgr
 *
çnMgr_
;

145 şas 
	cRunAgCmd
 : 
public
 
CommÚNs
::
Cmd
 {

146 
public
:

147 
RunAgCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

148 ~
RunAgCmd
();

150 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

152 
	g´iv©e
:

153 
FªMgr
 *
çnMgr_
;

156 şas 
	cWr™eP©Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

157 
public
:

158 
Wr™eP©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

159 ~
Wr™eP©Cmd
();

161 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

163 
	g´iv©e
:

164 
FªMgr
 *
çnMgr_
;

168 şas 
	cAddSÿnChašsCmd
 : 
public
 
CommÚNs
::
Cmd
 {

169 
public
:

170 
AddSÿnChašsCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

171 ~
AddSÿnChašsCmd
();

173 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

175 
	g´iv©e
:

176 
FªMgr
 *
çnMgr_
;

179 şas 
	cWr™eProcCmd
 : 
public
 
CommÚNs
::
Cmd
 {

180 
public
:

181 
Wr™eProcCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

182 ~
Wr™eProcCmd
();

184 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

186 
	g´iv©e
:

187 
FªMgr
 *
çnMgr_
;

190 şas 
	cR•ÜtScßpCmd
 : 
public
 
CommÚNs
::
Cmd
 {

191 
public
:

192 
R•ÜtScßpCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

193 ~
R•ÜtScßpCmd
();

195 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

196 
	g´iv©e
:

197 
FªMgr
 *
çnMgr_
;

199 
	eTy³
 { 
	gNA
 = -1,

200 
	gCC1
, 
	gCC0
, 
	gCO
 };

202 
»pÜtScßp
(
Ty³
 
ty³
);

203 
»pÜtCC1
();

204 
»pÜtCC0
();

205 
»pÜtCO
();

	@atpg/src/fan_mgr.h

8 #iâdeà
_FAN_FAN_MGR_H_


9 
	#_FAN_FAN_MGR_H_


	)

11 
	~"commÚ/tm_u§ge.h
"

13 
	~"š‹rçû/Ãi¡.h
"

14 
	~"š‹rçû/‹chlib.h
"

16 
	~"cÜe/©pg_mgr.h
"

18 
Çme¥aû
 
	gFªNs
 {

20 şas 
	cFªMgr
 {

21 
	gpublic
:

22 
FªMgr
() {

23 
lib
 = 
NULL
;

24 
	gÆ
 = 
NULL
;

25 
	g©pg_mgr
 = 
NULL
;

26 
	g©pgSt
.
	grTime
 = 0;

28 ~
FªMgr
() {}

30 
	gIÁfNs
::
Techlib
 *
lib
;

31 
	gIÁfNs
::
N‘li¡
 *
Æ
;

32 
	gCÜeNs
::
AgMgr
 *
©pg_mgr
;

33 
	gCommÚNs
::
TmU§ge
 
tmusg
;

34 
	gCommÚNs
::
TmSt
 
©pgSt
;

	@atpg/src/main.cpp

8 
	~<c¡dlib
>

10 
	~"commÚ/sys_cmd.h
"

11 
	~"£tup_cmd.h
"

12 
	~"©pg_cmd.h
"

13 
	~"misc_cmd.h
"

15 
usšg
 
Çme¥aû
 
	g¡d
;

16 
usšg
 
Çme¥aû
 
	gCommÚNs
;

17 
usšg
 
Çme¥aû
 
	gIÁfNs
;

18 
usšg
 
Çme¥aû
 
	gCÜeNs
;

19 
usšg
 
Çme¥aû
 
	gFªNs
;

21 
´štW–come
();

22 
š™O±
(
O±Mgr
 &
mgr
);

23 
š™Cmd
(
CmdMgr
 &
cmdMgr
, 
FªMgr
 &
çnMgr
);

24 
´štGoodbye
(
TmU§ge
 &
tmusg
);

26 
	$maš
(
¬gc
, **
¬gv
) {

29 
TmU§ge
 
tmusg
;

30 
tmusg
.
	`tÙ®S¹
();

33 
O±Mgr
 
İtMgr
;

34 
	`š™O±
(
İtMgr
);

36 
İtMgr
.
	`·r£
(
¬gc
, 
¬gv
);

37 ià(
İtMgr
.
	`isFÏgS‘
("h")) {

38 
İtMgr
.
	`u§ge
();

39 
	`ex™
(0);

43 
FªMgr
 
çnMgr
;

44 
CmdMgr
 
cmdMgr
;

45 
	`š™Cmd
(
cmdMgr
, 
çnMgr
);

46 
CmdMgr
::
ResuÉ
 
»s
 = CmdMgr::
SUCCESS
;

49 
	`´štW–come
();

52 ià(
İtMgr
.
	`isFÏgS‘
("f")) {

53 
¡ršg
 
cmd
 = "sourû " + 
İtMgr
.
	`g‘FÏgV¬
("f");

54 
»s
 = 
cmdMgr
.
	`exec
(
cmd
);

58 ià(
İtMgr
.
	`isFÏgS‘
("l")) {

59 
¡ršg
 
cmd
 = "»ad_lib " + 
İtMgr
.
	`g‘FÏgV¬
("l");

60 
»s
 = 
cmdMgr
.
	`exec
(
cmd
);

64 
»s
 !ğ
CmdMgr
::
EXIT
) {

65 
»s
 = 
cmdMgr
.
	`»ad
();

66 ià(
»s
 =ğ
CmdMgr
::
NOT_EXIST
) {

67 
û¼
 << "**ERROR maš(): commªd `" << 
cmdMgr
.
	`g‘E¼ÜSŒ
();

68 
û¼
 << "'‚Ù found" << 
’dl
;

74 
	`´štGoodbye
(
tmusg
);

76 
	}
}

78 
	$´štW–come
() {

79 
cout
 << "# LaDS ATPG-SYSTEM v1.0a ";

80 
cout
 << " Feb 2016" << 
’dl
;

81 
cout
 << "# Copyright(c) LaDS";

82 
cout
 << "(IèGIEE NTU TAIWAN " << 
’dl
;

83 
cout
 << "#" << 
’dl
;

84 
cout
 << "# All Righ";

85 
cout
 << "t Re£rved." << 
’dl
;

86 
cout
 << "#" << 
’dl
;

90 
FILE
 *
sysout
;

91 
sysout
 = 
	`pİ’
("uname -s 2> /dev/null", "r");

92 
buf
[128];

93 
cout
 << "# Kernel: ";

94 ià(!
sysout
)

95 
cout
 << "UNKNOWN" << 
’dl
;

97 ià(
	`fg‘s
(
buf
, (buf), 
sysout
))

98 
cout
 << 
buf
;

100 
cout
 << "UNKNOWN" << 
’dl
;

101 
	`pşo£
(
sysout
);

105 
sysout
 = 
	`pİ’
("uname -i 2> /dev/null", "r");

106 
cout
 << "# Platform: ";

107 ià(!
sysout
)

108 
cout
 << "UNKNOWN" << 
’dl
;

110 ià(
	`fg‘s
(
buf
, (buf), 
sysout
))

111 
cout
 << 
buf
;

113 
cout
 << "UNKNOWN" << 
’dl
;

114 
	`pşo£
(
sysout
);

118 
FILE
 *
memšfo
 = 
	`fİ’
("/proc/meminfo", "r");

119 
cout
 << "# Memory: ";

120 ià(!
memšfo
)

121 
cout
 << "UNKNOWN" << 
’dl
;

123 
	`fg‘s
(
buf
, 128, 
memšfo
)) {

124 *
ch
;

125 ià((
ch
 = 
	`¡r¡r
(
buf
, "MemTotal:"))) {

126 
cout
 << ()
	`©Ş
(
ch
 + 9è/ 1024.0 << " MB" << 
’dl
;

130 
	`fşo£
(
memšfo
);

137 
cout
 << "#" << 
’dl
;

138 
	}
}

140 
	$´štGoodbye
(
TmU§ge
 &
tmusg
) {

141 
TmSt
 
¡©
;

142 
tmusg
.
	`g‘TÙ®U§ge
(
¡©
);

143 
cout
 << "# Goodbye" << 
’dl
;

144 
cout
 << "# Runtime ";

145 
cout
 << "»® " << ()
¡©
.
rTime
 / 1000000.0 << " s ";

146 
cout
 << "u£¸" << ()
¡©
.
uTime
 / 1000000.0 << " s ";

147 
cout
 << "sy " << ()
¡©
.
sTime
 / 1000000.0 << " s" << 
’dl
;

148 
cout
 << "# Memory ";

149 
cout
 << "³ak " << ()
¡©
.
vmP—k
 / 1024.0 << " MB" << 
’dl
;

150 
	}
}

152 
	$š™O±
(
O±Mgr
 &
mgr
) {

154 
mgr
.
	`£tName
("fan");

155 
mgr
.
	`£tShÜtDes
("FAN based ATPG");

156 
mgr
.
	`£tDes
("FAN based ATPG");

159 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "printhis usage", "");

160 
İt
->
	`addFÏg
("h");

161 
İt
->
	`addFÏg
("help");

162 
mgr
.
	`»gO±
(
İt
);

164 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, "execute command file‡t startup", "file");

165 
İt
->
	`addFÏg
("f");

166 
mgr
.
	`»gO±
(
İt
);

168 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, "readechnology†ibrary", "techlib");

169 
İt
->
	`addFÏg
("l");

170 
İt
->
	`addFÏg
("lib");

171 
mgr
.
	`»gO±
(
İt
);

172 
	}
}

174 
	$š™Cmd
(
CmdMgr
 &
cmdMgr
, 
FªMgr
 &
çnMgr
) {

176 
Cmd
 *
li¡Cmd
 = 
Ãw
 
	`SysLi¡Cmd
("ls");

177 
Cmd
 *
cdCmd
 = 
Ãw
 
	`SysCdCmd
("cd");

178 
Cmd
 *
ÿtCmd
 = 
Ãw
 
	`SysC©Cmd
("cat");

179 
Cmd
 *
pwdCmd
 = 
Ãw
 
	`SysPwdCmd
("pwd");

180 
Cmd
 *
£tCmd
 = 
Ãw
 
	`SysS‘Cmd
("£t", &
cmdMgr
);

181 
Cmd
 *
ex™Cmd
 = 
Ãw
 
	`SysEx™Cmd
("ex™", &
cmdMgr
);

182 
Cmd
 *
qu™Cmd
 = 
Ãw
 
	`SysEx™Cmd
("qu™", &
cmdMgr
);

183 
Cmd
 *
sourûCmd
 = 
Ãw
 
	`SysSourûCmd
("sourû", &
cmdMgr
);

184 
Cmd
 *
h–pCmd
 = 
Ãw
 
	`SysH–pCmd
("h–p", &
cmdMgr
);

185 
cmdMgr
.
	`»gCmd
("SYSTEM", 
li¡Cmd
);

186 
cmdMgr
.
	`»gCmd
("SYSTEM", 
cdCmd
);

187 
cmdMgr
.
	`»gCmd
("SYSTEM", 
ÿtCmd
);

188 
cmdMgr
.
	`»gCmd
("SYSTEM", 
pwdCmd
);

189 
cmdMgr
.
	`»gCmd
("SYSTEM", 
£tCmd
);

190 
cmdMgr
.
	`»gCmd
("SYSTEM", 
ex™Cmd
);

191 
cmdMgr
.
	`»gCmd
("SYSTEM", 
qu™Cmd
);

192 
cmdMgr
.
	`»gCmd
("SYSTEM", 
sourûCmd
);

193 
cmdMgr
.
	`»gCmd
("SYSTEM", 
h–pCmd
);

196 
Cmd
 *
»adLibCmd
 = 
Ãw
 
	`R—dLibCmd
("»ad_lib", &
çnMgr
);

197 
Cmd
 *
»adNlCmd
 = 
Ãw
 
	`R—dNlCmd
("»ad_Ãi¡", &
çnMgr
);

198 
Cmd
 *
£tFauÉTy³Cmd
 = 
Ãw
 
	`S‘FauÉTy³Cmd
("£t_çuÉ_ty³", &
çnMgr
);

199 
Cmd
 *
budCœCmd
 = 
Ãw
 
	`BudCœcu™Cmd
("bud_cœcu™", &
çnMgr
);

200 
Cmd
 *
»pÜtNlCmd
 = 
Ãw
 
	`R•ÜtN‘li¡Cmd
("»pÜt_Ãi¡", &
çnMgr
);

201 
Cmd
 *
»pÜtC–lCmd
 = 
Ãw
 
	`R•ÜtC–lCmd
("»pÜt_ûÎ", &
çnMgr
);

202 
Cmd
 *
»pÜtLibCmd
 = 
Ãw
 
	`R•ÜtLibCmd
("»pÜt_lib", &
çnMgr
);

203 
Cmd
 *
£tP©‹ºTy³Cmd
 = 
Ãw
 
	`S‘P©‹ºTy³Cmd
("£t_·‰”n_ty³", &
çnMgr
);

204 
Cmd
 *
£tSticCom´essiÚCmd
 = 
Ãw
 
	`S‘SticCom´essiÚCmd
("£t_¡©ic_com´essiÚ", &
çnMgr
);

205 
Cmd
 *
£tDyÇmicCom´essiÚCmd
 = 
Ãw
 
	`S‘DyÇmicCom´essiÚCmd
("£t_dyÇmic_com´essiÚ", &
çnMgr
);

206 
Cmd
 *
£tXFlCmd
 = 
Ãw
 
	`S‘XFlCmd
("£t_X-Fl", &
çnMgr
);

207 
cmdMgr
.
	`»gCmd
("SETUP", 
»adLibCmd
);

208 
cmdMgr
.
	`»gCmd
("SETUP", 
»adNlCmd
);

209 
cmdMgr
.
	`»gCmd
("SETUP", 
£tFauÉTy³Cmd
);

210 
cmdMgr
.
	`»gCmd
("SETUP", 
budCœCmd
);

211 
cmdMgr
.
	`»gCmd
("SETUP", 
»pÜtNlCmd
);

212 
cmdMgr
.
	`»gCmd
("SETUP", 
»pÜtC–lCmd
);

213 
cmdMgr
.
	`»gCmd
("SETUP", 
»pÜtLibCmd
);

214 
cmdMgr
.
	`»gCmd
("SETUP", 
£tP©‹ºTy³Cmd
);

215 
cmdMgr
.
	`»gCmd
("SETUP", 
£tSticCom´essiÚCmd
);

216 
cmdMgr
.
	`»gCmd
("SETUP", 
£tDyÇmicCom´essiÚCmd
);

217 
cmdMgr
.
	`»gCmd
("SETUP", 
£tXFlCmd
);

220 
Cmd
 *
»adP©Cmd
 = 
Ãw
 
	`R—dP©Cmd
("»ad_·‰”n", &
çnMgr
);

221 
Cmd
 *
»pÜtP©Cmd
 = 
Ãw
 
	`R•ÜtP©Cmd
("»pÜt_·‰”n", &
çnMgr
);

222 
Cmd
 *
addFauÉCmd
 = 
Ãw
 
	`AddFauÉCmd
("add_çuÉ", &
çnMgr
);

223 
Cmd
 *
»pÜtFauÉCmd
 = 
Ãw
 
	`R•ÜtFauÉCmd
("»pÜt_çuÉ", &
çnMgr
);

224 
Cmd
 *
addPšCÚsCmd
 = 
Ãw
 
	`AddPšCÚsCmd
("add_pš_cÚ¡¿št", &
çnMgr
);

225 
Cmd
 *
runLogicSimCmd
 = 
Ãw
 
	`RunLogicSimCmd
("run_logic_sim", &
çnMgr
);

226 
Cmd
 *
runFauÉSimCmd
 = 
Ãw
 
	`RunFauÉSimCmd
("run_çuÉ_sim", &
çnMgr
);

227 
Cmd
 *
runAgCmd
 = 
Ãw
 
	`RunAgCmd
("run_©pg", &
çnMgr
);

228 
Cmd
 *
»pÜtCœcu™Cmd
 = 
Ãw
 
	`R•ÜtCœcu™Cmd
("»pÜt_cœcu™", &
çnMgr
);

229 
Cmd
 *
»pÜtG©eCmd
 = 
Ãw
 
	`R•ÜtG©eCmd
("»pÜt_g©e", &
çnMgr
);

230 
Cmd
 *
»pÜtV®ueCmd
 = 
Ãw
 
	`R•ÜtV®ueCmd
("»pÜt_v®ue", &
çnMgr
);

231 
Cmd
 *
»pÜtStsCmd
 = 
Ãw
 
	`R•ÜtStsCmd
("»pÜt_¡©i¡ics", &
çnMgr
);

232 
Cmd
 *
wr™eP©Cmd
 = 
Ãw
 
	`Wr™eP©Cmd
("wr™e_·‰”n", &
çnMgr
);

233 
Cmd
 *
wr™eProcCmd
 = 
Ãw
 
	`Wr™eProcCmd
("wr™e_‹¡_´oûdu»_fe", &
çnMgr
);

234 
Cmd
 *
addSÿnChašsCmd
 = 
Ãw
 
	`AddSÿnChašsCmd
("add_sÿn_chašs", &
çnMgr
);

235 
Cmd
 *
»pÜtScßpCmd
 = 
Ãw
 
	`R•ÜtScßpCmd
("»pÜt_scßp", &
çnMgr
);

236 
cmdMgr
.
	`»gCmd
("ATPG", 
»adP©Cmd
);

237 
cmdMgr
.
	`»gCmd
("ATPG", 
»pÜtP©Cmd
);

238 
cmdMgr
.
	`»gCmd
("ATPG", 
addFauÉCmd
);

239 
cmdMgr
.
	`»gCmd
("ATPG", 
»pÜtFauÉCmd
);

240 
cmdMgr
.
	`»gCmd
("ATPG", 
addPšCÚsCmd
);

241 
cmdMgr
.
	`»gCmd
("ATPG", 
runLogicSimCmd
);

242 
cmdMgr
.
	`»gCmd
("ATPG", 
runFauÉSimCmd
);

243 
cmdMgr
.
	`»gCmd
("ATPG", 
runAgCmd
);

244 
cmdMgr
.
	`»gCmd
("ATPG", 
»pÜtCœcu™Cmd
);

245 
cmdMgr
.
	`»gCmd
("ATPG", 
»pÜtG©eCmd
);

246 
cmdMgr
.
	`»gCmd
("ATPG", 
»pÜtV®ueCmd
);

247 
cmdMgr
.
	`»gCmd
("ATPG", 
»pÜtStsCmd
);

248 
cmdMgr
.
	`»gCmd
("ATPG", 
wr™eP©Cmd
);

249 
cmdMgr
.
	`»gCmd
("ATPG", 
wr™eProcCmd
);

250 
cmdMgr
.
	`»gCmd
("ATPG", 
addSÿnChašsCmd
);

251 
cmdMgr
.
	`»gCmd
("ATPG", 
»pÜtScßpCmd
);

254 
Cmd
 *
»pÜtP©FÜm©Cmd
 = 
Ãw
 
	`R•ÜtP©FÜm©Cmd
("report_pattern_format");

255 
Cmd
 *
»pÜtMemUsgCmd
 = 
Ãw
 
	`R•ÜtMemUsgCmd
("report_memory_usage");

256 
cmdMgr
.
	`»gCmd
("MISC", 
»pÜtP©FÜm©Cmd
);

257 
cmdMgr
.
	`»gCmd
("MISC", 
»pÜtMemUsgCmd
);

260 
cmdMgr
.
	`£tComm’t
('#');

261 
cmdMgr
.
	`£tProm±
("atpg> ");

262 
cmdMgr
.
	`£tCŞÜ
(
CmdMgr
::
CYAN
);

263 
	}
}

	@atpg/src/misc_cmd.cpp

8 
	~"commÚ/tm_u§ge.h
"

10 
	~"misc_cmd.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gCommÚNs
;

14 
usšg
 
Çme¥aû
 
	gFªNs
;

17 
	gR•ÜtP©FÜm©Cmd
::
	$R•ÜtP©FÜm©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
è: 
	$Cmd
(
Çme
) {

18 
İtMgr_
.
	`£tName
(
Çme
);

19 
İtMgr_
.
	`£tShÜtDes
("report…attern format");

20 
İtMgr_
.
	`£tDes
("report…attern format");

21 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

22 
İt
->
	`addFÏg
("h");

23 
İt
->
	`addFÏg
("help");

24 
İtMgr_
.
	`»gO±
(
İt
);

25 
	}
}

26 
	gR•ÜtP©FÜm©Cmd
::~
	$R•ÜtP©FÜm©Cmd
(è{
	}
}

29 
boŞ
 
R•ÜtP©FÜm©Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

30 
İtMgr_
.
·r£
(
¬gv
);

32 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

33 
	gİtMgr_
.
u§ge
();

34  
	gŒue
;

37 
	gcout
 << "<PI‚ames> | <PPI‚ames> | <PO‚ames>" << 
	g’dl
;

38 
	gcout
 << "<BASIC_SCAN | LAUNCH_CAPTURE | LAUNCH_SHIFT>" << 
	g’dl
;

39 
	gcout
 << "_num_of_·‰”n_<numb”>" << 
	g’dl
;

40 
	gcout
 << "[ _pattern_<number> <PI1> | [PI2] | [PPI] | ";

41 
	gcout
 << "[SI] | [PO1] | [PO2] | [PPO] ]..." << 
	g’dl
;

42  
	gŒue
;

46 
	gR•ÜtMemUsgCmd
::
	$R•ÜtMemUsgCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) :

47 
	$Cmd
(
Çme
) {

48 
İtMgr_
.
	`£tName
(
Çme
);

49 
İtMgr_
.
	`£tShÜtDes
("report„esource usage");

50 
İtMgr_
.
	`£tDes
("report„esource usage");

51 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

52 
İt
->
	`addFÏg
("h");

53 
İt
->
	`addFÏg
("help");

54 
İtMgr_
.
	`»gO±
(
İt
);

55 
	}
}

56 
	gR•ÜtMemUsgCmd
::~
	$R•ÜtMemUsgCmd
(è{
	}
}

59 
boŞ
 
R•ÜtMemUsgCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

60 
İtMgr_
.
·r£
(
¬gv
);

62 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

63 
	gİtMgr_
.
u§ge
();

64  
	gŒue
;

67 
TmSt
 
	g¡©
;

68 
TmU§ge
 
	gtmusg
;

69 
	gtmusg
.
g‘P”iodU§ge
(
¡©
);

70 
	gcout
 << "# Memory ";

71 
	gcout
 << "cu¼’ˆ" << ()
	g¡©
.
	gvmSize
 / 1024.0 << " MB ";

72 
	gcout
 << "³ak " << ()
	g¡©
.
	gvmP—k
 / 1024.0 << " MB" << 
	g’dl
;

74  
	gŒue
;

	@atpg/src/misc_cmd.h

8 #iâdeà
_FAN_MISC_CMD_H_


9 
	#_FAN_MISC_CMD_H_


	)

11 
	~"commÚ/cmd.h
"

13 
Çme¥aû
 
	gFªNs
 {

16 şas 
	cR•ÜtP©FÜm©Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

17 
public
:

18 
R•ÜtP©FÜm©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

19 ~
R•ÜtP©FÜm©Cmd
();

21 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

25 şas 
	cR•ÜtMemUsgCmd
 : 
public
 
CommÚNs
::
Cmd
 {

26 
public
:

27 
R•ÜtMemUsgCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

28 ~
R•ÜtMemUsgCmd
();

30 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

	@atpg/src/setup_cmd.cpp

8 
	~<c¡dlib
>

10 
	~"š‹rçû/Ãi¡_bud”.h
"

11 
	~"š‹rçû/‹chlib_bud”.h
"

13 
	~"£tup_cmd.h
"

15 
usšg
 
Çme¥aû
 
	g¡d
;

16 
usšg
 
Çme¥aû
 
	gCommÚNs
;

17 
usšg
 
Çme¥aû
 
	gIÁfNs
;

18 
usšg
 
Çme¥aû
 
	gCÜeNs
;

19 
usšg
 
Çme¥aû
 
	gFªNs
;

23 
	gR—dLibCmd
::
	$R—dLibCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
è: 
	$Cmd
(
Çme
) {

24 
çnMgr_
 = 
çnMgr
;

25 
İtMgr_
.
	`£tName
(
Çme
);

26 
İtMgr_
.
	`£tShÜtDes
("read mentorechnology†ibrary");

27 
İtMgr_
.
	`£tDes
("read mentorechnology†ibrary");

28 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "mentorechnology†ibrary file",

30 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

31 
İt
->
	`addFÏg
("h");

32 
İt
->
	`addFÏg
("help");

33 
İtMgr_
.
	`»gO±
(
İt
);

34 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "verbose on. Default is off", "");

35 
İt
->
	`addFÏg
("v");

36 
İt
->
	`addFÏg
("verbose");

37 
İtMgr_
.
	`»gO±
(
İt
);

38 
	}
}

40 
	gR—dLibCmd
::~
	$R—dLibCmd
(è{
	}
}

43 
boŞ
 
R—dLibCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

44 
İtMgr_
.
·r£
(
¬gv
);

46 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

47 
	gİtMgr_
.
u§ge
();

48  
	gŒue
;

51 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

52 
	gû¼
 << "**ERROR ReadLibCmd::exec():†ibrary file‚eeded";

53 
	gû¼
 << 
	g’dl
;

54  
	gçl£
;

59 
d–‘e
 
	gçnMgr_
->
	glib
;

60 
	gçnMgr_
->
	glib
 = 
Ãw
 
Techlib
;

61 
MdtFe
 *
	glibBld”
 = 
Ãw
 
MdtLibBud”
(
çnMgr_
->
lib
);

64 
	gçnMgr_
->
	gtmusg
.
³riodS¹
();

65 
	gcout
 << "# R—dšgechnŞogy†ib¿ry ..." << 
	g’dl
;

66 
boŞ
 
	gv”bo£
 = 
İtMgr_
.
isFÏgS‘
("v");

67 ià(!
	glibBld”
->
»ad
(
İtMgr_
.
g‘P¬£dArg
(0).
c_¡r
(), 
v”bo£
)) {

68 
	gû¼
 << "**ERROR R—dLibCmd::exec(): MDT†ib bud”ƒ¼Ü" << 
	g’dl
;

69 
d–‘e
 
	glibBld”
;

70 
d–‘e
 
	gçnMgr_
->
	glib
;

71 
	gçnMgr_
->
	glib
 = 
NULL
;

72  
	gçl£
;

76 ià(!
	gçnMgr_
->
	glib
->
check
(
v”bo£
)) {

77 
	gû¼
 << "**ERROR R—dLibCmd::exec(): MDT†ibƒ¼Ü" << 
	g’dl
;

78 
d–‘e
 
	glibBld”
;

79 
d–‘e
 
	gçnMgr_
->
	glib
;

80 
	gçnMgr_
->
	glib
 = 
NULL
;

81  
	gçl£
;

84 
TmSt
 
	g¡©
;

85 ià(!
	gçnMgr_
->
	gtmusg
.
g‘P”iodU§ge
(
¡©
))

86 
	gcout
 << "fishy ..." << 
	g’dl
;

87 
	gcout
 << "# Fšished„—dšg†ib¿ry `" << 
	gİtMgr_
.
g‘P¬£dArg
(0) << "'";

88 
	gcout
 << " " << ()
	g¡©
.
	grTime
 / 1000000.0 << " s";

89 
	gcout
 << " " << ()
	g¡©
.
	gvmSize
 / 1024.0 << " MB" << 
	g’dl
;

91 
d–‘e
 
	glibBld”
;

92  
	gŒue
;

97 
	gR—dNlCmd
::
	$R—dNlCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
è: 
	$Cmd
(
Çme
) {

98 
çnMgr_
 = 
çnMgr
;

99 
İtMgr_
.
	`£tName
(
Çme
);

100 
İtMgr_
.
	`£tShÜtDes
("read verilog gate†evel‚etlist");

101 
İtMgr_
.
	`£tDes
("read verilog gate†evel‚etlist");

102 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "verilog gate†evel‚etlist file",

104 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

105 
İt
->
	`addFÏg
("h");

106 
İt
->
	`addFÏg
("help");

107 
İtMgr_
.
	`»gO±
(
İt
);

108 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "verbose on. Default is off", "");

109 
İt
->
	`addFÏg
("v");

110 
İt
->
	`addFÏg
("verbose");

111 
İtMgr_
.
	`»gO±
(
İt
);

112 
	}
}

113 
	gR—dNlCmd
::~
	$R—dNlCmd
(è{
	}
}

116 
boŞ
 
R—dNlCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

117 
İtMgr_
.
·r£
(
¬gv
);

119 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

120 
	gİtMgr_
.
u§ge
();

121  
	gŒue
;

124 ià(!
	gçnMgr_
->
	glib
) {

125 
	gû¼
 << "**ERROR ReadNlCmd::exec():echnology†ibrary‚eeded";

126 
	gû¼
 << 
	g’dl
;

127  
	gçl£
;

130 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

131 
	gû¼
 << "**ERROR ReadNlCmd::exec():‚etlist file‚eeded";

132 
	gû¼
 << 
	g’dl
;

133  
	gçl£
;

137 
d–‘e
 
	gçnMgr_
->
	gÆ
;

138 
	gçnMgr_
->
	gÆ
 = 
Ãw
 
N‘li¡
;

139 
	gçnMgr_
->
	gÆ
->
£tTechlib
(
çnMgr_
->
lib
);

140 
VlogFe
 *
	gÆBld”
 = 
Ãw
 
VlogNlBud”
(
çnMgr_
->
Æ
);

143 
	gçnMgr_
->
	gtmusg
.
³riodS¹
();

144 
	gcout
 << "# R—dšg‚‘li¡ ..." << 
	g’dl
;

145 
boŞ
 
	gv”bo£
 = 
İtMgr_
.
isFÏgS‘
("v");

146 ià(!
	gÆBld”
->
»ad
(
İtMgr_
.
g‘P¬£dArg
(0).
c_¡r
(), 
v”bo£
)) {

147 
	gû¼
 << "**ERROR R—dNlCmd()::exec(): v”og bud”ƒ¼Ü" << 
	g’dl
;

148 
d–‘e
 
	gçnMgr_
->
	gÆ
;

149 
d–‘e
 
	gÆBld”
;

150 
	gçnMgr_
->
	gÆ
 = 
NULL
;

151  
	gçl£
;

155 ià(!
	gçnMgr_
->
	gÆ
->
check
(
v”bo£
)) {

156 
	gû¼
 << "**ERROR R—dNlCmd()::exec():‚‘li¡ƒ¼Ü" << 
	g’dl
;

157 
d–‘e
 
	gçnMgr_
->
	gÆ
;

158 
d–‘e
 
	gÆBld”
;

159 
	gçnMgr_
->
	gÆ
 = 
NULL
;

160  
	gçl£
;

163 
TmSt
 
	g¡©
;

164 
	gçnMgr_
->
	gtmusg
.
g‘P”iodU§ge
(
¡©
);

165 
	gcout
 << "# Fšished„—dšg‚‘li¡ `" << 
	gİtMgr_
.
g‘P¬£dArg
(0) << "'";

166 
	gcout
 << " " << ()
	g¡©
.
	grTime
 / 1000000.0 << " s";

167 
	gcout
 << " " << ()
	g¡©
.
	gvmSize
 / 1024.0 << " MB" << 
	g’dl
;

169 
d–‘e
 
	gÆBld”
;

170  
	gŒue
;

174 
	gS‘FauÉTy³Cmd
::
	$S‘FauÉTy³Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

175 
	$Cmd
(
Çme
) {

176 
çnMgr_
 = 
çnMgr
;

177 
İtMgr_
.
	`£tName
(
Çme
);

178 
İtMgr_
.
	`£tShÜtDes
("set faultype");

179 
İtMgr_
.
	`£tDes
("set faultype. Currently supports stuck-at fault‡ndransition delay fault");

180 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "either saf ordf",

182 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

183 
İt
->
	`addFÏg
("h");

184 
İt
->
	`addFÏg
("help");

185 
İtMgr_
.
	`»gO±
(
İt
);

186 
	}
}

187 
	gS‘FauÉTy³Cmd
::~
	$S‘FauÉTy³Cmd
(è{
	}
}

190 
boŞ
 
S‘FauÉTy³Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

191 
İtMgr_
.
·r£
(
¬gv
);

193 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

194 
	gİtMgr_
.
u§ge
();

195  
	gŒue
;

198 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

199 
	gû¼
 << "**ERROR SetFaultTypeCmd::exec(): faultype‚eeded";

200 
	gû¼
 << 
	g’dl
;

201  
	gçl£
;

204 ià(!
	gçnMgr_
->
	g©pg_mgr
)

205 
	gçnMgr_
->
	g©pg_mgr
 = 
Ãw
 
AgMgr
;

207 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
)

208 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
 = 
Ãw
 
FauÉLi¡ExŒaù
;

210 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "saf") {

211 
cout
 << "# fauÉy³ s‘Ø¡uck-© fauÉ" << 
’dl
;

212 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
	gty³_
 = 
FauÉLi¡ExŒaù
::
SAF
;

214 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "tdf") {

215 
cout
 << "# fauÉy³ s‘ØŒªs™iÚ d–ay fauÉ" << 
’dl
;

216 
	gçnMgr_
->
	g©pg_mgr
->
	gfLi¡ExŒaù_
->
	gty³_
 = 
FauÉLi¡ExŒaù
::
TDF
;

219 
	gû¼
 << "**ERROR SetFaultTypeCmd::exec(): unknown faultype `";

220 
	gû¼
 << 
	gİtMgr_
.
g‘P¬£dArg
(0è<< "'" << 
	g’dl
;

221  
	gçl£
;

224  
	gŒue
;

228 
	gR•ÜtN‘li¡Cmd
::
	$R•ÜtN‘li¡Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

229 
	$Cmd
(
Çme
) {

230 
çnMgr_
 = 
çnMgr
;

231 
İtMgr_
.
	`£tName
(
Çme
);

232 
İtMgr_
.
	`£tShÜtDes
("report‚etlist");

233 
İtMgr_
.
	`£tDes
("report‚etlist information");

234 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

235 
İt
->
	`addFÏg
("h");

236 
İt
->
	`addFÏg
("help");

237 
İtMgr_
.
	`»gO±
(
İt
);

238 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, "print more detailed information", "");

239 
İt
->
	`addFÏg
("more");

240 
İtMgr_
.
	`»gO±
(
İt
);

241 
	}
}

242 
	gR•ÜtN‘li¡Cmd
::~
	$R•ÜtN‘li¡Cmd
(è{
	}
}

245 
boŞ
 
R•ÜtN‘li¡Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

246 
İtMgr_
.
·r£
(
¬gv
);

248 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

249 
	gİtMgr_
.
u§ge
();

250  
	gŒue
;

253 ià(!
	gçnMgr_
->
	gÆ
) {

254 
	gû¼
 << "**ERROR R•ÜtN‘li¡Cmd::exec():‚‘li¡‚“ded" << 
	g’dl
;

255  
	gçl£
;

258 
	gcout
 << "#‚‘li¡ infÜm©iÚ" << 
	g’dl
;

259 
	gcout
 << "#‚umb” oàmoduËs: " << 
	gçnMgr_
->
	gÆ
->
g‘NModuË
(è<< 
	g’dl
;

260 
	gcout
 << "# modules: ";

261 
size_t
 
	gi
 = 0; i < 
	gçnMgr_
->
	gÆ
->
g‘NModuË
(); ++i)

262 
	gcout
 << " " << 
	gçnMgr_
->
	gÆ
->
g‘ModuË
(
i
)->
	gÇme_
;

263 
	gcout
 << 
	g’dl
;

264 
C–l
 *
	gtİ
 = 
çnMgr_
->
Æ
->
g‘Tİ
();

265 
	gcout
 << "# cu¼’ˆmoduË: " << 
	gtİ
->
	gÇme_
 << 
	g’dl
;

266 
	gcout
 << "#‚umb” oàpÜts: " << 
	gtİ
->
g‘NPÜt
(è<< 
	g’dl
;

267 
	gcout
 << "#‚umb” oàûÎs: " << 
	gtİ
->
g‘NC–l
(è<< 
	g’dl
;

268 
	gcout
 << "#‚umb” oàÃts: " << 
	gtİ
->
g‘NN‘
(è<< 
	g’dl
;

269 ià(!
	gİtMgr_
.
isFÏgS‘
("more"))

270  
	gŒue
;

271 
	gcout
 << "#…orts: ";

272 
size_t
 
	gi
 = 0; i < 
	gtİ
->
g‘NPÜt
(); ++i)

273 
	gcout
 << " " << 
	gtİ
->
g‘PÜt
(
i
)->
	gÇme_
;

274 
	gcout
 << 
	g’dl
;

275 
	gcout
 << "# cells: ";

276 
size_t
 
	gi
 = 0; i < 
	gtİ
->
g‘NC–l
(); ++i)

277 
	gcout
 << " " << 
	gtİ
->
g‘C–l
(
i
)->
	gÇme_
;

278 
	gcout
 << 
	g’dl
;

279 
	gcout
 << "#‚ets: ";

280 
size_t
 
	gi
 = 0; i < 
	gtİ
->
g‘NN‘
(); ++i)

281 
	gcout
 << " " << 
	gtİ
->
g‘N‘
(
i
)->
	gÇme_
;

282 
	gcout
 << 
	g’dl
;

284  
	gŒue
;

288 
	gR•ÜtC–lCmd
::
	$R•ÜtC–lCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

289 
	$Cmd
(
Çme
) {

290 
çnMgr_
 = 
çnMgr
;

291 
İtMgr_
.
	`£tName
(
Çme
);

292 
İtMgr_
.
	`£tShÜtDes
("report cell");

293 
İtMgr_
.
	`£tDes
("reports CELL information inhe‚etlist");

294 
Arg
 *
¬g
 = 
Ãw
 
	`Arg
(Arg::
OPT_INF
,

297 
İtMgr_
.
	`»gArg
(
¬g
);

298 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

299 
İt
->
	`addFÏg
("h");

300 
İt
->
	`addFÏg
("help");

301 
İtMgr_
.
	`»gO±
(
İt
);

302 
	}
}

303 
	gR•ÜtC–lCmd
::~
	$R•ÜtC–lCmd
(è{
	}
}

306 
boŞ
 
R•ÜtC–lCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

307 
İtMgr_
.
·r£
(
¬gv
);

309 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

310 
	gİtMgr_
.
u§ge
();

311  
	gŒue
;

314 ià(!
	gçnMgr_
->
	gÆ
) {

315 
	gû¼
 << "**ERROR R•ÜtC–lCmd::exec():‚‘li¡‚“ded" << 
	g’dl
;

316  
	gçl£
;

319 ià(
	gİtMgr_
.
g‘NP¬£dArg
() == 0)

320 
size_t
 
i
 = 0; 
	gi
 < 
	gçnMgr_
->
	gÆ
->
g‘Tİ
()->
g‘NC–l
(); ++i)

321 
»pÜtC–l
(
i
);

323 
size_t
 
	gi
 = 0; i < 
	gİtMgr_
.
g‘NP¬£dArg
(); ++i) {

324 
¡ršg
 
	gÇme
 = 
İtMgr_
.
g‘P¬£dArg
(
i
);

325 
C–l
 *
	gc
 = 
çnMgr_
->
Æ
->
g‘Tİ
()->
g‘C–l
(
Çme
.
c_¡r
());

326 ià(!
	gc
) {

327 
	gû¼
 << "**ERROR ReportCellCmd::exec(): cell `";

328 
	gû¼
 << 
	gÇme
 << "' dÛ nÙƒxi¡" << 
	g’dl
;

331 
»pÜtC–l
(
c
->
id_
);

335  
	gŒue
;

338 
	gR•ÜtC–lCmd
::
	$»pÜtC–l
(cÚ¡ 
size_t
 &
i
) const {

339 
C–l
 *
c
 = 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘C–l
(
i
);

340 
cout
 << "# C–È" << 
c
->
Çme_
 << " " << c->
ty³Name_
 << 
’dl
;

341 
C–lS‘
 
fis
 = 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘Fªš
(
i
);

342 
PÜtS‘
 
pis
 = 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘FªšPÜt
(
i
);

343 
cout
 << "# fi[" << 
fis
.
	`size
(è+ 
pis
.size() << "]";

344 
PÜtS‘
::
™”©Ü
 
™
 = 
pis
.
	`begš
(); iˆ!ğpis.
	`’d
(); ++it) {

345 
cout
 << " " << (*
™
)->
Çme_
;

347 
C–lS‘
::
™”©Ü
 
™
 = 
fis
.
	`begš
(); iˆ!ğfis.
	`’d
(); ++it) {

348 
cout
 << " " << (*
™
)->
Çme_
;

350 
cout
 << 
’dl
;

351 
C–lS‘
 
fos
 = 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘Fªout
(
i
);

352 
PÜtS‘
 
pos
 = 
çnMgr_
->
Æ
->
	`g‘Tİ
()->
	`g‘FªoutPÜt
(
i
);

353 
cout
 << "# fo[" << 
fos
.
	`size
(è+ 
pos
.size() << "]";

354 
C–lS‘
::
™”©Ü
 
™
 = 
fos
.
	`begš
(); iˆ!ğfos.
	`’d
(); ++it) {

355 
cout
 << " " << (*
™
)->
Çme_
;

357 
PÜtS‘
::
™”©Ü
 
™
 = 
pos
.
	`begš
(); iˆ!ğpos.
	`’d
(); ++it) {

358 
cout
 << " " << (*
™
)->
Çme_
;

360 
cout
 << 
’dl
 <<ƒndl;

361 
	}
}

364 
	gR•ÜtLibCmd
::
	$R•ÜtLibCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

365 
	$Cmd
(
Çme
) {

366 
çnMgr_
 = 
çnMgr
;

367 
İtMgr_
.
	`£tName
(
Çme
);

368 
İtMgr_
.
	`£tShÜtDes
("report†ibrary");

369 
İtMgr_
.
	`£tDes
("report†ibrary information");

370 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

371 
İt
->
	`addFÏg
("h");

372 
İt
->
	`addFÏg
("help");

373 
İtMgr_
.
	`»gO±
(
İt
);

374 
	}
}

375 
	gR•ÜtLibCmd
::~
	$R•ÜtLibCmd
(è{
	}
}

378 
boŞ
 
R•ÜtLibCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

379 
İtMgr_
.
·r£
(
¬gv
);

381 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

382 
	gİtMgr_
.
u§ge
();

383  
	gŒue
;

386 ià(!
	gçnMgr_
->
	glib
) {

387 
	gû¼
 << "**ERROR R•ÜtLib¿ryCmd::exec():†ib¿ry‚“ded" << 
	g’dl
;

388  
	gçl£
;

391 
	gcout
 << "#†ib¿ry infÜm©iÚ" << 
	g’dl
;

392 
	gcout
 << "#‚umb” oàmod–s: " << 
	gçnMgr_
->
	glib
->
g‘NC–l
(è<< 
	g’dl
;

393 
	gcout
 << "# models: ";

394 
size_t
 
	gi
 = 0; i < 
	gçnMgr_
->
	glib
->
g‘NC–l
(); ++i)

395 
	gcout
 << " " << 
	gçnMgr_
->
	glib
->
g‘C–l
(
i
)->
	gÇme_
;

396 
	gcout
 << 
	g’dl
;

398  
	gŒue
;

402 
	gBudCœcu™Cmd
::
	$BudCœcu™Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

403 
	$Cmd
(
Çme
) {

404 
çnMgr_
 = 
çnMgr
;

405 
İtMgr_
.
	`£tName
(
Çme
);

406 
İtMgr_
.
	`£tShÜtDes
("build circuit");

407 
İtMgr_
.
	`£tDes
("build‚etlist into internal circuit data structure");

408 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

409 
İt
->
	`addFÏg
("h");

410 
İt
->
	`addFÏg
("help");

411 
İtMgr_
.
	`»gO±
(
İt
);

412 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, "number of frames", "NUM");

413 
İt
->
	`addFÏg
("f");

414 
İt
->
	`addFÏg
("frame");

415 
İtMgr_
.
	`»gO±
(
İt
);

416 
	}
}

417 
	gBudCœcu™Cmd
::~
	$BudCœcu™Cmd
(è{
	}
}

420 
boŞ
 
BudCœcu™Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

421 
İtMgr_
.
·r£
(
¬gv
);

423 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

424 
	gİtMgr_
.
u§ge
();

425  
	gŒue
;

428 ià(!
	gçnMgr_
->
	gÆ
) {

429 
	gû¼
 << "**ERROR BudCœuc™Cmd::exec():‚‘li¡‚“ded" << 
	g’dl
;

430  
	gçl£
;

433 
	gnäame
 = 1;

434 ià(
	gİtMgr_
.
isFÏgS‘
("f")) {

435 
	gnäame
 = 
©oi
(
İtMgr_
.
g‘FÏgV¬
("f").
c_¡r
());

436 
	gnäame
 = 
näame
 < 1 ? 1 :‚frame;

439 ià(!
	gçnMgr_
->
	g©pg_mgr
)

440 
	gçnMgr_
->
	g©pg_mgr
 = 
Ãw
 
AgMgr
;

442 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
 = 
Ãw
 
Cœcu™
;

444 
	gçnMgr_
->
	gtmusg
.
³riodS¹
();

445 
	gcout
 << "# Budšg cœcu™ ..." << 
	g’dl
;

446 if(
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
 && fªMgr_->©pg_mgr->pcŞl_->
	gty³_
 =ğ
P©‹ºProûssÜ
::
LAUNCH_SHIFT
)

447 
çnMgr_
->
©pg_mgr
->
cœ_
->
bud
(çnMgr_->
Æ
, 
näame
, 
Cœcu™
::
SHIFT
);

449 
	gçnMgr_
->
	g©pg_mgr
->
	gcœ_
->
bud
(
çnMgr_
->
Æ
, 
näame
);

451 
TmSt
 
	g¡©
;

452 
	gçnMgr_
->
	gtmusg
.
g‘P”iodU§ge
(
¡©
);

453 
	gcout
 << "# Finished building circuit";

454 
	gcout
 << " " << ()
	g¡©
.
	grTime
 / 1000000.0 << " s";

455 
	gcout
 << " " << ()
	g¡©
.
	gvmSize
 / 1024.0 << " MB" << 
	g’dl
;

457  
	gŒue
;

461 
	gS‘P©‹ºTy³Cmd
::
	$S‘P©‹ºTy³Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

462 
	$Cmd
(
Çme
) {

463 
çnMgr_
 = 
çnMgr
;

464 
İtMgr_
.
	`£tName
(
Çme
);

465 
İtMgr_
.
	`£tShÜtDes
("set…atternype");

466 
İtMgr_
.
	`£tDes
("set…atternype. Currently supports basic scan,†aunch on shift‡nd†aunch on capture");

467 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "either BASIC, LOC or LOS",

469 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

470 
İt
->
	`addFÏg
("h");

471 
İt
->
	`addFÏg
("help");

472 
İtMgr_
.
	`»gO±
(
İt
);

473 
	}
}

474 
	gS‘P©‹ºTy³Cmd
::~
	$S‘P©‹ºTy³Cmd
(è{
	}
}

477 
boŞ
 
S‘P©‹ºTy³Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

478 
İtMgr_
.
·r£
(
¬gv
);

480 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

481 
	gİtMgr_
.
u§ge
();

482  
	gŒue
;

485 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

486 
	gû¼
 << "**ERROR SetPatternTypeCmd::exec():…atternype‚eeded";

487 
	gû¼
 << 
	g’dl
;

488  
	gçl£
;

491 ià(!
	gçnMgr_
->
	g©pg_mgr
)

492 
	gçnMgr_
->
	g©pg_mgr
 = 
Ãw
 
AgMgr
;

494 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
)

495 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
 = 
Ãw
 
P©‹ºProûssÜ
;

497 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "BASIC") {

498 
cout
 << "#…©‹ºy³ s‘Øbasiøsÿn" << 
’dl
;

499 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gty³_
 = 
P©‹ºProûssÜ
::
BASIC_SCAN
;

501 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "LOC") {

502 
cout
 << "#…©‹ºy³ s‘ØÏunch oÀÿ±u»" << 
’dl
;

503 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gty³_
 = 
P©‹ºProûssÜ
::
LAUNCH_CAPTURE
;

505 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "LOS") {

506 
cout
 << "#…©‹ºy³ s‘ØÏunch oÀshiá" << 
’dl
;

507 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gty³_
 = 
P©‹ºProûssÜ
::
LAUNCH_SHIFT
;

508 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gnsi_
 = 1;

511 
	gû¼
 << "**ERROR SetPatternTypeCmd::exec(): unknown…atternype `";

512 
	gû¼
 << 
	gİtMgr_
.
g‘P¬£dArg
(0è<< "'" << 
	g’dl
;

513  
	gçl£
;

516  
	gŒue
;

520 
	gS‘SticCom´essiÚCmd
::
	$S‘SticCom´essiÚCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

521 
	$Cmd
(
Çme
) {

522 
çnMgr_
 = 
çnMgr
;

523 
İtMgr_
.
	`£tName
(
Çme
);

524 
İtMgr_
.
	`£tShÜtDes
("set static compression");

525 
İtMgr_
.
	`£tDes
("set static compression on/off");

526 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "either on or off",

528 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

529 
İt
->
	`addFÏg
("h");

530 
İt
->
	`addFÏg
("help");

531 
İtMgr_
.
	`»gO±
(
İt
);

532 
	}
}

533 
	gS‘SticCom´essiÚCmd
::~
	$S‘SticCom´essiÚCmd
(è{
	}
}

536 
boŞ
 
S‘SticCom´essiÚCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

537 
İtMgr_
.
·r£
(
¬gv
);

539 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

540 
	gİtMgr_
.
u§ge
();

541  
	gŒue
;

544 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

545 
	gû¼
 << "**ERROR SetStaticCompressionCmd::exec(): on/off‚eeded";

546 
	gû¼
 << 
	g’dl
;

547  
	gçl£
;

550 ià(!
	gçnMgr_
->
	g©pg_mgr
)

551 
	gçnMgr_
->
	g©pg_mgr
 = 
Ãw
 
AgMgr
;

553 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
)

554 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
 = 
Ãw
 
P©‹ºProûssÜ
;

557 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "on") {

558 
cout
 << "# stiøcom´essiÚ s‘ØÚ" << 
’dl
;

560 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	g¡©icCom´essiÚ_
 = 
P©‹ºProûssÜ
::
ON
;

562 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "off") {

563 
cout
 << "# stiøcom´essiÚ s‘Øoff" << 
’dl
;

565 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	g¡©icCom´essiÚ_
 = 
P©‹ºProûssÜ
::
OFF
;

568 
	gû¼
 << "**ERROR SetStaticCompressionCmd::exec(): unknown‡rgument `";

569 
	gû¼
 << 
	gİtMgr_
.
g‘P¬£dArg
(0è<< "'" << 
	g’dl
;

570  
	gçl£
;

573  
	gŒue
;

577 
	gS‘DyÇmicCom´essiÚCmd
::
	$S‘DyÇmicCom´essiÚCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

578 
	$Cmd
(
Çme
) {

579 
çnMgr_
 = 
çnMgr
;

580 
İtMgr_
.
	`£tName
(
Çme
);

581 
İtMgr_
.
	`£tShÜtDes
("set dynamic compression");

582 
İtMgr_
.
	`£tDes
("set dynamic compression on/off");

583 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "either on or off",

585 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

586 
İt
->
	`addFÏg
("h");

587 
İt
->
	`addFÏg
("help");

588 
İtMgr_
.
	`»gO±
(
İt
);

589 
	}
}

590 
	gS‘DyÇmicCom´essiÚCmd
::~
	$S‘DyÇmicCom´essiÚCmd
(è{
	}
}

593 
boŞ
 
S‘DyÇmicCom´essiÚCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

594 
İtMgr_
.
·r£
(
¬gv
);

596 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

597 
	gİtMgr_
.
u§ge
();

598  
	gŒue
;

601 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

602 
	gû¼
 << "**ERROR SetDynamicCompressionCmd::exec(): on/off‚eeded";

603 
	gû¼
 << 
	g’dl
;

604  
	gçl£
;

607 ià(!
	gçnMgr_
->
	g©pg_mgr
)

608 
	gçnMgr_
->
	g©pg_mgr
 = 
Ãw
 
AgMgr
;

610 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
)

611 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
 = 
Ãw
 
P©‹ºProûssÜ
;

614 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "on") {

615 
cout
 << "# dyÇmiøcom´essiÚ s‘ØÚ" << 
’dl
;

617 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gdyÇmicCom´essiÚ_
 = 
P©‹ºProûssÜ
::
ON
;

619 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "off") {

620 
cout
 << "# dyÇmiøcom´essiÚ s‘Øoff" << 
’dl
;

622 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gdyÇmicCom´essiÚ_
 = 
P©‹ºProûssÜ
::
OFF
;

625 
	gû¼
 << "**ERROR SetDynamicCompressionCmd::exec(): unknown‡rgument `";

626 
	gû¼
 << 
	gİtMgr_
.
g‘P¬£dArg
(0è<< "'" << 
	g’dl
;

627  
	gçl£
;

630  
	gŒue
;

634 
	gS‘XFlCmd
::
	$S‘XFlCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
) :

635 
	$Cmd
(
Çme
) {

636 
çnMgr_
 = 
çnMgr
;

637 
İtMgr_
.
	`£tName
(
Çme
);

638 
İtMgr_
.
	`£tShÜtDes
("set X-Fill");

639 
İtMgr_
.
	`£tDes
("set X-Fill on/off");

640 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "either on or off",

642 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

643 
İt
->
	`addFÏg
("h");

644 
İt
->
	`addFÏg
("help");

645 
İtMgr_
.
	`»gO±
(
İt
);

646 
	}
}

647 
	gS‘XFlCmd
::~
	$S‘XFlCmd
(è{
	}
}

650 
boŞ
 
S‘XFlCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

651 
İtMgr_
.
·r£
(
¬gv
);

653 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

654 
	gİtMgr_
.
u§ge
();

655  
	gŒue
;

658 ià(
	gİtMgr_
.
g‘NP¬£dArg
() < 1) {

659 
	gû¼
 << "**ERROR SetXFillCmd::exec(): on/off‚eeded";

660 
	gû¼
 << 
	g’dl
;

661  
	gçl£
;

664 ià(!
	gçnMgr_
->
	g©pg_mgr
)

665 
	gçnMgr_
->
	g©pg_mgr
 = 
Ãw
 
AgMgr
;

667 ià(!
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
)

668 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
 = 
Ãw
 
P©‹ºProûssÜ
;

671 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "on") {

672 
cout
 << "# X-FÈ£ˆtØÚ" << 
’dl
;

674 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gXFl_
 = 
P©‹ºProûssÜ
::
ON
;

676 ià(
	gİtMgr_
.
g‘P¬£dArg
(0) == "off") {

677 
cout
 << "# X-FÈ£ˆtØoff" << 
’dl
;

679 
	gçnMgr_
->
	g©pg_mgr
->
	gpcŞl_
->
	gXFl_
 = 
P©‹ºProûssÜ
::
OFF
;

682 
	gû¼
 << "**ERROR SetXFillCmd::exec(): unknown‡rgument `";

683 
	gû¼
 << 
	gİtMgr_
.
g‘P¬£dArg
(0è<< "'" << 
	g’dl
;

684  
	gçl£
;

687  
	gŒue
;

	@atpg/src/setup_cmd.h

8 #iâdeà
_FAN_SETUP_CMD_H_


9 
	#_FAN_SETUP_CMD_H_


	)

11 
	~"commÚ/cmd.h
"

13 
	~"çn_mgr.h
"

15 
Çme¥aû
 
	gFªNs
 {

18 şas 
	cR—dLibCmd
 : 
public
 
CommÚNs
::
Cmd
 {

19 
public
:

20 
R—dLibCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

21 ~
R—dLibCmd
();

23 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

25 
	g´iv©e
:

26 
FªMgr
 *
çnMgr_
;

29 şas 
	cR—dNlCmd
 : 
public
 
CommÚNs
::
Cmd
 {

30 
public
:

31 
R—dNlCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

32 ~
R—dNlCmd
();

34 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

36 
	g´iv©e
:

37 
FªMgr
 *
çnMgr_
;

40 şas 
	cS‘FauÉTy³Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

41 
public
:

42 
S‘FauÉTy³Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

43 ~
S‘FauÉTy³Cmd
();

45 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

47 
	g´iv©e
:

48 
FªMgr
 *
çnMgr_
;

51 şas 
	cR•ÜtN‘li¡Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

52 
public
:

53 
R•ÜtN‘li¡Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

54 ~
R•ÜtN‘li¡Cmd
();

56 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

58 
	g´iv©e
:

59 
FªMgr
 *
çnMgr_
;

62 şas 
	cR•ÜtC–lCmd
 : 
public
 
CommÚNs
::
Cmd
 {

63 
public
:

64 
R•ÜtC–lCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

65 ~
R•ÜtC–lCmd
();

67 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

69 
	g´iv©e
:

70 
FªMgr
 *
çnMgr_
;

71 
»pÜtC–l
(cÚ¡ 
size_t
 &
i
) const;

74 şas 
	cR•ÜtLibCmd
 : 
public
 
CommÚNs
::
Cmd
 {

75 
public
:

76 
R•ÜtLibCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

77 ~
R•ÜtLibCmd
();

79 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

81 
	g´iv©e
:

82 
FªMgr
 *
çnMgr_
;

85 şas 
	cBudCœcu™Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

86 
public
:

87 
BudCœcu™Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

88 ~
BudCœcu™Cmd
();

90 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

92 
	g´iv©e
:

93 
FªMgr
 *
çnMgr_
;

97 şas 
	cS‘P©‹ºTy³Cmd
 : 
public
 
CommÚNs
::
Cmd
 {

98 
public
:

99 
S‘P©‹ºTy³Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

100 ~
S‘P©‹ºTy³Cmd
();

102 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

104 
	g´iv©e
:

105 
FªMgr
 *
çnMgr_
;

108 şas 
	cS‘SticCom´essiÚCmd
 : 
public
 
CommÚNs
::
Cmd
 {

109 
public
:

110 
S‘SticCom´essiÚCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

111 ~
S‘SticCom´essiÚCmd
();

113 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

115 
	g´iv©e
:

116 
FªMgr
 *
çnMgr_
;

119 şas 
	cS‘DyÇmicCom´essiÚCmd
 : 
public
 
CommÚNs
::
Cmd
 {

120 
public
:

121 
S‘DyÇmicCom´essiÚCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

122 ~
S‘DyÇmicCom´essiÚCmd
();

124 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

126 
	g´iv©e
:

127 
FªMgr
 *
çnMgr_
;

130 şas 
	cS‘XFlCmd
 : 
public
 
CommÚNs
::
Cmd
 {

131 
public
:

132 
S‘XFlCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
FªMgr
 *
çnMgr
);

133 ~
S‘XFlCmd
();

135 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

137 
	g´iv©e
:

138 
FªMgr
 *
çnMgr_
;

	@common/src/ascii.h

8 #iâdeà
_COMMON_ASCII_H_


9 
	#_COMMON_ASCII_H_


	)

11 
Çme¥aû
 
	gCommÚNs
 {

14 cÚ¡ 
	gASCII_MIN_PR
 = 0x20;

15 cÚ¡ 
	gASCII_MAX_PR
 = 0x7e;

18 cÚ¡ 
	gASCII_NUL
 = 0x00;

19 cÚ¡ 
	gASCII_SOH
 = 0x01;

20 cÚ¡ 
	gASCII_STX
 = 0x02;

21 cÚ¡ 
	gASCII_ETX
 = 0x03;

22 cÚ¡ 
	gASCII_EOT
 = 0x04;

23 cÚ¡ 
	gASCII_ENQ
 = 0x05;

24 cÚ¡ 
	gASCII_ACK
 = 0x06;

25 cÚ¡ 
	gASCII_BEL
 = 0x07;

26 cÚ¡ 
	gASCII_BS
 = 0x08;

27 cÚ¡ 
	gASCII_HT
 = 0x09;

28 cÚ¡ 
	gASCII_LF
 = 0x0a;

29 cÚ¡ 
	gASCII_VT
 = 0x0b;

30 cÚ¡ 
	gASCII_FF
 = 0x0c;

31 cÚ¡ 
	gASCII_CR
 = 0x0d;

32 cÚ¡ 
	gASCII_SO
 = 0x0e;

33 cÚ¡ 
	gASCII_SI
 = 0x0f;

34 cÚ¡ 
	gASCII_DLE
 = 0x10;

35 cÚ¡ 
	gASCII_DC1
 = 0x11;

36 cÚ¡ 
	gASCII_DC2
 = 0x12;

37 cÚ¡ 
	gASCII_DC3
 = 0x13;

38 cÚ¡ 
	gASCII_DC4
 = 0x14;

39 cÚ¡ 
	gASCII_NAK
 = 0x15;

40 cÚ¡ 
	gASCII_SYN
 = 0x16;

41 cÚ¡ 
	gASCII_ETB
 = 0x17;

42 cÚ¡ 
	gASCII_CAN
 = 0x18;

43 cÚ¡ 
	gASCII_EM
 = 0x19;

44 cÚ¡ 
	gASCII_SUB
 = 0x1a;

45 cÚ¡ 
	gASCII_ESC
 = 0x1b;

46 cÚ¡ 
	gASCII_FS
 = 0x1c;

47 cÚ¡ 
	gASCII_GS
 = 0x1d;

48 cÚ¡ 
	gASCII_RS
 = 0x1e;

49 cÚ¡ 
	gASCII_US
 = 0x1f;

50 cÚ¡ 
	gASCII_DEL
 = 0x7f;

53 cÚ¡ 
	gASCII_SPACE
 = 0x20;

54 cÚ¡ 
	gASCII_EXCLM
 = 0x21;

55 cÚ¡ 
	gASCII_QUOT
 = 0x22;

56 cÚ¡ 
	gASCII_HASH
 = 0x23;

57 cÚ¡ 
	gASCII_DOLLR
 = 0x24;

58 cÚ¡ 
	gASCII_PCT
 = 0x25;

59 cÚ¡ 
	gASCII_AMP
 = 0x26;

60 cÚ¡ 
	gASCII_APOST
 = 0x27;

61 cÚ¡ 
	gASCII_L_RND
 = 0x28;

62 cÚ¡ 
	gASCII_R_RND
 = 0x29;

63 cÚ¡ 
	gASCII_ASTER
 = 0x2a;

64 cÚ¡ 
	gASCII_PLUS
 = 0x2b;

65 cÚ¡ 
	gASCII_COMMA
 = 0x2c;

66 cÚ¡ 
	gASCII_MINUS
 = 0x2d;

67 cÚ¡ 
	gASCII_DOT
 = 0x2e;

68 cÚ¡ 
	gASCII_SLASH
 = 0x2f;

69 cÚ¡ 
	gASCII_0
 = 0x30;

70 cÚ¡ 
	gASCII_1
 = 0x31;

71 cÚ¡ 
	gASCII_2
 = 0x32;

72 cÚ¡ 
	gASCII_3
 = 0x33;

73 cÚ¡ 
	gASCII_4
 = 0x34;

74 cÚ¡ 
	gASCII_5
 = 0x35;

75 cÚ¡ 
	gASCII_6
 = 0x36;

76 cÚ¡ 
	gASCII_7
 = 0x37;

77 cÚ¡ 
	gASCII_8
 = 0x38;

78 cÚ¡ 
	gASCII_9
 = 0x39;

79 cÚ¡ 
	gASCII_COLON
 = 0x3a;

80 cÚ¡ 
	gASCII_SEMI
 = 0x3b;

81 cÚ¡ 
	gASCII_L_ANG
 = 0x3c;

82 cÚ¡ 
	gASCII_EQUAL
 = 0x3d;

83 cÚ¡ 
	gASCII_R_ANG
 = 0x3e;

84 cÚ¡ 
	gASCII_QUES
 = 0x3f;

85 cÚ¡ 
	gASCII_AT
 = 0x40;

86 cÚ¡ 
	gASCII_A
 = 0x41;

87 cÚ¡ 
	gASCII_B
 = 0x42;

88 cÚ¡ 
	gASCII_C
 = 0x43;

89 cÚ¡ 
	gASCII_D
 = 0x44;

90 cÚ¡ 
	gASCII_E
 = 0x45;

91 cÚ¡ 
	gASCII_F
 = 0x46;

92 cÚ¡ 
	gASCII_G
 = 0x47;

93 cÚ¡ 
	gASCII_H
 = 0x48;

94 cÚ¡ 
	gASCII_I
 = 0x49;

95 cÚ¡ 
	gASCII_J
 = 0x4a;

96 cÚ¡ 
	gASCII_K
 = 0x4b;

97 cÚ¡ 
	gASCII_L
 = 0x4c;

98 cÚ¡ 
	gASCII_M
 = 0x4d;

99 cÚ¡ 
	gASCII_N
 = 0x4e;

100 cÚ¡ 
	gASCII_O
 = 0x4f;

101 cÚ¡ 
	gASCII_P
 = 0x50;

102 cÚ¡ 
	gASCII_Q
 = 0x51;

103 cÚ¡ 
	gASCII_R
 = 0x52;

104 cÚ¡ 
	gASCII_S
 = 0x53;

105 cÚ¡ 
	gASCII_T
 = 0x54;

106 cÚ¡ 
	gASCII_U
 = 0x55;

107 cÚ¡ 
	gASCII_V
 = 0x56;

108 cÚ¡ 
	gASCII_W
 = 0x57;

109 cÚ¡ 
	gASCII_X
 = 0x58;

110 cÚ¡ 
	gASCII_Y
 = 0x59;

111 cÚ¡ 
	gASCII_Z
 = 0x5a;

112 cÚ¡ 
	gASCII_L_SQU
 = 0x5b;

113 cÚ¡ 
	gASCII_B_SSH
 = 0x5c;

114 cÚ¡ 
	gASCII_R_SQU
 = 0x5d;

115 cÚ¡ 
	gASCII_CARET
 = 0x5e;

116 cÚ¡ 
	gASCII_UNDER
 = 0x5f;

117 cÚ¡ 
	gASCII_ACCNT
 = 0x60;

118 cÚ¡ 
	gASCII_a
 = 0x61;

119 cÚ¡ 
	gASCII_b
 = 0x62;

120 cÚ¡ 
	gASCII_c
 = 0x63;

121 cÚ¡ 
	gASCII_d
 = 0x64;

122 cÚ¡ 
	gASCII_e
 = 0x65;

123 cÚ¡ 
	gASCII_f
 = 0x66;

124 cÚ¡ 
	gASCII_g
 = 0x67;

125 cÚ¡ 
	gASCII_h
 = 0x68;

126 cÚ¡ 
	gASCII_i
 = 0x69;

127 cÚ¡ 
	gASCII_j
 = 0x6a;

128 cÚ¡ 
	gASCII_k
 = 0x6b;

129 cÚ¡ 
	gASCII_l
 = 0x6c;

130 cÚ¡ 
	gASCII_m
 = 0x6d;

131 cÚ¡ 
	gASCII_n
 = 0x6e;

132 cÚ¡ 
	gASCII_o
 = 0x6f;

133 cÚ¡ 
	gASCII_p
 = 0x70;

134 cÚ¡ 
	gASCII_q
 = 0x71;

135 cÚ¡ 
	gASCII_r
 = 0x72;

136 cÚ¡ 
	gASCII_s
 = 0x73;

137 cÚ¡ 
	gASCII_t
 = 0x74;

138 cÚ¡ 
	gASCII_u
 = 0x75;

139 cÚ¡ 
	gASCII_v
 = 0x76;

140 cÚ¡ 
	gASCII_w
 = 0x77;

141 cÚ¡ 
	gASCII_x
 = 0x78;

142 cÚ¡ 
	gASCII_y
 = 0x79;

143 cÚ¡ 
	gASCII_z
 = 0x7a;

144 cÚ¡ 
	gASCII_L_SCO
 = 0x7b;

145 cÚ¡ 
	gASCII_VBAR
 = 0x7c;

146 cÚ¡ 
	gASCII_R_SCO
 = 0x7d;

147 cÚ¡ 
	gASCII_TILDE
 = 0x7e;

	@common/src/cmd.cpp

8 
	~<sys/ioùl.h
>

9 
	~<sys/¡©.h
>

10 
	~<sys/ty³s.h
>

11 
	~<pwd.h
>

12 
	~<uni¡d.h
>

13 
	~<‹rmios.h
>

14 
	~<dœ’t.h
>

15 
	~<c¡dlib
>

16 
	~<c¡ršg
>

17 
	~<iomª
>

19 
	~"ascii.h
"

20 
	~"vt100.h
"

21 
	~"cmd.h
"

23 
usšg
 
Çme¥aû
 
	g¡d
;

24 
usšg
 
Çme¥aû
 
	gCommÚNs
;

26 
¡ršg
 
	gCmdMgr
::
	$ex·ndV¬
(cÚ¡ 
¡ršg
 &
¡r
) const {

27 
¡ršg
 
exp
 = 
¡r
;

28 
size_t
 
i
 = 0; i < 
exp
.
	`size
(); ++i) {

29 ià(
exp
[
i
] =ğ
ASCII_DOLLR
) {

30 
size_t
 
j
 = 
i
 + 1;

31 ià(
j
 < 
exp
.
	`size
(è&&ƒxp[j] =ğ
ASCII_L_SCO
)

32 
j
++;

33 
¡ršg
 
v¬
 = "";

34 
	`isLeg®V¬Ch¬
(
exp
[
j
])) {

35 
v¬
 +ğ
exp
[
j
];

36 
j
++;

38 
m­
<
¡ršg
, sŒšg>::
cÚ¡_™”©Ü
 
™
 = 
v¬M­_
.
	`fšd
(
v¬
);

39 
¡ršg
 
»p
 = 
™
 =ğ
v¬M­_
.
	`’d
(è? "" : it->
£cÚd
;

40 ià(
»p
.
	`size
() == 0)

41 ià(
	`g‘’v
(
v¬
.
	`c_¡r
()))

42 
»p
 = 
	`g‘’v
(
v¬
.
	`c_¡r
());

43 ià(
j
 < 
exp
.
	`size
(è&&ƒxp[j] =ğ
ASCII_R_SCO
)

44 
j
++;

45 
exp
.
	`»¶aû
(
i
, 
j
 - i, 
»p
);

46 
i
 +ğ
»p
.
	`size
();

49  
exp
;

50 
	}
}

52 
¡ršg
 
	gCmdMgr
::
	$ex·ndHome
(cÚ¡ 
¡ršg
 &
·th
) const {

53 
¡ršg
 
exp
 = 
·th
;

54 
size_t
 
i
 = 0; i < 
exp
.
	`size
(); ++i) {

55 ià(
exp
[
i
] == '~') {

56 
size_t
 
j
 = 
i
 + 1;

57 
j
 < 
exp
.
	`size
(è&& 
	`isLeg®V¬Ch¬
(exp[j]))

58 
j
++;

59 
¡ršg
 
uÇme
 = 
exp
.
	`sub¡r
(
i
, 
j
 - i);

60 
·sswd
 *
´ofe
 = 
NULL
;

61 ià(
uÇme
.
	`size
() == 1)

62 
´ofe
 = 
	`g‘pwuid
(
	`g‘uid
());

64 
´ofe
 = 
	`g‘pwÇm
(
uÇme
.
	`sub¡r
(1).
	`c_¡r
());

65 ià(
´ofe
) {

66 
exp
.
	`»¶aû
(
i
, 
j
 - i, 
´ofe
->
pw_dœ
);

67 
i
 +ğ
	`¡¾’
(
´ofe
->
pw_dœ
);

70 
i
 = 
j
;

73  
exp
;

74 
	}
}

76 
	gCmdMgr
::
	$g‘T”mCŞ
() const {

77 
fd
 = 
	`f’o
(
¡dout
);

78 
wšsize
 
ts
;

79 
	`ioùl
(
fd
, 
TIOCGWINSZ
, &
ts
);

80  
ts
.
ws_cŞ
;

81 
	}
}

83 
size_t
 
	gCmdMgr
::
	$cmnP»fix
(cÚ¡ 
¡ršg
 &
s1
, cÚ¡ sŒšg &
s2
) const {

84 
size_t
 
i
 = 0;

85  ; 
i
 < 
s1
.
	`size
(è&& i < 
s2
.size() && s1[i] == s2[i]; ++i)

87  
i
;

88 
	}
}

90 
Cmd
 *
	gCmdMgr
::
	$g‘Cmd
(cÚ¡ 
¡ršg
 &
Çme
) const {

91 ià(
cmdM­_
.
	`fšd
(
Çme
è!ğcmdM­_.
	`’d
())

92  
cmdM­_
.
	`fšd
(
Çme
)->
£cÚd
;

94  
NULL
;

95 
	}
}

97 
	gCmdMgr
::
	$u§ge
(
o¡»am
 &
out
) {

98 
C©M­I‹r
 
cIt
 = 
ÿtM­_
.
	`begš
(); cIˆ!ğÿtM­_.
	`’d
(); ++cIt) {

99 
out
 << 
cIt
->
fœ¡
 << " commªds" << 
’dl
;

100 
size_t
 
maxL’
 = 0;

101 
£t
<
¡ršg
>::
™”©Ü
 
£tIt
 = 
cIt
->
£cÚd
.
	`begš
();

102  ; 
£tIt
 !ğ
cIt
->
£cÚd
.
	`’d
(); ++setIt)

103 ià(
maxL’
 < (*
£tIt
).
	`size
())

104 
maxL’
 = (*
£tIt
).
	`size
();

105 
£tIt
 = 
cIt
->
£cÚd
.
	`begš
();

106 
size_t
 
cmdsP”Lše
 = (size_t)
	`g‘T”mCŞ
(è/ (
maxL’
 + 2);

107 
size_t
 
i
 = 0;

108  ; 
£tIt
 !ğ
cIt
->
£cÚd
.
	`’d
(); ++£tIt, ++
i
) {

109 
out
 << 
	`£tw
(
maxL’
 + 2è<< 
Ëá
 << (*
£tIt
);

110 ià((
i
 + 1è% 
cmdsP”Lše
 == 0)

111 
out
 << 
’dl
;

113 ià(
cIt
->
£cÚd
.
	`size
(è% 
cmdsP”Lše
 != 0)

114 
out
 << 
’dl
;

115 
out
 << 
’dl
;

117 
	}
}

125 
	gCmdMgr
::
	$»gCmd
(cÚ¡ 
¡ršg
 &
ÿt
, 
Cmd
 * cÚ¡ 
cmd
) {

126 
¡ršg
 
Çme
 = 
cmd
->
	`g‘Name
();

127 ià(
cmdM­_
.
	`fšd
(
Çme
è=ğcmdM­_.
	`’d
()) {

128 
cmdM­_
[
Çme
] = 
cmd
;

129 ià(
ÿtM­_
.
	`fšd
(
ÿt
è=ğÿtM­_.
	`’d
()) {

130 
£t
<
¡ršg
> 
cmdSŒS‘
;

131 
cmdSŒS‘
.
	`š£¹
(
Çme
);

132 
ÿtM­_
[
ÿt
] = 
cmdSŒS‘
;

135 
ÿtM­_
.
	`fšd
(
ÿt
)->
£cÚd
.
	`š£¹
(
Çme
);

138 
û¼
 << "**ERROR CmdMgr::»gCmd(): Thcommªd `" << 
Çme
;

139 
û¼
 << "' ha ®»ady b“À»gi¡”ed" << 
’dl
;

140 
”rÜ_
 = 
E_EXIST
;

142 
	}
}

150 
	gCmdMgr
::
	$£tStdš
() const {

151 
fd
 = 
	`f’o
(
¡dš
);

152 
‹rmios
 
tcæags
;

153 
	`tcg‘©Œ
(
fd
, &
tcæags
);

154 
tcæags
.
c_læag
 &ğ~(
ICANON
 | 
ECHO
);

155 
	`tc£‰r
(
fd
, 
TCSANOW
, &
tcæags
);

156 
	}
}

164 
	gCmdMgr
::
	$»£tStdš
() const {

165 
fd
 = 
	`f’o
(
¡dš
);

166 
‹rmios
 
tcæags
;

167 
	`tcg‘©Œ
(
fd
, &
tcæags
);

168 
tcæags
.
c_læag
 |ğ
ICANON
 | 
ECHO
;

169 
	`tc£‰r
(
fd
, 
TCSANOW
, &
tcæags
);

170 
	}
}

178 
	gveùÜ
<
	g¡ršg
> 
	gCmdMgr
::
	$g‘DœCts
(cÚ¡ 
¡ršg
 &
dœSŒ
) const {

179 
veùÜ
<
¡ršg
> 
ùs
;

180 
DIR
 *
dœ
;

181 
dœ’t
 *
dœCts
;

182 ià((
dœ
 = 
	`İ’dœ
(
dœSŒ
.
	`c_¡r
())è!ğ
NULL
) {

183 (
dœCts
 = 
	`»addœ
(
dœ
)è!ğ
NULL
) {

184 
¡ršg
 
™em
 = 
	`¡ršg
(
dœCts
->
d_Çme
);

185 ià(
™em
 != "." && item != "..")

186 
ùs
.
	`push_back
(
	`¡ršg
(
dœCts
->
d_Çme
));

188 
	`şo£dœ
(
dœ
);

190  
ùs
;

191 
	}
}

200 
	gCmdMgr
::
ResuÉ
 
CmdMgr
::
	$»ad
() {

201 
	`£tStdš
();

204 
cout
 << 
VT100_ARM_ON
 << 
VT100_CSRS
 << 
æush
;

207 
ch
 = -1;

208 
cmdSŒ_
 = "";

209 
c¤Pos_
 = 0;

210 
maxPos_
 = 
´om±_
.
	`size
();

211 
cmdHisPŒ_
 = 
cmdHis_
.
	`size
();

212 
¡ršg
 
cmdSŒBak
 = "";

213 
size_t
 
c¤PosBak
 = 0;

214 
	`»äesh
();

215 
ch
 !ğ
ASCII_LF
) {

216 
ch
 = 
	`g‘ch¬
();

218 ià(
ch
 >ğ
ASCII_MIN_PR
 && ch <ğ
ASCII_MAX_PR
) {

219 
cmdSŒ_
.
	`š£¹
(cmdSŒ_.
	`begš
(è+ 
c¤Pos_
, 
ch
);

220 
c¤Pos_
++;

221 
	`»äesh
();

224 ià(
ch
 < 
ASCII_MIN_PR
 || ch > 
ASCII_MAX_PR
) {

225 
ch
) {

239 
ASCII_DEL
:

240 ià(
c¤Pos_
 > 0) {

241 
c¤Pos_
--;

242 
cmdSŒ_
.
	`”a£
(cmdSŒ_.
	`begš
(è+ 
c¤Pos_
);

243 
	`»äesh
();

247 
ASCII_BS
:

248 ià(
c¤Pos_
 > 0) {

249 
c¤Pos_
--;

250 
cmdSŒ_
.
	`”a£
(cmdSŒ_.
	`begš
(è+ 
c¤Pos_
);

251 
	`»äesh
();

255 
ASCII_HT
:

256 
	`autoCm¶t
();

257 
	`»äesh
();

260 
ASCII_ESC
:

261 
ch1
, 
ch2
;

262 
ch1
 = 
	`g‘ch¬
()) {

263 
ASCII_L_SQU
:

264 
ch2
 = 
	`g‘ch¬
()) {

266 
ASCII_A
:

267 ià(
cmdHisPŒ_
 =ğ
cmdHis_
.
	`size
()) {

268 
cmdSŒBak
 = 
cmdSŒ_
;

269 
c¤PosBak
 = 
c¤Pos_
;

271 ià(
cmdHisPŒ_
 > 0) {

272 
cmdHisPŒ_
--;

273 
cmdSŒ_
 = 
cmdHis_
[
cmdHisPŒ_
];

274 
c¤Pos_
 = 
cmdHis_
[
cmdHisPŒ_
].
	`size
();

276 
	`»äesh
();

278 
ASCII_B
:

279 ià(
cmdHisPŒ_
 + 1 < 
cmdHis_
.
	`size
()) {

280 
cmdHisPŒ_
++;

281 
cmdSŒ_
 = 
cmdHis_
[
cmdHisPŒ_
];

282 
c¤Pos_
 = 
cmdHis_
[
cmdHisPŒ_
].
	`size
();

285 
cmdHisPŒ_
 = 
cmdHis_
.
	`size
();

286 
cmdSŒ_
 = 
cmdSŒBak
;

287 
c¤Pos_
 = 
c¤PosBak
;

289 
	`»äesh
();

291 
ASCII_C
:

292 ià(
c¤Pos_
 < 
cmdSŒ_
.
	`size
()) {

293 
c¤Pos_
++;

294 
	`»äesh
();

297 
ASCII_D
:

298 ià(
c¤Pos_
 > 0) {

299 
c¤Pos_
--;

300 
	`»äesh
();

305 
ASCII_1
:

306 
	`g‘ch¬
();

307 
c¤Pos_
 = 0;

308 
	`»äesh
();

310 
ASCII_3
:

311 
	`g‘ch¬
();

312 ià(
c¤Pos_
 < 
cmdSŒ_
.
	`size
()) {

313 
cmdSŒ_
.
	`”a£
(cmdSŒ_.
	`begš
()

314 + 
c¤Pos_
);

315 
	`»äesh
();

318 
ASCII_4
:

319 
	`g‘ch¬
();

320 
c¤Pos_
 = 
cmdSŒ_
.
	`size
();

321 
	`»äesh
();

323 
ASCII_2
:

324 
ASCII_5
:

325 
ASCII_6
:

326 
	`g‘ch¬
();

330 #ifdeà
DEBUG_MODE


331 
cout
 << 
’dl
 << 
ch1
 << " ";

332 
cout
 << 
ch2
 << 
’dl
;

338 
ASCII_O
:

340 ià((
ch2
 = 
	`g‘ch¬
()è=ğ
ASCII_H
)

341 
c¤Pos_
 = 0;

342 ià(
ch2
 =ğ
ASCII_F
)

343 
c¤Pos_
 = 
cmdSŒ_
.
	`size
();

344 
	`»äesh
();

348 #ifdeà
DEBUG_MODE


349 
cout
 << 
’dl
 << 
ch1
 <<ƒndl;

358 ià(
ch
 !ğ
ASCII_LF
)

359 
ch
 = -1;

361 
cout
 << 
’dl
;

363 
	`»£tStdš
();

365  
	`exec
(
cmdSŒ_
);

366 
	}
}

376 
	gCmdMgr
::
	$»äesh
() {

378 ià(
´om±_
.
	`size
(è+ 
cmdSŒ_
.size(è> 
maxPos_
) {

379 
size_t
 
nLšeP»v
 = 
maxPos_
 / (size_t)
	`g‘T”mCŞ
();

380 
maxPos_
 = 
´om±_
.
	`size
(è+ 
cmdSŒ_
.size();

381 
size_t
 
nLšeCur
 = 
maxPos_
 / (size_t)
	`g‘T”mCŞ
();

382 
size_t
 
i
 = 0; i < 
nLšeCur
 - 
nLšeP»v
; ++i)

383 
cout
 << 
VT100_SCRU
;

387 
size_t
 
nRow
 = 
maxPos_
 / (size_t)
	`g‘T”mCŞ
();

388 
cout
 << 
VT100_CSRR
;

389 
size_t
 
i
 = 0; i < 
nRow
; ++i)

390 
cout
 << 
VT100_CSRU
;

391 
cout
 << 
VT100_ERSD
 << 
æush
;

394 
cŞÜ_
) {

395 
BLACK
:

396 
cout
 << 
ANSI_BLACK
;

398 
RED
:

399 
cout
 << 
ANSI_RED
;

401 
GREEN
:

402 
cout
 << 
ANSI_GREEN
;

404 
YELLOW
:

405 
cout
 << 
ANSI_YELLOW
;

407 
BLUE
:

408 
cout
 << 
ANSI_BLUE
;

410 
PURPLE
:

411 
cout
 << 
ANSI_PURPLE
;

413 
CYAN
:

414 
cout
 << 
ANSI_CYAN
;

416 
WHITE
:

417 
cout
 << 
ANSI_WHITE
;

420 
cout
 << 
ANSI_WHITE
;

423 
cout
 << 
´om±_
 << 
ANSI_RESET
 << 
cmdSŒ_
;

426 
size_t
 
c¤L’
 = 
´om±_
.
	`size
(è+ 
c¤Pos_
;

427 
size_t
 
row
 = 
nRow
 - 
c¤L’
 / (size_t)
	`g‘T”mCŞ
();

428 
size_t
 
cŞ
 = 
c¤L’
 % (size_t)
	`g‘T”mCŞ
();

429 
cout
 << 
VT100_CSRR
;

430 
size_t
 
i
 = 0; i < 
row
; ++i)

431 
cout
 << 
VT100_CSRU
;

432 
size_t
 
i
 = 0; i < 
cŞ
; ++i)

433 
cout
 << 
VT100_CSRF
;

435 
cout
 << 
æush
;

436 
	}
}

446 
	gveùÜ
<
	g¡ršg
> 
	gCmdMgr
::
	$·r£
(cÚ¡ 
¡ršg
 &
cmdSŒ
) const {

447 
ch
;

448 
size_t
 
i
 = 0;

449 
¡ršg
 
¡r
 = "";

450 
boŞ
 
šQuÙ
 = 
çl£
;

451 
veùÜ
<
¡ršg
> 
¬gv
;

452 
i
 < 
cmdSŒ
.
	`size
()) {

453 
ch
 = 
cmdSŒ
[
i
];

456 ià(
ch
 =ğ
comm’t_
) {

457 ià(
¡r
 != "")

458 
¬gv
.
	`push_back
(
¡r
);

459  
¬gv
;

463 ià(
ch
 =ğ
ASCII_QUOT
)

464 
šQuÙ
 = inQuÙ ? 
çl£
 : 
Œue
;

467 ià(
ch
 =ğ
ASCII_R_ANG
 && !
šQuÙ
) {

468 ià(
¡r
 != "") {

469 
¬gv
.
	`push_back
(
¡r
);

470 
¡r
 = "";

472 ià(
i
 + 1 < 
cmdSŒ
.
	`size
(è&& cmdSŒ[˜+ 1] =ğ
ASCII_R_ANG
) {

473 
¬gv
.
	`push_back
(">>");

474 
i
 += 2;

477 
¬gv
.
	`push_back
(">");

478 
i
++;

484 ià((
ch
 =ğ
ASCII_SPACE
 || ch =ğ
ASCII_HT
 || ch =ğ
ASCII_LF


485 || 
ch
 =ğ
ASCII_QUOT
è&& !
šQuÙ
) {

486 ià(
¡r
 != "") {

487 
¬gv
.
	`push_back
(
¡r
);

488 
¡r
 = "";

490 
i
++;

495 ià(
ch
 !ğ
ASCII_QUOT
)

496 
¡r
 +ğ
ch
;

498 
i
++;

501 ià(
¡r
 != "")

502 
¬gv
.
	`push_back
(
¡r
);

504  
¬gv
;

505 
	}
}

516 
	gCmdMgr
::
	$autoCm¶t
() {

517 
veùÜ
<
¡ršg
> 
¬gv
 = 
	`·r£
(
cmdSŒ_
.
	`sub¡r
(0, 
c¤Pos_
));

519 
boŞ
 
isCmd
 = 
¬gv
.
	`size
() == 0

520 || (
¬gv
.
	`size
(è=ğ1 && 
cmdSŒ_
[
c¤Pos_
 - 1] != ' ');

521 
boŞ
 
isO±
 = 
¬gv
.
	`size
(è> 1 && 
cmdSŒ_
[
c¤Pos_
 - 1] != ' '

522 && 
¬gv
[¬gv.
	`size
() - 1][0] == '-'

523 && 
cmdM­_
.
	`couÁ
(
¬gv
[0]);

524 
boŞ
 
isV¬
 = 
¬gv
.
	`size
(è> 1 && 
cmdSŒ_
[
c¤Pos_
 - 1] != ' '

525 && 
¬gv
[¬gv.
	`size
() - 1][0] == '$'

526 && 
¬gv
[¬gv.
	`size
(è- 1].
	`fšd
('}'è=ğ
¡ršg
::
Åos


527 && 
¬gv
[¬gv.
	`size
(è- 1].
	`fšd
('/'è=ğ
¡ršg
::
Åos
;

528 
boŞ
 
isFe
 = 
çl£
;

530 
veùÜ
<
¡ršg
> 
cddts
;

531 
¡ršg
 
´e
;

532 
boŞ
 
isLÚg
;

533 ià(
isCmd
) {

534 
´e
 = 
¬gv
.
	`size
() == 0 ? "" :‡rgv[0];

537 
CmdM­I‹r
 
™
 = 
cmdM­_
.
	`begš
(); iˆ!ğcmdM­_.
	`’d
(); ++it) {

538 
¡ršg
 
cmd
 = 
™
->
fœ¡
;

539 ià(
´e
 =ğ"" ||…».
	`com·»
(
cmd
.
	`sub¡r
(0,…».
	`size
())) == 0)

540 
cddts
.
	`push_back
(
cmd
);

543 ià(
isO±
) {

544 
Cmd
 *
cmd
 = 
cmdM­_
.
	`fšd
(
¬gv
[0])->
£cÚd
;

545 
isLÚg
 = 
¬gv
[¬gv.
	`size
() - 1].size() > 1

546 && 
¬gv
[¬gv.
	`size
() - 1][1] == '-';

547 ià(
isLÚg
)

548 
´e
 = 
¬gv
[¬gv.
	`size
(è- 1].
	`sub¡r
(2);

550 
´e
 = 
¬gv
[¬gv.
	`size
(è- 1].
	`sub¡r
(1);

551 
size_t
 
i
 = 0; i < 
cmd
->
İtMgr_
.
	`g‘NFÏg
(); ++i) {

552 
¡ršg
 
æag
 = 
cmd
->
İtMgr_
.
	`g‘FÏg
(
i
);

553 ià(
´e
 =ğ"" ||…».
	`com·»
(
æag
.
	`sub¡r
(0,…».
	`size
())) == 0) {

554 ià(
æag
.
	`size
(è=ğ1 && !
isLÚg
)

555 
cddts
.
	`push_back
(
æag
);

556 ià(
æag
.
	`size
(è> 1 && 
isLÚg
)

557 
cddts
.
	`push_back
(
æag
);

561 ià(
isV¬
) {

562 
isLÚg
 = 
¬gv
[¬gv.
	`size
() - 1].size() > 1

563 && 
¬gv
[¬gv.
	`size
() - 1][1] == '{';

564 ià(
isLÚg
)

565 
´e
 = 
¬gv
[¬gv.
	`size
(è- 1].
	`sub¡r
(2);

567 
´e
 = 
¬gv
[¬gv.
	`size
(è- 1].
	`sub¡r
(1);

568 
V¬M­I‹r
 
™
 = 
v¬M­_
.
	`begš
(); iˆ!ğv¬M­_.
	`’d
(); ++it) {

569 
¡ršg
 
v¬
 = 
™
->
fœ¡
;

570 ià(
´e
 =ğ"" ||…».
	`com·»
(
v¬
.
	`sub¡r
(0,…».
	`size
())) == 0)

571 
cddts
.
	`push_back
(
v¬
);

576 
¡ršg
 
dœSŒ
;

577 ià(
cmdSŒ_
[
c¤Pos_
 - 1] != ' ') {

578 
¡ršg
 
·th
 = 
¬gv
[¬gv.
	`size
() - 1];

579 ià(
·th
.
	`fšd_Ï¡_of
('/'è=ğ·th.
Åos
) {

580 
dœSŒ
 = "./";

581 
´e
 = 
·th
;

584 
dœSŒ
 = 
·th
.
	`sub¡r
(0,…©h.
	`fšd_Ï¡_of
('/'));

585 
dœSŒ
 = 
	`ex·ndV¬
(dirStr);

586 
dœSŒ
 = 
	`ex·ndHome
(dirStr) + '/';

587 
´e
 = 
·th
.
	`sub¡r
Õ©h.
	`fšd_Ï¡_of
('/') + 1);

592 
dœSŒ
 = "./";

593 
´e
 = "";

597 
veùÜ
<
¡ršg
> 
ùs
 = 
	`g‘DœCts
(
dœSŒ
);

598 
size_t
 
i
 = 0; i < 
ùs
.
	`size
(); ++i) {

599 
¡ršg
 
fe
 = 
ùs
[
i
];

600 ià(
´e
 =ğ"" ||…».
	`com·»
(
fe
.
	`sub¡r
(0,…».
	`size
())) == 0) {

601 
¡©
 
fSt
;

602 
¡ršg
 
·th
 = 
dœSŒ
 + "/" + 
fe
;

603 ià(
	`¡©
(
·th
.
	`c_¡r
(), &
fSt
) == 0

604 && 
	`S_ISDIR
(
fSt
.
¡_mode
) != 0)

605 
fe
 += "/";

607 
isFe
 = 
Œue
;

608 
cddts
.
	`push_back
(
fe
);

614 
size_t
 
nAddedCh¬
 = 0;

615 
size_t
 
cmnPos
 = 0;

616 
¡ršg
 
cmn
 = 
cddts
.
	`size
() > 0 ? cddts[0] : "";

617 
size_t
 
maxCddtL’
 = 
cddts
.
	`size
() > 0 ? cddts[0].size() : 0;

618 
size_t
 
i
 = 1; i < 
cddts
.
	`size
(); ++i) {

619 ià(
cddts
[
i
].
	`size
(è> 
maxCddtL’
)

620 
maxCddtL’
 = 
cddts
[
i
].
	`size
();

621 
cmnPos
 = 
	`cmnP»fix
(
cmn
, 
cddts
[
i
]);

622 
cmn
 = cmn.
	`sub¡r
(0, 
cmnPos
);

624 ià(
cmn
.
	`size
() != 0) {

625 
cmn
 = cmn.
	`sub¡r
(
´e
.
	`size
());

626 
cmdSŒ_
.
	`š£¹
(
c¤Pos_
, 
cmn
);

627 
c¤Pos_
 +ğ
cmn
.
	`size
();

628 
nAddedCh¬
 +ğ
cmn
.
	`size
();

632 ià(
cddts
.
	`size
() == 1) {

633 ià(
isCmd
 || 
isO±
 || 
isV¬
 || 
isFe
) {

634 
cmdSŒ_
.
	`š£¹
(
c¤Pos_
, " ");

635 
c¤Pos_
++;

636 
nAddedCh¬
++;

641 ià(
cddts
.
	`size
() > 1) {

642 
cout
 << 
VT100_CSRR
 << 
VT100_SCRU
 << 
æush
;

643 
size_t
 
fesP”Lše
 = (size_t)
	`g‘T”mCŞ
(è/ (
maxCddtL’
 + 2);

644 
size_t
 
i
 = 0; i < 
cddts
.
	`size
(); ++i) {

645 
cout
 << 
	`£tw
(
maxCddtL’
 + 2è<< 
Ëá
 << 
cddts
[
i
];

646 ià((
i
 + 1è% 
fesP”Lše
 == 0)

647 
cout
 << 
’dl
;

649 ià(
cddts
.
	`size
(è% 
fesP”Lše
 != 0)

650 
cout
 << 
’dl
;

651 
size_t
 
nLšeP»v
 = 
maxPos_
 / (size_t)
	`g‘T”mCŞ
();

652 
size_t
 
nLšeCur
 = (
maxPos_
 + 
nAddedCh¬
è/ (size_t)
	`g‘T”mCŞ
();

653 
size_t
 
i
 = 0; i < 
nLšeP»v
 - (
nLšeCur
 -‚LinePrev); ++i)

654 
cout
 << 
VT100_SCRU
 << 
æush
;

655 
cout
 << 
VT100_CSRS
 << 
æush
;

657 
	}
}

667 
	gCmdMgr
::
ResuÉ
 
CmdMgr
::
	$exec
(cÚ¡ 
¡ršg
 &
cmdSŒ
) {

668 
veùÜ
<
¡ršg
> 
¬gv
 = 
	`·r£
(
cmdSŒ
);

670 
ResuÉ
 
»s
 = 
NOP
;

673 
size_t
 
i
 = 1; i < 
¬gv
.
	`size
(); ++i)

674 
¬gv
[
i
] = 
	`ex·ndV¬
(argv[i]);

677 
size_t
 
i
 = 1; i < 
¬gv
.
	`size
(); ++i)

678 
¬gv
[
i
] = 
	`ex·ndHome
(argv[i]);

681 
boŞ
 
isRedœeùed
 = 
çl£
;

682 
¡doutFd
;

683 
åos_t
 
¡doutPos
;

684 ià(
¬gv
.
	`size
() >= 2

685 && (
¬gv
[¬gv.
	`size
() - 2] == ">" ||‡rgv[argv.size() - 2] == ">>")) {

686 
¡ršg
 
mode
 = 
¬gv
[¬gv.
	`size
() - 2] == ">" ? "w" : "a";

687 ià(
	`£tStdoutRedœ
(
¬gv
[¬gv.
	`size
(è- 1], 
mode
, 
¡doutFd
, 
¡doutPos
))

688 
isRedœeùed
 = 
Œue
;

689 
¬gv
.
	`”a£
×rgv.
	`’d
() - 2,‡rgv.end());

693 ià(
¬gv
.
	`size
() > 0) {

694 
cmdHis_
.
	`push_back
(
cmdSŒ
);

696 
CmdM­I‹r
 
™
 = 
cmdM­_
.
	`fšd
(
¬gv
[0]);

697 ià(
™
 =ğ
cmdM­_
.
	`’d
()) {

698 
”rÜSŒ_
 = 
¬gv
[0];

699 
”rÜ_
 = 
E_NOT_REG
;

700 
»s
 = 
NOT_EXIST
;

703 
»s
 = 
™
->
£cÚd
->
	`exec
(
¬gv
è? (
ex™_
 ? 
EXIT
 : 
SUCCESS
è: 
FAIL
;

707 ià(
isRedœeùed
)

708 
	`»£tStdout
(
¡doutFd
, 
¡doutPos
);

710  
»s
;

711 
	}
}

715 
boŞ
 
	gCmdMgr
::
	$£tStdoutRedœ
(cÚ¡ 
¡ršg
 &
âame
, cÚ¡ sŒšg &
mode
,

716 &
¡doutFd
, 
åos_t
 &
¡doutPos
) const {

717 
¡doutFd
 = 
	`dup
(
	`f’o
(
¡dout
));

718 
	`fg‘pos
(
¡dout
, &
¡doutPos
);

719 
FILE
 *
åŒ
 = 
	`fİ’
(
âame
.
	`c_¡r
(), 
mode
.c_str());

720 ià(
åŒ
) {

721 
	`fşo£
(
åŒ
);

722 ià(!
	`äeİ’
(
âame
.
	`c_¡r
(), 
mode
.c_¡r(), 
¡dout
)) {

723 
û¼
 << "**WARN CmdMgr::£tStdoutRedœ(): f`" << 
âame
;

724 
û¼
 << "' cªnÙ bwr™‹n" << 
’dl
;

725  
çl£
;

729 
û¼
 << "**WARN CmdMgr::£tStdoutRedœ(): f`" << 
âame
 << "' ";

730 
û¼
 << "ÿÂÙ bwr™‹n" << 
’dl
;

731  
çl£
;

733  
Œue
;

734 
	}
}

736 
	gCmdMgr
::
	$»£tStdout
(cÚ¡ &
¡doutFd
, cÚ¡ 
åos_t
 &
¡doutPos
) const {

737 
	`fæush
(
¡dout
);

738 
	`dup2
(
¡doutFd
, 
	`f’o
(
¡dout
));

739 
	`şo£
(
¡doutFd
);

740 
	`ş—»¼
(
¡dout
);

741 
	`f£os
(
¡dout
, &
¡doutPos
);

742 
	}
}

	@common/src/cmd.h

9 #iâdeà
_COMMON_CMD_H_


10 
	#_COMMON_CMD_H_


	)

12 
	~"ascii.h
"

13 
	~"g‘_İt.h
"

15 
	~<c¡dio
>

17 
Çme¥aû
 
	gCommÚNs
 {

20 
şass
 
	gCmd
;

21 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, std::
	t£t
<¡d::¡ršg> > 
	tC©M­
;

22 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, std::¡ršg> 
	tV¬M­
;

23 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tCmd
 *> 
	tCmdM­
;

24 
	gC©M­
::
	t™”©Ü
 
	tC©M­I‹r
;

25 
	gV¬M­
::
	t™”©Ü
 
	tV¬M­I‹r
;

26 
	gCmdM­
::
	t™”©Ü
 
	tCmdM­I‹r
;

29 şas 
	cCmd
 {

30 
	gpublic
:

31 
Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

32 
	gvœtu®
 ~
Cmd
();

33 
vœtu®
 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
) = 0;

34 
	g¡d
::
¡ršg
 
g‘Name
() const;

35 
O±Mgr
 
	gİtMgr_
;

38 şas 
	cCmdMgr
 {

39 
	gpublic
:

41 
	eResuÉ
 { 
EXIT
 = -1, 
	gSUCCESS
, 
	gFAIL
, 
	gNOT_EXIST
, 
	gNOP
 };

42 
	eE¼Ü
 { 
	gE_EXIST
 = 0, 
	gE_NOT_REG
, 
	gE_INVALID_VAR
 };

43 
	eCŞÜ
 { 
	gBLACK
 = 0, 
	gRED
, 
	gGREEN
, 
	gYELLOW
, 
	gBLUE
, 
	gPURPLE
, 
	gCYAN
,

44 
	gWHITE
 };

46 
CmdMgr
();

47 ~
CmdMgr
();

49 
»gCmd
(cÚ¡ 
¡d
::
¡ršg
 &
ÿt
, 
Cmd
 * cÚ¡ 
cmd
);

50 
Cmd
 *
g‘Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) const;

51 
ResuÉ
 
»ad
();

52 
ResuÉ
 
exec
(cÚ¡ 
¡d
::
¡ršg
 &
cmdSŒ
);

53 
£tComm’t
(cÚ¡ &
ch
);

54 
£tProm±
(cÚ¡ 
¡d
::
¡ršg
 &
¡r
);

55 
£tCŞÜ
(cÚ¡ 
CŞÜ
 &
cŞÜ
);

56 
£tEx™
(cÚ¡ 
boŞ
 &
ex™
);

57 
boŞ
 
addV¬
(cÚ¡ 
¡d
::
¡ršg
 &
v¬
, cÚ¡ std::¡ršg &
¡r
);

58 
V¬M­
 
g‘V¬s
() const;

59 
E¼Ü
 
g‘E¼Ü
() const;

60 
	g¡d
::
¡ršg
 
g‘E¼ÜSŒ
() const;

62 
u§ge
(
¡d
::
o¡»am
 &
out
 = std::
cout
);

64 
	g´iv©e
:

66 
¡d
::
¡ršg
 
ex·ndV¬
(cÚ¡ std::¡ršg &
v¬
) const;

67 
	g¡d
::
¡ršg
 
ex·ndHome
(cÚ¡ 
¡d
::¡ršg &
·th
) const;

68 
boŞ
 
isLeg®V¬
(cÚ¡ 
¡d
::
¡ršg
 &
v¬
) const;

69 
boŞ
 
isLeg®V¬Ch¬
(cÚ¡ &
ch
) const;

72 
£tStdš
() const;

73 
»£tStdš
() const;

76 
boŞ
 
£tStdoutRedœ
(cÚ¡ 
¡d
::
¡ršg
 &
âame
,

77 cÚ¡ 
¡d
::
¡ršg
 &
mode
,

78 &
¡doutFd
,

79 
åos_t
 &
¡doutPos
) const;

80 
»£tStdout
(cÚ¡ &
¡doutFd
,

81 cÚ¡ 
åos_t
 &
¡doutPos
) const;

84 
»äesh
();

85 
autoCm¶t
();

86 
g‘T”mCŞ
() const;

87 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
g‘DœCts
(cÚ¡ std::¡ršg &
dœSŒ
) const;

88 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
·r£
(cÚ¡ std::¡ršg &
cmdSŒ
) const;

89 
size_t
 
cmnP»fix
(cÚ¡ 
¡d
::
¡ršg
 &
s1
,

90 cÚ¡ 
¡d
::
¡ršg
 &
s2
) const;

93 
	g¡d
::
¡ršg
 
´om±_
;

94 
	gcomm’t_
;

95 
CŞÜ
 
	gcŞÜ_
;

96 
	g¡d
::
¡ršg
 
”rÜSŒ_
;

97 
E¼Ü
 
	g”rÜ_
;

98 
boŞ
 
	gex™_
;

100 
C©M­
 
	gÿtM­_
;

101 
V¬M­
 
	gv¬M­_
;

102 
CmdM­
 
	gcmdM­_
;

103 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
cmdHis_
;

104 
size_t
 
	gcmdHisPŒ_
;

105 
	g¡d
::
¡ršg
 
cmdSŒ_
;

106 
size_t
 
	gc¤Pos_
;

107 
size_t
 
	gmaxPos_
;

112 
šlše
 
	gCmd
::
	$Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) {

113 
İtMgr_
.
	`£tName
(
Çme
);

114 
	}
}

116 
šlše
 
	gCmd
::~
	$Cmd
(è{
	}
}

118 
šlše
 
¡d
::
¡ršg
 
Cmd
::
	$g‘Name
() const {

119  
İtMgr_
.
	`g‘Name
();

120 
	}
}

123 
šlše
 
	gCmdMgr
::
	$CmdMgr
() {

124 
´om±_
 = "cmd> ";

125 
comm’t_
 = '#';

126 
cŞÜ_
 = 
WHITE
;

127 
”rÜ_
 = 
E_EXIST
;

128 
ex™_
 = 
çl£
;

129 
	}
}

131 
šlše
 
	gCmdMgr
::~
	$CmdMgr
(è{
	}
}

133 
šlše
 
CmdMgr
::
	$£tComm’t
(cÚ¡ &
ch
) {

134 
comm’t_
 = 
ch
;

135 
	}
}

137 
šlše
 
	gCmdMgr
::
	$£tProm±
(cÚ¡ 
¡d
::
¡ršg
 &
s
) {

138 
´om±_
 = 
s
;

139 
	}
}

141 
šlše
 
	gCmdMgr
::
	$£tCŞÜ
(cÚ¡ 
CŞÜ
 &
cŞÜ
) {

142 
cŞÜ_
 = 
cŞÜ
;

143 
	}
}

145 
šlše
 
	gCmdMgr
::
	$£tEx™
(cÚ¡ 
boŞ
 &
ex™
) {

146 
ex™_
 = 
ex™
;

147 
	}
}

149 
šlše
 
boŞ
 
	gCmdMgr
::
	$addV¬
(cÚ¡ 
¡d
::
¡ršg
 &
v¬
, cÚ¡ std::¡ršg &
¡r
) {

150 ià(!
	`isLeg®V¬
(
v¬
)) {

151 
”rÜSŒ_
 = 
v¬
;

152 
”rÜ_
 = 
E_INVALID_VAR
;

153  
çl£
;

155 
v¬M­_
[
v¬
] = 
	`ex·ndV¬
(
¡r
);

156  
Œue
;

157 
	}
}

159 
šlše
 
boŞ
 
	gCmdMgr
::
	$isLeg®V¬
(cÚ¡ 
¡d
::
¡ršg
 &
v¬
) const {

160 
size_t
 
i
 = 0; i < 
v¬
.
	`size
(); ++i) {

161 ià(
v¬
[
i
] >ğ
ASCII_0
 && v¬[i] <ğ
ASCII_9
)

163 ià(
v¬
[
i
] >ğ
ASCII_A
 && v¬[i] <ğ
ASCII_Z
)

165 ià(
v¬
[
i
] >ğ
ASCII_a
 && v¬[i] <ğ
ASCII_z
)

167 ià(
v¬
[
i
] =ğ
ASCII_UNDER
)

169  
çl£
;

171  
Œue
;

172 
	}
}

174 
šlše
 
boŞ
 
	gCmdMgr
::
	$isLeg®V¬Ch¬
(cÚ¡ &
ch
) const {

175 ià(
ch
 >ğ
ASCII_0
 && ch <ğ
ASCII_9
)

176  
Œue
;

177 ià(
ch
 >ğ
ASCII_A
 && ch <ğ
ASCII_Z
)

178  
Œue
;

179 ià(
ch
 >ğ
ASCII_a
 && ch <ğ
ASCII_z
)

180  
Œue
;

181 ià(
ch
 =ğ
ASCII_UNDER
)

182  
Œue
;

183  
çl£
;

184 
	}
}

186 
šlše
 
V¬M­
 
	gCmdMgr
::
	$g‘V¬s
() const {

187  
v¬M­_
;

188 
	}
}

190 
šlše
 
	gCmdMgr
::
E¼Ü
 
CmdMgr
::
	$g‘E¼Ü
() const {

191  
”rÜ_
;

192 
	}
}

194 
šlše
 
	g¡d
::
¡ršg
 
CmdMgr
::
	$g‘E¼ÜSŒ
() const {

195  
”rÜSŒ_
;

196 
	}
}

	@common/src/common_test.cpp

8 
	~<c¡dlib
>

9 
	~<sys/times.h
>

11 
usšg
 
Çme¥aû
 
	g¡d
;

13 
	~"tm_u§ge.h
"

14 
	~"g‘_İt.h
"

15 
	~"cmd.h
"

16 
	~"sys_cmd.h
"

18 
usšg
 
Çme¥aû
 
	gCommÚNs
;

20 
š™O±s
(
O±Mgr
 *
mgr
);

21 
š™Cmds
(
CmdMgr
 *
mgr
);

22 
u§ge
(
O±Mgr
 *
mgr
);

24 
	$maš
(
¬gc
, **
¬gv
) {

25 
TmU§ge
 
tmUsg
;

26 
tmUsg
.
	`tÙ®S¹
();

28 
O±Mgr
 *
İtMgr
 = 
Ãw
 OptMgr;

29 
CmdMgr
 *
cmdMgr
 = 
Ãw
 CmdMgr;

31 
	`š™O±s
(
İtMgr
);

32 
	`š™Cmds
(
cmdMgr
);

34 
İtMgr
->
	`·r£
(
¬gc
, 
¬gv
);

35 ià(
İtMgr
->
	`isFÏgS‘
("h")) {

36 
İtMgr
->
	`u§ge
();

37 
	`ex™
(0);

41 
cout
 << "** Thi i thcommÚ…ackag‹¡ bš¬y" << 
’dl
;

42 
cout
 << "** PËa£„•Üˆªy bug tØl™eshamoo. Thªks" << 
’dl
;

43 
CmdMgr
::
ResuÉ
 
»s
 = CmdMgr::
SUCCESS
;

44 
cmdMgr
->
	`£tComm’t
('#');

45 
cmdMgr
->
	`£tProm±
("test> ");

46 
cmdMgr
->
	`£tCŞÜ
(
CmdMgr
::
YELLOW
);

47 
»s
 !ğ
CmdMgr
::
EXIT
) {

48 
»s
 = 
cmdMgr
->
	`»ad
();

49 ià(
»s
 =ğ
CmdMgr
::
NOT_EXIST
) {

50 
û¼
 << "**ERROR maš(): commªd `" << 
cmdMgr
->
	`g‘E¼ÜSŒ
();

51 
û¼
 << "'‚Ù found" << 
’dl
;

54 ià(
»s
 !ğ
CmdMgr
::
NOP
)

55 
cout
 << 
»s
 << 
’dl
;

58 
TmSt
 
tmEnd
;

59 ià(!
tmUsg
.
	`g‘TÙ®U§ge
(
tmEnd
))

60 
û¼
 << "**ERROR maš(): cªnÙ g‘„esourû u§ge" << 
’dl
;

61 
cout
 << "# RuÁimªd memÜy u§ge" << 
’dl
;

62 
cout
 << "# u£¸time: " << ()
tmEnd
.
uTime
 / 1000000.0 << "s" <<
’dl
;

63 
cout
 << "# sy time: " << ()
tmEnd
.
sTime
 / 1000000.0 << "s" <<
’dl
;

64 
cout
 << "#„—Ètime: " << ()
tmEnd
.
rTime
 / 1000000.0 << "s" <<
’dl
;

65 
cout
 << "# cu¸mem: " << ()
tmEnd
.
vmSize
 / 1024.0 << "MB" << 
’dl
;

66 
cout
 << "#…—k mem: " << ()
tmEnd
.
vmP—k
 / 1024.0 << "MB" << 
’dl
;

67 
cout
 << "# difàmem: " << ()
tmEnd
.
vmDiff
 / 1024.0 << "MB" << 
’dl
;

68 
cout
 << 
’dl
;

69 
cout
 << "** Goodbye" << 
’dl
;

72 
	}
}

75 
	$u§ge
(
O±Mgr
 *
mgr
) {

76 
mgr
->
	`u§ge
();

77 
	}
}

79 şas 
	cTe¡L¬geLoİCmd
 : 
public
 
Cmd
 {

80 
public
:

81 
Te¡L¬geLoİCmd
(cÚ¡ 
¡ršg
 &
Çme
);

82 ~
Te¡L¬geLoİCmd
();

84 
boŞ
 
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
);

87 
	gTe¡L¬geLoİCmd
::
	$Te¡L¬geLoİCmd
(cÚ¡ 
¡ršg
 &
Çme
è: 
	$Cmd
(
Çme
) {

88 
İtMgr_
.
	`£tName
("test_large_loop");

89 
İtMgr_
.
	`£tShÜtDes
("evaluate‡†arge†oopoest„untime");

90 
¡ršg
 
des
 = "test_large_loop constructs‡hree-level†oop with size";

91 
des
 += " based onhe integer‡rgument‡nd…erforms‡rithmetic";

92 
des
 += " operations.";

93 
İtMgr_
.
	`£tDes
(
des
);

95 
des
 = "Loop size. Default is 1500 if‚ot set.";

96 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
OPT
, 
des
, "size"));

98 
O±
 *
İt
;

99 
des
 = "Test mode selection ('a' for stuck-at fault, 's' for";

100 
des
 += "†aunch-off-shiftransition fault‡nd 'c' for";

101 
des
 += "†aunch-off-capture.)";

102 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "<a|s|c>");

103 
İt
->
	`addFÏg
("m");

104 
İt
->
	`addFÏg
("x");

105 
İt
->
	`addFÏg
("mode");

106 
İt
->
	`addFÏg
("cool");

107 
İtMgr_
.
	`»gO±
(
İt
);

109 
	}
}

111 
	gTe¡L¬geLoİCmd
::~
	$Te¡L¬geLoİCmd
(è{
	}
}

113 
boŞ
 
Te¡L¬geLoİCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

114 
İtMgr_
.
·r£
(
¬gv
);

115 
	gsize
 = 
İtMgr_
.
g‘NP¬£dArg
() > 0 ?

116 
©oi
(
İtMgr_
.
g‘P¬£dArg
(0).
c_¡r
()) : 1500;

118 
	g»s
 = 0;

119 
	gi
 = 0; i < 
	gsize
; ++i)

120 
	gj
 = 0; j < 
	gsize
; ++j)

121 
	gk
 = 0; k < 
	gsize
; ++k)

122 
	g»s
 +ğ
i
 + 
j
 * 
k
;

124 
	gcout
 << "»suÉ: " << 
	g»s
 << 
	g’dl
;

126  
	gŒue
;

130 
	$š™O±s
(
O±Mgr
 *
mgr
) {

131 
mgr
->
	`£tName
("fan");

132 
mgr
->
	`£tShÜtDes
("An ATPGool based on FAN‡lgorithm");

133 
¡ršg
 
des
 = "fanakes‡n input verilog gate-level‚etlist‡nd";

134 
des
 += "…erformsest generation or fault simulation. Currently";

135 
des
 += " supports stuck-at fault model‡ndransition delay fault";

136 
des
 += " model. Additional functions includeest„elaxation‡nd";

137 
des
 += " SAT-basedest generation.";

138 
mgr
->
	`£tDes
(
des
);

140 
des
 = "Input circuit‚etlist.";

141 
mgr
->
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, 
des
, "circuit_netlist"));

143 
O±
 *
İt
;

144 
des
 = "Test mode selection ('a' for stuck-at fault, 's' for";

145 
des
 += "†aunch-off-shiftransition fault‡nd 'c' for";

146 
des
 += "†aunch-off-capture.)";

147 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "<a|s|c>");

148 
İt
->
	`addFÏg
("m");

149 
İt
->
	`addFÏg
("mode");

150 
mgr
->
	`»gO±
(
İt
);

152 
des
 = "Enable„andom simulation‡ndhe„andom_limit specifieshe";

153 
des
 += " iteration of simulationimes.";

154 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "random_limit");

155 
İt
->
	`addFÏg
("r");

156 
İt
->
	`addFÏg
("random");

157 
mgr
->
	`»gO±
(
İt
);

159 
des
 = "Limitation of dynamic compaction. It specifieshe maximum";

160 
des
 += "‚umber of failingimes. Default = 300. If specified '-1'hen";

161 
des
 += " dynamic compaciton will beurned off. The deterministicest";

162 
des
 += " genration will be disabled if '-2' is specified. Notehat";

163 
des
 += "„andom simulation '-r' option should beurned on orhis";

164 
des
 += " option will be ignored.";

165 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "dynamic_fail_limit");

166 
İt
->
	`addFÏg
("d");

167 
mgr
->
	`»gO±
(
İt
);

169 
des
 = "Limitation of dynamic compaction. It specifieshe maximum";

170 
des
 += "‚umber of compaction fault in one…attern.";

171 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "dynamic_fault_num");

172 
İt
->
	`addFÏg
("D");

173 
mgr
->
	`»gO±
(
İt
);

175 
des
 = "Backtrack†imit ofhe FAN‡lgorithm.";

176 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "backtrack_limit");

177 
İt
->
	`addFÏg
("b");

178 
mgr
->
	`»gO±
(
İt
);

180 
des
 = "Output…atternso…attern_file.";

181 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "pattern_file");

182 
İt
->
	`addFÏg
("f");

183 
mgr
->
	`»gO±
(
İt
);

185 
des
 = "Output undetected faultso undetected_file.";

186 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "undetected_file");

187 
İt
->
	`addFÏg
("u");

188 
mgr
->
	`»gO±
(
İt
);

190 
des
 = "N-detect mode with‚_num detection.";

191 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "n_num");

192 
İt
->
	`addFÏg
("N");

193 
mgr
->
	`»gO±
(
İt
);

195 
des
 = "Enable MT-fill,‡n optional†imit specifieshe†imit of fill";

196 
des
 += "„atio,„ange from 0.0 ~ 1.0.";

197 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "mt_fill_num");

198 
İt
->
	`addFÏg
("a");

199 
mgr
->
	`»gO±
(
İt
);

201 
des
 = "Do‚ot fill don't care bits duringest generation.";

202 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, 
des
, "");

203 
İt
->
	`addFÏg
("x");

204 
mgr
->
	`»gO±
(
İt
);

206 
des
 = "Fault simulation forhe sim_file. Notehat if '-f' option is";

207 
des
 += "‡pplied,he fault dictionary will be dumped.";

208 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "sim_file");

209 
İt
->
	`addFÏg
("y");

210 
mgr
->
	`»gO±
(
İt
);

212 
des
 = "Performest„elaxation on…atterns in„elax_file.";

213 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "relax_file");

214 
İt
->
	`addFÏg
("X");

215 
mgr
->
	`»gO±
(
İt
);

217 
des
 = "At-speed delayest mode. Notehathis only works for";

218 
des
 += "†aunch-off-captureransition faultest.";

219 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, 
des
, "");

220 
İt
->
	`addFÏg
("i");

221 
mgr
->
	`»gO±
(
İt
);

223 
des
 = "Enable SAT-basedest…attern generation.";

224 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, 
des
, "");

225 
İt
->
	`addFÏg
("s");

226 
mgr
->
	`»gO±
(
İt
);

228 
des
 = "Mask PO or PPO inhe mask_file. If it is‚ot specified,‡ll POs";

229 
des
 += "‡nd PPOs will be masked.";

230 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_OPT
, 
des
, "mask_file");

231 
İt
->
	`addFÏg
("M");

232 
mgr
->
	`»gO±
(
İt
);

234 
des
 = "Constraint PI or PPI value inhe constraint_file.";

235 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "constraint_file");

236 
İt
->
	`addFÏg
("c");

237 
mgr
->
	`»gO±
(
İt
);

239 
des
 = "Extract fault†ist from fault_list_file.";

240 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "fault_list_file");

241 
İt
->
	`addFÏg
("l");

242 
mgr
->
	`»gO±
(
İt
);

244 
des
 = "Output‡ verilogest bencho vlog_test_file.";

245 
İt
 = 
Ãw
 
	`O±
(
O±
::
STR_REQ
, 
des
, "vlog_test_file");

246 
İt
->
	`addFÏg
("v");

247 
mgr
->
	`»gO±
(
İt
);

249 
des
 = "Printhis usage.";

250 
İt
 = 
Ãw
 
	`O±
(
O±
::
BOOL
, 
des
, "");

251 
İt
->
	`addFÏg
("h");

252 
İt
->
	`addFÏg
("help");

253 
mgr
->
	`»gO±
(
İt
);

254 
	}
}

257 
	$š™Cmds
(
CmdMgr
 *
mgr
) {

259 
Cmd
 *
bashCmd
 = 
Ãw
 
	`SysBashCmd
("bash");

260 
Cmd
 *
li¡Cmd
 = 
Ãw
 
	`SysLi¡Cmd
("ls");

261 
Cmd
 *
cdCmd
 = 
Ãw
 
	`SysCdCmd
("cd");

262 
Cmd
 *
ÿtCmd
 = 
Ãw
 
	`SysC©Cmd
("cat");

263 
Cmd
 *
pwdCmd
 = 
Ãw
 
	`SysPwdCmd
("pwd");

264 
Cmd
 *
£tCmd
 = 
Ãw
 
	`SysS‘Cmd
("£t", 
mgr
);

265 
Cmd
 *
ex™Cmd
 = 
Ãw
 
	`SysEx™Cmd
("ex™", 
mgr
);

266 
Cmd
 *
qu™Cmd
 = 
Ãw
 
	`SysEx™Cmd
("qu™", 
mgr
);

267 
Cmd
 *
sourûCmd
 = 
Ãw
 
	`SysSourûCmd
("sourû", 
mgr
);

268 
Cmd
 *
h–pCmd
 = 
Ãw
 
	`SysH–pCmd
("h–p", 
mgr
);

269 
mgr
->
	`»gCmd
("Sy¡em", 
bashCmd
);

270 
mgr
->
	`»gCmd
("Sy¡em", 
li¡Cmd
);

271 
mgr
->
	`»gCmd
("Sy¡em", 
cdCmd
);

272 
mgr
->
	`»gCmd
("Sy¡em", 
ÿtCmd
);

273 
mgr
->
	`»gCmd
("Sy¡em", 
pwdCmd
);

274 
mgr
->
	`»gCmd
("Sy¡em", 
£tCmd
);

275 
mgr
->
	`»gCmd
("Sy¡em", 
ex™Cmd
);

276 
mgr
->
	`»gCmd
("Sy¡em", 
qu™Cmd
);

277 
mgr
->
	`»gCmd
("Sy¡em", 
sourûCmd
);

278 
mgr
->
	`»gCmd
("Sy¡em", 
h–pCmd
);

281 
Cmd
 *
‹¡1Cmd
 = 
Ãw
 
	`Te¡L¬geLoİCmd
("test_large_loop");

282 
mgr
->
	`»gCmd
("Te¡", 
‹¡1Cmd
);

283 
	}
}

	@common/src/get_opt.cpp

8 
	~<sys/ioùl.h
>

10 
	~"g‘_İt.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gCommÚNs
;

16 
boŞ
 
	gO±Mgr
::
	$»gArg
(
Arg
 * cÚ¡ 
¬g
) {

17 
¬gs_
.
	`push_back
(
¬g
);

18  
Œue
;

19 
	}
}

22 
boŞ
 
	gO±Mgr
::
	$»gO±
(
O±
 * cÚ¡ 
İt
) {

23 ià(
İt
->
æags_
.
	`size
() == 0) {

24 
û¼
 << "**ERROR O±Mgr::»gO±(): NØİtiÚ fÏg found" << 
’dl
;

25 
”rÜ_
 = 
E_REQ
;

26  
çl£
;

30 
£t
<
¡ršg
>::
cÚ¡_™”©Ü
 
sIt
 = 
İt
->
æags_
.
	`begš
();

31  ; 
sIt
 !ğ
İt
->
æags_
.
	`’d
(); ++sIt) {

32 ià(
æagToO±_
.
	`couÁ
(*
sIt
) > 0) {

33 
û¼
 << "**ERROR O±Mgr::»gO±(): Thæag `" << *
sIt
 << "' ";

34 
û¼
 << "ha ®»ady b“À»gi¡”ed" << 
’dl
;

35 
”rÜ_
 = 
E_EXIST
;

36  
çl£
;

41 
sIt
 = 
İt
->
æags_
.
	`begš
();

42  ; 
sIt
 !ğ
İt
->
æags_
.
	`’d
(); ++sIt) {

43 
æags_
.
	`push_back
(*
sIt
);

44 
æagToO±_
[*
sIt
] = 
İt
;

46 
İtToS‘_
[
İt
] = 
çl£
;

47 
İtToV¬_
[
İt
] = "";

49  
Œue
;

50 
	}
}

53 
boŞ
 
	gO±Mgr
::
	$·r£
(
¬gc
, **
¬gv
) {

54 
veùÜ
<
¡ršg
> 
¬gs
;

55 
i
 = 0; i < 
¬gc
; ++i)

56 
¬gs
.
	`push_back
(
	`¡ršg
(
¬gv
[
i
]));

57  
	`·r£
(
¬gs
);

58 
	}
}

61 
boŞ
 
	gO±Mgr
::
·r£
(
veùÜ
<
¡ršg
> 
¬gs
) {

63 
·r£dArgs_
.
ş—r
();

64 
	gm­
<
	gO±
 *, 
	gboŞ
>::
™”©Ü
 
bIt
 = 
İtToS‘_
.
begš
();

65  ; 
	gbIt
 !ğ
İtToS‘_
.
’d
(); ++bIt)

66 
	gbIt
->
	g£cÚd
 = 
çl£
;

67 
	gm­
<
	gO±
 *, 
	g¡ršg
>::
™”©Ü
 
sIt
 = 
İtToV¬_
.
begš
();

68  ; 
	gsIt
 !ğ
İtToV¬_
.
’d
(); ++sIt)

69 
	gsIt
->
	g£cÚd
 = "";

72 ià(
	gk“pFœ¡Arg_
 && 
	g¬gs
.
size
() >= 1)

73 
·r£dArgs_
.
push_back
(
¬gs
[0]);

75 
size_t
 
	gi
 = 1; i < 
	g¬gs
.
size
(); ++i) {

76 
¡ršg
 
	g¬g
 = 
¬gs
[
i
];

77 
	gm­
<
	g¡ršg
, 
	gO±
 *>::
™”©Ü
 
™”
;

78 
boŞ
 
	gisLÚg
 = 
çl£
;

79 
boŞ
 
	gisCÚÃùed
 = 
çl£
;

80 ià(
	g¬g
.
size
(è>ğ2 && 
¬g
[0] == '-') {

81 ià(
¬g
[1] != '-') {

82 
™”
 = 
æagToO±_
.
fšd
(
¬g
.
sub¡r
(1, 1));

83 
	gisLÚg
 = 
çl£
;

84 ià(
	g¬g
.
size
() >= 3) {

85 
isCÚÃùed
 = 
Œue
;

86 ià(
	g™”
 !ğ
æagToO±_
.
’d
()) {

87 
O±
::
Ty³
 
ty³
 = 
™”
->
£cÚd
->
ty³_
;

88 ià(
	gty³
 =ğ
O±
::
BOOL
) {

89 
¡ršg
 
ÃxtArg
 = "-" + 
¬g
.
sub¡r
(2);

90 
	g¬gs
.
š£¹
(
¬gs
.
begš
(è+ 
i
 + 1, 
ÃxtArg
);

91 
	g¬g
 = 
¬g
.
sub¡r
(0, 2);

92 
	g¬gs
[
i
] = 
¬g
;

98 
size_t
 
	gpos
 = 
¬g
.
fšd_fœ¡_of
('=');

99 ià(
	gpos
 !ğ
¬g
.
Åos
)

100 
isCÚÃùed
 = 
Œue
;

101 
	g™”
 = 
æagToO±_
.
fšd
(
¬g
.
sub¡r
(2, 
pos
 - 2));

102 
	gisLÚg
 = 
Œue
;

104 ià(
	g™”
 !ğ
æagToO±_
.
’d
()) {

105 
O±
 *
İt
 = 
™”
->
£cÚd
;

106 ià(!
£tO±
(
İt
, 
isLÚg
, 
isCÚÃùed
, 
i
, 
¬gs
))

107  
	gçl£
;

110 
	gû¼
 << "**ERROR: o±iÚ `" << 
	g¬g
;

111 
	gû¼
 << "'‚Ù„egi¡”ed" << 
	g’dl
;

112 
	g”rÜ_
 = 
E_NOT_REG
;

113  
	gçl£
;

117 
	g·r£dArgs_
.
push_back
(
¬g
);

120  
	gŒue
;

125 
boŞ
 
	gO±Mgr
::
£tO±
(
O±
 * cÚ¡ 
İt
, cÚ¡ boŞ &
isLÚg
,

126 cÚ¡ 
boŞ
 &
isCÚÃùed
, 
size_t
 &
i
,

127 
veùÜ
<
¡ršg
> &
¬gs
) {

128 
¡ršg
 
	g¬g
 = 
¬gs
[
i
];

129 
	gİt
->
	gty³_
) {

130 
	gO±
::
BOOL
:

132 
	gO±
::
STR_REQ
:

133 ià(!
isCÚÃùed
) {

134 ++
i
;

135 ià(
	gi
 >ğ
¬gs
.
size
()) {

136 
û¼
 << "**ERROR: o±iÚ `" << 
¬g
;

137 
	gû¼
 << "'„equœe ¨v®ue" << 
	g’dl
;

138 
	g”rÜ_
 = 
E_REQ
;

139  
	gçl£
;

141 
	gİtToV¬_
[
İt
] = 
¬gs
[
i
];

144 
¡ršg
 
	gv®ue
 = "";

145 ià(
	gisLÚg
) {

146 
	gv®ue
 = 
¬g
.
sub¡r
×rg.
fšd_fœ¡_of
('='));

147 ià(
	gv®ue
.
size
() == 1) {

148 
û¼
 << "**ERROR: o±iÚ `" << 
¬g
;

149 
	gû¼
 << "'„equœe ¨v®ue" << 
	g’dl
;

150 
	g”rÜ_
 = 
E_REQ
;

151  
	gçl£
;

153 
	gv®ue
 = 
v®ue
.
sub¡r
(1);

156 
	gv®ue
 = 
¬g
.
sub¡r
(2);

157 
	gİtToV¬_
[
İt
] = 
v®ue
;

160 
	gO±
::
STR_OPT
:

161 ià(!
isCÚÃùed
) {

162 ++
i
;

163 ià(
	gi
 < 
	g¬gs
.
size
(è&&‡rgs[
i
][0] != '-')

164 
İtToV¬_
[
İt
] = 
¬gs
[
i
];

166 --
	gi
;

169 
¡ršg
 
	gv®ue
 = "";

170 ià(
	gisLÚg
) {

171 
	gv®ue
 = 
¬g
.
sub¡r
×rg.
fšd_fœ¡_of
('='));

172 ià(
	gv®ue
.
size
() > 1)

173 
	gİtToV¬_
[
İt
] = 
v®ue
.
sub¡r
(1);

176 
	gİtToV¬_
[
İt
] = 
¬g
.
sub¡r
(2);

182 
	gİtToS‘_
[
İt
] = 
Œue
;

184  
	gŒue
;

216 
	gO±Mgr
::
	$u§ge
(
o¡»am
 &
out
) {

217 
size_t
 
wsCŞ
 = 
wsCŞ_
;

218 
size_t
 
bSize
 = 
bSize_
;

221 
wšsize
 
ws
;

222 
wsCŞ
 = 
	`ioùl
(0, 
TIOCGWINSZ
, &
ws
è=ğ0 ? ws.
ws_cŞ
 - 2 : wsCol;

225 
wsCŞ
 = wsCŞ < 3 * 
bSize
 ? 3 *abSize : wsCol;

227 
out
 << 
’dl
;

230 
out
 << "NAME" << 
’dl
;

231 
¡ršg
 
ÇmeSec
 = 
Çme_
 + " - " + 
shÜtDes_
;

232 
veùÜ
<
¡ršg
> 
ÇmeSecVec
 = 
	`¥l™SŒšg
(
ÇmeSec
, 
wsCŞ
 - 
bSize
);

233 
size_t
 
i
 = 0; i < 
ÇmeSecVec
.
	`size
(); ++i)

234 
out
 << 
	`¡ršg
(
bSize
, ' 'è<< 
ÇmeSecVec
[
i
] << 
’dl
;

235 
out
 << 
’dl
;

237 
out
 << "SYNOPSIS" << 
’dl
;

238 
¡ršg
 
synSec
 = 
Çme_
 + " ";

239 
¡ršg
 
sšgËCh¬Syn
 = "";

240 
¡ršg
 
muÉiCh¬Syn
 = "";

241 
m­
<
O±
 *, 
¡ršg
>::
™”©Ü
 
İtIt
 = 
İtToV¬_
.
	`begš
();

242  ; 
İtIt
 !ğ
İtToV¬_
.
	`’d
(); ++optIt) {

243 
O±
 *
İt
 = 
İtIt
->
fœ¡
;

244 
£t
<
¡ršg
>::
™”©Ü
 
fIt
 = 
İt
->
æags_
.
	`begš
();

245  ; 
fIt
 !ğ
İt
->
æags_
.
	`’d
(); ++fIt) {

246 
¡ršg
 
æag
 = *
fIt
;

247 ià(
æag
.
	`size
(è=ğ1 && 
İt
->
m‘a_
.size() == 0)

248 
sšgËCh¬Syn
 +ğ
æag
;

250 
muÉiCh¬Syn
 += " ";

251 ià(
æag
.
	`size
() == 1)

252 
muÉiCh¬Syn
 += "[-";

254 
muÉiCh¬Syn
 += "[--";

255 
muÉiCh¬Syn
 +ğ
æag
;

256 ià(
İt
->
m‘a_
.
	`size
() == 0)

257 
muÉiCh¬Syn
 += "]";

259 ià(
İt
->
ty³_
 =ğ
O±
::
STR_OPT
)

260 
muÉiCh¬Syn
 +ğ" [" + 
İt
->
m‘a_
 + "]]";

262 
muÉiCh¬Syn
 +ğ" " + 
İt
->
m‘a_
 + "]";

267 ià(
sšgËCh¬Syn
.
	`size
() != 0)

268 
sšgËCh¬Syn
 = "[-" + singleCharSyn + "]";

269 
synSec
 +ğ
sšgËCh¬Syn
 + 
muÉiCh¬Syn
;

270 
¡ršg
 
¬gM‘aSyn
 = "";

271 
size_t
 
i
 = 0; i < 
¬gs_
.
	`size
(); ++i) {

272 
Arg
 *
¬g
 = 
¬gs_
[
i
];

273 ià(
¬g
->
m‘a_
.
	`size
() == 0)

275 
¬gM‘aSyn
 += " ";

276 ià(
¬g
->
ty³_
 =ğ
Arg
::
REQ
)

277 
¬gM‘aSyn
 +ğ
¬g
->
m‘a_
;

278 ià(
¬g
->
ty³_
 =ğ
Arg
::
OPT
)

279 
¬gM‘aSyn
 +ğ"[" + 
¬g
->
m‘a_
 + "]";

280 ià(
¬g
->
ty³_
 =ğ
Arg
::
REQ_INF
)

281 
¬gM‘aSyn
 +ğ
¬g
->
m‘a_
 + "...";

282 ià(
¬g
->
ty³_
 =ğ
Arg
::
OPT_INF
)

283 
¬gM‘aSyn
 +ğ"[" + 
¬g
->
m‘a_
 + "]...";

285 
synSec
 +ğ
¬gM‘aSyn
;

286 
veùÜ
<
¡ršg
> 
synSecVec
 = 
	`¥l™SŒšg
(
synSec
, 
wsCŞ
 - 
bSize
, 
Œue
,

288 
size_t
 
i
 = 0; i < 
synSecVec
.
	`size
(); ++i)

289 
out
 << 
	`¡ršg
(
bSize
, ' 'è<< 
synSecVec
[
i
] << 
’dl
;

290 
out
 << 
’dl
;

292 
out
 << "DESCRIPTION" << 
’dl
;

293 
veùÜ
<
¡ršg
> 
desSecVec
 = 
	`¥l™SŒšg
(
des_
, 
wsCŞ
 - 
bSize
);

294 
size_t
 
i
 = 0; i < 
desSecVec
.
	`size
(); ++i)

295 
out
 << 
	`¡ršg
(
bSize
, ' 'è<< 
desSecVec
[
i
] << 
’dl
;

296 
out
 << 
’dl
;

298 ià(
¬gs_
.
	`size
() != 0)

299 
out
 << "ARGUMENTS" << 
’dl
;

300 
size_t
 
i
 = 0; i < 
¬gs_
.
	`size
(); ++i) {

301 
Arg
 *
¬g
 = 
¬gs_
[
i
];

302 
out
 << 
	`¡ršg
(
bSize
, ' 'è<< 
¬g
->
m‘a_
;

303 ià(
¬g
->
m‘a_
.
	`size
(è+ 2 >ğ
bSize
)

304 
out
 << 
’dl
;

306 
size_t
 
j
 = 
¬g
->
m‘a_
.
	`size
(); j < 
bSize
; ++j)

307 
out
 << " ";

308 
veùÜ
<
¡ršg
> 
¬gDesVec
 = 
	`¥l™SŒšg
(
¬g
->
des_
,

309 
wsCŞ
 - 2 * 
bSize
);

310 
size_t
 
i
 = 0; i < 
¬gDesVec
.
	`size
(); ++i) {

311 ià(
i
 !ğ0 || 
¬g
->
m‘a_
.
	`size
(è+ 2 >ğ
bSize
)

312 
out
 << 
	`¡ršg
(2 * 
bSize
, ' ');

313 
out
 << 
¬gDesVec
[
i
] << 
’dl
;

315 
out
 << 
’dl
;

319 ià(
İtToV¬_
.
	`size
() != 0)

320 
out
 << "OPTIONS" << 
’dl
;

321 
İtIt
 = 
İtToV¬_
.
	`begš
(); o±Iˆ!ğİtToV¬_.
	`’d
(); ++optIt) {

322 
O±
 *
İt
 = 
İtIt
->
fœ¡
;

323 
£t
<
¡ršg
>::
™”©Ü
 
fIt
 = 
İt
->
æags_
.
	`begš
();

324 
¡ršg
 
æagSŒ
 = "";

325 
size_t
 
i
 = 0; 
fIt
 !ğ
İt
->
æags_
.
	`’d
(); ++fIt, ++i) {

326 ià((*
fIt
).
	`size
() == 1)

327 
æagSŒ
 +ğ"-" + (*
fIt
);

329 
æagSŒ
 +ğ"--" + (*
fIt
);

330 ià(
i
 + 1 !ğ
İt
->
æags_
.
	`size
())

331 
æagSŒ
 += ",";

333 ià(
İt
->
m‘a_
.
	`size
() != 0)

334 
æagSŒ
 +ğ" " + 
İt
->
m‘a_
;

335 
out
 << 
	`¡ršg
(
bSize
, ' 'è<< 
æagSŒ
;

336 ià(
æagSŒ
.
	`size
(è+ 2 >ğ
bSize
)

337 
out
 << 
’dl
;

339 
size_t
 
i
 = 
æagSŒ
.
	`size
(); i < 
bSize
; ++i)

340 
out
 << " ";

341 
veùÜ
<
¡ršg
> 
İtDesVec
 = 
	`¥l™SŒšg
(
İt
->
des_
,

342 
wsCŞ
 - 2 * 
bSize
);

343 
size_t
 
i
 = 0; i < 
İtDesVec
.
	`size
(); ++i) {

344 ià(
i
 !ğ0 || 
æagSŒ
.
	`size
(è+ 2 >ğ
bSize
)

345 
out
 << 
	`¡ršg
(2 * 
bSize
, ' ');

346 
out
 << 
İtDesVec
[
i
] << 
’dl
;

348 
out
 << 
’dl
;

351 
	}
}

366 
	gveùÜ
<
	g¡ršg
> 
	gO±Mgr
::
	$¥l™SŒšg
(cÚ¡ 
¡ršg
 &
šput
,

367 cÚ¡ 
size_t
 &
lšeWidth
,

368 cÚ¡ 
boŞ
 &
f™Lše
,

369 cÚ¡ 
¡ršg
 &
£p
) {

370 
veùÜ
<
¡ršg
> 
¥l™SŒ
;

371 ià(
lšeWidth
 < 1) {

372 
¥l™SŒ
.
	`push_back
(
šput
);

373  
¥l™SŒ
;

376 
size_t
 
¡¬tPos
 = 0;

377 
size_t
 
šputPos
 = 
lšeWidth
;

378 
šputPos
 < 
šput
.
	`size
()) {

379 
¡ršg
 
lšeSeg
 = 
šput
.
	`sub¡r
(
¡¬tPos
, 
lšeWidth
);

380 ià(
šput
[
šputPos
] == ' ') {

381 ià(
f™Lše
)

382 
¥l™SŒ
.
	`push_back
(
this
->
	`f™Lše
(
lšeSeg
, 
lšeWidth
));

384 
¥l™SŒ
.
	`push_back
(
lšeSeg
);

385 
¡¬tPos
 = 
šputPos
 + 1;

386 
šputPos
 +ğ
lšeWidth
 + 1;

389 
size_t
 
cutPos
 = 
lšeSeg
.
	`fšd_Ï¡_of
(
£p
);

390 ià(
cutPos
 =ğ
lšeSeg
.
Åos
)

391 
¥l™SŒ
.
	`push_back
(
šput
.
	`sub¡r
(
¡¬tPos
, 
lšeWidth
));

393 
cutPos
++;

394 
lšeSeg
 = 
šput
.
	`sub¡r
(
¡¬tPos
, 
cutPos
);

395 ià(
f™Lše
)

396 
¥l™SŒ
.
	`push_back
(
this
->
	`f™Lše
(
lšeSeg
, 
lšeWidth
));

398 
¥l™SŒ
.
	`push_back
(
lšeSeg
);

399 
šputPos
 = 
¡¬tPos
 + 
cutPos
;

401 
¡¬tPos
 = 
šputPos
;

402 
šputPos
 +ğ
lšeWidth
;

405 
¥l™SŒ
.
	`push_back
(
šput
.
	`sub¡r
(
¡¬tPos
));

406  
¥l™SŒ
;

407 
	}
}

420 
¡ršg
 
	gO±Mgr
::
	$f™Lše
(cÚ¡ 
¡ršg
 &
šput
, cÚ¡ 
size_t
 &
lšeWidth
) {

422 
size_t
 
ËadWht
 = 0;

423  ; 
ËadWht
 < 
šput
.
	`size
() && input[leadWht] == ' '; ++leadWht)

425 
¡ršg
 
ouut
 = 
šput
.
	`sub¡r
(
ËadWht
);

427 
size_t
 
ŒaWht
 = 
ouut
.
	`size
();

428  ; 
ŒaWht
 > 0 && 
ouut
[trailWht - 1] == ' '; --trailWht)

430 
ouut
 = ouut.
	`sub¡r
(0, 
ŒaWht
);

432 
size_t
 
nWht
 = 0;

433 
size_t
 
i
 = 0; i < 
ouut
.
	`size
(); ++i)

434 ià(
ouut
[
i
] == ' ')

435 
nWht
++;

437 ià(
lšeWidth
 <ğ
ouut
.
	`size
())

438  
ouut
;

440 
size_t
 
nFlWht
 = 
lšeWidth
 - 
ouut
.
	`size
();

441 
size_t
 
nAddP”Wht
 = 
nFlWht
 / 
nWht
;

442 
size_t
 
nLeáWht
 = 
nFlWht
 % 
nWht
;

443 
size_t
 
whtNo
 = 0;

444 
size_t
 
i
 = 0; i < 
ouut
.
	`size
(); ++i) {

445 ià(
ouut
[
i
] == ' ') {

446 
size_t
 
nAddWht
 = 
nAddP”Wht
;

447 
nAddWht
 +ğ
whtNo
 < 
nLeáWht
 ? 1 : 0;

448 
¡ršg
 
exŒaWht
 = "";

449 
size_t
 
j
 = 0; j < 
nAddWht
; ++j)

450 
exŒaWht
 += " ";

451 
ouut
 = ouut.
	`sub¡r
(0, 
i
è+ 
exŒaWht
 + output.substr(i);

452 
i
 +ğ
nAddWht
;

453 
whtNo
++;

457  
ouut
;

458 
	}
}

	@common/src/get_opt.h

9 #iâdeà
_COMMON_GET_OPT_H_


10 
	#_COMMON_GET_OPT_H_


	)

12 
	~<io¡»am
>

13 
	~<¡ršg
>

14 
	~<veùÜ
>

15 
	~<m­
>

16 
	~<£t
>

18 
Çme¥aû
 
	gCommÚNs
 {

20 
	g¡d
::
	t£t
<
	t¡d
::
	t¡ršg
> 
	tFÏgS‘
;

23 
	sArg
 {

24 
	eTy³
 { 
	gREQ
 = 0, 
	gOPT
, 
	gREQ_INF
, 
	gOPT_INF
 };

26 
Arg
(cÚ¡ 
Ty³
 &
ty³
,

27 cÚ¡ 
¡d
::
¡ršg
 &
des
,

28 cÚ¡ 
¡d
::
¡ršg
 &
m‘a
);

29 ~
Arg
();

31 
Ty³
 
	gty³_
;

32 
	g¡d
::
¡ršg
 
des_
;

33 
	g¡d
::
¡ršg
 
m‘a_
;

36 
	sO±
 {

37 
	eTy³
 { 
	gBOOL
 = 0, 
	gSTR_REQ
, 
	gSTR_OPT
 };

39 
O±
(cÚ¡ 
Ty³
 &
ty³
,

40 cÚ¡ 
¡d
::
¡ršg
 &
des
,

41 cÚ¡ 
¡d
::
¡ršg
 &
m‘a
);

42 ~
O±
();

44 
addFÏg
(cÚ¡ 
¡d
::
¡ršg
 &
f
);

46 
Ty³
 
	gty³_
;

47 
	g¡d
::
¡ršg
 
des_
;

48 
	g¡d
::
¡ršg
 
m‘a_
;

49 
FÏgS‘
 
	gæags_
;

53 şas 
	cO±Mgr
 {

54 
	gpublic
:

55 
	eE¼Ü
 { 
E_EXIST
 = 0, 
	gE_NOT_REG
, 
	gE_REQ
 };

57 
O±Mgr
();

58 ~
O±Mgr
();

60 
	g¡d
::
¡ršg
 
g‘Name
() const;

61 
£tName
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

62 
£tK“pFœ¡Arg
(cÚ¡ 
boŞ
 &
k“p
);

63 
£tShÜtDes
(cÚ¡ 
¡d
::
¡ršg
 &
shÜtDes
);

64 
£tDes
(cÚ¡ 
¡d
::
¡ršg
 &
des
);

65 
E¼Ü
 
g‘E¼Ü
() const;

67 
size_t
 
g‘NP¬£dArg
() const;

68 
	g¡d
::
¡ršg
 
g‘P¬£dArg
(cÚ¡ 
size_t
 &
i
) const;

69 
size_t
 
g‘NFÏg
() const;

70 
	g¡d
::
¡ršg
 
g‘FÏg
(cÚ¡ 
size_t
 &
i
) const;

71 
boŞ
 
isFÏgS‘
(cÚ¡ 
¡d
::
¡ršg
 &
f
) const;

72 
	g¡d
::
¡ršg
 
g‘FÏgV¬
(cÚ¡ 
¡d
::¡ršg &
f
) const;

74 
boŞ
 
»gArg
(
Arg
 * cÚ¡ 
¬g
);

75 
boŞ
 
»gO±
(
O±
 * cÚ¡ 
İt
);

76 
boŞ
 
·r£
(
¬gc
, **
¬gv
);

77 
boŞ
 
·r£
(
¡d
::
veùÜ
<¡d::
¡ršg
> 
¬gs
);

79 
u§ge
(
¡d
::
o¡»am
 &
out
 = std::
cout
);

81 
	g´iv©e
:

82 
¡d
::
veùÜ
<¡d::
¡ršg
> 
¥l™SŒšg
(cÚ¡ std::¡ršg &
šput
,

83 cÚ¡ 
size_t
 &
lšeWidth
,

84 cÚ¡ 
boŞ
 &
f™Lše
 = 
Œue
,

85 cÚ¡ 
¡d
::
¡ršg
 &
£p
 = "- ");

86 
	g¡d
::
¡ršg
 
f™Lše
(cÚ¡ 
¡d
::¡ršg &
šput
,

87 cÚ¡ 
size_t
 &
lšeWidth
);

88 
boŞ
 
£tO±
(
O±
 * cÚ¡ 
İt
,

89 cÚ¡ 
boŞ
 &
isLÚg
,

90 cÚ¡ 
boŞ
 &
isCÚÃùed
,

91 
size_t
 &
i
,

92 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gs
);

94 cÚ¡ 
size_t
 
	gwsCŞ_
 = 78;

95 cÚ¡ 
size_t
 
	gbSize_
 = 8;

97 
boŞ
 
	gk“pFœ¡Arg_
;

98 
	g¡d
::
¡ršg
 
Çme_
;

99 
	g¡d
::
¡ršg
 
shÜtDes_
;

100 
	g¡d
::
¡ršg
 
des_
;

101 
E¼Ü
 
	g”rÜ_
;

103 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
æags_
;

104 
	g¡d
::
veùÜ
<
Arg
 *> 
¬gs_
;

105 
	g¡d
::
m­
<
¡d
::
¡ršg
, 
	gO±
 *> 
	gæagToO±_
;

106 
	g¡d
::
m­
<
O±
 *, 
	gboŞ
> 
	gİtToS‘_
;

107 
	g¡d
::
m­
<
O±
 *, std::
¡ršg
> 
İtToV¬_
;

108 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
·r£dArgs_
;

113 
šlše
 
	gArg
::
	$Arg
(cÚ¡ 
Ty³
 &
ty³
,

114 cÚ¡ 
¡d
::
¡ršg
 &
des
,

115 cÚ¡ 
¡d
::
¡ršg
 &
m‘a
) {

116 
ty³_
 = 
ty³
;

117 
des_
 = 
des
;

118 
m‘a_
 = 
m‘a
;

119 
	}
}

121 
šlše
 
	gArg
::~
	$Arg
(è{
	}
}

124 
šlše
 
O±
::
	$O±
(cÚ¡ 
Ty³
 &
ty³
,

125 cÚ¡ 
¡d
::
¡ršg
 &
des
,

126 cÚ¡ 
¡d
::
¡ršg
 &
m‘a
) {

127 
ty³_
 = 
ty³
;

128 
des_
 = 
des
;

129 
m‘a_
 = 
m‘a
;

130 
	}
}

132 
šlše
 
	gO±
::~
	$O±
(è{
	}
}

134 
šlše
 
O±
::
	$addFÏg
(cÚ¡ 
¡d
::
¡ršg
 &
f
) {

135 
æags_
.
	`š£¹
(
f
.
	`sub¡r
(0, f.
	`fšd_fœ¡_of
(' ')));

136 
	}
}

140 
šlše
 
	gO±Mgr
::
	$O±Mgr
() {

141 
k“pFœ¡Arg_
 = 
çl£
;

142 
Çme_
 = "PROG";

143 
des_
 = "NONE";

144 
shÜtDes_
 = "NONE";

145 
”rÜ_
 = 
E_EXIST
;

146 
	}
}

148 
šlše
 
	gO±Mgr
::~
	$O±Mgr
(è{
	}
}

150 
šlše
 
¡d
::
¡ršg
 
O±Mgr
::
	$g‘Name
() const {

151  
Çme_
;

152 
	}
}

154 
šlše
 
	gO±Mgr
::
	$£tName
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) {

155 
Çme_
 = 
Çme
;

156 
	}
}

158 
šlše
 
	gO±Mgr
::
	$£tK“pFœ¡Arg
(cÚ¡ 
boŞ
 &
k“p
) {

159 
k“pFœ¡Arg_
 = 
k“p
;

160 
	}
}

162 
šlše
 
	gO±Mgr
::
	$£tShÜtDes
(cÚ¡ 
¡d
::
¡ršg
 &
shÜtDes
) {

163 
shÜtDes_
 = 
shÜtDes
;

164 
	}
}

166 
šlše
 
	gO±Mgr
::
	$£tDes
(cÚ¡ 
¡d
::
¡ršg
 &
des
) {

167 
des_
 = 
des
;

168 
	}
}

170 
šlše
 
	gO±Mgr
::
E¼Ü
 
O±Mgr
::
	$g‘E¼Ü
() const {

171  
”rÜ_
;

172 
	}
}

174 
šlše
 
size_t
 
	gO±Mgr
::
	$g‘NP¬£dArg
() const {

175  
·r£dArgs_
.
	`size
();

176 
	}
}

178 
šlše
 
	g¡d
::
¡ršg
 
O±Mgr
::
	$g‘P¬£dArg
(cÚ¡ 
size_t
 &
i
) const {

179  
·r£dArgs_
[
i
];

180 
	}
}

182 
šlše
 
size_t
 
	gO±Mgr
::
	$g‘NFÏg
() const {

183  
æags_
.
	`size
();

184 
	}
}

186 
šlše
 
	g¡d
::
¡ršg
 
O±Mgr
::
	$g‘FÏg
(cÚ¡ 
size_t
 &
i
) const {

187  
æags_
[
i
];

188 
	}
}

190 
šlše
 
boŞ
 
	gO±Mgr
::
	$isFÏgS‘
(cÚ¡ 
¡d
::
¡ršg
 &
f
) const {

191 
¡d
::
m­
<¡d::
¡ršg
, 
O±
 *>::
cÚ¡_™”©Ü
 
fIt
 = 
æagToO±_
.
	`fšd
(
f
);

192 ià(
fIt
 =ğ
æagToO±_
.
	`’d
())

193  
çl£
;

194 
¡d
::
m­
<
O±
 *, 
boŞ
>::
cÚ¡_™”©Ü
 
İtIt
;

195 
İtIt
 = 
İtToS‘_
.
	`fšd
(
fIt
->
£cÚd
);

196 ià(
İtIt
 =ğ
İtToS‘_
.
	`’d
())

197  
çl£
;

199  
İtIt
->
£cÚd
;

200 
	}
}

202 
šlše
 
	g¡d
::
¡ršg
 
O±Mgr
::
	$g‘FÏgV¬
(cÚ¡ 
¡d
::
¡ršg
 &
f
) const {

203 
¡d
::
m­
<¡d::
¡ršg
, 
O±
 *>::
cÚ¡_™”©Ü
 
fIt
 = 
æagToO±_
.
	`fšd
(
f
);

204 ià(
fIt
 =ğ
æagToO±_
.
	`’d
())

206 
¡d
::
m­
<
O±
 *, std::
¡ršg
>::
cÚ¡_™”©Ü
 
İtIt
;

207 
İtIt
 = 
İtToV¬_
.
	`fšd
(
fIt
->
£cÚd
);

208 ià(
İtIt
 =ğ
İtToV¬_
.
	`’d
())

211  
İtIt
->
£cÚd
;

212 
	}
}

	@common/src/sys_cmd.cpp

8 
	~<uni¡d.h
>

9 
	~<c¡dlib
>

10 
	~<f¡»am
>

12 
	~"sys_cmd.h
"

14 
usšg
 
Çme¥aû
 
	g¡d
;

15 
usšg
 
Çme¥aû
 
	gCommÚNs
;

18 
	gSysBashCmd
::
	$SysBashCmd
(cÚ¡ 
¡ršg
 &
Çme
è: 
	$Cmd
(
Çme
) {

19 
İtMgr_
.
	`£tShÜtDes
("opens‡‚ew bash shellƒnvironment");

20 
İtMgr_
.
	`£tDes
("opens‡‚ew bash shellƒnvironment");

21 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

22 
İt
->
	`addFÏg
("h");

23 
İt
->
	`addFÏg
("help");

24 
İtMgr_
.
	`»gO±
(
İt
);

25 
	}
}

27 
	gSysBashCmd
::~
	$SysBashCmd
(è{
	}
}

29 
boŞ
 
SysBashCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

30 
İtMgr_
.
·r£
(
¬gv
);

31 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

32 
	gİtMgr_
.
u§ge
();

33  
	gŒue
;

36 
	g»s
 = 
sy¡em
("bash --login");

37 ià(
	g»s
 != 0)

38  
çl£
;

39  
	gŒue
;

43 
	gSysLi¡Cmd
::
	$SysLi¡Cmd
(cÚ¡ 
¡ršg
 &
Çme
è: 
	$Cmd
(
Çme
) {

44 
İtMgr_
.
	`£tShÜtDes
("list diectory contents");

45 
İtMgr_
.
	`£tDes
("lists contents in DIRECTORY. If‚ot specified,†ist current directory content.");

46 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
OPT
, "target directories", "DIRECTORY"));

47 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

48 
İt
->
	`addFÏg
("h");

49 
İt
->
	`addFÏg
("help");

50 
İtMgr_
.
	`»gO±
(
İt
);

51 
	}
}

53 
	gSysLi¡Cmd
::~
	$SysLi¡Cmd
(è{
	}
}

55 
boŞ
 
SysLi¡Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

56 
İtMgr_
.
·r£
(
¬gv
);

57 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

58 
	gİtMgr_
.
u§ge
();

59  
	gŒue
;

62 
¡ršg
 
	gcmdSŒ
 = "";

63 
¡ršg
 
	g¬g
 = "";

64 
size_t
 
	gi
 = 0; i < 
	g¬gv
.
size
(); ++i)

65 
	g¬g
 +ğ
¬gv
[
i
] + " ";

66 
	gcmdSŒ
 = 
¬g
 + " --color=always -F 2> /dev/null";

67 ià(
sy¡em
(
cmdSŒ
.
c_¡r
()) != 0) {

68 
û¼
 << "**ERROR SysLi¡Cmd::exec():†i¡ dœeùÜy faed" << 
’dl
;

69  
	gçl£
;

71  
	gŒue
;

75 
	gSysC©Cmd
::
	$SysC©Cmd
(cÚ¡ 
¡ršg
 &
Çme
è: 
	$Cmd
(
Çme
) {

76 
İtMgr_
.
	`£tShÜtDes
("concatenate files‡nd…rint onhe standard output");

77 
İtMgr_
.
	`£tDes
("Concatenate FILE(s), or standard input,o standard output");

78 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ_INF
, "fileso be…rinted", "FILE"));

79 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

80 
İt
->
	`addFÏg
("h");

81 
İt
->
	`addFÏg
("help");

82 
İtMgr_
.
	`»gO±
(
İt
);

83 
	}
}

85 
	gSysC©Cmd
::~
	$SysC©Cmd
(è{
	}
}

87 
boŞ
 
SysC©Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

88 
İtMgr_
.
·r£
(
¬gv
);

89 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

90 
	gİtMgr_
.
u§ge
();

91  
	gŒue
;

94 ià(
	g¬gv
.
size
() < 2) {

95 
	gû¼
 << "**ERROR SysC©Cmd::exec(): fÃeded" << 
	g’dl
;

96  
	gçl£
;

99 
¡ršg
 
	gcmdSŒ
 = "";

100 
¡ršg
 
	g¬g
 = "";

101 
size_t
 
	gi
 = 0; i < 
	g¬gv
.
size
(); ++i)

102 
	g¬g
 +ğ
¬gv
[
i
] + " ";

103 
	gcmdSŒ
 = 
¬g
 + " 2> /dev/null";

104 ià(
sy¡em
(
cmdSŒ
.
c_¡r
()) != 0) {

105 
û¼
 << "**ERROR SysC©Cmd::exec(): c© fe çed" << 
’dl
;

106  
	gçl£
;

108  
	gŒue
;

112 
	gSysCdCmd
::
	$SysCdCmd
(cÚ¡ 
¡ršg
 &
Çme
è: 
	$Cmd
(
Çme
) {

113 
İtMgr_
.
	`£tShÜtDes
("change directory");

114 
İtMgr_
.
	`£tDes
("changes working directoryo DIRECTORY. If‚ot specified, changeso home directory.");

115 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
OPT
, "target directories", "DIRECTORY"));

116 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

117 
İt
->
	`addFÏg
("h");

118 
İt
->
	`addFÏg
("help");

119 
İtMgr_
.
	`»gO±
(
İt
);

120 
	}
}

121 
	gSysCdCmd
::~
	$SysCdCmd
(è{
	}
}

123 
boŞ
 
SysCdCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

124 
İtMgr_
.
·r£
(
¬gv
);

125 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

126 
	gİtMgr_
.
u§ge
();

127  
	gŒue
;

130 ià(
	g¬gv
.
size
() == 1) {

131 
¡ršg
 
home
 = sŒšg(
g‘’v
("HOME"));

132 ià(
chdœ
(
home
.
c_¡r
()) != 0) {

133 
û¼
 << "**ERROR SysCdCmd::exec(): ";

134 
	gû¼
 << "ÿÂÙ chªgtØrg‘ dœeùÜy" << 
	g’dl
;

135  
	gçl£
;

137  
	gŒue
;

139 ià(
	g¬gv
.
size
() > 1) {

140 
¡ršg
 
	gde¡
 = 
¬gv
[1];

141 ià(
chdœ
(
de¡
.
c_¡r
()) != 0) {

142 
û¼
 << "**ERROR SysCdCmd::exec(): ";

143 
	gû¼
 << "ÿÂÙ chªgtØrg‘ dœeùÜy" << 
	g’dl
;

144  
	gçl£
;

147  
	gŒue
;

151 
	gSysPwdCmd
::
	$SysPwdCmd
(cÚ¡ 
¡ršg
 &
Çme
è: 
	$Cmd
(
Çme
) {

152 
İtMgr_
.
	`£tShÜtDes
("print‚ame of current directory");

153 
İtMgr_
.
	`£tDes
("printshe full filename ofhe current working directory");

154 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

155 
İt
->
	`addFÏg
("h");

156 
İt
->
	`addFÏg
("help");

157 
İtMgr_
.
	`»gO±
(
İt
);

158 
	}
}

160 
	gSysPwdCmd
::~
	$SysPwdCmd
(è{
	}
}

162 
boŞ
 
SysPwdCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

163 
İtMgr_
.
·r£
(
¬gv
);

164 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

165 
	gİtMgr_
.
u§ge
();

166  
	gŒue
;

169 
	g»s
 = 
sy¡em
("pwd");

170 ià(
	g»s
 != 0)

171  
çl£
;

172  
	gŒue
;

176 
	gSysS‘Cmd
::
	$SysS‘Cmd
(cÚ¡ 
¡ršg
 &
Çme
, 
CmdMgr
 *
cmdMgr
è: 
	$Cmd
(
Çme
) {

177 
cmdMgr_
 = 
cmdMgr
;

178 
İtMgr_
.
	`£tShÜtDes
("set variables");

179 
İtMgr_
.
	`£tDes
("set VARo STRING");

180 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "variable‚ame", "VAR"));

181 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "stringo be substituted", "STRING"));

182 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

183 
İt
->
	`addFÏg
("h");

184 
İt
->
	`addFÏg
("help");

185 
İtMgr_
.
	`»gO±
(
İt
);

186 
	}
}

188 
	gSysS‘Cmd
::~
	$SysS‘Cmd
(è{
	}
}

190 
boŞ
 
SysS‘Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

191 
İtMgr_
.
·r£
(
¬gv
);

192 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

193 
	gİtMgr_
.
u§ge
();

194  
	gŒue
;

197 ià(
	g¬gv
.
size
() == 1) {

198 
V¬M­
 
v¬s
 = 
cmdMgr_
->
g‘V¬s
();

199 
	gcout
 << "# s‘ v¬ŸbËs" << 
	g’dl
;

200 
V¬M­I‹r
 
	g™
 = 
v¬s
.
begš
(); iˆ!ğv¬s.
’d
(); ++it)

201 
	gcout
 << "# " << 
	g™
->
	gfœ¡
 << " = " << it->
	g£cÚd
 << 
	g’dl
;

202  
	gŒue
;

205 ià(
	g¬gv
.
size
() < 3) {

206 
	gû¼
 << "**ERROR SysSetCmd::exec(): variable‡nd string‚eeded";

207 
	gû¼
 << 
	g’dl
;

208  
	gçl£
;

211 ià(!
	gcmdMgr_
->
addV¬
(
¬gv
[1],‡rgv[2])) {

212 
	gû¼
 << "**ERROR SysS‘Cmd::exec(): v¬ŸbË `" << 
	g¬gv
[1] << "' ";

213 
	gû¼
 << "£ˆçed" << 
	g’dl
;

214  
	gçl£
;

217  
	gŒue
;

221 
	gSysEx™Cmd
::
	$SysEx™Cmd
(cÚ¡ 
¡ršg
 &
Çme
, 
CmdMgr
 *
cmdMgr
è: 
	$Cmd
(
Çme
) {

222 
cmdMgr_
 = 
cmdMgr
;

223 
İtMgr_
.
	`£tShÜtDes
("exithe…rogram");

224 
İtMgr_
.
	`£tDes
("exitshe…rogram");

225 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

226 
İt
->
	`addFÏg
("h");

227 
İt
->
	`addFÏg
("help");

228 
İtMgr_
.
	`»gO±
(
İt
);

229 
	}
}

230 
	gSysEx™Cmd
::~
	$SysEx™Cmd
(è{
	}
}

232 
boŞ
 
SysEx™Cmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

233 
İtMgr_
.
·r£
(
¬gv
);

234 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

235 
	gİtMgr_
.
u§ge
();

236  
	gŒue
;

239 
	gcmdMgr_
->
£tEx™
(
Œue
);

240  
	gŒue
;

244 
	gSysSourûCmd
::
	$SysSourûCmd
(cÚ¡ 
¡ršg
 &
Çme
, 
CmdMgr
 *
cmdMgr
è: 
	$Cmd
(
Çme
) {

245 
cmdMgr_
 = 
cmdMgr
;

246 
İtMgr_
.
	`£tShÜtDes
("run commands from startup file");

247 
İtMgr_
.
	`£tDes
("runs commands from FILE");

248 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
REQ
, "target file with commands", "FILE"));

249 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

250 
İt
->
	`addFÏg
("h");

251 
İt
->
	`addFÏg
("help");

252 
İtMgr_
.
	`»gO±
(
İt
);

253 
	}
}

254 
	gSysSourûCmd
::~
	$SysSourûCmd
(è{
	}
}

256 
boŞ
 
SysSourûCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

257 
İtMgr_
.
·r£
(
¬gv
);

258 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

259 
	gİtMgr_
.
u§ge
();

260  
	gŒue
;

263 ià(
	g¬gv
.
size
() < 2) {

264 
	gû¼
 << "**ERROR SysSourceCmd::exec(): ";

265 
	gû¼
 << "¶—£ s³cify sourû fe" << 
	g’dl
;

266  
	gçl£
;

269 
if¡»am
 
	gf¡r
;

270 
	gf¡r
.
İ’
(
¬gv
[1].
c_¡r
(), 
if¡»am
::
š
);

271 ià(!
	gf¡r
) {

272 
	gû¼
 << "**ERROR SysSourceCmd::exec(): ";

273 
	gû¼
 << "f`" << 
	g¬gv
[1] << "' cªnÙ bİ’ed" << 
	g’dl
;

274  
	gçl£
;

277 
size_t
 
	gpos
 = 
¬gv
[1].
fšd_Ï¡_of
('/');

278 
¡ršg
 
	gba£Name
 = 
pos
 =ğ
¬gv
[1].
Åos
 ?‡rgv[1] :‡rgv[1].
sub¡r
(pos);

280 
	gcouÁ
 = 0;

281 
¡ršg
 
	gcmdSŒ
;

282 
	gCmdMgr
::
ResuÉ
 
»s
;

283 
	gf¡r
.
good
()) {

284 
g‘lše
(
f¡r
, 
cmdSŒ
);

285 
	gcouÁ
++;

286 ià(
	gcmdSŒ
 == "")

289 
	gcout
 << 
	gba£Name
 << " " << 
	gcouÁ
 << "> ";

290 
	gcout
 << 
	gcmdSŒ
 << 
	g’dl
;

291 
	g»s
 = 
cmdMgr_
->
exec
(
cmdSŒ
);

292 ià(
	g»s
 =ğ
CmdMgr
::
NOT_EXIST
) {

293 
û¼
 << "**ERROR SysSourceCmd::exec(): ";

294 
	gû¼
 << "commªd dÛ nÙƒxi¡" << 
	g’dl
;

296 ià(
	g»s
 =ğ
CmdMgr
::
EXIT
)

299 
	gf¡r
.
şo£
();

301  
	gŒue
;

305 
	gSysH–pCmd
::
	$SysH–pCmd
(cÚ¡ 
¡ršg
 &
Çme
, 
CmdMgr
 *
cmdMgr
è: 
	$Cmd
(
Çme
) {

306 
cmdMgr_
 = 
cmdMgr
;

307 
İtMgr_
.
	`£tShÜtDes
("print help messages");

308 
İtMgr_
.
	`£tDes
("prints help for COMMAND. If‚o specitfied,…rintshe usage ofhe command manager.");

309 
İtMgr_
.
	`»gArg
(
Ãw
 
	`Arg
(
Arg
::
OPT
, "target command", "COMMAND"));

310 
O±
 *
İt
 = 
Ãw
 
	`O±
(O±::
BOOL
, "print usage", "");

311 
İt
->
	`addFÏg
("h");

312 
İt
->
	`addFÏg
("help");

313 
İtMgr_
.
	`»gO±
(
İt
);

314 
	}
}

315 
	gSysH–pCmd
::~
	$SysH–pCmd
(è{
	}
}

317 
boŞ
 
SysH–pCmd
::
exec
(cÚ¡ 
veùÜ
<
¡ršg
> &
¬gv
) {

318 
İtMgr_
.
·r£
(
¬gv
);

319 ià(
	gİtMgr_
.
isFÏgS‘
("h")) {

320 
	gİtMgr_
.
u§ge
();

321  
	gŒue
;

324 ià(
	g¬gv
.
size
() == 1) {

325 
cmdMgr_
->
u§ge
();

326  
	gŒue
;

328 ià(
	g¬gv
.
size
() > 1) {

329 
¡ršg
 
	gcmdSŒ
 = 
¬gv
[1];

330 
Cmd
 *
	gcmd
 = 
cmdMgr_
->
g‘Cmd
(
cmdSŒ
);

331 ià(!
	gcmd
) {

332 
	gû¼
 << "**ERROR SysH–pCmd::exec(): commªd `" << 
	gcmdSŒ
 << "' ";

333 
	gû¼
 << "dÛ nÙƒxi¡" << 
	g’dl
;

334  
	gçl£
;

337 
	gcmd
->
	gİtMgr_
.
u§ge
();

339  
	gŒue
;

	@common/src/sys_cmd.h

8 #iâdeà
_COMMON_SYS_CMD_H_


9 
	#_COMMON_SYS_CMD_H_


	)

11 
	~"cmd.h
"

13 
Çme¥aû
 
	gCommÚNs
 {

15 şas 
	cSysBashCmd
 : 
public
 
Cmd
 {

16 
public
:

17 
SysBashCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

18 ~
SysBashCmd
();

20 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

23 şas 
	cSysLi¡Cmd
 : 
public
 
Cmd
 {

24 
public
:

25 
SysLi¡Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

26 ~
SysLi¡Cmd
();

28 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

31 şas 
	cSysC©Cmd
 : 
public
 
Cmd
 {

32 
public
:

33 
SysC©Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

34 ~
SysC©Cmd
();

36 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

39 şas 
	cSysCdCmd
 : 
public
 
Cmd
 {

40 
public
:

41 
SysCdCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

42 ~
SysCdCmd
();

44 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

47 şas 
	cSysPwdCmd
 : 
public
 
Cmd
 {

48 
public
:

49 
SysPwdCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

50 ~
SysPwdCmd
();

52 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

55 şas 
	cSysS‘Cmd
 : 
public
 
Cmd
 {

56 
public
:

57 
SysS‘Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
CmdMgr
 *
mgr
);

58 ~
SysS‘Cmd
();

60 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

62 
	g´iv©e
:

63 
CmdMgr
 *
cmdMgr_
;

66 şas 
	cSysEx™Cmd
 : 
public
 
Cmd
 {

67 
public
:

68 
SysEx™Cmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
CmdMgr
 *
mgr
);

69 ~
SysEx™Cmd
();

71 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

73 
	g´iv©e
:

74 
CmdMgr
 *
cmdMgr_
;

77 şas 
	cSysSourûCmd
 : 
public
 
Cmd
 {

78 
public
:

79 
SysSourûCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
CmdMgr
 *
mgr
);

80 ~
SysSourûCmd
();

82 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

84 
	g´iv©e
:

85 
CmdMgr
 *
cmdMgr_
;

88 şas 
	cSysH–pCmd
 : 
public
 
Cmd
 {

89 
public
:

90 
SysH–pCmd
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
, 
CmdMgr
 *
mgr
);

91 ~
SysH–pCmd
();

93 
boŞ
 
exec
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> &
¬gv
);

95 
	g´iv©e
:

96 
CmdMgr
 *
cmdMgr_
;

	@common/src/tm_usage.cpp

8 
	~<sys/»sourû.h
>

9 
	~<sys/time.h
>

10 
	~<c¡dio
>

11 
	~<c¡ršg
>

12 
	~<c¡dlib
>

14 
	~"tm_u§ge.h
"

16 
usšg
 
Çme¥aû
 
	g¡d
;

17 
usšg
 
Çme¥aû
 
	gCommÚNs
;

19 
	gTmU§ge
::
	$TmU§ge
() {

20 
tS¹_
.
uTime
 = 0;

21 
tS¹_
.
sTime
 = 0;

22 
tS¹_
.
rTime
 = 0;

23 
tS¹_
.
vmSize
 = 0;

24 
tS¹_
.
vmP—k
 = 0;

25 
tS¹_
.
vmDiff
 = 0;

26 
pS¹_
.
uTime
 = 0;

27 
pS¹_
.
sTime
 = 0;

28 
pS¹_
.
rTime
 = 0;

29 
pS¹_
.
vmSize
 = 0;

30 
pS¹_
.
vmP—k
 = 0;

31 
pS¹_
.
vmDiff
 = 0;

32 
	}
}

34 
	gTmU§ge
::~
	$TmU§ge
(è{
	}
}

37 
boŞ
 
TmU§ge
::
	$tÙ®S¹
() {

38  
	`checkU§ge
(
tS¹_
);

39 
	}
}

41 
boŞ
 
	gTmU§ge
::
	$³riodS¹
() {

42  
	`checkU§ge
(
pS¹_
);

43 
	}
}

45 
boŞ
 
	gTmU§ge
::
	$g‘TÙ®U§ge
(
TmSt
 &
¡
) const {

46 ià(!
	`checkU§ge
(
¡
))

47  
çl£
;

48 
¡
.
uTime
 -ğ
tS¹_
.uTime;

49 
¡
.
sTime
 -ğ
tS¹_
.sTime;

50 
¡
.
rTime
 -ğ
tS¹_
.rTime;

51 
¡
.
vmDiff
 = st.
vmSize
 - 
tS¹_
.vmSize;

52 
¡
.
vmP—k
 = st.vmP—k > 
tS¹_
.vmPeak ? st.vmPeak :Start_.vmPeak;

53  
Œue
;

54 
	}
}

56 
boŞ
 
	gTmU§ge
::
	$g‘P”iodU§ge
(
TmSt
 &
¡
) const {

57 ià(!
	`checkU§ge
(
¡
))

58  
çl£
;

59 
¡
.
uTime
 -ğ
pS¹_
.uTime;

60 
¡
.
sTime
 -ğ
pS¹_
.sTime;

61 
¡
.
rTime
 -ğ
pS¹_
.rTime;

62 
¡
.
vmDiff
 = st.
vmSize
 - 
pS¹_
.vmSize;

63 
¡
.
vmP—k
 = st.vmP—k > 
pS¹_
.vmPeak ? st.vmPeak :…Start_.vmPeak;

64  
Œue
;

65 
	}
}

76 
boŞ
 
	gTmU§ge
::
	$checkU§ge
(
TmSt
 &
¡
) const {

78 
ru§ge
 
tUsg
;

79 
timev®
 
tR—l
;

80 
	`g‘ru§ge
(
RUSAGE_SELF
, &
tUsg
);

81 
	`g‘timeofday
(&
tR—l
, 
NULL
);

82 
¡
.
uTime
 = 
tUsg
.
ru_utime
.
tv_£c
 * 1000000 +Usg.ru_utime.
tv_u£c
;

83 
¡
.
sTime
 = 
tUsg
.
ru_¡ime
.
tv_£c
 * 1000000 +Usg.ru_¡ime.
tv_u£c
;

84 
¡
.
rTime
 = 
tR—l
.
tv_£c
 * 1000000 +R—l.
tv_u£c
;

87 
FILE
 *
fmem
 = 
	`fİ’
("/proc/self/status", "r");

88 ià(!
fmem
) {

89 
	`årštf
(
¡d”r
,

91 
¡
.
vmSize
 = 0;

92 
¡
.
vmP—k
 = 0;

93  
çl£
;

95 
membuf
[128];

96 
	`fg‘s
(
membuf
, 128, 
fmem
)) {

97 *
ch
;

98 ià((
ch
 = 
	`¡r¡r
(
membuf
, "VmPeak:"))) {

99 
¡
.
vmP—k
 = 
	`©Ş
(
ch
 + 7);

102 ià((
ch
 = 
	`¡r¡r
(
membuf
, "VmSize:"))) {

103 
¡
.
vmSize
 = 
	`©Ş
(
ch
 + 7);

107 
	`fşo£
(
fmem
);

108  
Œue
;

109 
	}
}

	@common/src/tm_usage.h

9 #iâdeà
_COMMON_TM_USAGE_H_


10 
	#_COMMON_TM_USAGE_H_


	)

12 
Çme¥aû
 
	gCommÚNs
 {

14 
	sTmSt
 {

15 
	gvmSize
;

16 
	gvmP—k
;

17 
	gvmDiff
;

18 
	grTime
;

19 
	guTime
;

20 
	gsTime
;

23 şas 
	cTmU§ge
 {

24 
	gpublic
:

25 
TmU§ge
();

26 ~
TmU§ge
();

28 
boŞ
 
tÙ®S¹
();

29 
boŞ
 
³riodS¹
();

30 
boŞ
 
g‘TÙ®U§ge
(
TmSt
 &
¡
) const;

31 
boŞ
 
g‘P”iodU§ge
(
TmSt
 &
¡
) const;

32 
boŞ
 
checkU§ge
(
TmSt
 &
¡
) const;

34 
	g´iv©e
:

35 
TmSt
 
tS¹_
;

36 
TmSt
 
	gpS¹_
;

	@common/src/tm_usage/tm_usage.cpp

8 
	~<sys/»sourû.h
>

9 
	~<sys/time.h
>

10 
	~<c¡dio
>

11 
	~<c¡ršg
>

12 
	~<c¡dlib
>

14 
	~"tm_u§ge.h
"

16 
usšg
 
Çme¥aû
 
	g¡d
;

17 
usšg
 
Çme¥aû
 
	gCommÚNs
;

19 
	gTmU§ge
::
	$TmU§ge
() {

20 
tS¹_
.
uTime
 = 0;

21 
tS¹_
.
sTime
 = 0;

22 
tS¹_
.
rTime
 = 0;

23 
tS¹_
.
vmSize
 = 0;

24 
tS¹_
.
vmP—k
 = 0;

25 
tS¹_
.
vmDiff
 = 0;

26 
pS¹_
.
uTime
 = 0;

27 
pS¹_
.
sTime
 = 0;

28 
pS¹_
.
rTime
 = 0;

29 
pS¹_
.
vmSize
 = 0;

30 
pS¹_
.
vmP—k
 = 0;

31 
pS¹_
.
vmDiff
 = 0;

32 
	}
}

34 
	gTmU§ge
::~
	$TmU§ge
(è{
	}
}

37 
boŞ
 
TmU§ge
::
	$tÙ®S¹
() {

38  
	`checkU§ge
(
tS¹_
);

39 
	}
}

41 
boŞ
 
	gTmU§ge
::
	$³riodS¹
() {

42  
	`checkU§ge
(
pS¹_
);

43 
	}
}

45 
boŞ
 
	gTmU§ge
::
	$g‘TÙ®U§ge
(
TmSt
 &
¡
) const {

46 ià(!
	`checkU§ge
(
¡
))

47  
çl£
;

48 
¡
.
uTime
 -ğ
tS¹_
.uTime;

49 
¡
.
sTime
 -ğ
tS¹_
.sTime;

50 
¡
.
rTime
 -ğ
tS¹_
.rTime;

51 
¡
.
vmDiff
 = st.
vmSize
 - 
tS¹_
.vmSize;

52 
¡
.
vmP—k
 = st.vmP—k > 
tS¹_
.vmPeak ? st.vmPeak :Start_.vmPeak;

53  
Œue
;

54 
	}
}

56 
boŞ
 
	gTmU§ge
::
	$g‘P”iodU§ge
(
TmSt
 &
¡
) const {

57 ià(!
	`checkU§ge
(
¡
))

58  
çl£
;

59 
¡
.
uTime
 -ğ
pS¹_
.uTime;

60 
¡
.
sTime
 -ğ
pS¹_
.sTime;

61 
¡
.
rTime
 -ğ
pS¹_
.rTime;

62 
¡
.
vmDiff
 = st.
vmSize
 - 
pS¹_
.vmSize;

63 
¡
.
vmP—k
 = st.vmP—k > 
pS¹_
.vmPeak ? st.vmPeak :…Start_.vmPeak;

64  
Œue
;

65 
	}
}

76 
boŞ
 
	gTmU§ge
::
	$checkU§ge
(
TmSt
 &
¡
) const {

78 
ru§ge
 
tUsg
;

79 
timev®
 
tR—l
;

80 
	`g‘ru§ge
(
RUSAGE_SELF
, &
tUsg
);

81 
	`g‘timeofday
(&
tR—l
, 
NULL
);

82 
¡
.
uTime
 = 
tUsg
.
ru_utime
.
tv_£c
 * 1000000 +Usg.ru_utime.
tv_u£c
;

83 
¡
.
sTime
 = 
tUsg
.
ru_¡ime
.
tv_£c
 * 1000000 +Usg.ru_¡ime.
tv_u£c
;

84 
¡
.
rTime
 = 
tR—l
.
tv_£c
 * 1000000 +R—l.
tv_u£c
;

87 
FILE
 *
fmem
 = 
	`fİ’
("/proc/self/status", "r");

88 ià(!
fmem
) {

89 
	`årštf
(
¡d”r
,

91 
¡
.
vmSize
 = 0;

92 
¡
.
vmP—k
 = 0;

93  
çl£
;

95 
membuf
[128];

96 
	`fg‘s
(
membuf
, 128, 
fmem
)) {

97 *
ch
;

98 ià((
ch
 = 
	`¡r¡r
(
membuf
, "VmPeak:"))) {

99 
¡
.
vmP—k
 = 
	`©Ş
(
ch
 + 7);

102 ià((
ch
 = 
	`¡r¡r
(
membuf
, "VmSize:"))) {

103 
¡
.
vmSize
 = 
	`©Ş
(
ch
 + 7);

107 
	`fşo£
(
fmem
);

108  
Œue
;

109 
	}
}

	@common/src/tm_usage/tm_usage.h

9 #iâdeà
_COMMON_TM_USAGE_H_


10 
	#_COMMON_TM_USAGE_H_


	)

12 
Çme¥aû
 
	gCommÚNs
 {

14 
	sTmSt
 {

15 
	gvmSize
;

16 
	gvmP—k
;

17 
	gvmDiff
;

18 
	grTime
;

19 
	guTime
;

20 
	gsTime
;

23 şas 
	cTmU§ge
 {

24 
	gpublic
:

25 
TmU§ge
();

26 ~
TmU§ge
();

28 
boŞ
 
tÙ®S¹
();

29 
boŞ
 
³riodS¹
();

30 
boŞ
 
g‘TÙ®U§ge
(
TmSt
 &
¡
) const;

31 
boŞ
 
g‘P”iodU§ge
(
TmSt
 &
¡
) const;

32 
boŞ
 
checkU§ge
(
TmSt
 &
¡
) const;

34 
	g´iv©e
:

35 
TmSt
 
tS¹_
;

36 
TmSt
 
	gpS¹_
;

	@common/src/tm_usage/tm_usage_test.cpp

19 
	~<io¡»am
>

21 
	~"tm_u§ge.h
"

23 
usšg
 
Çme¥aû
 
	g¡d
;

24 
usšg
 
Çme¥aû
 
	gCommÚNs
;

26 
	$maš
(
¬gc
, ** 
¬gv
) {

28 
TmU§ge
 
tmusg
;

30 
cout
 << "Hello, World! \n";

32 
TmSt
 
¡©
;

33 
tmusg
.
	`g‘P”iodU§ge
(
¡©
);

34 
cout
 << "# Finishedƒxecuting…rogram";

35 
cout
 << " " << ()
¡©
.
rTime
 / 1000000.0 << " s";

36 
cout
 << " " << ()
¡©
.
vmSize
 / 1024.0 << " MB" << 
’dl
;

39 
	}
}

	@common/src/vt100.h

13 #iâdeà
_COMMON_VT100_H_


14 
	#_COMMON_VT100_H_


	)

16 
Çme¥aû
 
	gCommÚNs
 {

19 cÚ¡ *cÚ¡ 
	gANSI_RESET
 = "\033[0m";

20 cÚ¡ *cÚ¡ 
	gANSI_BLACK
 = "\033[30m";

21 cÚ¡ *cÚ¡ 
	gANSI_RED
 = "\033[31m";

22 cÚ¡ *cÚ¡ 
	gANSI_GREEN
 = "\033[32m";

23 cÚ¡ *cÚ¡ 
	gANSI_YELLOW
 = "\033[33m";

24 cÚ¡ *cÚ¡ 
	gANSI_BLUE
 = "\033[34m";

25 cÚ¡ *cÚ¡ 
	gANSI_PURPLE
 = "\033[35m";

26 cÚ¡ *cÚ¡ 
	gANSI_CYAN
 = "\033[36m";

27 cÚ¡ *cÚ¡ 
	gANSI_WHITE
 = "\033[37m";

30 cÚ¡ *cÚ¡ 
	gVT100_LM_NL
 = "\033[20h";

31 cÚ¡ *cÚ¡ 
	gVT100_CKM_APP
 = "\033[?1h";

33 cÚ¡ *cÚ¡ 
	gVT100_COLM_132
 = "\033[?3h";

34 cÚ¡ *cÚ¡ 
	gVT100_SCLM_SM
 = "\033[?4h";

35 cÚ¡ *cÚ¡ 
	gVT100_SCNM_REV
 = "\033[?5h";

36 cÚ¡ *cÚ¡ 
	gVT100_OM_REL
 = "\033[?6h";

37 cÚ¡ *cÚ¡ 
	gVT100_AWM_ON
 = "\033[?7h";

38 cÚ¡ *cÚ¡ 
	gVT100_ARM_ON
 = "\033[?8h";

39 cÚ¡ *cÚ¡ 
	gVT100_INLM_ON
 = "\033[?9h";

41 cÚ¡ *cÚ¡ 
	gVT100_LM_LF
 = "\033[20h";

42 cÚ¡ *cÚ¡ 
	gVT100_CKM_CSR
 = "\033[?1h";

43 cÚ¡ *cÚ¡ 
	gVT100_VT52M
 = "\033[?1h";

44 cÚ¡ *cÚ¡ 
	gVT100_COLM_80
 = "\033[?3h";

45 cÚ¡ *cÚ¡ 
	gVT100_SCLM_JP
 = "\033[?4h";

46 cÚ¡ *cÚ¡ 
	gVT100_SCNM_NOR
 = "\033[?5h";

47 cÚ¡ *cÚ¡ 
	gVT100_OM_ABS
 = "\033[?6h";

48 cÚ¡ *cÚ¡ 
	gVT100_AWM_OFF
 = "\033[?7h";

49 cÚ¡ *cÚ¡ 
	gVT100_ARM_OFF
 = "\033[?8h";

50 cÚ¡ *cÚ¡ 
	gVT100_INLM_OFF
 = "\033[?9h";

53 cÚ¡ *cÚ¡ 
	gVT100_CSRU
 = "\033[1A";

54 cÚ¡ *cÚ¡ 
	gVT100_CSRD
 = "\033[1B";

55 cÚ¡ *cÚ¡ 
	gVT100_CSRF
 = "\033[1C";

56 cÚ¡ *cÚ¡ 
	gVT100_CSRB
 = "\033[1D";

57 cÚ¡ *cÚ¡ 
	gVT100_CSRL
 = "\033E";

58 cÚ¡ *cÚ¡ 
	gVT100_CSRS
 = "\0337";

59 cÚ¡ *cÚ¡ 
	gVT100_CSRR
 = "\0338";

62 cÚ¡ *cÚ¡ 
	gVT100_SCRU
 = "\033D";

63 cÚ¡ *cÚ¡ 
	gVT100_SCRD
 = "\033M";

64 cÚ¡ *cÚ¡ 
	gVT100_SCRE
 = "\033[r";

67 cÚ¡ *cÚ¡ 
	gVT100_TABSET
 = "\033H";

68 cÚ¡ *cÚ¡ 
	gVT100_TABCLR
 = "\033[g";

69 cÚ¡ *cÚ¡ 
	gVT100_TABCLRA
 = "\033[3g";

72 cÚ¡ *cÚ¡ 
	gVT100_ERSEOL
 = "\033[K";

73 cÚ¡ *cÚ¡ 
	gVT100_ERSSOL
 = "\033[1K";

74 cÚ¡ *cÚ¡ 
	gVT100_ERSL
 = "\033[2K";

75 cÚ¡ *cÚ¡ 
	gVT100_ERSD
 = "\033[J";

76 cÚ¡ *cÚ¡ 
	gVT100_ERSU
 = "\033[1J";

77 cÚ¡ *cÚ¡ 
	gVT100_ERSS
 = "\033[2J";

	@core/src/atpg.cpp

19 
	~<ÿs£¹
>

20 
	~<şim™s
>

22 
	~"©pg.h
"

24 
usšg
 
Çme¥aû
 
	g¡d
;

26 
usšg
 
Çme¥aû
 
	gCÜeNs
;

28 
	gAg
::
G’Stus
 
Ag
::
	$Tpg
() {

29 ià(
is_·th_Ü›Áed_mode_
) {

30 
G©eVec
 
f
; f.
	`push_back
(&
cœ_
->
g©es_
[
cu¼’t_çuÉ_
->
g©e_
]);

31 
DecisiÚT»e
 
Œ“_dummy
;»e_dummy.
	`ş—r
();

32 
d_Œ“_
.
	`push
(
f
, 0, 
Œ“_dummy
);

35 
Œue
) {

36 ià(
	`isTe¡PossibË
()) {

37 
	`BackŒaû
();

40 
boŞ
 
g_ç
 = (
is_·th_Ü›Áed_mode_
)?!
	`DBackT¿ck
():!
	`BackT¿ck
();

41 if(
g_ç
)

42  (
back_Œack_couÁ
>=
back_Œack_lim™
)?
ABORT
:
UNTESTABLE
;

44 
	`Im¶y
();

45 ià(
	`i§Te¡
()) {

46  
TEST_FOUND
;

49 
	}
}

51 
boŞ
 
	gAg
::
	$isTe¡PossibË
() {

52 
G©e
 *
fg
 = &
cœ_
->
g©es_
[
cu¼’t_çuÉ_
->
g©e_
];

53 ià(
im¶_
->
	`G‘V®
(
fg
->
id_
)==
X
) {

54 
	`FauÉAùiv©e
();

55  
Œue
;

58  
	`DDrive
();

59 
	}
}

61 
boŞ
 
	gAg
::
	$i§Te¡
() {

62 
size_t
 
n
=0;‚<
cœ_
->
Åo_
+cœ_->
Åpi_
;‚++) {

63 
V®ue
 
v
 = 
im¶_
->
	`G‘V®
(
cœ_
->
tg©e_
 - 
n
 - 1);

64 ià(
v
==
D
 || v==
B
è 
Œue
;

66  
çl£
;

67 
	}
}

69 
	gAg
::
	$š™
() {

70 
back_Œack_couÁ
 = 0;

72 
back_Œack_lim™
 = 0;

74 
im¶_
->
	`In™
();

75 
	}
}

77 
	gAg
::
	$š™
(
P©‹º
 *
p
) {

78 
	`š™
();

80 
im¶_
->
	`In™
(
p
);

81 
	}
}

83 
boŞ
 
	gAg
::
	$Im¶y
() {

84  
im¶_
->
	`Ev’tDriv’Sim
();

85 
	}
}

87 
boŞ
 
	gAg
::
	$FauÉAùiv©e
() {

88 
G©e
 *
fg
 = &
cœ_
->
g©es_
[
cu¼’t_çuÉ_
->
g©e_
];

89 
æše
 = 
cu¼’t_çuÉ_
->
lše_
;

91 ià(
æše
) {

92 
V®ue
 
v
 = 
im¶_
->
	`G‘V®
(
fg
->
fis_
[
æše
-1]);

93 ià(
v
==
X
) {

94 
V®ue
 
objv
 = (
cu¼’t_çuÉ_
->
ty³_
==
FauÉ
::
SA0


95 || 
cu¼’t_çuÉ_
->
ty³_
==
FauÉ
::
STR
)?
H
:
L
;

96 
cu¼’t_obj_
.
fœ¡
 = 
fg
->
fis_
[
æše
-1];

97 
cu¼’t_obj_
.
£cÚd
 = 
objv
;

100 
V®ue
 
objv
 = 
fg
->
	`g‘OuutCŒlV®ue
();

101 ià(
objv
==
X
è
	`as£¹
(0);

102 
cu¼’t_obj_
.
fœ¡
 = 
fg
->
id_
;

103 
cu¼’t_obj_
.
£cÚd
 = 
objv
;

104  
Œue
;

108 
V®ue
 
objv
 = (
cu¼’t_çuÉ_
->
ty³_
==
FauÉ
::
SA0


109 || 
cu¼’t_çuÉ_
->
ty³_
==
FauÉ
::
STR
)?
H
:
L
;

110 
cu¼’t_obj_
.
fœ¡
 = 
fg
->
id_
;

111 
cu¼’t_obj_
.
£cÚd
 = 
objv
;

112  
Œue
;

114 
	}
}

116 
boŞ
 
	gAg
::
	$CheckDFrÚt›r
(
G©eVec
 &
däÚt
) {

117 ià(
is_·th_Ü›Áed_mode_
) {

118 
i
=
däÚt
.
	`size
()-1; i>=0; i--)

119 ià(!
	`CheckDP©h
(
däÚt
[
i
])) {

120 
däÚt
[
i
] = däÚt.
	`back
();

121 
däÚt
.
	`pİ_back
();

125 
	`Re£tXP©h
();

126 
i
=
däÚt
.
	`size
()-1; i>=0; i--)

127 ià(!
	`CheckXP©h
(
däÚt
[
i
])) {

128 
däÚt
[
i
] = däÚt.
	`back
();

129 
däÚt
.
	`pİ_back
();

132  (!
däÚt
.
	`em±y
());

133 
	}
}

135 
boŞ
 
	gAg
::
	$DDDrive
() {

136 
G©eVec
 
d·th
;

137 
gid
;

140 
d_Œ“_
.
	`tİ
(
gid
);

141 
G©e
 *
gtİrİ
 = &
cœ_
->
g©es_
[
gid
];

142 
cu¼’t_obj_
.
fœ¡
 = 
gtİrİ
->
id_
;

143 
cu¼’t_obj_
.
£cÚd
 = 
gtİrİ
->
	`g‘OuutCŒlV®ue
();

144 
V®ue
 
v
 = 
im¶_
->
	`G‘V®
(
cu¼’t_obj_
.
fœ¡
);

147 
d_Œ“_
.
	`G‘P©h
(
d·th
);

148 ià(
	`CheckP©h
(
d·th
)) {

149 ià(
v
==
D
 || v==
B
) {

150 
G©eVec
 
däÚt
;

151 
im¶_
->
	`G‘DFrÚt›r
(
däÚt
);

153 ià(!
	`CheckDFrÚt›r
(
däÚt
)è 
çl£
;

156 
gtİrİ
 = 
däÚt
.
	`back
();

165 
	`as£¹
(
gtİrİ
->
	`isUÇry
()==
L
);

166 
d_Œ“_
.
	`push
(
däÚt
,

167 
im¶_
->
	`G‘EFrÚt›rSize
(),

168 
im¶_
->
	`g‘DecisiÚT»e
());

169 
im¶_
->
	`CË¬DecisiÚT»e
();

171 
cu¼’t_obj_
.
fœ¡
 = 
gtİrİ
->
id_
;

172 
cu¼’t_obj_
.
£cÚd
 = 
gtİrİ
->
	`g‘OuutCŒlV®ue
();

173  
Œue
;

175 ià(
v
!=
X
) {

176  
çl£
;

178  
Œue
;

181  
çl£
;

182 
	}
}

184 
boŞ
 
	gAg
::
	$DDrive
() {

185 ià(
is_·th_Ü›Áed_mode_
è 
	`DDDrive
();

187 
G©eVec
 
däÚt
;

188 
im¶_
->
	`G‘DFrÚt›r
(
däÚt
);

190 ià(!
	`CheckDFrÚt›r
(
däÚt
)è 
çl£
;

192 
G©e
 *
fg
 = &
cœ_
->
g©es_
[
cu¼’t_çuÉ_
->
g©e_
];

193 
	`as£¹
(
im¶_
->
	`G‘V®
(
fg
->
id_
)==
D
 || im¶_->G‘V®(fg->id_)==
B
);

195 
G©e
 *
gtİrİ
 = 
NULL
;

196 
ob£rv
 = 
INT_MAX
;

197 
size_t
 
i
=0; i<
däÚt
.
	`size
(); i++)

198 if(
däÚt
[
i
]->
co_o_
<
ob£rv
) {

199 
gtİrİ
 = 
däÚt
[
i
];

200 
ob£rv
 = 
däÚt
[
i
]->
co_o_
;

203 
	`as£¹
(
gtİrİ
->
	`isUÇry
()==
L
);

204 
cu¼’t_obj_
.
fœ¡
 = 
gtİrİ
->
id_
;

205 
cu¼’t_obj_
.
£cÚd
 = 
gtİrİ
->
	`g‘OuutCŒlV®ue
();

207  
Œue
;

208 
	}
}

210 
boŞ
 
	gAg
::
	$BackŒaû
() {

211 
G©e
 *
g
 = &
cœ_
->
g©es_
[
cu¼’t_obj_
.
fœ¡
];

212 
V®ue
 
objv
 = 
cu¼’t_obj_
.
£cÚd
;

213 !(
g
->
ty³_
==
G©e
::
PI


214 || 
g
->
ty³_
==
G©e
::
PPI
)) {

216 ià(
g
->
	`g‘OuutCŒlV®ue
()==
X
) {

217 ià(
g
->
ty³_
==
G©e
::
INV
)

218 
objv
 = 
	`Ev®NÙ
(objv);

219 
g
 = &
cœ_
->
g©es_
[g->
fis_
[0]];

220 
	`as£¹
(
im¶_
->
	`G‘V®
(
g
->
id_
)==
X
);

224 
G©e
 *
gÃxt
 = 
NULL
;

225 ià(
objv
==
	`Ev®NÙ
(
g
->
	`g‘OuutCŒlV®ue
())) {

229 
gÃxt
 = 
	`FšdEas›¡ToS‘FªIn
(
g
, 
objv
);

231 ià(
objv
==
g
->
	`g‘OuutCŒlV®ue
()) {

235 
gÃxt
 = 
	`FšdH¬de¡ToS‘FªIn
(
g
, 
objv
);

238 ià(
g
->
	`isInv”£
())

239 
objv
 = 
	`Ev®NÙ
(objv);

241 
g
 = 
gÃxt
;

244  
im¶_
->
	`MakeDecisiÚ
(
g
, 
objv
);

245 
	}
}

247 
G©e
 *
	gAg
::
	$FšdH¬de¡ToS‘FªIn
(
G©e
 *
g
, 
V®ue
 
obj
) const {

248 
G©e
 *
»t
 = 0;

249 
ùr_abl™y
 = 
INT_MIN
;

250 ià(
g
->
	`isInv”£
())

251 
obj
 = 
	`Ev®NÙ
(obj);

253 
size_t
 
n
=0;‚<
g
->
nfi_
;‚++ ) {

254 
cc
 = (
obj
==
H
)?
cœ_
->
g©es_
[
g
->
fis_
[
n
]].
cc1_


255 : 
cœ_
->
g©es_
[
g
->
fis_
[
n
]].
cc0_
;

257 ià(
im¶_
->
	`G‘V®
(
g
->
fis_
[
n
])==
X
 && 
cc
>
ùr_abl™y
) {

258 
»t
 = &
cœ_
->
g©es_
[
g
->
fis_
[
n
]];

259 
ùr_abl™y
 = 
cc
;

263  
»t
;

264 
	}
}

266 
G©e
 *
	gAg
::
	$FšdEas›¡ToS‘FªIn
(
G©e
 *
g
, 
V®ue
 
obj
) const {

267 
G©e
 *
»t
 = 0;

268 
ùr_abl™y
 = 
INT_MAX
;

269 ià(
g
->
	`isInv”£
())

270 
obj
 = 
	`Ev®NÙ
(obj);

272 
size_t
 
n
=0;‚<
g
->
nfi_
;‚++ ) {

273 
cc
 = (
obj
==
H
)?
cœ_
->
g©es_
[
g
->
fis_
[
n
]].
cc1_


274 : 
cœ_
->
g©es_
[
g
->
fis_
[
n
]].
cc0_
;

276 ià(
im¶_
->
	`G‘V®
(
g
->
fis_
[
n
])==
X
 && 
cc
<
ùr_abl™y
) {

277 
»t
 = &
cœ_
->
g©es_
[
g
->
fis_
[
n
]];

278 
ùr_abl™y
 = 
cc
;

282  
»t
;

283 
	}
}

285 
boŞ
 
	gAg
::
	$BackT¿ck
() {

286 ià(!
is_·th_Ü›Áed_mode_
) {

287 
back_Œack_couÁ
++;

288 ià(
back_Œack_couÁ
>=
back_Œack_lim™
è 
çl£
;

292  
im¶_
->
	`BackT¿ck
();

293 
	}
}

295 
boŞ
 
	gAg
::
	$DBackT¿ck
() {

296 
back_Œack_couÁ
++;

297 ià(
back_Œack_couÁ
>=
back_Œack_lim™
è 
çl£
;

300 
G©e
* 
gtİrİ
;

301 
DecisiÚT»e
 
Œ“
;

302 !
d_Œ“_
.
	`em±y
()) {

303 ià(
	`BackT¿ck
()è 
Œue
;

304 ià(
d_Œ“_
.
	`pİ
(
Œ“
)) {

305 
im¶_
->
	`£tDecisiÚT»e
(
Œ“
);

306 if(
d_Œ“_
.
	`em±y
()è 
çl£
;

309  
Œue
;

312  
çl£
;

313 
	}
}

315 
boŞ
 
	gAg
::
	$CheckCom·tib™y
(
FauÉ
 *
f
) {

316 
G©e
 *
g
 = &
cœ_
->
g©es_
[
f
->
g©e_
];

318 
V®ue
 
v
 = 
im¶_
->
	`G‘3V®
(
g
->
id_
);

319 ià(
v
==
L


320 && (
f
->
ty³_
==
FauÉ
::
SA0


321 || 
f
->
ty³_
==
FauÉ
::
STR
)è 
çl£
;

322 ià(
v
==
H


323 && (
f
->
ty³_
==
FauÉ
::
SA1


324 || 
f
->
ty³_
==
FauÉ
::
STF
)è 
çl£
;

326 
	`Re£tXP©h
();

327  
	`CheckXP©h
(
g
);

329 
	}
}

	@core/src/atpg.h

19 #iâdeà
_CORE_ATPG_H_


20 
	#_CORE_ATPG_H_


	)

22 
	#_MAX_BACK_TRACK_LIMIT_
 128

	)

24 
	~<m­
>

26 
	~"im¶iÿtÜ.h
"

27 
	~"d_decisiÚ_Œ“.h
"

29 
Çme¥aû
 
	gCÜeNs
 {

31 
	g¡d
::
	t·œ
<, 
	tV®ue
> 
	tObjeùive
;

32 
	g¡d
::
	tm­
<, 
	tV®ue
> 
	tObjLi¡
;

34 şas 
	cAg
 {

35 
	gpublic
:

36 
	eG’Stus
 { 
TEST_FOUND
 = 0, 
	gUNTESTABLE
, 
	gABORT
 };

38 
Ag
(
Cœcu™
 *
cœ
, 
FauÉ
 *
f
);

39 
Ag
(
Cœcu™
 *
cœ
, 
FauÉ
 *
f
, 
P©‹º
 *
p
);

40 ~
Ag
();

42 
vœtu®
 
G’Stus
 
Tpg
();

43 
G‘PiP©‹º
(
P©‹º
 *
p
);

44 
boŞ
 
TuºOnPoMode
();

46 
boŞ
 
CheckCom·tib™y
(
FauÉ
 *
f
);

48 
	g´iv©e
:

49 
boŞ
 
DDDrive
();

50 
boŞ
 
isTe¡PossibË
();

51 
boŞ
 
i§Te¡
();

53 
boŞ
 
	gis_·th_Ü›Áed_mode_
;

54 
ObjLi¡
 
	gobjs_
;

55 
Objeùive
 
	gcu¼’t_obj_
;

57 
	g´Ùeùed
:

58 
vœtu®
 
boŞ
 
FauÉAùiv©e
();

59 
vœtu®
 
boŞ
 
DDrive
();

60 
vœtu®
 
boŞ
 
BackŒaû
();

62 
boŞ
 
CheckObjs
();

64 
boŞ
 
DBackT¿ck
();

65 
boŞ
 
CheckP©h
(cÚ¡ 
G©eVec
 &
·th
) const;

67 
boŞ
 
CheckXP©h
(
G©e
 *
g
);

68 
boŞ
 
CheckDP©h
(
G©e
 *
g
) const;

69 
boŞ
 
CheckDFrÚt›r
(
G©eVec
 &
däÚt
);

71 
Re£tXP©h
();

73 
š™
();

74 
š™
(
P©‹º
 *
p
);

75 
boŞ
 
Im¶y
();

76 
boŞ
 
BackT¿ck
();

77 
G©e
 *
FšdH¬de¡ToS‘FªIn
(G©*
g
, 
V®ue
 
obj
) const;

78 
G©e
 *
FšdEas›¡ToS‘FªIn
(G©*
g
, 
V®ue
 
obj
) const;

80 
Cœcu™
 *
	gcœ_
;

81 
Im¶iÿtÜ
 *
	gim¶_
;

83 
FauÉ
 *
	gcu¼’t_çuÉ_
;

85 
	gback_Œack_couÁ
;

86 
	gback_Œack_lim™
;

88 
DDT»e
 
	gd_Œ“_
;

89 
V®ue
 *
	gx_·th_
;

92 
šlše
 
	gAg
::
	$Ag
(
Cœcu™
 *
cœ
, 
FauÉ
 *
f
) {

93 
cœ_
 = 
cœ
;

94 
cu¼’t_çuÉ_
 = 
f
;

96 
is_·th_Ü›Áed_mode_
 = 
çl£
;

97 
im¶_
 = 
Ãw
 
	`Im¶iÿtÜ
(
cœ
, 
f
);

98 
x_·th_
 = 
Ãw
 
V®ue
[
cœ_
->
tg©e_
];

100 
	`š™
();

101 
	}
}

103 
šlše
 
	gAg
::
	$Ag
(
Cœcu™
 *
cœ
, 
FauÉ
 *
f
, 
P©‹º
 *
p
) {

104 
cœ_
 = 
cœ
;

105 
cu¼’t_çuÉ_
 = 
f
;

107 
is_·th_Ü›Áed_mode_
 = 
çl£
;

108 
im¶_
 = 
Ãw
 
	`Im¶iÿtÜ
(
cœ
, 
f
);

109 
x_·th_
 = 
Ãw
 
V®ue
[
cœ_
->
tg©e_
];

111 
	`š™
(
p
);

112 
	}
}

114 
šlše
 
	gAg
::~
	$Ag
() {

115 
d–‘e
 
im¶_
;

116 
d–‘e
 [] 
x_·th_
;

117 
	}
}

119 
šlše
 
	gAg
::
	$G‘PiP©‹º
(
P©‹º
 *
p
) {

120 
im¶_
->
	`G‘PiP©‹º
(
p
);

121 
	}
}

123 
šlše
 
boŞ
 
	gAg
::
	$CheckP©h
(cÚ¡ 
G©eVec
 &
·th
) const {

124 ià(
·th
.
	`em±y
()è 
Œue
;

126 
G©eVec
 
p
 = 
·th
;

128 
p
.
	`pİ_back
();

129 !
p
.
	`em±y
()) {

130 
V®ue
 
v
 = 
im¶_
->
	`G‘V®
(
p
.
	`back
()->
id_
);

131 ià(
v
!=
D
 && v!=
B
è 
çl£
;

133 
p
.
	`pİ_back
();

136  
Œue
;

137 
	}
}

139 
šlše
 
boŞ
 
	gAg
::
	$CheckXP©h
(
G©e
 *
g
) {

140 ià(
im¶_
->
	`G‘V®
(
g
->
id_
)!=
X
 || 
x_·th_
[g->id_]==
L
) {

141 
x_·th_
[
g
->
id_
] = 
L
;

142  
çl£
;

145 ià(
g
->
ty³_
==
G©e
::
PO
 || g->ty³_==G©e::
PPO
 || 
x_·th_
[g->
id_
]==
H
) {

146 
x_·th_
[
g
->
id_
] = 
H
;

147  
Œue
;

150 
i
=0; i<
g
->
nfo_
; i++) {

151 
G©e
 *
fo
 = &
cœ_
->
g©es_
[
g
->
fos_
[
i
]];

152 ià(
	`CheckXP©h
(
fo
)) {

153 
x_·th_
[
g
->
id_
] = 
H
;

154  
Œue
;

158 
x_·th_
[
g
->
id_
] = 
L
;

159  
çl£
;

160 
	}
}

162 
šlše
 
boŞ
 
	gAg
::
	$CheckDP©h
(
G©e
 *
g
) const {

163 ià(
g
->
id_
==
cu¼’t_obj_
.
fœ¡
) {

164  
Œue
;

167 
i
=0; i<
g
->
nfi_
; i++) {

168 
G©e
 *
fi
 = &
cœ_
->
g©es_
[
g
->
fis_
[
i
]];

169 
V®ue
 
vi
 = 
im¶_
->
	`G‘V®
(
fi
->
id_
);

170 ià(
vi
!=
D
 && vi!=
B
) ;

171 ià(
	`CheckDP©h
(
fi
)) {

172  
Œue
;

176  
çl£
;

177 
	}
}

179 
šlše
 
boŞ
 
	gAg
::
	$TuºOnPoMode
() {

180 
is_·th_Ü›Áed_mode_
 = 
Œue
;

181 
back_Œack_lim™
 = 
_MAX_BACK_TRACK_LIMIT_
;

183  
is_·th_Ü›Áed_mode_
;

184 
	}
}

186 
šlše
 
	gAg
::
	$Re£tXP©h
() {

187 
i
=0; i<
cœ_
->
tg©e_
; i++)

188 
x_·th_
[
i
] = 
X
;

189 
	}
}

	@core/src/atpg_mgr.cpp

19 
	~<ÿs£¹
>

20 
	~<c¡dlib
>

21 
	~<iomª
>

23 
	~"©pg_mgr.h
"

25 
usšg
 
Çme¥aû
 
	g¡d
;

27 
usšg
 
Çme¥aû
 
	gCÜeNs
;

29 
boŞ
 
comp_çuÉ
(
FauÉ
* 
f1
, FauÉ* 
f2
);

30 
	gAgMgr
::
	$g’”©iÚ
() {

31 
pcŞl_
->
	`š™
(
cœ_
);

32 
FauÉ
 *
f
 = 
NULL
;

33 
i
=0; i<
fLi¡ExŒaù_
->
çuÉs_
.
	`size
(); i++)

34 
	`ÿlc_çuÉ_h¬dÃss
(
fLi¡ExŒaù_
->
çuÉs_
[
i
]);

36 
FauÉLi¡
 
æi¡
 = 
fLi¡ExŒaù_
->
cu¼’t_
;

37 
æi¡
.
	`sÜt
(
comp_çuÉ
);

39 
cout
 << "# ------------------------------------------------------------------------\n";

40 
cout
 << "# Phase 1: drop faults‚eed‚o back-track \n";

41 
cout
 << "# ------------------------------------------------------------------------\n";

42 
cout
 << "# #patterns fault #faults #faults \n";

43 
cout
 << "# simulated coverage in†ist detected\n";

44 
cout
 << "# ------------------------------------------------------------------------\n";

46 
æi¡
.
	`begš
()!=æi¡.
	`’d
()) {

47 ià(
æi¡
.
	`äÚt
()->
¡©e_
==
FauÉ
::
DT
) {

48 
æi¡
.
	`pİ_äÚt
();

52 ià(
æi¡
.
	`äÚt
()->
¡©e_
==
FauÉ
::
AB


53 || 
æi¡
.
	`äÚt
()->
¡©e_
==
FauÉ
::
PT
)

56 ià(
f
==
æi¡
.
	`äÚt
()) {

57 
f
->
¡©e_
 = 
FauÉ
::
PT
;

58 
æi¡
.
	`push_back
(æi¡.
	`äÚt
());

59 
æi¡
.
	`pİ_äÚt
();

62 
f
 = 
æi¡
.
	`äÚt
();

63 
©pg_
 = 
Ãw
 
	`Ag
(
cœ_
, 
f
);

64 
Ag
::
G’Stus
 
»t
 = 
©pg_
->
	`Tpg
();

66 ià(
»t
==
Ag
::
TEST_FOUND
) {

67 
P©‹º
 *
p
 = 
Ãw
 Pattern;

68 
p
->
pi1_
 = 
Ãw
 
V®ue
[
cœ_
->
Åi_
];

69 
p
->
µi_
 = 
Ãw
 
V®ue
[
cœ_
->
Åpi_
];

70 
p
->
po1_
 = 
Ãw
 
V®ue
[
cœ_
->
Åo_
];

71 
p
->
µo_
 = 
Ãw
 
V®ue
[
cœ_
->
Åpi_
];

72 
pcŞl_
->
·ts_
.
	`push_back
(
p
);

73 
©pg_
->
	`G‘PiP©‹º
(
p
);

75 ià(
pcŞl_
->
dyÇmicCom´essiÚ_
==
P©‹ºProûssÜ
::
ON
)

76 
	`DyÇmicCom´essiÚ
(
æi¡
);

78 ià((
pcŞl_
->
¡©icCom´essiÚ_
 =ğ
P©‹ºProûssÜ
::
OFF
)

79 && (
pcŞl_
->
XFl_
 =ğ
P©‹ºProûssÜ
::
ON
)){

80 
pcŞl_
->
	`¿ndomFl
ÕcŞl_->
·ts_
.
	`back
());

83 
sim_
->
	`pfFauÉSim
(
pcŞl_
->
·ts_
.
	`back
(), 
æi¡
);

84 
	`g‘PoP©‹º
(
pcŞl_
->
·ts_
.
	`back
());

86 ià(
»t
==
Ag
::
UNTESTABLE
) {

87 
æi¡
.
	`äÚt
()->
¡©e_
 = 
FauÉ
::
AU
;

88 
æi¡
.
	`pİ_äÚt
();

91 
æi¡
.
	`äÚt
()->
¡©e_
 = 
FauÉ
::
AB
;

92 
æi¡
.
	`push_back
(æi¡.
	`äÚt
());

93 
æi¡
.
	`pİ_äÚt
();

96 
d–‘e
 
©pg_
;

98 ià(
»t
==
Ag
::
TEST_FOUND
 && 
pcŞl_
->
·ts_
.
	`size
()%
RPT_PER_PAT
==0) {

99 
fu
 = 
fLi¡ExŒaù_
->
cu¼’t_
.
	`size
();

100 
dt
 = 
fLi¡ExŒaù_
->
	`g‘NStus
(
FauÉ
::
DT
);

101 
cout
 << "# " << 
	`£tw
(9è<< 
pcŞl_
->
·ts_
.
	`size
();

102 
cout
 << " " << 
	`£tw
(8è<< ()
dt
 / ()
fu
 * 100.f << "%";

103 
cout
 << " " << 
	`£tw
(7è<< 
fu
 - 
dt
;

104 
cout
 << " " << 
	`£tw
(8è<< 
dt
;

105 
cout
 << 
’dl
;

109 
pcŞl_
->
nb™_¥ec_
 = 0;

110 
pcŞl_
->
nb™_¥ec_max
 = 0;

111 
FauÉLi¡
::
™”©Ü
 
™
=
æi¡
.
	`begš
(); it!=æi¡.
	`’d
(); ++it)

112 (*
™
)->
¡©e_
 = 
FauÉ
::
UD
;

113 
æi¡
.
	`sÜt
(
comp_çuÉ
);

115 
cout
 << "\n\n# ------------------------------------------------------------------------\n";

116 
cout
 << "# Phase 2: hard-to-detect fault \n";

117 
cout
 << "# ------------------------------------------------------------------------\n";

118 
cout
 << "# #patterns fault #faults #faults \n";

119 
cout
 << "# simulated coverage in†ist detected\n";

120 
cout
 << "# ------------------------------------------------------------------------\n";

121 
æi¡
.
	`begš
()!=æi¡.
	`’d
()) {

122 ià(
æi¡
.
	`äÚt
()->
¡©e_
==
FauÉ
::
DT
) {

123 
æi¡
.
	`pİ_äÚt
();

127 ià(
æi¡
.
	`äÚt
()->
¡©e_
==
FauÉ
::
AB


128 || 
æi¡
.
	`äÚt
()->
¡©e_
==
FauÉ
::
PT
)

131 ià(
f
==
æi¡
.
	`äÚt
()) {

132 
f
->
¡©e_
 = 
FauÉ
::
PT
;

133 
æi¡
.
	`push_back
(æi¡.
	`äÚt
());

134 
æi¡
.
	`pİ_äÚt
();

137 
f
 = 
æi¡
.
	`äÚt
();

138 
©pg_
 = 
Ãw
 
	`Ag
(
cœ_
, 
f
);

139 
©pg_
->
	`TuºOnPoMode
();

140 
Ag
::
G’Stus
 
»t
 = 
©pg_
->
	`Tpg
();

142 ià(
»t
==
Ag
::
TEST_FOUND
) {

143 
P©‹º
 *
p
 = 
Ãw
 Pattern;

144 
p
->
pi1_
 = 
Ãw
 
V®ue
[
cœ_
->
Åi_
];

145 
p
->
µi_
 = 
Ãw
 
V®ue
[
cœ_
->
Åpi_
];

146 
p
->
po1_
 = 
Ãw
 
V®ue
[
cœ_
->
Åo_
];

147 
p
->
µo_
 = 
Ãw
 
V®ue
[
cœ_
->
Åpi_
];

148 
pcŞl_
->
·ts_
.
	`push_back
(
p
);

149 
pcŞl_
->
Å©_h¬d_
++;

150 
©pg_
->
	`G‘PiP©‹º
(
p
);

152 ià(
pcŞl_
->
dyÇmicCom´essiÚ_
==
P©‹ºProûssÜ
::
ON
)

153 
	`DyÇmicCom´essiÚ
(
æi¡
);

155 ià((
pcŞl_
->
¡©icCom´essiÚ_
 =ğ
P©‹ºProûssÜ
::
OFF
)

156 && (
pcŞl_
->
XFl_
 =ğ
P©‹ºProûssÜ
::
ON
)){

157 
pcŞl_
->
	`¿ndomFl
ÕcŞl_->
·ts_
.
	`back
());

160 
sim_
->
	`pfFauÉSim
(
pcŞl_
->
·ts_
.
	`back
(), 
æi¡
);

161 
	`g‘PoP©‹º
(
pcŞl_
->
·ts_
.
	`back
());

163 ià(
»t
==
Ag
::
UNTESTABLE
) {

164 
æi¡
.
	`äÚt
()->
¡©e_
 = 
FauÉ
::
AU
;

165 
æi¡
.
	`pİ_äÚt
();

168 
æi¡
.
	`äÚt
()->
¡©e_
 = 
FauÉ
::
AB
;

169 
æi¡
.
	`push_back
(æi¡.
	`äÚt
());

170 
æi¡
.
	`pİ_äÚt
();

173 
d–‘e
 
©pg_
;

175 ià(
»t
==
Ag
::
TEST_FOUND
 && 
pcŞl_
->
·ts_
.
	`size
()%
RPT_PER_PAT
==0) {

176 
fu
 = 
fLi¡ExŒaù_
->
cu¼’t_
.
	`size
();

177 
dt
 = 
fLi¡ExŒaù_
->
	`g‘NStus
(
FauÉ
::
DT
);

178 
cout
 << "# " << 
	`£tw
(9è<< 
pcŞl_
->
·ts_
.
	`size
();

179 
cout
 << " " << 
	`£tw
(8è<< ()
dt
 / ()
fu
 * 100.f << "%";

180 
cout
 << " " << 
	`£tw
(7è<< 
fu
 - 
dt
;

181 
cout
 << " " << 
	`£tw
(8è<< 
dt
;

182 
cout
 << 
’dl
;

186 ià(
pcŞl_
->
¡©icCom´essiÚ_
==
P©‹ºProûssÜ
::
ON
) {

187 
	`Rev”£FauÉSim
();

188 
pcŞl_
->
	`SticCom´essiÚ
();

190 ià(
pcŞl_
->
XFl_
==
P©‹ºProûssÜ
::
ON
)

191 
	`XFl
();

194 
	`Rev”£FauÉSim
();

195 
	}
}

197 
boŞ
 
	$comp_çuÉ
(
FauÉ
* 
f1
, FauÉ* 
f2
) {

198  
f1
->
h¬d_
 > 
f2
->hard_;

199 
	}
}

201 
	gAgMgr
::
	$ÿlc_çuÉ_h¬dÃss
(
FauÉ
* 
f1
) {

202 
t1
;

204 
t1
 = (
f1
->
ty³_
==
FauÉ
::
SA0
 || f1->ty³_==FauÉ::
STR
)?
cœ_
->
g©es_
[f1->
g©e_
].
cc1_
:cœ_->g©es_[f1->g©e_].
cc0_
;

205 
t1
 *ğ(
f1
->
lše_
)?
cœ_
->
g©es_
[f1->
g©e_
].
co_i_
[f1->lše_-1]:cœ_->g©es_[f1->g©e_].
co_o_
;

207 
f1
->
h¬d_
 = 
t1
;

209 
	}
}

211 
	gAgMgr
::
	$Rev”£FauÉSim
() {

212 
tÙ®_dt
 = 
fLi¡ExŒaù_
->
	`g‘NStus
(
FauÉ
::
DT
);

213 
FauÉLi¡
 
æi¡
 = 
fLi¡ExŒaù_
->
cu¼’t_
;

215 
cu¼_dt
 = 0;

216 
P©‹ºVec
 
comp_·ts
;

217 
i
 = 0; i < 
pcŞl_
->
·ts_
.
	`size
(); ++i) {

218 
P©‹º
 *
p
 = 
pcŞl_
->
·ts_
[pcŞl_->·ts_.
	`size
()-
i
-1];

219 
dt
 = 
sim_
->
	`pfFauÉSim
(
p
, 
æi¡
);

220 
cu¼_dt
+=
dt
;

222 if(
dt
 > 0)

223 
comp_·ts
.
	`š£¹
(comp_·ts.
	`begš
(), 
p
);

226 
	`as£¹
(
cu¼_dt
>=
tÙ®_dt
);

227 
pcŞl_
->
·ts_
 = 
comp_·ts
;

228 
	}
}

230 
	gAgMgr
::
	$g‘PoP©‹º
(
P©‹º
 *
·t
) {

231 
sim_
->
	`goodSim
();

232 
off£t
 = 
cœ_
->
ng©e_
 - cœ_->
Åo_
 - cœ_->
Åpi_
;

233 
i
 = 0; i < 
cœ_
->
Åo_
 ; i++) {

234 ià(
cœ_
->
g©es_
[
off£t
 + 
i
].
gl_
 =ğ
PARA_H
)

235 
·t
->
po1_
[
i
] = 
L
;

236 ià(
cœ_
->
g©es_
[
off£t
 + 
i
].
gh_
 =ğ
PARA_H
)

237 
·t
->
po1_
[
i
] = 
H
;

239 
·t
->
po1_
[
i
] = 
X
;

241 if(
·t
->
po2_
!=
NULL
 && 
cœ_
->
näame_
>1)

242  
i
 = 0 ; i < 
cœ_
->
Åo_
 ; i++ ){

243 ià(
cœ_
->
g©es_
[
off£t
 + 
i
 + cœ_->
ng©e_
].
gl_
 =ğ
PARA_H
)

244 
·t
->
po2_
[
i
] = 
L
;

245 ià(
cœ_
->
g©es_
[
off£t
 + 
i
 + cœ_->
ng©e_
].
gh_
 =ğ
PARA_H
)

246 
·t
->
po2_
[
i
] = 
H
;

248 
·t
->
po2_
[
i
] = 
X
;

251 
off£t
 = 
cœ_
->
ng©e_
 - cœ_->
Åpi_
;

252 if(
cœ_
->
näame_
>1)

253 
off£t
 +ğ
cœ_
->
ng©e_
;

254 
i
 = 0; i < 
cœ_
->
Åpi_
; i++) {

255 ià(
cœ_
->
g©es_
[
off£t
 + 
i
].
gl_
 =ğ
PARA_H
)

256 
·t
->
µo_
[
i
] = 
L
;

257 ià(
cœ_
->
g©es_
[
off£t
 + 
i
].
gh_
 =ğ
PARA_H
)

258 
·t
->
µo_
[
i
] = 
H
;

260 
·t
->
µo_
[
i
] = 
X
;

262 
	}
}

264 
	gAgMgr
::
	$XFl
() {

265 
pcŞl_
->
Å©_h¬d_
 = 0;

266 
i
=0; i<
pcŞl_
->
·ts_
.
	`size
(); i++) {

267 
P©‹º
 *
p
 = 
pcŞl_
->
·ts_
[
i
];

268 
pcŞl_
->
	`¿ndomFl
(
p
);

269 
sim_
->
	`assignP©‹ºToPi
(
p
);

270 
sim_
->
	`goodSim
();

271 
	`g‘PoP©‹º
(
p
);

272 
pcŞl_
->
Å©_h¬d_
++;

274 
	}
}

276 
	gAgMgr
::
	$DyÇmicCom´essiÚ
(
FauÉLi¡
 &
»maš
) {

277 
P©‹º
 *
p
 = 
pcŞl_
->
·ts_
.
	`back
();

278 
Ag
::
G’Stus
 
¡©
 = Ag::
TEST_FOUND
;

279 
FauÉLi¡
 
sk³d_fs
;

280 
ç_couÁ
 = 0;

282 
Œue
) {

283 ià(
¡©
==
Ag
::
TEST_FOUND
) {

284 
©pg_
->
	`G‘PiP©‹º
(
p
);

285 
sim_
->
	`pfFauÉSim
(
p
, 
»maš
);

286 
	`g‘PoP©‹º
(
p
);

289 
sk³d_fs
.
	`push_back
(
»maš
.
	`äÚt
());

290 
»maš
.
	`pİ_äÚt
();

291 ià(++
ç_couÁ
>=10)

295 !
»maš
.
	`em±y
()

296 && !
©pg_
->
	`CheckCom·tib™y
(
»maš
.
	`äÚt
())) {

297 
sk³d_fs
.
	`push_back
(
»maš
.
	`äÚt
());

298 
»maš
.
	`pİ_äÚt
();

300 ià(
»maš
.
	`em±y
()) ;

302 
d–‘e
 
©pg_
;

303 
©pg_
 = 
Ãw
 
	`Ag
(
cœ_
, 
»maš
.
	`äÚt
(), 
p
);

304 
©pg_
->
	`TuºOnPoMode
();

305 
¡©
 = 
©pg_
->
	`Tpg
();

308 !
sk³d_fs
.
	`em±y
()) {

309 
»maš
.
	`push_äÚt
(
sk³d_fs
.
	`back
());

310 
sk³d_fs
.
	`pİ_back
();

312 
	}
}

	@core/src/atpg_mgr.h

19 #iâdeà
_CORE_ATPG_MGR_H_


20 
	#_CORE_ATPG_MGR_H_


	)

22 
	~"©pg.h
"

24 
	#RPT_PER_PAT
 64

	)

26 
Çme¥aû
 
	gCÜeNs
 {

28 
	g¡d
::
	tveùÜ
<
	tAg
*> 
	tAgVec
;

30 şas 
	cAgMgr
 {

31 
	gpublic
:

32 
AgMgr
();

33 ~
AgMgr
();

35 
g’”©iÚ
();

37 
FauÉLi¡ExŒaù
 *
	gfLi¡ExŒaù_
;

38 
P©‹ºProûssÜ
 *
	gpcŞl_
;

39 
Cœcu™
 *
	gcœ_
;

40 
SimuÏtÜ
 *
	gsim_
;

41 
	g´iv©e
:

42 
DyÇmicCom´essiÚ
(
FauÉLi¡
 &
»maš
);

43 
Rev”£FauÉSim
();

44 
XFl
();

46 
g‘PoP©‹º
(
P©‹º
 *
·t
);

47 
ÿlc_çuÉ_h¬dÃss
(
FauÉ
* 
f1
);

49 
Ag
 *
	g©pg_
;

54 
šlše
 
	gAgMgr
::
	$AgMgr
() {

55 
fLi¡ExŒaù_
 = 
NULL
;

56 
pcŞl_
 = 
NULL
;

57 
cœ_
 = 
NULL
;

58 
sim_
 = 
NULL
;

59 
©pg_
 = 
NULL
;

60 
	}
}

62 
šlše
 
	gAgMgr
::~
	$AgMgr
(è{
	}
}

	@core/src/circuit.cpp

8 
	~<şim™s
>

10 
	~"cœcu™.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

14 
usšg
 
Çme¥aû
 
	gCÜeNs
;

17 
boŞ
 
	gCœcu™
::
	$bud
(
N‘li¡
 * cÚ¡ 
Æ
, cÚ¡ &
näame
,

18 cÚ¡ 
tfCÚÃùTy³
 &
ty³
) {

19 
näame_
 = 
näame
;

20 
C–l
 *
tİ
 = 
Æ
->
	`g‘Tİ
();

21 ià(!
tİ
) {

22 
û¼
 << "**ERROR Cœcu™::bud():‚Øtİ moduË s‘" << 
’dl
;

23  
çl£
;

25 
Techlib
 *
lib
 = 
Æ
->
	`g‘Techlib
();

26 ià(!
lib
) {

27 
û¼
 << "**ERROR Cœcu™::bud():‚Ø‹chnŞogy†ib¿ry" << 
’dl
;

28  
çl£
;

30 
Æ_
 = 
Æ
;

31 
näame_
 = 
näame
;

32 
cÚnTy³_
 = 
ty³
;

35 
Æ
->
	`Ëv–ize
();

36 
lib
->
	`Ëv–ize
();

39 
	`ü—‹M­
();

42 
g©es_
 = 
Ãw
 
G©e
[
ng©e_
 * 
näame
];

43 
fis_
 = 
Ãw
 [
Â‘_
 * 
näame
 + 
Åpi_
 * (nframe - 1)];

44 
fos_
 = 
Ãw
 [
Â‘_
 * 
näame
 + 
Åpi_
 * (nframe - 1)];

48 
	`ü—‹G©e
();

49 
	`cÚÃùF¿me
();

50 
	`assignFiMšLvl
();

52 
	`runScßp
();

53 
	`£tupCœcu™P¬am‘”
();

55  
Œue
;

56 
	}
}

72 
	gCœcu™
::
	$ü—‹M­
() {

73 
	`ÿlNg©e
();

74 
	`ÿlNÃt
();

75 
	}
}

78 
	gCœcu™
::
	$ÿlNg©e
() {

79 
C–l
 *
tİ
 = 
Æ_
->
	`g‘Tİ
();

80 
Techlib
 *
lib
 = 
Æ_
->
	`g‘Techlib
();

82 
ng©e_
 = 0;

84 
pÜtToG©e_
 = 
Ãw
 [
tİ
->
	`g‘NPÜt
()];

85 
Åi_
 = 0;

86 
size_t
 
i
 = 0; i < 
tİ
->
	`g‘NPÜt
(); ++i) {

87 
PÜt
 *
p
 = 
tİ
->
	`g‘PÜt
(
i
);

88 ià(
p
->
ty³_
 !ğ
PÜt
::
INPUT
)

90 if(!
	`¡rcmp
(
p
->
Çme_
,"CK") || !strcmp(p->name_,"test_si") || !strcmp(p->name_,"test_se")

91 || !
	`¡rcmp
(
p
->
Çme_
, "GND") || !strcmp(p->name_, "VDD"))

93 
pÜtToG©e_
[
i
] = 
Åi_
;

94 
ng©e_
++;

95 
Åi_
++;

100 
Åpi_
 = 0;

101 
ûÎToG©e_
 = 
Ãw
 [
tİ
->
	`g‘NC–l
()];

102 
size_t
 
i
 = 0 ; i < 
tİ
->
	`g‘NC–l
(); ++i) {

103 
ûÎToG©e_
[
i
] = 
ng©e_
;

104 ià(
tİ
->
	`g‘C–l
(
i
)->
libc_
) {

105 ià(
lib
->
	`hasPmt
(
tİ
->
	`g‘C–l
(
i
)->
libc_
->
id_
, 
Pmt
::
DFF
)) {

106 
Åpi_
++;

107 
ng©e_
++;

110 
ng©e_
 +ğ
tİ
->
	`g‘C–l
(
i
)->
libc_
->
	`g‘NC–l
();

113 ià(
	`¡rcmp
(
tİ
->
	`g‘C–l
(
i
)->
ty³Name_
, "dff")==0) {

114 
Åpi_
++;

115 
ng©e_
++;

118 
ng©e_
++;

123 
ncomb_
 = 
ng©e_
 - 
Åi_
 - 
Åpi_
;

126 
Åo_
 = 0;

127 
size_t
 
i
 = 0; i < 
tİ
->
	`g‘NPÜt
(); ++i) {

128 ià(
tİ
->
	`g‘PÜt
(
i
)->
ty³_
 =ğ
PÜt
::
OUTPUT
) {

129 if(!
	`¡rcmp
(
tİ
->
	`g‘PÜt
(
i
)->
Çme_
,"test_so"))

131 
pÜtToG©e_
[
i
] = 
ng©e_
;

132 
ng©e_
++;

133 
Åo_
++;

138 
ng©e_
 +ğ
Åpi_
;

139 
	}
}

142 
	gCœcu™
::
	$ÿlNÃt
() {

143 
C–l
 *
tİ
 = 
Æ_
->
	`g‘Tİ
();

144 
Techlib
 *
lib
 = 
Æ_
->
	`g‘Techlib
();

146 
Â‘_
 = 0;

148 
size_t
 
i
 = 0; i < 
tİ
->
	`g‘NN‘
(); ++i) {

149 
N‘S‘
 
eqvs
 = 
tİ
->
	`g‘EqvN‘s
(
i
);

150 
ÅÜts
 = 0;

151 
boŞ
 
sm®Ë¡
 = 
Œue
;

152 
N‘S‘
::
™”©Ü
 
™
 = 
eqvs
.
	`begš
(); iˆ!ğeqvs.
	`’d
(); ++it) {

153 ià((*
™
)->
id_
 < ()
i
) {

154 
sm®Ë¡
 = 
çl£
;

157 
ÅÜts
 +ğ(*
™
)->
	`g‘NPÜt
();

159 ià(
sm®Ë¡
)

160 
Â‘_
 +ğ
ÅÜts
 - 1;

164 
size_t
 
i
 = 0; i < 
tİ
->
	`g‘NC–l
(); ++i) {

165 
C–l
 *
c
 = 
tİ
->
	`g‘C–l
(
i
);

166 ià(!
c
->
libc_
) ;

168 ià(!
lib
->
	`hasPmt
(
c
->
ty³Name_
, 
Pmt
::
DFF
))

169 
Â‘_
 +ğ
c
->
libc_
->
	`g‘NN‘
(è- c->libc_->
	`g‘NPÜt
();

171 
	}
}

182 
	gCœcu™
::
	$ü—‹G©e
() {

183 
nfi
 = 0;

184 
nfo
 = 0;

185 
	`ü—‹Pi
(
nfo
);

186 
	`ü—‹Ppi
(
nfo
);

187 
	`ü—‹Comb
(
nfi
, 
nfo
);

188 
	`ü—‹Po
(
nfi
);

189 
	`ü—‹Ppo
(
nfi
);

190 
	}
}

192 
	gCœcu™
::
	$ü—‹Pi
(&
nfo
) {

193 
C–l
 *
tİ
 = 
Æ_
->
	`g‘Tİ
();

195 
size_t
 
i
 = 0; i < 
tİ
->
	`g‘NPÜt
(); ++i) {

196 
PÜt
 *
p
 = 
tİ
->
	`g‘PÜt
(
i
);

197 if(!
	`¡rcmp
(
p
->
Çme_
,"CK") || !strcmp(p->name_,"test_si") || !strcmp(p->name_,"test_se")

198 || !
	`¡rcmp
(
p
->
Çme_
, "GND") || !strcmp(p->name_, "VDD"))

200 
id
 = 
pÜtToG©e_
[
i
];

201 ià(
p
->
ty³_
 !ğ
PÜt
::
INPUT
 || 
id
 < 0)

203 
g©es_
[
id
].
Çme_
 = 
p
->name_;

204 
g©es_
[
id
].
id_
 = id;

205 
g©es_
[
id
].
cid_
 = 
i
;

206 
g©es_
[
id
].
pmtid_
 = 0;

207 
g©es_
[
id
].
lvl_
 = 0;

208 
g©es_
[
id
].
ty³_
 = 
G©e
::
PI
;

209 
g©es_
[
id
].
fos_
 = &fos_[
nfo
];

210 
nfo
 +ğ
tİ
->
	`g‘N‘PÜts
(
p
->
šN‘_
->
id_
).
	`size
() - 1;

212 
	}
}

214 
	gCœcu™
::
	$ü—‹Ppi
(&
nfo
) {

215 
C–l
 *
tİ
 = 
Æ_
->
	`g‘Tİ
();

216 
i
 = 0; i < 
Åpi_
; ++i) {

217 
C–l
 *
c
 = 
tİ
->
	`g‘C–l
(
i
);

218 
id
 = 
ûÎToG©e_
[
i
];

219 
g©es_
[
id
].
Çme_
 = 
c
->name_;

220 
g©es_
[
id
].
id_
 = id;

221 
g©es_
[
id
].
cid_
 = 
i
;

222 
g©es_
[
id
].
pmtid_
 = 0;

223 
g©es_
[
id
].
lvl_
 = 0;

224 
g©es_
[
id
].
ty³_
 = 
G©e
::
PPI
;

225 
g©es_
[
id
].
fos_
 = &fos_[
nfo
];

226 
qid
 = 0;

227 
	`¡rcmp
(
c
->
	`g‘PÜt
(
qid
)->
Çme_
,"Q"))++qid;

228 
nfo
 +ğ
tİ
->
	`g‘N‘PÜts
(
c
->
	`g‘PÜt
(
qid
)->
exN‘_
->
id_
).
	`size
() - 2;

229 ià(!
c
->
libc_
)

230 
nfo
++;

232 if(
näame_
 > 1 && 
cÚnTy³_
 =ğ
SHIFT
 && 
i
 < 
Åpi_
-1)++
nfo
;

236 
	}
}

239 
	gCœcu™
::
	$ü—‹Comb
(&
nfi
, &
nfo
) {

240 
C–l
 *
tİ
 = 
Æ_
->
	`g‘Tİ
();

242 
i
 = 
Åpi_
; i < ()
tİ
->
	`g‘NC–l
(); ++i) {

243 
C–l
 *
c
 = 
tİ
->
	`g‘C–l
(
i
);

244 ià(
c
->
libc_
) {

245 
j
 = 0; j < ()
c
->
libc_
->
	`g‘NC–l
(); ++j) {

246 
id
 = 
ûÎToG©e_
[
i
] + 
j
;

247 
g©es_
[
id
].
id_
 = id;

248 
g©es_
[
id
].
cid_
 = 
c
->
id_
;

249 
g©es_
[
id
].
pmtid_
 = 
j
;

251 
Pmt
 *
pmt
 = (Pmˆ*)
c
->
libc_
->
	`g‘C–l
(
j
);

252 
	`ü—‹Pmt
(
id
, 
c
, 
pmt
, 
nfi
, 
nfo
);

253 
g©es_
[
id
].
co_i_
 = 
Ãw
 [g©es_[id].
nfi_
];

254 
pid
=0;…id<
g©es_
[
id
].
nfi_
;…id++)

255 
g©es_
[
id
].
co_i_
[
pid
] = 0;

259 
id
 = 
ûÎToG©e_
[
i
];

260 
g©es_
[
id
].
Çme_
 = 
c
->name_;

261 
g©es_
[
id
].
id_
 = id;

262 
g©es_
[
id
].
cid_
 = 
c
->
id_
;

264 
	`ü—‹V”ogPmt
(
id
, 
c
, 
nfi
, 
nfo
);

265 
g©es_
[
id
].
co_i_
 = 
Ãw
 [g©es_[id].
nfi_
];

266 
pid
=0;…id<
g©es_
[
id
].
nfi_
;…id++)

267 
g©es_
[
id
].
co_i_
[
pid
] = 0;

270 ià(
tİ
->
	`g‘NC–l
() > 0)

271 
lvl_
 = 
g©es_
[
ûÎToG©e_
[
tİ
->
	`g‘NC–l
() - 1]].lvl_ + 2;

272 
	}
}

274 
	gCœcu™
::
	$ü—‹V”ogPmt
(cÚ¡ &
id
, cÚ¡ 
C–l
 * cÚ¡ 
c
,

275 &
nfi
, &
nfo
) {

277 
	`d‘V”ogPmtTy³
(
id
, 
c
);

279 
g©es_
[
id
].
fis_
 = &fis_[
nfi
];

280 
maxLvl
 = -1;

281 
size_t
 
i
=0; i<
c
->
	`g‘NPÜt
(); ++i) {

282 ià(
c
->
	`g‘PÜt
(
i
)->
ty³_
 !ğ
PÜt
::
INPUT
)

285 
N‘
 *
nš
 = 
c
->
	`g‘PÜt
(
i
)->
exN‘_
;

286 
size_t
 
j
=0; j<
nš
->
	`g‘NPÜt
(); j++) {

287 
PÜt
 *
p
 = 
nš
->
	`g‘PÜt
(
j
);

288 ià(
p
==
c
->
	`g‘PÜt
(
i
))

291 
šId
 = 0;

293 ià(
p
->
ty³_
==
PÜt
::
OUTPUT
 &&…->
tİ_
!=
c
->top_)

294 
šId
 = 
ûÎToG©e_
[
p
->
tİ_
->
id_
];

295 ià(
p
->
ty³_
==
PÜt
::
INPUT
 &&…->
tİ_
==
c
->top_)

296 
šId
 = 
pÜtToG©e_
[
p
->
id_
];

299 
g©es_
[
id
].
fis_
[g©es_[id].
nfi_
] = 
šId
;

300 
g©es_
[
id
].
nfi_
++;

301 
nfi
++;

303 
g©es_
[
šId
].
fos_
[g©es_[šId].
nfo_
] = 
id
;

304 
g©es_
[
šId
].
nfo_
++;

306 ià(
g©es_
[
šId
].
lvl_
 > 
maxLvl
)

307 
maxLvl
 = 
g©es_
[
šId
].
lvl_
;

311 
g©es_
[
id
].
lvl_
 = 
maxLvl
 + 1;

313 
g©es_
[
id
].
fos_
 = &fos_[
nfo
];

314 
PÜt
 *
ou
 = 
NULL
;

315 
size_t
 
i
 = 0; i < 
c
->
	`g‘NPÜt
(è&& !
ou
; ++i) {

316 ià(
c
->
	`g‘PÜt
(
i
)->
ty³_
 =ğ
PÜt
::
OUTPUT
)

317 
ou
 = 
c
->
	`g‘PÜt
(
i
);

319 
PÜtS‘
 
ps
 = 
c
->
tİ_
->
	`g‘N‘PÜts
(
ou
->
exN‘_
->
id_
);

320 
PÜtS‘
::
™”©Ü
 
™
 = 
ps
.
	`begš
();

321  ; 
™
 !ğ
ps
.
	`’d
(); ++it) {

322 ià((*
™
)->
tİ_
 !ğ
c
->top_ && (*it)->top_ != c) {

323 
nfo
 += 1;

325 ià((*
™
)->
tİ_
 =ğ
c
->top_) {

326 
nfo
 += 1;

329 
	}
}

331 
	gCœcu™
::
	$d‘V”ogPmtTy³
(cÚ¡ &
id
, cÚ¡ 
IÁfNs
::
C–l
 * cÚ¡ 
c
) {

332 ià(!
	`¡rcmp
(
c
->
ty³Name_
, "and")) {

333 
g©es_
[
id
].
ty³_
 = 
G©e
::
AND
;

334 ià(
c
->
	`g‘NPÜt
() == 3)

335 
g©es_
[
id
].
ty³_
 = 
G©e
::
AND2
;

336 ià(
c
->
	`g‘NPÜt
() == 4)

337 
g©es_
[
id
].
ty³_
 = 
G©e
::
AND3
;

338 ià(
c
->
	`g‘NPÜt
() == 5)

339 
g©es_
[
id
].
ty³_
 = 
G©e
::
AND4
;

341 
	`årštf
(
¡d”r
, "**WARN Circuit::detVerilogPmtType(): cell ");

342 
	`årštf
(
¡d”r
, " `% ", 
c
->
Çme_
);

343 
	`årštf
(
¡d”r
, "has†arger fan-in countshan‚ormal\n");

346 ià(!
	`¡rcmp
(
c
->
ty³Name_
, "nand")) {

347 
g©es_
[
id
].
ty³_
 = 
G©e
::
NAND
;

348 ià(
c
->
	`g‘NPÜt
() == 3)

349 
g©es_
[
id
].
ty³_
 = 
G©e
::
NAND2
;

350 ià(
c
->
	`g‘NPÜt
() == 4)

351 
g©es_
[
id
].
ty³_
 = 
G©e
::
NAND3
;

352 ià(
c
->
	`g‘NPÜt
() == 5)

353 
g©es_
[
id
].
ty³_
 = 
G©e
::
NAND4
;

355 
	`årštf
(
¡d”r
, "**WARN Circuit::detVerilogPmtType(): cell ");

356 
	`årštf
(
¡d”r
, " `% ", 
c
->
Çme_
);

357 
	`årštf
(
¡d”r
, "has†arger fan-in countshan‚ormal\n");

360 ià(!
	`¡rcmp
(
c
->
ty³Name_
, "or")) {

361 
g©es_
[
id
].
ty³_
 = 
G©e
::
OR
;

362 ià(
c
->
	`g‘NPÜt
() == 3)

363 
g©es_
[
id
].
ty³_
 = 
G©e
::
OR2
;

364 ià(
c
->
	`g‘NPÜt
() == 4)

365 
g©es_
[
id
].
ty³_
 = 
G©e
::
OR3
;

366 ià(
c
->
	`g‘NPÜt
() == 5)

367 
g©es_
[
id
].
ty³_
 = 
G©e
::
OR4
;

369 
	`årštf
(
¡d”r
, "**WARN Circuit::detVerilogPmtType(): cell ");

370 
	`årštf
(
¡d”r
, " `% ", 
c
->
Çme_
);

371 
	`årštf
(
¡d”r
, "has†arger fan-in countshan‚ormal\n");

374 ià(!
	`¡rcmp
(
c
->
ty³Name_
, "nor")) {

375 
g©es_
[
id
].
ty³_
 = 
G©e
::
NOR
;

376 ià(
c
->
	`g‘NPÜt
() == 3)

377 
g©es_
[
id
].
ty³_
 = 
G©e
::
NOR2
;

378 ià(
c
->
	`g‘NPÜt
() == 4)

379 
g©es_
[
id
].
ty³_
 = 
G©e
::
NOR3
;

380 ià(
c
->
	`g‘NPÜt
() == 5)

381 
g©es_
[
id
].
ty³_
 = 
G©e
::
NOR4
;

383 
	`årštf
(
¡d”r
, "**WARN Circuit::detVerilogPmtType(): cell ");

384 
	`årštf
(
¡d”r
, " `% ", 
c
->
Çme_
);

385 
	`årštf
(
¡d”r
, "has†arger fan-in countshan‚ormal\n");

388 ià(!
	`¡rcmp
(
c
->
ty³Name_
, "xor"))

389 
g©es_
[
id
].
ty³_
 = 
G©e
::
XOR
;

390 ià(!
	`¡rcmp
(
c
->
ty³Name_
, "xnor"))

391 
g©es_
[
id
].
ty³_
 = 
G©e
::
XNOR
;

392 ià(!
	`¡rcmp
(
c
->
ty³Name_
, "not"))

393 
g©es_
[
id
].
ty³_
 = 
G©e
::
INV
;

394 ià(!
	`¡rcmp
(
c
->
ty³Name_
, "buf"))

395 
g©es_
[
id
].
ty³_
 = 
G©e
::
BUF
;

397 
	`årštf
(
¡d”r
, "**ERROR Circuit::createVerilogPmt(): cellype");

398 
	`årštf
(
¡d”r
, " `%s/ ", 
c
->
ty³Name_
);

399 
	`årštf
(
¡d”r
, "not„ecognized cellype\n");

400 
	`as£¹
(0);

402 
	}
}

408 
	gCœcu™
::
	$ü—‹Pmt
(cÚ¡ &
id
, cÚ¡ 
C–l
 * cÚ¡ 
c
,

409 cÚ¡ 
Pmt
 * cÚ¡ 
pmt
, &
nfi
, &
nfo
) {

411 
	`d‘G©eTy³
(
id
, 
c
, 
pmt
);

414 
g©es_
[
id
].
fis_
 = &fis_[
nfi
];

415 
maxLvl
 = -1;

416 
size_t
 
i
 = 0; i < 
pmt
->
	`g‘NPÜt
(); ++i) {

417 ià(
pmt
->
	`g‘PÜt
(
i
)->
ty³_
 !ğ
PÜt
::
INPUT
)

419 
N‘
 *
nš
 = 
pmt
->
	`g‘PÜt
(
i
)->
exN‘_
;

420 
size_t
 
j
 = 0; j < 
nš
->
	`g‘NPÜt
(); ++j) {

421 
PÜt
 *
p
 = 
nš
->
	`g‘PÜt
(
j
);

422 ià(
p
 =ğ
pmt
->
	`g‘PÜt
(
i
))

425 
šId
 = 0;

427 ià(
p
->
ty³_
 =ğ
PÜt
::
OUTPUT
 &&…->
tİ_
 !ğ
c
->
libc_
)

428 
šId
 = 
ûÎToG©e_
[
c
->
id_
] + 
p
->
tİ_
->id_;

431 ià(
p
->
ty³_
 =ğ
PÜt
::
INPUT
 &&…->
tİ_
 =ğ
c
->
libc_
) {

432 
N‘
 *
Ãx
 = 
c
->
	`g‘PÜt
(
p
->
id_
)->
exN‘_
;

433 
PÜtS‘
 
ps
 = 
c
->
tİ_
->
	`g‘N‘PÜts
(
Ãx
->
id_
);

434 
PÜtS‘
::
™”©Ü
 
™
 = 
ps
.
	`begš
();

435  ; 
™
 !ğ
ps
.
	`’d
(); ++it) {

436 
C–l
 *
cš
 = (*
™
)->
tİ_
;

437 ià((*
™
)->
ty³_
 =ğ
PÜt
::
OUTPUT
 && 
cš
 !ğ
c
->
tİ_
) {

438 
C–lS‘
 
cs
 = 
cš
->
libc_
->
	`g‘PÜtC–ls
((*
™
)->
id_
);

439 
šId
 = 
ûÎToG©e_
[
cš
->
id_
];

440 ià(
Æ_
->
	`g‘Techlib
()->
	`hasPmt
(
cš
->
libc_
->
id_
, 
Pmt
::
DFF
))

442 
šId
 +ğ(*
cs
.
	`begš
())->
id_
;

445 ià((*
™
)->
ty³_
 =ğ
PÜt
::
INPUT
 && 
cš
 =ğ
c
->
tİ_
) {

446 
šId
 = 
pÜtToG©e_
[(*
™
)->
id_
];

453 
g©es_
[
id
].
fis_
[g©es_[id].
nfi_
] = 
šId
;

454 
g©es_
[
id
].
nfi_
++;

455 
nfi
++;

457 
g©es_
[
šId
].
fos_
[g©es_[šId].
nfo_
] = 
id
;

458 
g©es_
[
šId
].
nfo_
++;

460 ià(
g©es_
[
šId
].
lvl_
 > 
maxLvl
)

461 
maxLvl
 = 
g©es_
[
šId
].
lvl_
;

464 
g©es_
[
id
].
lvl_
 = 
maxLvl
 + 1;

468 
g©es_
[
id
].
fos_
 = &fos_[
nfo
];

469 
PÜt
 *
ou
 = 
NULL
;

470 
size_t
 
i
 = 0; i < 
pmt
->
	`g‘NPÜt
(è&& !
ou
; ++i) {

471 ià(
pmt
->
	`g‘PÜt
(
i
)->
ty³_
 =ğ
PÜt
::
OUTPUT
)

472 
ou
 = 
pmt
->
	`g‘PÜt
(
i
);

474 
PÜtS‘
 
ps
 = 
c
->
libc_
->
	`g‘N‘PÜts
(
ou
->
exN‘_
->
id_
);

475 
PÜtS‘
::
™”©Ü
 
™
 = 
ps
.
	`begš
();

476  ; 
™
 !ğ
ps
.
	`’d
(); ++it) {

477 ià((*
™
)->
tİ_
 !ğ
c
->
libc_
 && (*™)->tİ_ !ğ
pmt
) {

478 
nfo
 += 1;

480 ià((*
™
)->
tİ_
 =ğ
c
->
libc_
) {

481 
nid
 = 
c
->
	`g‘PÜt
((*
™
)->
id_
)->
exN‘_
->id_;

482 
nfo
 +ğ
c
->
tİ_
->
	`g‘N‘PÜts
(
nid
).
	`size
() - 1;

485 
	}
}

487 
	gCœcu™
::
	$d‘G©eTy³
(cÚ¡ &
id
, cÚ¡ 
C–l
 * cÚ¡ 
c
,

488 cÚ¡ 
Pmt
 * cÚ¡ 
pmt
) {

489 
pmt
->
ty³_
) {

490 
Pmt
::
BUF
:

491 
g©es_
[
id
].
ty³_
 = 
G©e
::
BUF
;

493 
Pmt
::
INV
:

494 
Pmt
::
INVF
:

495 
g©es_
[
id
].
ty³_
 = 
G©e
::
INV
;

497 
Pmt
::
MUX
:

498 
g©es_
[
id
].
ty³_
 = 
G©e
::
MUX
;

500 
Pmt
::
AND
:

501 ià(
c
->
	`g‘NPÜt
() == 3)

502 
g©es_
[
id
].
ty³_
 = 
G©e
::
AND2
;

503 ià(
c
->
	`g‘NPÜt
() == 4)

504 
g©es_
[
id
].
ty³_
 = 
G©e
::
AND3
;

505 ià(
c
->
	`g‘NPÜt
() == 5)

506 
g©es_
[
id
].
ty³_
 = 
G©e
::
AND4
;

508 
g©es_
[
id
].
ty³_
 = 
G©e
::
AND
;

510 
Pmt
::
NAND
:

511 ià(
c
->
	`g‘NPÜt
() == 3)

512 
g©es_
[
id
].
ty³_
 = 
G©e
::
NAND2
;

513 ià(
c
->
	`g‘NPÜt
() == 4)

514 
g©es_
[
id
].
ty³_
 = 
G©e
::
NAND3
;

515 ià(
c
->
	`g‘NPÜt
() == 5)

516 
g©es_
[
id
].
ty³_
 = 
G©e
::
NAND4
;

518 
g©es_
[
id
].
ty³_
 = 
G©e
::
NAND
;

520 
Pmt
::
OR
:

521 ià(
c
->
	`g‘NPÜt
() == 3)

522 
g©es_
[
id
].
ty³_
 = 
G©e
::
OR2
;

523 ià(
c
->
	`g‘NPÜt
() == 4)

524 
g©es_
[
id
].
ty³_
 = 
G©e
::
OR3
;

525 ià(
c
->
	`g‘NPÜt
() == 5)

526 
g©es_
[
id
].
ty³_
 = 
G©e
::
OR4
;

528 
g©es_
[
id
].
ty³_
 = 
G©e
::
OR
;

530 
Pmt
::
NOR
:

531 ià(
c
->
	`g‘NPÜt
() == 3)

532 
g©es_
[
id
].
ty³_
 = 
G©e
::
NOR2
;

533 ià(
c
->
	`g‘NPÜt
() == 4)

534 
g©es_
[
id
].
ty³_
 = 
G©e
::
NOR3
;

535 ià(
c
->
	`g‘NPÜt
() == 5)

536 
g©es_
[
id
].
ty³_
 = 
G©e
::
NOR4
;

538 
g©es_
[
id
].
ty³_
 = 
G©e
::
NOR
;

540 
Pmt
::
XOR
:

541 ià(
c
->
	`g‘NPÜt
() == 3)

542 
g©es_
[
id
].
ty³_
 = 
G©e
::
XOR2
;

543 ià(
c
->
	`g‘NPÜt
() == 4)

544 
g©es_
[
id
].
ty³_
 = 
G©e
::
XOR3
;

546 
g©es_
[
id
].
ty³_
 = 
G©e
::
XOR
;

548 
Pmt
::
XNOR
:

549 ià(
c
->
	`g‘NPÜt
() == 3)

550 
g©es_
[
id
].
ty³_
 = 
G©e
::
XNOR2
;

551 ià(
c
->
	`g‘NPÜt
() == 4)

552 
g©es_
[
id
].
ty³_
 = 
G©e
::
XNOR3
;

554 
g©es_
[
id
].
ty³_
 = 
G©e
::
XNOR
;

556 
Pmt
::
TIE1
:

557 
g©es_
[
id
].
ty³_
 = 
G©e
::
TIE1
;

559 
Pmt
::
TIE0
:

560 
g©es_
[
id
].
ty³_
 = 
G©e
::
TIE0
;

562 
Pmt
::
TIEX
:

563 
g©es_
[
id
].
ty³_
 = 
G©e
::
TIE0
;

565 
Pmt
::
TIEZ
:

566 
g©es_
[
id
].
ty³_
 = 
G©e
::
TIEZ
;

569 
g©es_
[
id
].
ty³_
 = 
G©e
::
NA
;

571 
	}
}

573 
	gCœcu™
::
	$ü—‹Po
(&
nfi
) {

574 
C–l
 *
tİ
 = 
Æ_
->
	`g‘Tİ
();

576 
size_t
 
i
 = 0; i < 
tİ
->
	`g‘NPÜt
(); ++i) {

577 
PÜt
 *
p
 = 
tİ
->
	`g‘PÜt
(
i
);

578 if(!
	`¡rcmp
(
p
->
Çme_
,"test_so"))

580 
id
 = 
pÜtToG©e_
[
i
];

581 ià(
p
->
ty³_
 !ğ
PÜt
::
OUTPUT
 || 
id
 < 0)

583 
g©es_
[
id
].
Çme_
 = 
p
->name_;

584 
g©es_
[
id
].
id_
 = id;

585 
g©es_
[
id
].
cid_
 = 
i
;

586 
g©es_
[
id
].
pmtid_
 = 0;

587 
g©es_
[
id
].
lvl_
 =†vl_ - 1;

588 
g©es_
[
id
].
ty³_
 = 
G©e
::
PO
;

589 
g©es_
[
id
].
fis_
 = &fis_[
nfi
];

590 
PÜtS‘
 
ps
 = 
tİ
->
	`g‘N‘PÜts
(
p
->
šN‘_
->
id_
);

591 
PÜtS‘
::
™”©Ü
 
™
 = 
ps
.
	`begš
();

592  ; 
™
 !ğ
ps
.
	`’d
(); ++it) {

593 ià((*
™
è=ğ
p
)

595 
šId
 = 0;

596 ià((*
™
)->
tİ_
 =ğ
tİ
 && (*™)->
ty³_
 =ğ
PÜt
::
INPUT
)

597 
šId
 = 
pÜtToG©e_
[(*
™
)->
id_
];

598 ià((*
™
)->
tİ_
 !ğ
tİ
 && (*™)->
ty³_
 =ğ
PÜt
::
OUTPUT
) {

599 
šId
 = 
ûÎToG©e_
[(*
™
)->
tİ_
->
id_
];

600 
C–l
 *
libc
 = (*
™
)->
tİ_
->
libc_
;

601 ià(
libc
)

602 ià(!
Æ_
->
	`g‘Techlib
()->
	`hasPmt
(
libc
->
id_
, 
Pmt
::
DFF
))

603 
šId
 +ğ(*
libc
->
	`g‘PÜtC–ls
((*
™
)->
id_
).
	`begš
())->id_;

607 
g©es_
[
id
].
fis_
[g©es_[id].
nfi_
] = 
šId
;

608 
g©es_
[
id
].
nfi_
++;

610 
g©es_
[
šId
].
fos_
[g©es_[šId].
nfo_
] = 
id
;

611 
g©es_
[
šId
].
nfo_
++;

613 
nfi
++;

615 
g©es_
[
id
].
co_i_
 = 
Ãw
 [g©es_[id].
nfi_
];

616 
pid
=0;…id<
g©es_
[
id
].
nfi_
;…id++)

617 
g©es_
[
id
].
co_i_
[
pid
] = 0;

619 
	}
}

621 
	gCœcu™
::
	$ü—‹Ppo
(&
nfi
) {

622 
C–l
 *
tİ
 = 
Æ_
->
	`g‘Tİ
();

623 
i
 = 0; i < 
Åpi_
; ++i) {

624 
C–l
 *
c
 = 
tİ
->
	`g‘C–l
(
i
);

625 
id
 = 
ng©e_
 - 
Åpi_
 + 
i
 ;

626 
g©es_
[
id
].
Çme_
 = 
c
->name_;

627 
g©es_
[
id
].
id_
 = id;

628 
g©es_
[
id
].
cid_
 = 
i
;

629 
g©es_
[
id
].
pmtid_
 = 0;

630 
g©es_
[
id
].
lvl_
 =†vl_ - 1;

631 
g©es_
[
id
].
ty³_
 = 
G©e
::
PPO
;

632 
g©es_
[
id
].
fis_
 = &fis_[
nfi
];

633 
did
 = 0;

634 
	`¡rcmp
(
c
->
	`g‘PÜt
(
did
)->
Çme_
,"D"))++did;

635 
PÜt
 *
šp
 = 
c
->
	`g‘PÜt
(
did
);

637 
PÜtS‘
 
ps
 = 
tİ
->
	`g‘N‘PÜts
(
c
->
	`g‘PÜt
(
šp
->
id_
)->
exN‘_
->id_);

638 
PÜtS‘
::
™”©Ü
 
™
 = 
ps
.
	`begš
();

639  ; 
™
 !ğ
ps
.
	`’d
(); ++it) {

640 ià((*
™
è=ğ
šp
)

642 
šId
 = 0;

643 ià((*
™
)->
tİ_
 =ğ
tİ
 && (*™)->
ty³_
 =ğ
PÜt
::
INPUT
)

644 
šId
 = 
pÜtToG©e_
[(*
™
)->
id_
];

645 ià((*
™
)->
tİ_
 !ğ
tİ
 && (*™)->
ty³_
 =ğ
PÜt
::
OUTPUT
) {

646 
šId
 = 
ûÎToG©e_
[(*
™
)->
tİ_
->
id_
];

647 
C–l
 *
libc
 = (*
™
)->
tİ_
->
libc_
;

648 ià(
libc
)

649 ià(!
Æ_
->
	`g‘Techlib
()->
	`hasPmt
(
libc
->
id_
, 
Pmt
::
DFF
))

650 
šId
 +ğ(*
libc
->
	`g‘PÜtC–ls
((*
™
)->
id_
).
	`begš
())->id_;

654 
g©es_
[
id
].
fis_
[g©es_[id].
nfi_
] = 
šId
;

655 
g©es_
[
id
].
nfi_
++;

657 
g©es_
[
šId
].
fos_
[g©es_[šId].
nfo_
] = 
id
;

658 
g©es_
[
šId
].
nfo_
++;

660 
nfi
++;

662 
g©es_
[
id
].
co_i_
 = 
Ãw
 [g©es_[id].
nfi_
];

663 
pid
=0;…id<
g©es_
[
id
].
nfi_
;…id++)

664 
g©es_
[
id
].
co_i_
[
pid
] = 0;

666 
	}
}

680 
	gCœcu™
::
	$cÚÃùF¿me
() {

681 
nfo
 = 
Â‘_
;

682 
nfi
 = 
Â‘_
;

683 
i
 = 1; i < 
näame_
; ++i) {

684 
off£t
 = 
ng©e_
 * 
i
;

685 if(
cÚnTy³_
 =ğ
CAPTURE
)

686 
j
 = 0; j < 
Åpi_
; ++j){

687 
id
 = 
off£t
 - 
Åpi_
 + 
j
;

688 
g©es_
[
id
].
nfo_
 = 1;

689 
g©es_
[
id
].
fos_
 = &fos_[
nfo
];

690 
nfo
 +ğ
g©es_
[
id
].
nfo_
;

692 
j
 = 0; j < 
ng©e_
; ++j) {

693 
id
 = 
off£t
 + 
j
;

694 
g©es_
[
id
].
id_
 = id;

695 
g©es_
[
id
].
cid_
 = g©es_[
j
].cid_;

696 
g©es_
[
id
].
lvl_
 =†vl_ * 
i
 + g©es_[
j
].lvl_;

697 
g©es_
[
id
].
ty³_
 = g©es_[
j
].type_;

698 
g©es_
[
id
].
äame_
 = 
i
;

699 if(
g©es_
[
id
].
ty³_
 !ğ
G©e
::
PPI
 && g©es_[id].ty³_ !ğG©e::
PPO
){

700 
g©es_
[
id
].
nfo_
 = g©es_[
j
].nfo_;

701 
g©es_
[
id
].
fos_
 = &fos_[
nfo
];

702 
k
 = 0; k < 
g©es_
[
j
].
nfo_
; ++k)

703 
g©es_
[
id
].
fos_
[
k
] = g©es_[
j
].fos_[k] + 
off£t
;

704 
nfo
 +ğ
g©es_
[
id
].
nfo_
;

705 
g©es_
[
id
].
nfi_
 = g©es_[
j
].nfi_;

706 
g©es_
[
id
].
fis_
 = &fis_[
nfi
];

707 
k
 = 0; k < 
g©es_
[
j
].
nfi_
; ++k)

708 
g©es_
[
id
].
fis_
[
k
] = g©es_[
j
].fis_[k] + 
off£t
;

709 
nfi
 +ğ
g©es_
[
id
].
nfi_
;

711 ià(
g©es_
[
id
].
ty³_
 =ğ
G©e
::
PPI
){

712 
g©es_
[
id
].
nfo_
 = g©es_[
j
].nfo_;

714 
g©es_
[
id
].
fos_
 = &fos_[
nfo
];

715 
k
 = 0; k < 
g©es_
[
j
].
nfo_
; ++k)

716 
g©es_
[
id
].
fos_
[
k
] = g©es_[
j
].fos_[k] + 
off£t
;

717 
nfo
 +ğ
g©es_
[
id
].
nfo_
;

718 
g©es_
[
id
].
nfi_
 = 1;

719 
g©es_
[
id
].
fis_
 = &fis_[
nfi
];

720 if(
cÚnTy³_
 =ğ
CAPTURE
){

721 
g©es_
[
id
].
fis_
[0] = id - 
Åi_
 - 
Åpi_
 ;

722 
g©es_
[
id
].
ty³_
 = 
G©e
::
BUF
;

723 
g©es_
[
id
 - 
Åi_
 - 
Åpi_
].
fos_
[0] = id ;

726 if(
id
 !ğ(
off£t
 + 
Åi_
)){

727 
g©es_
[
id
].
fis_
[0] = id - 
ng©e_
 - 1 ;

728 
g©es_
[
id
].
ty³_
 = 
G©e
::
BUF
;

729 
g©es_
[
id
 - 
ng©e_
 - 1].
fos_
[g©es_[id -‚g©e_ - 1].
nfo_
] = id ;

730 ++
g©es_
[
id
 - 
ng©e_
 - 1].
nfo_
 ;

733 
g©es_
[
id
].
nfi_
 = 0;

735 
nfi
 +ğ
g©es_
[
id
].
nfi_
;

738 
g©es_
[
id
].
nfo_
 = 0;

739 
g©es_
[
id
].
fos_
 = &fos_[
nfo
];

740 
g©es_
[
id
].
nfi_
 = g©es_[
j
].nfi_;

741 
g©es_
[
id
].
fis_
 = &fis_[
nfi
];

742 
k
 = 0; k < 
g©es_
[
j
].
nfi_
; ++k)

743 
g©es_
[
id
].
fis_
[
k
] = g©es_[
j
].fis_[k] + 
off£t
;

744 
nfi
 +ğ
g©es_
[
id
].
nfi_
;

747 if(
cÚnTy³_
 =ğ
CAPTURE
)

748 
j
 = 0; j < 
Åpi_
; ++j){

749 
id
 = 
off£t
 - 
Åpi_
 + 
j
;

750 
g©es_
[
id
].
ty³_
 = 
G©e
::
BUF
;

753 
vl_
 = 
lvl_
 * 
näame_
;

754 
tg©e_
 = 
ng©e_
 * 
näame_
;

755 
	}
}

769 
	gCœcu™
::
	$assignFiMšLvl
(){

770 
i
 = 0; i < 
tg©e_
 ; ++i){

771 
G©e
* 
g
 = &
g©es_
[
i
];

772 
mšLvl
 = 
g
->
lvl_
;

773 
j
 = 0; j < 
g
->
nfi_
; ++j)

774 if(
g©es_
[
g
->
fis_
[
j
]].
lvl_
 < 
mšLvl
){

775 
mšLvl
 = 
g©es_
[
g
->
fis_
[
j
]].
lvl_
;

776 
g
->
fiMšLvl_
 = 
mšLvl
;

785 
	}
}

788 
	gCœcu™
::
	$runScßp
() {

790 
i
=0; i<
tg©e_
; ++i) {

791 
G©e
& 
g
 = 
g©es_
[
i
];

792 
g
.
ty³_
) {

793 
G©e
::
PI
:

794 
G©e
::
PPI
:

795 
g
.
cc0_
=g.
cc1_
=1;

797 
G©e
::
PO
:

798 
G©e
::
PPO
:

799 
g
.
cc0_
=
g©es_
[g.
fis_
[0]].cc0_;

800 
g
.
cc1_
=
g©es_
[g.
fis_
[0]].cc1_;

802 
G©e
::
INV
:

803 
G©e
::
BUF
:

805 
G©e
 
fi
 = 
g©es_
[
g
.
fis_
[0]];

806 
g
.
cc0_
 = (!g.
	`isInv”£
())?
fi
.cc0_:fi.
cc1_
;

807 
g
.
cc1_
 = (!g.
	`isInv”£
())?
fi
.cc1_:fi.
cc0_
;

809 
g
.
cc0_
+=1;

810 
g
.
cc1_
+=1;

813 
G©e
::
AND
:

814 
G©e
::
AND2
:

815 
G©e
::
AND3
:

816 
G©e
::
AND4
:

817 
G©e
::
NAND
:

818 
G©e
::
NAND2
:

819 
G©e
::
NAND3
:

820 
G©e
::
NAND4
:

822 
cc1_sum
 = 0;

823 
cc0_mš
 = 
INT_MAX
;

824 
i
=0; i<
g
.
nfi_
; i++) {

825 
G©e
 
fi
 = 
g©es_
[
g
.
fis_
[
i
]];

826 
cc1_sum
+=
fi
.
cc1_
;

827 if(
fi
.
cc0_
 < 
cc0_mš
)

828 
cc0_mš
 = 
fi
.
cc0_
;

831 
g
.
cc0_
 = (!g.
	`isInv”£
())?
cc0_mš
:
cc1_sum
;

832 
g
.
cc1_
 = (!g.
	`isInv”£
())?
cc1_sum
:
cc0_mš
;

834 
g
.
cc0_
+=1;

835 
g
.
cc1_
+=1;

838 
G©e
::
OR
:

839 
G©e
::
OR2
:

840 
G©e
::
OR3
:

841 
G©e
::
OR4
:

842 
G©e
::
NOR
:

843 
G©e
::
NOR2
:

844 
G©e
::
NOR3
:

845 
G©e
::
NOR4
:

847 
cc0_sum
 = 0;

848 
cc1_mš
 = 
INT_MAX
;

849 
i
=0; i<
g
.
nfi_
; i++) {

850 
G©e
 
fi
 = 
g©es_
[
g
.
fis_
[
i
]];

851 
cc0_sum
+=
fi
.
cc0_
;

852 if(
fi
.
cc1_
 < 
cc1_mš
)

853 
cc1_mš
 = 
fi
.
cc1_
;

856 
g
.
cc0_
 = (!g.
	`isInv”£
())?
cc0_sum
:
cc1_mš
;

857 
g
.
cc1_
 = (!g.
	`isInv”£
())?
cc1_mš
:
cc0_sum
;

859 
g
.
cc0_
+=1;

860 
g
.
cc1_
+=1;

864 
cout
 << "***WARNNING: Circuit::runScoap(): gateype ";

865 
cout
 << 
g
.
ty³_
;

866 
cout
 << " currently‚ot supported...\n";

872 
n
=
tg©e_
-1;‚>=0; --n) {

873 
G©e
 *
g
 = &
g©es_
[
n
];

875 
boŞ
 
co_o_£t
 = 
çl£
;

876 
co_o_mš
 = 
INT_MAX
;

877 
i
=0; i<
g
->
nfo_
; ++i) {

878 
G©e
 *
fo
 = &
g©es_
[
g
->
fos_
[
i
]];

879 
j
=0; j<
fo
->
nfi_
; ++j) {

880 if(
fo
->
fis_
[
j
]==
g
->
id_
 &&

881 
fo
->
co_i_
[
j
]<
co_o_mš
) {

882 
co_o_mš
 = 
fo
->
co_i_
[
j
];

883 
co_o_£t
 = 
Œue
;

887 
g
->
co_o_
 = (!
co_o_£t
)?0:
co_o_mš
;

890 
g
->
ty³_
) {

891 
G©e
::
PI
:

892 
G©e
::
PPI
:

894 
G©e
::
PO
:

895 
G©e
::
PPO
:

896 
g
->
co_i_
[0] = 0;

898 
G©e
::
INV
:

899 
G©e
::
BUF
:

900 
g
->
co_i_
[0] = g->
co_o_
+1;

902 
G©e
::
AND
:

903 
G©e
::
AND2
:

904 
G©e
::
AND3
:

905 
G©e
::
AND4
:

906 
G©e
::
NAND
:

907 
G©e
::
NAND2
:

908 
G©e
::
NAND3
:

909 
G©e
::
NAND4
:

910 
G©e
::
OR
:

911 
G©e
::
OR2
:

912 
G©e
::
OR3
:

913 
G©e
::
OR4
:

914 
G©e
::
NOR
:

915 
G©e
::
NOR2
:

916 
G©e
::
NOR3
:

917 
G©e
::
NOR4
:

919 
i
=0; i<
g
->
nfi_
; ++i) {

920 
g
->
co_i_
[
i
] = g->
co_o_
 + 1;

921 
j
=0; j<
g
->
nfi_
; ++j) {

922 if(
j
==
i
) ;

923 
cc
 = (
g
->
	`g‘IÅutNÚCŒlV®ue
()==
L
)?
g©es_
[g->
fis_
[
j
]].
cc0_
:g©es_[g->fis_[j]].
cc1_
;

924 
g
->
co_i_
[
i
]+=
cc
;

930 
cout
 << "***WARNNING: Circuit::runScoap(): gateype ";

931 
cout
 << 
g
->
ty³_
;

932 
cout
 << " currently‚ot supported...\n";

936 
	}
}

938 
	gCœcu™
::
	$£tupCœcu™P¬am‘”
() {

939 
	`id’tifyLšeP¬am‘”
();

940 
	}
}

942 
	gCœcu™
::
	$id’tifyLšeP¬am‘”
() {

943 
nH—dLše_
 = 0;

946 
i
 = 0 ; i < 
tg©e_
 ; i++ ){

949 
G©e
 &
g
 = 
g©es_
[
i
];

952 
g
.
Éy³_
 = 
G©e
::
FREE_LINE
;

955 ià(
g
.
ty³_
 !ğ
G©e
::
PI
 && g.ty³_ !ğG©e::
PPI
)

956 
j
 = 0 ; j < 
g
.
nfi_
 ; j++ )

959 iàĞ
g
.
Éy³_
!ğ
G©e
::
FREE_LINE
 ) {

960 
g
.
Éy³_
 = 
G©e
::
BOUND_LINE
;

964 ifĞ
g
.
Éy³_
=ğ
G©e
::
FREE_LINE
 && g.
nfo_
 != 1){

965 
g
.
Éy³_
 = 
G©e
::
HEAD_LINE
;

966 
nH—dLše_
++;

970 ifĞ
g
.
Éy³_
 =ğ
G©e
::
BOUND_LINE
 )

971  
j
 = 0 ; j < 
g
.
nfi_
 ; j++ )

972 iàĞ
g
.
Éy³_
=ğ
G©e
::
FREE_LINE
 ){

973 
g
.
Éy³_
 = 
G©e
::
HEAD_LINE
;

974 
nH—dLše_
++;

979 
h—dLšes_
 = 
Ãw
 [
nH—dLše_
];

980 
šH—d
 = 0;

981 
i
 = 0 ; i < 
tg©e_
 ; i++ ) {

982 
G©e
 &
g
 = 
g©es_
[
i
];

983 ifĞ
g
.
Éy³_
 =ğ
G©e
::
HEAD_LINE
){

984 
h—dLšes_
[
šH—d
++] = 
g
.
id_
;

985 ifĞ
šH—d
 =ğ
nH—dLše_
 )

989 
	}
}

	@core/src/circuit.h

8 #iâdeà
_CORE_CIRCUIT_H_


9 
	#_CORE_CIRCUIT_H_


	)

11 
	~<£t
>

13 
	~"š‹rçû/Ãi¡.h
"

15 
	~"g©e.h
"

17 
Çme¥aû
 
	gCÜeNs
 {

19 şas 
	cCœcu™
 {

20 
	gpublic
:

21 
Cœcu™
();

22 ~
Cœcu™
();

26 
	etfCÚÃùTy³
 { 
	gCAPTURE
 = 0, 
	gSHIFT
 };

29 
boŞ
 
bud
(
IÁfNs
::
N‘li¡
 * cÚ¡ 
Æ
, cÚ¡ &
näame
 = 1,

30 cÚ¡ 
tfCÚÃùTy³
 &
ty³
 = 
CAPTURE
);

33 
	gIÁfNs
::
N‘li¡
 *
Æ_
;

34 
	gÅi_
;

35 
	gÅpi_
;

36 
	gÅo_
;

37 
	gncomb_
;

38 
	gng©e_
;

39 
	gÂ‘_
;

40 
	glvl_
;

43 
	gnäame_
;

44 
tfCÚÃùTy³
 
	gcÚnTy³_
;

45 
	gtg©e_
;

46 
	gvl_
;

55 
G©e
 *
	gg©es_
;

56 *
	gfis_
;

57 *
	gfos_
;

58 *
	gûÎToG©e_
;

59 *
	gpÜtToG©e_
;

61 *
	gh—dLšes_
;

62 
	gnH—dLše_
;

64 
	g´Ùeùed
:

66 
ü—‹M­
();

67 
ÿlNg©e
();

68 
ÿlNÃt
();

69 
ü—‹G©e
();

70 
ü—‹Pi
(&
nfo
);

71 
ü—‹Ppi
(&
nfo
);

72 
ü—‹Comb
(&
nfi
, &
nfo
);

73 
ü—‹Pmt
(cÚ¡ &
id
, cÚ¡ 
IÁfNs
::
C–l
 * cÚ¡ 
c
,

74 cÚ¡ 
IÁfNs
::
Pmt
 * cÚ¡ 
pmt
, &
nfi
, &
nfo
);

75 
ü—‹V”ogPmt
(cÚ¡ &
id
, cÚ¡ 
IÁfNs
::
C–l
 * cÚ¡ 
c
,

76 &
nfi
, &
nfo
);

77 
d‘V”ogPmtTy³
(cÚ¡ &
id
, cÚ¡ 
IÁfNs
::
C–l
 * cÚ¡ 
c
);

78 
d‘G©eTy³
(cÚ¡ &
id
, cÚ¡ 
IÁfNs
::
C–l
 * cÚ¡ 
c
,

79 cÚ¡ 
IÁfNs
::
Pmt
 * cÚ¡ 
pmt
);

80 
ü—‹Po
(&
nfi
);

81 
ü—‹Ppo
(&
nfi
);

82 
cÚÃùF¿me
();

83 
assignFiMšLvl
();

85 
runScßp
();

86 
£tupCœcu™P¬am‘”
();

87 
id’tifyLšeP¬am‘”
();

90 
šlše
 
	gCœcu™
::
	$Cœcu™
() {

91 
Æ_
 = 
NULL
;

92 
Åi_
 = 0;

93 
Åpi_
 = 0;

94 
Åo_
 = 0;

95 
ncomb_
 = 0;

96 
ng©e_
 = 0;

97 
Â‘_
 = 0;

98 
lvl_
 = -1;

99 
näame_
 = 1;

100 
cÚnTy³_
 = 
CAPTURE
;

101 
g©es_
 = 
NULL
;

102 
ûÎToG©e_
 = 
NULL
;

103 
pÜtToG©e_
 = 
NULL
;

104 
	}
}

106 
šlše
 
	gCœcu™
::~
	$Cœcu™
() {

107 
d–‘e
 [] 
g©es_
;

108 
d–‘e
 [] 
fis_
;

109 
d–‘e
 [] 
fos_
;

110 
d–‘e
 [] 
ûÎToG©e_
;

111 
d–‘e
 [] 
pÜtToG©e_
;

112 
	}
}

	@core/src/d_decision_tree.h

19 
	~<¡ack
>

21 
	~"decisiÚ_Œ“.h
"

22 
	~"g©e.h
"

24 
Çme¥aû
 
	gCÜeNs
 {

26 
	sDDNode
 {

27 
DDNode
(cÚ¡ 
G©eVec
 &
df
,

28 cÚ¡ &
¡¬tPošt
,

29 cÚ¡ 
DecisiÚT»e
 &
Œ“
);

30 
	g¡¬tPošt_
;

32 
boŞ
 
em±y
() const;

33 
G©e
 *
tİ
() const;

34 
pİ
();

35 
g‘JT»e
(
DecisiÚT»e
 &
Œ“
) const;

36 
	g´Ùeùed
:

37 
G©eVec
 
däÚt_
;

39 
DecisiÚT»e
 
	gj_Œ“_
;

42 şas 
	cDDT»e
 {

43 
	gpublic
:

44 
DDT»e
() { };

45 ~
DDT»e
();

47 
ş—r
();

48 
push
(cÚ¡ 
G©eVec
 &
df
,

49 cÚ¡ &
¡¬tPošt
,

50 cÚ¡ 
DecisiÚT»e
 &
Œ“
);

51 
boŞ
 
pİ
(
DecisiÚT»e
 &
Œ“
);

52 
tİ
(&
gid
) const;

53 
boŞ
 
em±y
() const;

55 
G‘P©h
(
G©eVec
 &
·th
) const;

57 
	g´Ùeùed
:

58 
¡d
::
veùÜ
<
DDNode
*> 
Œ“s_
;

61 
šlše
 
	gDDNode
::
	$DDNode
(cÚ¡ 
G©eVec
 &
df
,

62 cÚ¡ &
¡¬tPošt
,

63 cÚ¡ 
DecisiÚT»e
 &
Œ“
) {

64 
däÚt_
 = 
df
;

65 
¡¬tPošt_
 = 
¡¬tPošt
;

66 
j_Œ“_
 = 
Œ“
;

67 
	}
}

69 
šlše
 
boŞ
 
	gDDNode
::
	$em±y
() const {

70  
däÚt_
.
	`em±y
();

71 
	}
}

73 
šlše
 
G©e
 *
	gDDNode
::
	$tİ
() const {

74  
däÚt_
.
	`back
();

75 
	}
}

77 
šlše
 
	gDDNode
::
	$pİ
() {

78 
däÚt_
.
	`pİ_back
();

79 
	}
}

81 
šlše
 
	gDDNode
::
	$g‘JT»e
(
DecisiÚT»e
 &
Œ“
) const {

82 
Œ“
 = 
j_Œ“_
;

83 
	}
}

85 
šlše
 
	gDDT»e
::~
	$DDT»e
() {

86 
	`ş—r
();

87 
	}
}

89 
šlše
 
	gDDT»e
::
	$ş—r
() {

90 
size_t
 
i
=0; i<
Œ“s_
.
	`size
(); i++)

91 
d–‘e
 
Œ“s_
[
i
];

93 
Œ“s_
.
	`ş—r
();

94 
	}
}

96 
šlše
 
	gDDT»e
::
	$push
(cÚ¡ 
G©eVec
 &
df
,

97 cÚ¡ &
¡¬tPošt
,

98 cÚ¡ 
DecisiÚT»e
 &
Œ“
) {

99 
DDNode
* 
n
 = 
Ãw
 
	`DDNode
(
df
, 
¡¬tPošt
, 
Œ“
);

100 
Œ“s_
.
	`push_back
(
n
);

101 
	}
}

103 
šlše
 
boŞ
 
	gDDT»e
::
	$pİ
(
DecisiÚT»e
 &
Œ“
) {

104 
Œ“s_
.
	`back
()->
	`g‘JT»e
(
Œ“
);

105 
Œ“s_
.
	`back
()->
	`pİ
();

107 ià(
Œ“s_
.
	`back
()->
	`em±y
()) {

108 
Œ“s_
.
	`pİ_back
();

109  
Œue
;

112  
çl£
;

113 
	}
}

115 
šlše
 
	gDDT»e
::
	$tİ
(&
gid
) const {

116 
gid
 = 
Œ“s_
.
	`back
()->
	`tİ
()->
id_
;

118  
Œ“s_
.
	`back
()->
¡¬tPošt_
;

119 
	}
}

121 
šlše
 
boŞ
 
	gDDT»e
::
	$em±y
() const {

122  
Œ“s_
.
	`em±y
();

123 
	}
}

125 
šlše
 
	gDDT»e
::
	$G‘P©h
(
G©eVec
 &
·th
) const {

126 
·th
.
	`ş—r
();

128 
size_t
 
i
=0; i<
Œ“s_
.
	`size
(); i++)

129 
·th
.
	`push_back
(
Œ“s_
[
i
]->
	`tİ
());

130 
	}
}

	@core/src/decision_tree.h

8 #iâdeà
_CORE_DECISION_TREE_H_


9 
	#_CORE_DECISION_TREE_H_


	)

11 
	~<veùÜ
>

13 
Çme¥aû
 
	gCÜeNs
 {

15 
	sDecisiÚT»eNode
 {

16 
	gpublic
:

17 
DecisiÚT»eNode
(cÚ¡ &
gid
, cÚ¡ &
¡¬tPošt
);

18 
	ggid_
;

19 
	g¡¬tPošt_
;

20 
boŞ
 
	gm¬k_
;

23 şas 
	cDecisiÚT»e
 {

24 
	gpublic
:

26 cÚ¡ 
In™Size
 = 5000;

28 
DecisiÚT»e
();

29 ~
DecisiÚT»e
();

31 
ş—r
();

32 
put
(cÚ¡ &
gid
, cÚ¡ &
¡¬tPošt
);

33 
boŞ
 
g‘
(&
gid
, &
¡¬tPošt
);

34 
boŞ
 
em±y
() const;

35 
boŞ
 
Ï¡NodeM¬k
() const;

37 
	gDecisiÚT»e
 &
	gİ”©Ü
ğ(cÚ¡ 
DecisiÚT»e
 &
rhs
);

39 
	g´iv©e
:

40 
¡d
::
veùÜ
<
DecisiÚT»eNode
> 
Œ“_
;

44 
šlše
 
	gDecisiÚT»eNode
::
	$DecisiÚT»eNode
(cÚ¡ &
gid
,

45 cÚ¡ &
¡¬tPošt
) {

46 
gid_
 = 
gid
;

47 
¡¬tPošt_
 = 
¡¬tPošt
;

48 
m¬k_
 = 
çl£
;

49 
	}
}

52 
šlše
 
	gDecisiÚT»e
::
	$DecisiÚT»e
() {

53 
Œ“_
.
	`»£rve
(
In™Size
);

54 
	}
}

56 
šlše
 
	gDecisiÚT»e
::~
	$DecisiÚT»e
(è{
	}
}

58 
šlše
 
DecisiÚT»e
::
	$ş—r
() {

59 
Œ“_
.
	`ş—r
();

60 
	}
}

62 
šlše
 
	gDecisiÚT»e
::
	$put
(cÚ¡ &
gid
, cÚ¡ &
¡¬tPošt
) {

63 
Œ“_
.
	`push_back
(
	`DecisiÚT»eNode
(
gid
, 
¡¬tPošt
));

64 
	}
}

66 
šlše
 
boŞ
 
	gDecisiÚT»e
::
	$g‘
(&
gid
, &
¡¬tPošt
) {

67 
DecisiÚT»eNode
 &
node
 = 
Œ“_
.
	`back
();

68 
gid
 = 
node
.
gid_
;

69 
¡¬tPošt
 = 
node
.
¡¬tPošt_
;

71 ià(
node
.
m¬k_
) {

72 
Œ“_
.
	`pİ_back
();

73  
Œue
;

76 
node
.
m¬k_
 = 
Œue
;

77  
çl£
;

79  
çl£
;

80 
	}
}

82 
šlše
 
boŞ
 
	gDecisiÚT»e
::
	$em±y
() const {

83  
Œ“_
.
	`em±y
();

84 
	}
}

86 
šlše
 
boŞ
 
	gDecisiÚT»e
::
	$Ï¡NodeM¬k
() const {

87  
Œ“_
.
	`em±y
(è? 
çl£
 :»e_.
	`back
().
m¬k_
;

88 
	}
}

90 
šlše
 
	gDecisiÚT»e
 &DecisiÚT»e::
İ”©Ü
ğ(cÚ¡ 
DecisiÚT»e
 &
rhs
) {

91 
Œ“_
 = 
rhs
.tree_;

93  *
	gthis
;

	@core/src/fault.cpp

9 
	~"çuÉ.h
"

11 
usšg
 
Çme¥aû
 
	g¡d
;

12 
usšg
 
Çme¥aû
 
	gIÁfNs
;

13 
usšg
 
Çme¥aû
 
	gCÜeNs
;

15 
	gFauÉLi¡ExŒaù
::
	$exŒaù
(
Cœcu™
 *
cœ
) {

17 
FauÉ
 *
‹mp
;

19 
size_t
 
i
 = 0; i < 
çuÉs_
.
	`size
(); ++i)

20 
d–‘e
 
çuÉs_
[
i
];

21 
çuÉs_
.
	`ş—r
();

22 
d–‘e
 [] 
g©eToFauÉ_
;

25 ià(
ty³_
 =ğ
SAF
) {

26 
g©eToFauÉ_
 = 
Ãw
 [
cœ
->
ng©e_
];

27 
i
 = 0; i < 
cœ
->
ng©e_
; ++i) {

28 
g©eToFauÉ_
[
i
] = 
çuÉs_
.
	`size
();

32 ià(
cœ
->
g©es_
[
i
].
nfo_
 > 0 && i < cœ->
Åi_
 + cœ->
Åpi_
) {

33 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
SA0
, 0));

34 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
SA1
, 0));

37 
j
 = 0; j < 
cœ
->
g©es_
[
i
].
nfi_
; ++j) {

38 ià(
cœ
->
g©es_
[cœ->g©es_[
i
].
fis_
[
j
]].
nfo_
>1) {

39 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
SA0
, 
j
 + 1));

40 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
SA1
, 
j
 + 1));

113 
g©eToFauÉ_
 = 
Ãw
 [
cœ
->
ng©e_
];

114 
i
 = 0; i < 
cœ
->
ng©e_
; ++i) {

115 
g©eToFauÉ_
[
i
] = 
çuÉs_
.
	`size
();

118 ià(
cœ
->
g©es_
[
i
].
nfo_
 > 0 && i < cœ->
ng©e_
 - cœ->
Åpi_
) {

119 if(
cœ
->
g©es_
[
i
].
ty³_
 !ğ
G©e
::
PPI
) {

120 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STR
, 0));

121 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STF
, 0));

124 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STR
, 0);

125 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

126 
çuÉs_
.
	`push_back
(
‹mp
);

127 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STF
, 0);

128 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

129 
çuÉs_
.
	`push_back
(
‹mp
);

132 
j
 = 0; j < 
cœ
->
g©es_
[
i
].
nfi_
; ++j) {

133 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STR
, 
j
 + 1));

134 
çuÉs_
.
	`push_back
(
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STF
, 
j
 + 1));

136 ià(
cœ
->
g©es_
[
i
].
ty³_
 =ğ
G©e
::
PPI
) {

137 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STR
, -1);

138 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

139 
çuÉs_
.
	`push_back
(
‹mp
);

140 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STR
, -2);

141 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

142 
çuÉs_
.
	`push_back
(
‹mp
);

143 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STR
, -3);

144 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

145 
çuÉs_
.
	`push_back
(
‹mp
);

146 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STF
, -4);

147 
‹mp
->
¡©e_
 = 
FauÉ
::
UD
;

148 
çuÉs_
.
	`push_back
(
‹mp
);

149 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STF
, -1);

150 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

151 
çuÉs_
.
	`push_back
(
‹mp
);

152 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STF
, -2);

153 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

154 
çuÉs_
.
	`push_back
(
‹mp
);

155 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STF
, -3);

156 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

157 
çuÉs_
.
	`push_back
(
‹mp
);

158 
‹mp
 = 
Ãw
 
	`FauÉ
(
i
, 
FauÉ
::
STF
, -4);

159 
‹mp
->
¡©e_
 = 
FauÉ
::
UD
;

160 
çuÉs_
.
	`push_back
(
‹mp
);

167 
size_t
 
i
 = 0; i < 
cœ
->
Æ_
->
	`g‘Tİ
()->
	`g‘NPÜt
(); ++i) {

168 
PÜt
 *
p
 = 
cœ
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
i
);

169 ià(!
	`¡rcmp
(
p
->
Çme_
,"CK")) {

170 
‹mp
 = 
Ãw
 
	`FauÉ
(-1,
FauÉ
::
STR
,0);

171 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

172 
çuÉs_
.
	`push_back
(
‹mp
);

173 
‹mp
 = 
Ãw
 
	`FauÉ
(-1,
FauÉ
::
STF
,0);

174 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

175 
çuÉs_
.
	`push_back
(
‹mp
);

177 
‹mp
 = 
Ãw
 
	`FauÉ
(-2,
FauÉ
::
STR
,0);

178 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

179 
çuÉs_
.
	`push_back
(
‹mp
);

180 
‹mp
 = 
Ãw
 
	`FauÉ
(-2,
FauÉ
::
STF
,0);

181 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

182 
çuÉs_
.
	`push_back
(
‹mp
);

184 
‹mp
 = 
Ãw
 
	`FauÉ
(-3,
FauÉ
::
STR
,0);

185 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

186 
çuÉs_
.
	`push_back
(
‹mp
);

187 
‹mp
 = 
Ãw
 
	`FauÉ
(-3,
FauÉ
::
STF
,0);

188 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

189 
çuÉs_
.
	`push_back
(
‹mp
);

191 
‹mp
 = 
Ãw
 
	`FauÉ
(-4,
FauÉ
::
STR
,0);

192 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

193 
çuÉs_
.
	`push_back
(
‹mp
);

194 
‹mp
 = 
Ãw
 
	`FauÉ
(-4,
FauÉ
::
STF
,0);

195 
‹mp
->
¡©e_
 = 
FauÉ
::
DT
;

196 
çuÉs_
.
	`push_back
(
‹mp
);

203 
	}
}

	@core/src/fault.h

8 #iâdeà
_CORE_FAULT_H_


9 
	#_CORE_FAULT_H_


	)

11 
	~<io¡»am
>

12 
	~<li¡
>

14 
	~"cœcu™.h
"

16 
usšg
 
Çme¥aû
 
	g¡d
;

18 
Çme¥aû
 
	gCÜeNs
 {

20 
şass
 
	gFauÉ
;

21 
	g¡d
::
	tveùÜ
<
	tFauÉ
 *> 
	tFauÉVec
;

22 
	g¡d
::
	tli¡
<
	tFauÉ
 *> 
	tFauÉLi¡
;

23 
	g¡d
::
	tli¡
<
	tFauÉ
 *>::
	t™”©Ü
 
	tFauÉLi¡I‹r
;

25 şas 
	cFauÉ
 {

26 
	gpublic
:

44 
	eTy³
 { 
SA0
 = 0, 
	gSA1
, 
	gSTR
, 
	gSTF
, 
	gBR
 };

45 
	eS‹
 { 
	gUD
 = 0, 
	gDT
, 
	gPT
, 
	gAU
, 
	gTI
, 
	gRE
, 
	gAB
 };

47 
FauÉ
();

48 
FauÉ
(
g©e
, 
Ty³
 
ty³
, 
lše
, 
aggr
 = -1);

49 ~
FauÉ
();

51 
	gaggr_
;

52 
	gg©e_
;

53 
Ty³
 
	gty³_
;

54 
	glše_
;

56 
	gd‘_
;

57 
S‹
 
	g¡©e_
;

59 
	gh¬d_
;

61 
´št
() const;

64 şas 
	cFauÉLi¡ExŒaù
 {

65 
	gpublic
:

66 
	eTy³
 { 
SAF
 = 0, 
	gTDF
, 
	gBRF
 };

68 
FauÉLi¡ExŒaù
();

69 ~
FauÉLi¡ExŒaù
();

71 
exŒaù
(
Cœcu™
 *
cœ
);

73 *
	gg©eToFauÉ_
;

74 
FauÉVec
 
	gçuÉs_
;

75 
FauÉLi¡
 
	gcu¼’t_
;

76 
Ty³
 
	gty³_
;

78 
g‘NStus
(
FauÉ
::
S‹
 
f¡©us
);

81 
šlše
 
	gFauÉ
::
	$FauÉ
() {

82 
aggr_
 = -1;

83 
g©e_
 = -1;

84 
ty³_
 = 
SA0
;

85 
lše_
 = -1;

86 
d‘_
 = 0;

87 
¡©e_
 = 
UD
;

88 
h¬d_
 = -1;

89 
	}
}

91 
šlše
 
	gFauÉ
::
	$FauÉ
(
g©e
, 
Ty³
 
ty³
, 
lše
, 
aggr
) {

92 
aggr_
 = 
aggr
;

93 
g©e_
 = 
g©e
;

94 
ty³_
 = 
ty³
;

95 
lše_
 = 
lše
;

96 
d‘_
 = 0;

97 
¡©e_
 = 
UD
;

98 
	}
}

100 
šlše
 
	gFauÉ
::~
	$FauÉ
(è{
	}
}

102 
šlše
 
FauÉ
::
	$´št
() const

104 
cout
 << "# ";

105 
ty³_
) {

106 
FauÉ
::
SA0
:

107 
cout
 << "SA0 ";

109 
FauÉ
::
SA1
:

110 
cout
 << "SA1 ";

112 
FauÉ
::
STR
:

113 
cout
 << "STR ";

115 
FauÉ
::
STF
:

116 
cout
 << "STF ";

118 
FauÉ
::
BR
:

119 
cout
 << "BR ";

122 
¡©e_
) {

123 
FauÉ
::
UD
:

124 
cout
 << " UD ";

126 
FauÉ
::
DT
:

127 
cout
 << " DT ";

129 
FauÉ
::
PT
:

130 
cout
 << " PT ";

132 
FauÉ
::
AU
:

133 
cout
 << " AU ";

135 
FauÉ
::
TI
:

136 
cout
 << " TI ";

138 
FauÉ
::
RE
:

139 
cout
 << " RE ";

141 
FauÉ
::
AB
:

142 
cout
 << " AB ";

145 
cout
 << 
g©e_
 << "/" << 
lše_
 << 
’dl
;

146 
	}
}

148 
šlše
 
	gFauÉLi¡ExŒaù
::
	$FauÉLi¡ExŒaù
() {

149 
g©eToFauÉ_
 = 
NULL
;

150 
ty³_
 = 
SAF
;

151 
	}
}

153 
šlše
 
	gFauÉLi¡ExŒaù
::~
	$FauÉLi¡ExŒaù
(è{
	}
}

155 
šlše
 
FauÉLi¡ExŒaù
::
	$g‘NStus
(
FauÉ
::
S‹
 
f¡©us
) {

156 
»t
 = 0;

158 
FauÉLi¡I‹r
 
™
 = 
cu¼’t_
.
	`begš
();

159  ; 
™
 !ğ
cu¼’t_
.
	`’d
(); ++it) {

160 ià((*
™
)->
¡©e_
==
f¡©us
)

161 
»t
++;

164  
»t
;

165 
	}
}

	@core/src/gate.h

8 #iâdeà
_CORE_GATE_H_


9 
	#_CORE_GATE_H_


	)

11 
	~<io¡»am
>

12 
	~<c¡ršg
>

14 
	~"š‹rçû/ûÎ.h
"

16 
	~"logic-hex.h
"

18 
usšg
 
Çme¥aû
 
	g¡d
;

20 
Çme¥aû
 
	gCÜeNs
 {

22 
şass
 
	gG©e
;

24 
	g¡d
::
	tveùÜ
<
	tG©e
 *> 
	tG©eVec
;

25 
PrštG©eVec
(cÚ¡ 
G©eVec
& 
gs
);

27 şas 
	cG©e
 {

28 
	gpublic
:

29 
G©e
();

30 ~
G©e
();

32 
	eTy³
 { 
	gNA
 = 0,

33 
	gPI
, 
	gPO
,

34 
	gPPI
, 
	gPPO
, 
	gPPI_IN
, 
	gPPO_IN
,

35 
	gINV
, 
	gBUF
,

36 
	gAND
, 
	gAND2
, 
	gAND3
, 
	gAND4
,

37 
	gNAND
, 
	gNAND2
, 
	gNAND3
, 
	gNAND4
,

38 
	gOR
, 
	gOR2
, 
	gOR3
, 
	gOR4
,

39 
	gNOR
, 
	gNOR2
, 
	gNOR3
, 
	gNOR4
,

40 
	gXOR
, 
	gXOR2
, 
	gXOR3
,

41 
	gXNOR
, 
	gXNOR2
, 
	gXNOR3
,

42 
	gMUX
,

43 
	gTIE0
, 
	gTIE1
, 
	gTIEX
, 
	gTIEZ


46 
	eLINE_TYPE
 { 
	gFREE_LINE
 = 0, 
	gHEAD_LINE
, 
	gBOUND_LINE
 };

49 *
	gÇme_
;

50 
	gid_
;

51 
	gcid_
;

52 
	gpmtid_
;

53 
	glvl_
;

54 
	gäame_
;

55 
Ty³
 
	gty³_
;

56 
LINE_TYPE
 
	gÉy³_
;

59 
	gnfi_
;

60 *
	gfis_
;

61 
	gnfo_
;

62 *
	gfos_
;

66 
P¬aV®ue
 
	ggl_
;

67 
P¬aV®ue
 
	ggh_
;

68 
P¬aV®ue
 
	gæ_
;

69 
P¬aV®ue
 
	gfh_
;

73 
boŞ
 
	ghasCÚs_
;

74 
P¬aV®ue
 
	gcÚs_
;

77 
	gcc0_
;

78 
	gcc1_
;

79 
	gco_o_
;

80 *
	gco_i_
;

82 
	gd•thFromPo_
;

83 
	gfiMšLvl_
;

85 
´št
() const;

86 
¡ršg
 
g‘Ty³Name
() const;

88 
boŞ
 
isFªoutS‹m
() const;

90 
V®ue
 
isUÇry
() const;

91 
V®ue
 
isInv”£
() const;

92 
V®ue
 
g‘IÅutNÚCŒlV®ue
() const;

93 
V®ue
 
g‘IÅutCŒlV®ue
() const;

94 
V®ue
 
g‘OuutCŒlV®ue
() const;

98 
šlše
 
	gG©e
::
	$G©e
() {

99 
id_
 = -1;

100 
cid_
 = -1;

101 
pmtid_
 = 0;

102 
lvl_
 = -1;

103 
äame_
 = 0;

104 
ty³_
 = 
NA
;

105 
nfi_
 = 0;

106 
fis_
 = 
NULL
;

107 
nfo_
 = 0;

108 
fos_
 = 
NULL
;

109 
gl_
 = 
PARA_L
;

110 
gh_
 = 
PARA_L
;

111 
æ_
 = 
PARA_L
;

112 
fh_
 = 
PARA_L
;

113 
hasCÚs_
 = 
çl£
;

114 
cÚs_
 = 
PARA_L
;

116 
cc0_
 = 0;

117 
cc1_
 = 0;

118 
co_o_
 = 0;

119 
co_i_
 = 0;

121 
d•thFromPo_
 = -1;

122 
fiMšLvl_
 = -1;

123 
	}
}

125 
šlše
 
	gG©e
::~
	$G©e
() {

126 if(!
co_i_
è
d–‘e
 co_i_;

127 
	}
}

129 
šlše
 
¡ršg
 
	gG©e
::
	$g‘Ty³Name
() const {

130 
ty³_
) {

131 
PI
:  
	`¡ršg
("PI");

132 
PO
:  
	`¡ršg
("PO");

133 
PPI
:  
	`¡ršg
("PPI");

134 
PPO
:  
	`¡ršg
("PPO");

135 
INV
:  
	`¡ršg
("INV");

136 
BUF
:  
	`¡ršg
("BUF");

137 
AND
:  
	`¡ršg
("AND");

138 
AND2
:  
	`¡ršg
("AND2");

139 
AND3
:  
	`¡ršg
("AND3");

140 
AND4
:  
	`¡ršg
("AND4");

141 
NAND
:  
	`¡ršg
("NAND");

142 
NAND2
:  
	`¡ršg
("NAND2");

143 
NAND3
:  
	`¡ršg
("NAND3");

144 
NAND4
:  
	`¡ršg
("NAND4");

145 
OR
:  
	`¡ršg
("OR");

146 
OR2
:  
	`¡ršg
("OR2");

147 
OR3
:  
	`¡ršg
("OR3");

148 
OR4
:  
	`¡ršg
("OR4");

149 
NOR
:  
	`¡ršg
("NOR");

150 
NOR2
:  
	`¡ršg
("NOR2");

151 
NOR3
:  
	`¡ršg
("NOR3");

152 
NOR4
:  
	`¡ršg
("NOR4");

154 
	`as£¹
(0);

155  
	`¡ršg
("");

158 
	}
}

160 
šlše
 
	gG©e
::
	$´št
() const {

161 
cout
 << "# ";

162 
cout
 << "id(" << 
id_
 << ") ";

163 
cout
 << "lvl(" << 
lvl_
 << ") ";

164 
cout
 << "ty³(" << 
ty³_
 << ") ";

165 
cout
 << "äame(" << 
äame_
 << ")";

166 
cout
 << 
’dl
;

167 
cout
 << "# fi[" << 
nfi_
 << "]";

168 
j
 = 0; j < 
nfi_
; ++j)

169 
cout
 << " " << 
fis_
[
j
];

170 
cout
 << 
’dl
;

171 
cout
 << "# fo[" << 
nfo_
 << "]";

172 
j
 = 0; j < 
nfo_
; ++j)

173 
cout
 << " " << 
fos_
[
j
];

174 
cout
 << 
’dl
 <<ƒndl;

175 
	}
}

177 
šlše
 
boŞ
 
	gG©e
::
	$isFªoutS‹m
() const {

178  (
nfo_
 > 1);

179 
	}
}

181 
šlše
 
V®ue
 
	gG©e
::
	$isUÇry
() const {

182  
nfi_
 =ğ1 ? 
H
 : 
L
;

183 
	}
}

185 
šlše
 
V®ue
 
	gG©e
::
	$isInv”£
() const {

186 
ty³_
) {

187 
INV
:

188 
NAND
:

189 
NAND2
:

190 
NAND3
:

191 
NAND4
:

192 
NOR
:

193 
NOR2
:

194 
NOR3
:

195 
NOR4
:

196 
XNOR
:

197 
XNOR2
:

198 
XNOR3
:

199  
H
;

201  
L
;

203 
	}
}

205 
šlše
 
V®ue
 
	gG©e
::
	$g‘IÅutNÚCŒlV®ue
() const {

206  
	`isInv”£
(è=ğ
	`g‘OuutCŒlV®ue
(è? 
L
 : 
H
;

207 
	}
}

209 
šlše
 
V®ue
 
	gG©e
::
	$g‘IÅutCŒlV®ue
() const {

210  
	`g‘IÅutNÚCŒlV®ue
(è=ğ
H
 ? 
L
 : H;

211 
	}
}

213 
šlše
 
V®ue
 
	gG©e
::
	$g‘OuutCŒlV®ue
() const {

214 
ty³_
) {

215 
OR
:

216 
OR2
:

217 
OR3
:

218 
OR4
:

219 
NAND
:

220 
NAND2
:

221 
NAND3
:

222 
NAND4
:

223  
L
;

224 
PI
:

225 
PPI
:

226 
INV
:

227 
BUF
:

228 
PO
:

229 
PPO
:

230 
XOR
:

231 
XOR2
:

232 
XOR3
:

233 
XNOR
:

234 
XNOR2
:

235 
XNOR3
:

236  
X
;

238  
H
;

240 
	}
}

242 
šlše
 
	$PrštG©eVec
(cÚ¡ 
G©eVec
& 
gs
) {

243 
size_t
 
i
=0; i<
gs
.
	`size
(); i++)

244 
cout
 << 
gs
[
i
]->
id_
 << " ";

245 
cout
 << 
’dl
;

246 
	}
}

	@core/src/implicator.cpp

19 
	~<ÿs£¹
>

21 
	~"im¶iÿtÜ.h
"

23 
usšg
 
Çme¥aû
 
	g¡d
;

25 
usšg
 
Çme¥aû
 
	gCÜeNs
;

27 
boŞ
 
	gIm¶iÿtÜ
::
	$Ev’tDriv’Sim
() {

28 !
ev’ts_
->
	`em±y
()) {

29 
G©e
 *
g
 = &
cœ_
->
g©es_
[
ev’ts_
->
	`äÚt
()];

30 
ev’ts_
->
	`pİ
();

32 
V®ue
 
v
;

33 
v
 = (
g
->
id_
==
rg‘_çuÉ_
->
g©e_
)?
	`FauÉEv®
(g):
	`GoodEv®
(g);

35 ià(
	`G‘V®
(
g
->
id_
)!=
v
) {

36 ià(!
	`S‘V®
(
g
->
id_
, 
v
)) {

37 ià(
g
->
id_
==
rg‘_çuÉ_
->
g©e_
)

38 
v®ues_
[
g
->
id_
] = 
v
;

40 
	`as£¹
(0);

43 
e_äÚt_li¡_
.
	`push_back
(
g
->
id_
);

44 
	`PushFªoutEv’t
(
g
->
id_
);

47  
Œue
;

48 
	}
}

50 
boŞ
 
	gIm¶iÿtÜ
::
	$Ev’tDriv’SimB
() {

52 
	}
}

54 
boŞ
 
Im¶iÿtÜ
::
	$Ev’tDriv’SimHex
() {

56 
	}
}

58 
V®ue
 
Im¶iÿtÜ
::
	$GoodEv®
(
G©e
 *
g
) const {

59 
V®ue
 
v
 = 
	`G‘V®
(
g
->
fis_
[0]);

60 
veùÜ
<
V®ue
> 
vs
;

61 
n
=0;‚<
g
->
nfi_
;‚++)

62 
vs
.
	`push_back
(
	`G‘V®
(
g
->
fis_
[
n
]));

64 
g
->
ty³_
) {

65 
G©e
::
INV
:

66  
	`Ev®NÙ
(
v
);

68 
G©e
::
AND
:

69 
G©e
::
AND2
:

70 
G©e
::
AND3
:

71 
G©e
::
AND4
:

72  
	`Ev®AndN
(
vs
);

74 
G©e
::
NAND
:

75 
G©e
::
NAND2
:

76 
G©e
::
NAND3
:

77 
G©e
::
NAND4
:

78  
	`Ev®NªdN
(
vs
);

80 
G©e
::
OR
:

81 
G©e
::
OR2
:

82 
G©e
::
OR3
:

83 
G©e
::
OR4
:

84  
	`Ev®OrN
(
vs
);

86 
G©e
::
NOR
:

87 
G©e
::
NOR2
:

88 
G©e
::
NOR3
:

89 
G©e
::
NOR4
:

90  
	`Ev®NÜN
(
vs
);

92 
G©e
::
BUF
:

93 
G©e
::
PO
:

94 
G©e
::
PPO
:

95  
v
;

98 
	`as£¹
(0);

101  
X
;

102 
	}
}

104 
V®ue
 
	gIm¶iÿtÜ
::
	$FauÉEv®
(
G©e
 *
g
) const {

105 ià(
rg‘_çuÉ_
->
lše_
==0) {

106 
V®ue
 
v
;

107 ià(
g
->
ty³_
==
G©e
::
PI
 || g->ty³_==G©e::
PPI
)

108 
v
 = 
v®ues_
[
g
->
id_
];

110 
v
 = 
	`GoodEv®
(
g
);

111 ià(
v
==
L
&&(
rg‘_çuÉ_
->
ty³_
==
FauÉ
::
SA1


112 || 
rg‘_çuÉ_
->
ty³_
==
FauÉ
::
STF
)è
v
 = 
B
;

113 ià(
v
==
H
&&(
rg‘_çuÉ_
->
ty³_
==
FauÉ
::
SA0


114 || 
rg‘_çuÉ_
->
ty³_
==
FauÉ
::
STR
)è
v
 = 
D
;

115  
v
;

118 
lše
 = 
rg‘_çuÉ_
->
lše_
;

119 
V®ue
 
v
 = 
	`G‘V®
(
g
->
fis_
[
lše
-1]);

120 ià(
v
==
L
&&(
rg‘_çuÉ_
->
ty³_
==
FauÉ
::
SA1


121 || 
rg‘_çuÉ_
->
ty³_
==
FauÉ
::
STF
)è
v
 = 
B
;

122 ià(
v
==
H
&&(
rg‘_çuÉ_
->
ty³_
==
FauÉ
::
SA0


123 || 
rg‘_çuÉ_
->
ty³_
==
FauÉ
::
STR
)è
v
 = 
D
;

125 
veùÜ
<
V®ue
> 
vs
; vs.
	`push_back
(
v
);

126 
n
=0;‚<
g
->
nfi_
;‚++)

127 ià(
n
!=
lše
-1)

128 
vs
.
	`push_back
(
	`G‘V®
(
g
->
fis_
[
n
]));

130 
g
->
ty³_
) {

131 
G©e
::
INV
:

132  
	`Ev®NÙ
(
v
);

134 
G©e
::
AND
:

135 
G©e
::
AND2
:

136 
G©e
::
AND3
:

137 
G©e
::
AND4
:

138  
	`Ev®AndN
(
vs
);

140 
G©e
::
NAND
:

141 
G©e
::
NAND2
:

142 
G©e
::
NAND3
:

143 
G©e
::
NAND4
:

144  
	`Ev®NªdN
(
vs
);

146 
G©e
::
OR
:

147 
G©e
::
OR2
:

148 
G©e
::
OR3
:

149 
G©e
::
OR4
:

150  
	`Ev®OrN
(
vs
);

152 
G©e
::
NOR
:

153 
G©e
::
NOR2
:

154 
G©e
::
NOR3
:

155 
G©e
::
NOR4
:

156  
	`Ev®NÜN
(
vs
);

158 
G©e
::
PO
:

159 
G©e
::
PPO
:

160 
G©e
::
BUF
:

161  
v
;

164 
	`as£¹
(0);

169  
X
;

170 
	}
}

172 
	gIm¶iÿtÜ
::
	$PushEv’t
(
gid
) {

173 
G©e
 *
g
 = &
cœ_
->
g©es_
[
gid
];

174 ià(
g
->
ty³_
==
G©e
::
PI
 || g->ty³_==G©e::
PPI
) {

175 ià(
rg‘_çuÉ_
->
g©e_
!=
gid
è
	`as£¹
(0);

178 
ev’ts_
->
	`push
(
gid
);

180 
	}
}

182 
	gIm¶iÿtÜ
::
	$PushFªoutEv’t
(
gid
) {

183 
G©e
 *
g
 = &
cœ_
->
g©es_
[
gid
];

184 
n
=0;‚<
g
->
nfo_
;‚++)

185 
	`PushEv’t
(
g
->
fos_
[
n
]);

186 
	}
}

188 
	gIm¶iÿtÜ
::
	$PushFªšEv’t
(
gid
) {

189 
G©e
 *
g
 = &
cœ_
->
g©es_
[
gid
];

190 
n
=0;‚<
g
->
nfi_
;‚++)

191 
	`PushBEv’t
(
g
->
fis_
[
n
]);

192 
	}
}

194 
	gIm¶iÿtÜ
::
	$PushBEv’t
(
gid
) {

195 
ev’ts_b
->
	`push
(
gid
);

196 
	}
}

198 
	gIm¶iÿtÜ
::
	$PushEv’tHex
(
gid
) {

199 
G©e
 *
g
 = &
cœ_
->
g©es_
[
gid
];

200 ià(
g
->
ty³_
==
G©e
::
PI
 || g->ty³_==G©e::
PPI
)

201 ià(
rg‘_çuÉ_
->
g©e_
!=
gid
è
	`as£¹
(0);

203 
hev’ts_
->
	`push
(
gid
);

205 
	}
}

207 
	gIm¶iÿtÜ
::
	$PushFªoutEv’tHex
(
gid
) {

208 
G©e
 *
g
 = &
cœ_
->
g©es_
[
gid
];

209 
n
=0;‚<
g
->
nfo_
;‚++)

210 
	`PushEv’tHex
(
g
->
fos_
[
n
]);

211 
	}
}

213 
boŞ
 
	gIm¶iÿtÜ
::
	$IsFauÉAtPo
() const {

214 
n
=0;‚<(
cœ_
->
Åo_
+cœ_->
Åpi_
);‚++) {

215 
V®ue
 
v
 = 
	`G‘V®
(
cœ_
->
tg©e_
 - 
n
 - 1);

216 ià(
v
==
D
 || v==
B
)

217  
Œue
;

219  
çl£
;

220 
	}
}

222 
	gIm¶iÿtÜ
::
	$G‘DFrÚt›r
(
G©eVec
& 
df
) const {

223 
n
=0;‚<
cœ_
->
tg©e_
;‚++) {

224 ià(
	`G‘V®
(
n
)!=
X
)

227 
G©e
 *
g
 = &
cœ_
->
g©es_
[
n
];

228 
m
=0; m<
g
->
nfi_
; m++) {

229 
V®ue
 
v
 = 
	`G‘V®
(
g
->
fis_
[
m
]);

230 if(
v
==
D
||v==
B
) {

231 
df
.
	`push_back
(
g
);

236 
	}
}

238 
boŞ
 
	gIm¶iÿtÜ
::
	$G‘DFrÚt›rNCheck
(
G©eVec
& 
df
) {

239 
boŞ
 
d_äÚt_æag_
 = 
çl£
;

240 
df
.
	`ş—r
();

242 
n
=0;‚<
cœ_
->
tg©e_
;‚++) {

243 
G©eS‘
::
™”©Ü
 
™
 = 
d_äÚt_
.
	`fšd
(
n
);

244 ià(
™
!=
d_äÚt_
.
	`’d
()) {

245 ià(
	`G‘V®
(
n
)!=
X
) {

246 
d_äÚt_
.
	`”a£
(
™
);

247 
d_äÚt_æag_
 = 
Œue
;

251 ià(
	`G‘V®
(
n
)!=
X
)

254 
G©e
 *
g
 = &
cœ_
->
g©es_
[
n
];

255 
m
=0; m<
g
->
nfi_
; m++) {

256 
V®ue
 
v
 = 
	`G‘V®
(
g
->
fis_
[
m
]);

257 if(
v
==
D
||v==
B
) {

258 
d_äÚt_
.
	`š£¹
(
n
);

259 
d_äÚt_æag_
 = 
Œue
;

265 
G©eS‘
::
™”©Ü
 
™
 = 
d_äÚt_
.
	`begš
(); it!=d_äÚt_.
	`’d
(); ++it)

266 
df
.
	`push_back
(&
cœ_
->
g©es_
[*
™
]);

268  
d_äÚt_æag_
;

269 
	}
}

271 
boŞ
 
	gIm¶iÿtÜ
::
	$G‘JFrÚt›r
(
G©eVec
& 
jf
) {

272 
boŞ
 
j_äÚt_æag_
 = 
çl£
;

273 
jf
.
	`ş—r
();

275 
i
=0; i<
cœ_
->
tg©e_
; i++) {

276 
G©eS‘
::
™”©Ü
 
™
 = 
j_äÚt_
.
	`fšd
(
i
);

277 ià(
™
!=
j_äÚt_
.
	`’d
()) {

278 ià(!
	`isUnju¡if›d
(
i
)) {

279 
j_äÚt_
.
	`”a£
(
™
);

280 
j_äÚt_æag_
 = 
Œue
;

284 ià(
	`G‘V®
(
i
)==
X
)

287 ià(
	`isUnju¡if›d
(
i
)) {

288 
j_äÚt_
.
	`š£¹
(
i
);

289 
j_äÚt_æag_
 = 
Œue
;

293 
G©eS‘
::
™”©Ü
 
™
 = 
j_äÚt_
.
	`begš
(); it!=j_äÚt_.
	`’d
(); ++it)

294 
jf
.
	`push_back
(&
cœ_
->
g©es_
[*
™
]);

296  
j_äÚt_æag_
;

297 
	}
}

299 
boŞ
 
	gIm¶iÿtÜ
::
	$MakeDecisiÚ
(
G©e
 *
g
, 
V®ue
 
v
) {

300 
	`as£¹
(
g
->
ty³_
==
G©e
::
PI
 || g->ty³_==G©e::
PPI
);

303 
decisiÚ_Œ“_
.
	`put
(
g
->
id_
, 
e_äÚt_li¡_
.
	`size
());

304 
	`AssignV®ue
(
g
->
id_
, 
v
);

306  
Œue
;

307 
	}
}

309 
boŞ
 
	gIm¶iÿtÜ
::
	$BackT¿ck
() {

310 
gid
 = -1;

311 
back_Œack_pošt
 = 0;

313 !
decisiÚ_Œ“_
.
	`em±y
()) {

314 ià(
decisiÚ_Œ“_
.
	`g‘
(
gid
, 
back_Œack_pošt
))

317 
V®ue
 
æ³d_v®
;

318 ià(
	`G‘V®
(
gid
)==
D
è
æ³d_v®
 = 
L
;

319 ià(
	`G‘V®
(
gid
)==
B
è
æ³d_v®
 = 
H
;

320 ià(
	`G‘V®
(
gid
)==
X
è
	`as£¹
(0);

321 
æ³d_v®
 = 
	`Ev®NÙ
(
	`G‘V®
(
gid
));

323 
i
=
back_Œack_pošt
+1; i<
e_äÚt_li¡_
.
	`size
(); i++)

324 
v®ues_
[
e_äÚt_li¡_
[
i
]] = 
X
;

326 
e_äÚt_li¡_
.
	`»size
(
back_Œack_pošt
+1);

327 
v®ues_
[
gid
] = 
æ³d_v®
;

329 ià(
rg‘_çuÉ_
->
g©e_
==
gid
)

330 
	`PushEv’t
(
gid
);

332 
	`PushFªoutEv’t
(
gid
);

333  
Œue
;

336  
çl£
;

337 
	}
}

	@core/src/implicator.h

19 #iâdeà
_CORE_IMPL_H_


20 
	#_CORE_IMPL_H_


	)

22 
	~<queue
>

23 
	~<£t
>

25 
	~"decisiÚ_Œ“.h
"

26 
	~"·‰”n.h
"

27 
	~"simuÏtÜ.h
"

29 
Çme¥aû
 
	gCÜeNs
 {

31 
	g¡d
::
	t£t
<> 
	tG©eS‘
;

33 şas 
	cIm¶iÿtÜ
 {

34 
	gpublic
:

35 
Im¶iÿtÜ
(
Cœcu™
 *
cœ
, 
FauÉ
 *
á¬g‘
);

36 ~
Im¶iÿtÜ
();

38 
In™
();

39 
In™
(
P©‹º
 *
p
);

41 
boŞ
 
Ev’tDriv’Sim
();

42 
boŞ
 
Ev’tDriv’SimB
();

43 
boŞ
 
Ev’tDriv’SimHex
();

44 
PushFªoutEv’t
(
gid
);

45 
PushFªšEv’t
(
gid
);

46 
PushEv’t
(
gid
);

47 
PushBEv’t
(
gid
);

48 
PushFªoutEv’tHex
(
gid
);

49 
PushEv’tHex
(
gid
);

51 
boŞ
 
MakeDecisiÚ
(
G©e
 *
g
, 
V®ue
 
v
);

52 
boŞ
 
BackT¿ck
();

54 
boŞ
 
isPossiblyToS‘V®
(
gid
, 
V®ue
 
v
) const;

55 
boŞ
 
isPossiblyToS‘DÜB
(
gid
) const;

56 
V®ue
 
G‘V®
(
gid
) const;

57 
HexV®ue
 
G‘HexV®
(
gid
) const;

58 
V®ue
 
G‘3V®
(
gid
) const;

59 
boŞ
 
S‘V®
(
gid
, 
V®ue
 
v
);

60 
boŞ
 
S‘V®
(
gid
, 
HexV®ue
 
hv
);

62 
PrštG©e
(
gid
) const;

64 
G‘DFrÚt›r
(
G©eVec
& 
df
) const;

65 
boŞ
 
G‘DFrÚt›rNCheck
(
G©eVec
& 
df
);

66 
boŞ
 
G‘JFrÚt›r
(
G©eVec
& 
jf
);

68 
boŞ
 
IsFauÉAtPo
() const;

70 
G‘PiP©‹º
(
P©‹º
 *
p
) const;

71 
G‘PoP©‹º
(
P©‹º
 *
p
) const;

73 
boŞ
 
isUnju¡if›d
(
gid
) const;

75 
size_t
 
G‘EFrÚt›rSize
() const;

76 
CË¬DecisiÚT»e
();

77 cÚ¡ 
	gDecisiÚT»e
 &
g‘DecisiÚT»e
() const;

78 
£tDecisiÚT»e
(cÚ¡ 
DecisiÚT»e
 &
Œ“
);

80 
	g´iv©e
:

81 
V®ue
 
GoodEv®
(
G©e
 *
g
) const;

82 
V®ue
 
FauÉEv®
(
G©e
* 
g
) const;

83 
HexV®ue
 
GoodEv®Hex
(
G©e
 *
g
) const;

84 
HexV®ue
 
FauÉEv®Hex
(
G©e
 *
g
) const;

86 
AssignV®ue
(
gid
, 
V®ue
 
v
);

88 
Cœcu™
 *
	gcœ_
;

89 
SimuÏtÜ
 *
	gsim_
;

91 
FauÉ
 *
	grg‘_çuÉ_
;

93 
V®ue
 *
	gv®ues_
;

94 
HexV®ue
 *
	ghv®ues_
;

95 
	g¡d
::
queue
<> *
ev’ts_
;

96 
	g¡d
::
queue
<> *
ev’ts_b
;

97 
	g¡d
::
queue
<> *
hev’ts_
;

99 
G©eS‘
 
	gd_äÚt_
;

100 
G©eS‘
 
	gj_äÚt_
;

102 
DecisiÚT»e
 
	gdecisiÚ_Œ“_
;

103 
	g¡d
::
veùÜ
<> 
e_äÚt_li¡_
;

105 
boŞ
 *
	gis_possibly_D
;

108 
šlše
 
	gIm¶iÿtÜ
::
	$Im¶iÿtÜ
(
Cœcu™
 *
cœ
, 
FauÉ
 *
á¬g‘
) {

109 
cœ_
 = 
cœ
;

110 
rg‘_çuÉ_
 = 
á¬g‘
;

112 
sim_
 = 
Ãw
 
	`SimuÏtÜ
(
cœ_
);

113 
is_possibly_D
 = 
Ãw
 
boŞ
 [
cœ_
->
tg©e_
];

114 
v®ues_
 = 
Ãw
 
V®ue
 [
cœ_
->
tg©e_
];

115 
hv®ues_
ğ
Ãw
 
HexV®ue
 [
cœ_
->
tg©e_
];

116 
ev’ts_
 = 
Ãw
 
¡d
::
queue
<>();

117 
ev’ts_b
 = 
Ãw
 
¡d
::
queue
<>();

118 
hev’ts_
 = 
Ãw
 
¡d
::
queue
<>();

119 
	}
}

121 
šlše
 
	gIm¶iÿtÜ
::~
	$Im¶iÿtÜ
() {

122 
d–‘e
 
sim_
;

123 
d–‘e
 [] 
is_possibly_D
;

124 
d–‘e
 [] 
v®ues_
;

125 
d–‘e
 [] 
hv®ues_
;

126 
d–‘e
 
ev’ts_
;

127 
d–‘e
 
ev’ts_b
;

128 
d–‘e
 
hev’ts_
;

129 
	}
}

131 
šlše
 
	gIm¶iÿtÜ
::
	$In™
() {

132 
i
=0; i<
cœ_
->
tg©e_
; i++) {

133 
v®ues_
[
i
] = 
X
;

134 
hv®ues_
[
i
] = 
	`HexV®ue
(
X
);

135 
cœ_
->
g©es_
[
i
].
gl_
 = 
PARA_L
;

136 
cœ_
->
g©es_
[
i
].
gh_
 = 
PARA_L
;

137 
cœ_
->
g©es_
[
i
].
æ_
 = 
PARA_L
;

138 
cœ_
->
g©es_
[
i
].
fh_
 = 
PARA_L
;

141 
¡d
::
queue
<> 
possibly_D_queue
;

142 
possibly_D_queue
.
	`push
(
rg‘_çuÉ_
->
g©e_
);

144 !
possibly_D_queue
.
	`em±y
()) {

145 
gid
 = 
possibly_D_queue
.
	`back
();

146 
possibly_D_queue
.
	`pİ
();

147 
is_possibly_D
[
gid
] = 
Œue
;

149 
G©e
 *
g
 = &
cœ_
->
g©es_
[
gid
];

150 
i
=0; i<
g
->
nfo_
; i++)

151 
possibly_D_queue
.
	`push
(
g
->
fos_
[
i
]);

153 
	}
}

155 
šlše
 
	gIm¶iÿtÜ
::
	$In™
(
P©‹º
 *
p
) {

156 
j
=0; j<
cœ_
->
Åi_
; ++j)

157 
	`AssignV®ue
(
j
, 
p
->
pi1_
[j]);

158 
j
=0; j<
cœ_
->
Åpi_
; ++j)

159 
	`AssignV®ue
(
cœ_
->
Åi_
 + 
j
, 
p
->
µi_
[j]);

161 
	`Ev’tDriv’Sim
();

162 
e_äÚt_li¡_
.
	`ş—r
();

163 
	}
}

166 
šlše
 
V®ue
 
	gIm¶iÿtÜ
::
	$G‘V®
(
gid
) const {

167  
v®ues_
[
gid
];

168 
	}
}

170 
šlše
 
HexV®ue
 
	gIm¶iÿtÜ
::
	$G‘HexV®
(
gid
) const {

171  
hv®ues_
[
gid
];

172 
	}
}

174 
šlše
 
V®ue
 
	gIm¶iÿtÜ
::
	$G‘3V®
(
gid
) const {

175 ià(
v®ues_
[
gid
]==
D
 || v®ues_[gid]==
B
)

176  (
v®ues_
[
gid
]==
D
)?
H
:
L
;

178  
v®ues_
[
gid
];

179 
	}
}

181 
šlše
 
boŞ
 
	gIm¶iÿtÜ
::
	$isPossiblyToS‘DÜB
(
gid
) const {

182  
is_possibly_D
[
gid
];

183 
	}
}

185 
šlše
 
boŞ
 
	gIm¶iÿtÜ
::
	$S‘V®
(
gid
, 
V®ue
 
v
) {

186 ià(
v®ues_
[
gid
]!=
X
 && v®ues_[gid]!=
v
è 
çl£
;

188 
v®ues_
[
gid
] = 
v
;

189  
Œue
;

190 
	}
}

192 
šlše
 
boŞ
 
	gIm¶iÿtÜ
::
	$S‘V®
(
gid
, 
HexV®ue
 
hv
) {

193 ià(!
hv
.
	`isSub£t
(
hv®ues_
[
gid
])è 
çl£
;

195 
hv®ues_
[
gid
] = 
hv
;

196  
Œue
;

197 
	}
}

199 
šlše
 
boŞ
 
	gIm¶iÿtÜ
::
	$isUnju¡if›d
(
gid
) const {

200 
G©e
 *
g
 = &
cœ_
->
g©es_
[
gid
];

201 
V®ue
 
v
 = (
g
->
id_
==
rg‘_çuÉ_
->
g©e_
)?
	`FauÉEv®
(g):
	`GoodEv®
(g);

202  (
v
!=
	`G‘V®
(
gid
));

203 
	}
}

205 
šlše
 
	gIm¶iÿtÜ
::
	$G‘PiP©‹º
(
P©‹º
 *
p
) const {

206 
i
=0; i<
cœ_
->
Åi_
; i++)

207 
p
->
pi1_
[
i
] = 
	`G‘3V®
(i);

208 if(
p
->
pi2_
!=
NULL
 && 
cœ_
->
näame_
>1)

209  
i
 = 0 ; i < 
cœ_
->
Åi_
 ; i++ )

210 
p
->
pi2_
[
i
] = 
	`G‘3V®
(i+
cœ_
->
ng©e_
);

211  
i
 = 0 ; i < 
cœ_
->
Åpi_
 ; i++ )

212 
p
->
µi_
[
i
] = 
	`G‘3V®
(i+
cœ_
->
Åi_
);

213 
	}
}

215 
šlše
 
	gIm¶iÿtÜ
::
	$G‘PoP©‹º
(
P©‹º
 *
p
ècÚ¡ {
	}
}

217 
šlše
 
Im¶iÿtÜ
::
	$PrštG©e
(
gid
) const {

218 
G©e
 *
g
 = &
cœ_
->
g©es_
[
gid
];

220 
cout
 << "# ";

221 
cout
 << "id(" << 
g
->
id_
 << ") ";

222 
cout
 << "lvl(" << 
g
->
lvl_
 << ") ";

223 
cout
 << "ty³(" << 
g
->
ty³_
 << ") ";

224 
cout
 << "äame(" << 
g
->
äame_
 << ")";

225 
cout
 << 
’dl
;

226 
cout
 << "# fi[" << 
g
->
nfi_
 << "]";

227 
j
 = 0; j < 
g
->
nfi_
; ++j) {

228 
cout
 << " " << 
g
->
fis_
[
j
] << "(";

229 
	`´štV®ue
(
	`G‘V®
(
g
->
fis_
[
j
]));

230 
cout
 << ")";

232 
cout
 << 
’dl
;

233 
cout
 << "# fo[" << 
g
->
nfo_
 << "]";

234 
j
 = 0; j < 
g
->
nfo_
; ++j)

235 
cout
 << " " << 
g
->
fos_
[
j
];

236 
cout
 << 
’dl
 <<ƒndl;

237 
	}
}

239 
šlše
 
size_t
 
	gIm¶iÿtÜ
::
	$G‘EFrÚt›rSize
() const {

240  
e_äÚt_li¡_
.
	`size
();

241 
	}
}

243 
šlše
 
	gIm¶iÿtÜ
::
	$CË¬DecisiÚT»e
() {

244 
decisiÚ_Œ“_
.
	`ş—r
();

245 
	}
}

247 
šlše
 cÚ¡ 
	gDecisiÚT»e
 &
	gIm¶iÿtÜ
::
	$g‘DecisiÚT»e
() const {

248  
decisiÚ_Œ“_
;

249 
	}
}

251 
šlše
 
	gIm¶iÿtÜ
::
	$£tDecisiÚT»e
(cÚ¡ 
DecisiÚT»e
 &
Œ“
) {

252 
decisiÚ_Œ“_
 = 
Œ“
;

253 
	}
}

255 
šlše
 
	gIm¶iÿtÜ
::
	$AssignV®ue
(
gid
, 
V®ue
 
v
) {

257 ià(!
	`S‘V®
(
gid
, 
v
)è
	`as£¹
(0);

260 
e_äÚt_li¡_
.
	`push_back
(
gid
);

262 ià(
rg‘_çuÉ_
->
g©e_
==
gid
) {

263 
	`PushEv’t
(
gid
);

267 
	`PushFªoutEv’t
(
gid
);

273 
	}
}

	@core/src/logic-hex.h

19 #iâdeà
_CORE_LOGIC_HEX_H_


20 
	#_CORE_LOGIC_HEX_H_


	)

22 
	~"logic.h
"

24 
Çme¥aû
 
	gCÜeNs
 {

25 
	sHexV®ue
 {

26 
boŞ
 
	gL_
;

27 
boŞ
 
	gB_
;

28 
boŞ
 
	gD_
;

29 
boŞ
 
	gH_
;

31 
HexV®ue
() {

32 
	gL_
 = 
Œue
;

33 
	gB_
 = 
Œue
;

34 
	gD_
 = 
Œue
;

35 
	gH_
 = 
Œue
;

38 
HexV®ue
(
V®ue
 
v
);

40 
boŞ
 
isSub£t
(cÚ¡ 
HexV®ue
& 
hv
) const;

42 
	gHexV®ue
& 
	gİ”©Ü
=(
HexV®ue
 
hv
);

43 
ä›nd
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
HexV®ue
& 
lhs
, cÚ¡ 
	gHexV®ue
& 
	grhs
);

44 
ä›nd
 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
HexV®ue
& 
lhs
, cÚ¡ 
	gHexV®ue
& 
	grhs
);

47 
šlše
 
HexV®ue
 
Ev®NÙHex
(HexV®u
a
) {

48 
HexV®ue
 
	g»t
;

50 
	g»t
.
	gL_
 = 
a
.
H_
;

51 
	g»t
.
	gB_
 = 
a
.
D_
;

52 
	g»t
.
	gD_
 = 
a
.
B_
;

53 
	g»t
.
	gH_
 = 
a
.
L_
;

55  
	g»t
;

58 
šlše
 
HexV®ue
 
Ev®AndHex
(HexV®u
a
, HexV®u
b
) {

59 
HexV®ue
 
	g»t
;

61 
	g»t
.
	gL_
 = 
a
.
L_
 | 
b
.L_ | (a.
D_
&b.
B_
) | (a.B_&b.D_);

62 
	g»t
.
	gB_
 = (
a
.
H_
&
b
.
B_
) | (a.B_&b.H_) | (a.B_&b.B_);

63 
	g»t
.
	gD_
 = (
a
.
H_
&
b
.
D_
) | (a.D_&b.H_) | (a.D_&b.D_);

64 
	g»t
.
	gH_
 = 
a
.
H_
&
b
.H_;

66  
	g»t
;

69 
šlše
 
HexV®ue
 
Ev®OrHex
(HexV®u
a
, HexV®u
b
) {

70 
HexV®ue
 
	g»t
;

72 
	g»t
.
	gL_
 = 
a
.
L_
&
b
.L_;

73 
	g»t
.
	gB_
 = (
a
.
L_
&
b
.
B_
) | (a.B_&b.L_) | (a.B_&b.B_);

74 
	g»t
.
	gD_
 = (
a
.
L_
&
b
.
D_
) | (a.D_&b.L_) | (a.D_&b.D_);

75 
	g»t
.
	gH_
 = 
a
.
H_
 | 
b
.H_ | (a.
D_
&b.
B_
) | (a.B_&b.D_);

77  
	g»t
;

80 
šlše
 
HexV®ue
 
Ev®AndNHex
(
¡d
::
veùÜ
<HexV®ue>& 
v®s
) {

81 if(
v®s
.
size
()<2è
as£¹
(0);

83 
HexV®ue
 
	g»t
 = 
Ev®AndHex
(
v®s
[0], vals[1]);

84 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

85 
	g»t
 = 
Ev®AndHex
(
»t
, 
v®s
[
n
]);

87  
	g»t
;

90 
šlše
 
HexV®ue
 
Ev®NªdNHex
(
¡d
::
veùÜ
<HexV®ue>& 
v®s
) {

91  
Ev®NÙHex
(
Ev®AndNHex
(
v®s
));

94 
šlše
 
HexV®ue
 
Ev®OrNHex
(
¡d
::
veùÜ
<HexV®ue>& 
v®s
) {

95 if(
v®s
.
size
()<2è
as£¹
(0);

97 
HexV®ue
 
	g»t
 = 
Ev®OrHex
(
v®s
[0], vals[1]);

98 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

99 
	g»t
 = 
Ev®OrHex
(
»t
, 
v®s
[
n
]);

101  
	g»t
;

104 
šlše
 
HexV®ue
 
Ev®NÜNHex
(
¡d
::
veùÜ
<HexV®ue>& 
v®s
) {

105  
Ev®NÙHex
(
Ev®OrNHex
(
v®s
));

108 
šlše
 
	gHexV®ue
::
HexV®ue
(
V®ue
 
v
) {

109 
L_
 = 
çl£
;

110 
	gB_
 = 
çl£
;

111 
	gD_
 = 
çl£
;

112 
	gH_
 = 
çl£
;

114 
	gv
) {

115 
	gL
:

116 
L_
 = 
Œue
;

118 
	gB
:

119 
B_
 = 
Œue
;

121 
	gD
:

122 
D_
 = 
Œue
;

124 
	gH
:

125 
H_
 = 
Œue
;

128 
L_
 = 
Œue
;

129 
	gB_
 = 
Œue
;

130 
	gD_
 = 
Œue
;

131 
	gH_
 = 
Œue
;

136 
šlše
 
	gHexV®ue
& HexV®ue::
İ”©Ü
=(
HexV®ue
 
hv
) {

137 
L_
 = 
hv
.L_;

138 
	gB_
 = 
hv
.
B_
;

139 
	gD_
 = 
hv
.
D_
;

140 
	gH_
 = 
hv
.
H_
;

142  *
	gthis
;

146 
šlše
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
HexV®ue
& 
lhs
, cÚ¡ 
	gHexV®ue
& 
	grhs
) {

147 ià((
	glhs
.
	gL_
!=
rhs
.
L_
)

148 ||(
lhs
.
B_
!=
rhs
.B_)

149 ||(
lhs
.
D_
!=
rhs
.D_)

150 ||(
lhs
.
H_
!=
rhs
.H_))

151  
çl£
;

153  
	gŒue
;

156 
šlše
 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
HexV®ue
& 
lhs
, cÚ¡ 
	gHexV®ue
& 
	grhs
) {

157  !(
	glhs
 =ğ
rhs
);

160 
šlše
 
boŞ
 
	gHexV®ue
::
isSub£t
(cÚ¡ 
HexV®ue
& 
hv
) const {

161 ià((
hv
.
L_
==
çl£
 && L_==
Œue
)

162 ||(
hv
.
B_
==
çl£
 && B_==
Œue
)

163 ||(
hv
.
D_
==
çl£
 && D_==
Œue
)

164 ||(
hv
.
H_
==
çl£
 && H_==
Œue
))

165  
çl£
;

167  
	gŒue
;

	@core/src/logic.cpp

8 
	~"logic.h
"

10 
usšg
 
Çme¥aû
 
	g¡d
;

11 
usšg
 
Çme¥aû
 
	gCÜeNs
;

13 
	gCÜeNs
::
	$´štV®ue
(cÚ¡ 
V®ue
 &
v
, 
o¡»am
 &
out
) {

14 ià(
v
 =ğ
L
)

15 
out
 << "0";

16 ià(
v
 =ğ
H
)

17 
out
 << "1";

18 ià(
v
 =ğ
X
)

19 
out
 << "X";

20 ià(
v
 =ğ
D
)

21 
out
 << "D";

22 ià(
v
 =ğ
B
)

23 
out
 << "B";

24 ià(
v
 =ğ
Z
)

25 
out
 << "Z";

27 
out
 << "I";

28 
out
 << 
æush
;

29 
	}
}

31 
	gCÜeNs
::
	$´štV®ue
(cÚ¡ 
P¬aV®ue
 &
v
, 
o¡»am
 &
out
) {

32 
size_t
 
i
 = 0; i < 
WORD_SIZE
; ++i) {

33 
size_t
 
j
 = 
WORD_SIZE
 - 
i
 - 1;

34 
P¬aV®ue
 
mask
 = 0x01;

35 
mask
 <<ğ
j
;

36 ià((
v
 & 
mask
è!ğ
PARA_L
)

37 
out
 << "1";

39 
out
 << "0";

40 
out
 << 
æush
;

42 
	}
}

44 
	gCÜeNs
::
	$´štV®ue
(cÚ¡ 
P¬aV®ue
 &
l
, cÚ¡ P¬aV®u&
h
,

45 
o¡»am
 &
out
) {

46 
size_t
 
i
 = 0; i < 
WORD_SIZE
; ++i) {

47 
size_t
 
j
 = 
WORD_SIZE
 - 
i
 - 1;

48 
P¬aV®ue
 
mask
 = 0x01;

49 
mask
 <<ğ
j
;

50 ià((
l
 & 
mask
è!ğ
PARA_L
)

51 
out
 << "0";

52 ià((
h
 & 
mask
è!ğ
PARA_L
)

53 
out
 << "1";

55 
out
 << "X";

56 
out
 << 
æush
;

58 
	}
}

	@core/src/logic.h

8 #iâdeà
_CORE_LOGIC_H_


9 
	#_CORE_LOGIC_H_


	)

11 
	~<io¡»am
>

12 
	~<ÿs£¹
>

13 
	~<veùÜ
>

15 
Çme¥aû
 
	gCÜeNs
 {

20 
	tV®ue
;

21 
	tP¬aV®ue
;

24 cÚ¡ 
V®ue
 
	gL
 = 0;

25 cÚ¡ 
V®ue
 
	gH
 = 1;

26 cÚ¡ 
V®ue
 
	gX
 = 2;

27 cÚ¡ 
V®ue
 
	gD
 = 3;

28 cÚ¡ 
V®ue
 
	gB
 = 4;

29 cÚ¡ 
V®ue
 
	gZ
 = 5;

30 cÚ¡ 
V®ue
 
	gI
 = 255;

33 cÚ¡ 
P¬aV®ue
 
	gPARA_L
 = 0;

34 cÚ¡ 
P¬aV®ue
 
	gPARA_H
 = ~
PARA_L
;

37 cÚ¡ 
size_t
 
	gBYTE_SIZE
 = 8;

38 cÚ¡ 
size_t
 
	gWORD_SIZE
 = (
P¬aV®ue
è* 
BYTE_SIZE
;

40 cÚ¡ 
V®ue
 
	gNÙM­
[5] = { 
H
, 
L
, 
X
, 
B
, 
D
 };

42 cÚ¡ 
V®ue
 
	gAndM­
[5][5] = {

43 { 
L
, L, L, L, L },

44 { 
L
, 
H
, 
X
, 
D
, 
B
 },

45 { 
L
, 
X
, X, X, X },

46 { 
L
, 
D
, 
X
, D, L },

47 { 
L
, 
B
, 
X
, L, B }

50 cÚ¡ 
V®ue
 
	gOrM­
[5][5] = {

51 { 
L
, 
H
, 
X
, 
D
, 
B
 },

52 { 
H
, H, H, H, H },

53 { 
X
, 
H
, X, X, X },

54 { 
D
, 
H
, 
X
, D, H },

55 { 
B
, 
H
, 
X
, H, B }

58 cÚ¡ 
V®ue
 
	gXÜM­
[5][5] = {

59 { 
L
, 
H
, 
X
, 
D
, 
B
 },

60 { 
H
, 
L
, 
X
, 
B
, 
D
 },

61 { 
X
, X, X, X, X },

62 { 
D
, 
B
, 
X
, 
L
, 
H
 },

63 { 
B
, 
D
, 
X
, 
H
, 
L
 }

66 cÚ¡ 
V®ue
 
	gNªdM­
[5][5] = {

67 { 
H
, H, H, H, H },

68 { 
H
, 
L
, 
X
, 
B
, 
D
 },

69 { 
H
, 
X
, X, X, X },

70 { 
H
, 
B
, 
X
, B, H },

71 { 
H
, 
D
, 
X
, H, D }

74 cÚ¡ 
V®ue
 
	gNÜM­
[5][5] = {

75 { 
H
, 
L
, 
X
, 
B
, 
D
 },

76 { 
L
, L, L, L, L },

77 { 
X
, 
L
, X, X, X },

78 { 
B
, 
L
, 
X
, B, L },

79 { 
D
, 
L
, 
X
, L, D }

82 cÚ¡ 
V®ue
 
	gXnÜM­
[5][5] = {

83 { 
H
, 
L
, 
X
, 
B
, 
D
 },

84 { 
L
, 
H
, 
X
, 
D
, 
B
 },

85 { 
X
, X, X, X, X },

86 { 
B
, 
D
, 
X
, 
H
, 
L
 },

87 { 
D
, 
B
, 
X
, 
L
, 
H
 }

91 
šlše
 
£tB™V®ue
(
P¬aV®ue
 &
pv
, cÚ¡ 
size_t
 &
i
, cÚ¡ 
V®ue
 &
v
) {

92 
	gpv
 = 
v
 =ğ
L
 ? 
pv
 & ~((
P¬aV®ue
)0x01 << 
i
) :…v | ((ParaValue)0x01 << i);

95 
šlše
 
V®ue
 
g‘B™V®ue
(cÚ¡ 
P¬aV®ue
 &
pv
, cÚ¡ 
size_t
 &
i
) {

96  (
	gpv
 & ((
	gP¬aV®ue
)0x01 << 
	gi
)è=ğ
PARA_L
 ? 
L
 : 
H
;

99 
šlše
 
V®ue
 
Ev®NÙ
(V®u
v
){

100  
	gNÙM­
[
v
];

103 
šlše
 
V®ue
 
Ev®AndN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

104 if(
v®s
.
size
()<2è 
X
;

106 
V®ue
 
	g»t
 = 
AndM­
[
v®s
[0]][vals[1]];

107 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

108 
	g»t
 = 
AndM­
[
»t
][
v®s
[
n
]];

110  
	g»t
;

113 
šlše
 
V®ue
 
Ev®OrN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

114 if(
v®s
.
size
()<2è 
X
;

116 
V®ue
 
	g»t
 = 
OrM­
[
v®s
[0]][vals[1]];

117 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

118 
	g»t
 = 
OrM­
[
»t
][
v®s
[
n
]];

120  
	g»t
;

123 
šlše
 
V®ue
 
Ev®XÜN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

124 ià(
v®s
.
size
()<2è
as£¹
(0);

126 
V®ue
 
	g»t
 = 
XÜM­
[
v®s
[0]][vals[1]];

127 
size_t
 
	gn
=2;‚<
	gv®s
.
size
();‚++)

128 
	g»t
 = 
XÜM­
[
»t
][
v®s
[
n
]];

130  
	g»t
;

133 
šlše
 
V®ue
 
Ev®NªdN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

134  
Ev®NÙ
(
Ev®AndN
(
v®s
));

137 
šlše
 
V®ue
 
Ev®NÜN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

138  
Ev®NÙ
(
Ev®OrN
(
v®s
));

141 
šlše
 
V®ue
 
Ev®XnÜN
(
¡d
::
veùÜ
<V®ue>& 
v®s
) {

142  
Ev®NÙ
(
Ev®XÜN
(
v®s
));

145 
´štV®ue
(cÚ¡ 
V®ue
 &
v
, 
¡d
::
o¡»am
 &
out
 = std::
cout
);

146 
´štV®ue
(cÚ¡ 
P¬aV®ue
 &
v
, 
¡d
::
o¡»am
 &
out
 = std::
cout
);

147 
´štV®ue
(cÚ¡ 
P¬aV®ue
 &
l
, cÚ¡ P¬aV®u&
h
,

148 
¡d
::
o¡»am
 &
out
 = std::
cout
);

	@core/src/pattern.h

8 #iâdeà
_CORE_PATTERN_H_


9 
	#_CORE_PATTERN_H_


	)

11 
	~<c¡dlib
>

12 
	~<io¡»am
>

13 
	~<veùÜ
>

14 
	~"cœcu™.h
"

15 
	~"çuÉ.h
"

17 
usšg
 
Çme¥aû
 
	g¡d
;

19 
Çme¥aû
 
	gCÜeNs
 {

21 
şass
 
	gP©‹º
;

23 
	g¡d
::
	tveùÜ
<
	tP©‹º
 *> 
	tP©‹ºVec
;

26 
şass
 
	gV”‹x
;

27 
	g¡d
::
	tveùÜ
<
	tV”‹x
 *> 
	tV”‹xVec
;

30 şas 
	cP©‹º
 {

31 
	gpublic
:

32 
P©‹º
();

33 ~
P©‹º
();

34 
V®ue
 *
	gpi1_
;

35 
V®ue
 *
	gpi2_
;

36 
V®ue
 *
	gµi_
;

37 
V®ue
 *
	gsi_
;

38 
V®ue
 *
	gpo1_
;

39 
V®ue
 *
	gpo2_
;

40 
V®ue
 *
	gµo_
;

48 şas 
	cP©‹ºProûssÜ
 {

49 
	gpublic
:

54 
	eTy³
 { 
BASIC_SCAN
 = 0, 
	gLAUNCH_CAPTURE
, 
	gLAUNCH_SHIFT
 };

56 
P©‹ºProûssÜ
();

57 ~
P©‹ºProûssÜ
();

63 
	eS‹
 { 
	gOFF
 = 0, 
	gON
 };

64 
S‹
 
	g¡©icCom´essiÚ_
;

65 
S‹
 
	gdyÇmicCom´essiÚ_
;

66 
S‹
 
	gXFl_
;

68 
Ty³
 
	gty³_
;

69 
	gÅi_
;

70 
	gÅpi_
;

71 
	gnsi_
;

72 
	gÅo_
;

74 
size_t
 
	gÅ©_h¬d_
;

75 
size_t
 
	gnb™_¥ec_
;

76 
size_t
 
	gnb™_¥ec_max
;

77 
P©‹ºVec
 
	g·ts_
;

79 *
	gpiOrd”_
;

80 *
	gµiOrd”_
;

81 *
	gpoOrd”_
;

83 
š™
(
Cœcu™
 *
cœ
);

84 
SticCom´essiÚ
();

85 
PrštPÜts
() const;

86 
PrštP©‹ºs
() const;

87 
PrštP©‹º
(
i
) const;

89 
¿ndomFl
(
P©‹º
* 
·t
);

93 
šlše
 
	gP©‹º
::
	$P©‹º
() {

94 
pi1_
 = 
NULL
;

95 
pi2_
 = 
NULL
;

96 
µi_
 = 
NULL
;

97 
si_
 = 
NULL
;

98 
po1_
 = 
NULL
;

99 
po2_
 = 
NULL
;

100 
µo_
 = 
NULL
;

101 
	}
}

103 
šlše
 
	gP©‹º
::~
	$P©‹º
() {

104 
d–‘e
 [] 
pi1_
;

105 
d–‘e
 [] 
pi2_
;

106 
d–‘e
 [] 
µi_
;

107 
d–‘e
 [] 
si_
;

108 
d–‘e
 [] 
po1_
;

109 
d–‘e
 [] 
po2_
;

110 
d–‘e
 [] 
µo_
;

111 
	}
}

113 
šlše
 
	gP©‹ºProûssÜ
::
	$P©‹ºProûssÜ
() {

115 
¡©icCom´essiÚ_
 = 
OFF
;

116 
dyÇmicCom´essiÚ_
 = 
OFF
;

117 
XFl_
 = 
OFF
;

119 
ty³_
 = 
BASIC_SCAN
;

120 
Åi_
 = 0;

121 
Åpi_
 = 0;

122 
nsi_
 = 0;

123 
Åo_
 = 0;

124 
piOrd”_
 = 
NULL
;

125 
µiOrd”_
 = 
NULL
;

126 
poOrd”_
 = 
NULL
;

128 
nb™_¥ec_
= 0;

129 
nb™_¥ec_max
 = 0;

130 
Å©_h¬d_
 = 0;

131 
	}
}

133 
šlše
 
	gP©‹ºProûssÜ
::~
	$P©‹ºProûssÜ
() {

134 ià(
·ts_
.
	`size
() > 0)

135 
d–‘e
 [] 
·ts_
[0];

136 
·ts_
.
	`ş—r
();

137 
d–‘e
 [] 
piOrd”_
;

138 
d–‘e
 [] 
µiOrd”_
;

139 
d–‘e
 [] 
poOrd”_
;

140 
	}
}

142 
šlše
 
	gP©‹ºProûssÜ
::
	$š™
(
Cœcu™
 *
cœ
) {

143 
d–‘e
 [] 
piOrd”_
;

144 
d–‘e
 [] 
µiOrd”_
;

145 
d–‘e
 [] 
poOrd”_
;

146 
piOrd”_
 = 
NULL
;

147 
µiOrd”_
 = 
NULL
;

148 
poOrd”_
 = 
NULL
;

150 
Åi_
 = 
cœ
->npi_;

151 
Åo_
 = 
cœ
->npo_;

152 
Åpi_
 = 
cœ
->nppi_;

154 
piOrd”_
 = 
Ãw
 [
Åi_
];

155 
i
 = 0; i < 
Åi_
; ++i)

156 
piOrd”_
[
i
] = i;

158 
poOrd”_
 = 
Ãw
 [
Åo_
];

159 
i
 = 0; i < 
Åo_
; ++i)

160 
poOrd”_
[
i
] = 
cœ
->
ng©e_
 - cœ->
Åo_
 - cœ->
Åpi_
 + i;

162 
µiOrd”_
 = 
Ãw
 [
Åpi_
];

163 
i
 = 0; i < 
Åpi_
; ++i)

164 
µiOrd”_
[
i
] = 
cœ
->
Åi_
 + i;

165 
	}
}

167 
šlše
 
	gP©‹ºProûssÜ
::
	$PrštPÜts
() const {

168 
cout
 << "#…i order: ";

169 
i
 = 0; i < 
Åi_
; ++i)

170 
cout
 << " " << 
piOrd”_
[
i
];

171 
cout
 << 
’dl
;

172 
cout
 << "#…pi order:";

173 
i
 = 0; i < 
Åpi_
; ++i)

174 
cout
 << " " << 
µiOrd”_
[
i
];

175 
cout
 << 
’dl
;

176 
cout
 << "#…o order: ";

177 
i
 = 0; i < 
Åo_
; ++i)

178 
cout
 << " " << 
poOrd”_
[
i
];

179 
cout
 << 
’dl
;

180 
	}
}

182 
šlše
 
	gP©‹ºProûssÜ
::
	$PrštP©‹ºs
() const {

183 
i
 = 0; i < ()
·ts_
.
	`size
(); ++i) {

184 
cout
 << "#…©‹º " << 
i
 << 
’dl
;

185 
	`PrštP©‹º
(
i
);

186 
cout
 << 
’dl
 << "#" <<ƒndl;

188 
	}
}

190 
šlše
 
	gP©‹ºProûssÜ
::
	$PrštP©‹º
(
i
) const {

191 
cout
 << "#…i1: ";

192 ià(
·ts_
[
i
]->
pi1_
)

193 
j
 = 0; j < 
Åi_
; ++j)

194 
	`´štV®ue
(
·ts_
[
i
]->
pi1_
[
j
]);

195 
cout
 << 
’dl
;

196 
cout
 << "#…i2: ";

197 ià(
·ts_
[
i
]->
pi2_
)

198 
j
 = 0; j < 
Åi_
; ++j)

199 
	`´štV®ue
(
·ts_
[
i
]->
pi2_
[
j
]);

200 
cout
 << 
’dl
;

201 
cout
 << "#…pi: ";

202 ià(
·ts_
[
i
]->
µi_
)

203 
j
 = 0; j < 
Åpi_
; ++j)

204 
	`´štV®ue
(
·ts_
[
i
]->
µi_
[
j
]);

205 
cout
 << 
’dl
;

206 
cout
 << "#…o1: ";

207 ià(
·ts_
[
i
]->
po1_
)

208 
j
 = 0; j < 
Åo_
; ++j)

209 
	`´štV®ue
(
·ts_
[
i
]->
po1_
[
j
]);

210 
cout
 << 
’dl
;

211 
cout
 << "#…o2: ";

212 ià(
·ts_
[
i
]->
po2_
)

213 
j
 = 0; j < 
Åo_
; ++j)

214 
	`´štV®ue
(
·ts_
[
i
]->
po2_
[
j
]);

215 
cout
 << 
’dl
;

216 
cout
 << "#…po: ";

217 ià(
·ts_
[
i
]->
µo_
)

218 
j
 = 0; j < 
Åpi_
; ++j)

219 
	`´štV®ue
(
·ts_
[
i
]->
µo_
[
j
]);

220 
	}
}

243 
šlše
 
	gP©‹ºProûssÜ
::
	$SticCom´essiÚ
()

245 
boŞ
 
m”geRecÜd
[()
·ts_
.
	`size
()];

246 
i
=0; i<()
·ts_
.
	`size
(); ++i){

247 
m”geRecÜd
[
i
] = 
çl£
;

251 
i
=0; i<()
·ts_
.
	`size
()-1; ++i){

252 ià(
m”geRecÜd
[
i
] =ğ
Œue
) ;

253 
j
=
i
+1; j<()
·ts_
.
	`size
(); ++j){

254 ià(
m”geRecÜd
[
j
] =ğ
Œue
) ;

256 
boŞ
 
com·tibË
 = 
Œue
;

257 
k
=0; k<
Åi_
; ++k){

258 ifĞ((
·ts_
[
i
]->
pi1_
[
k
]==
L
)&&Õ©s_[
j
]->pi1_[k]==
H
)) || ((pats_[i]->pi1_[k]==H)&&(pats_[j]->pi1_[k]==L)) ){

259 
com·tibË
 = 
çl£
;

263 ià((
·ts_
[
i
]->
pi2_
!ğ
NULL
)&&(
com·tibË
 =ğ
Œue
)){

264 
k
=0; k<
Åi_
; ++k){

265 ifĞ((
·ts_
[
i
]->
pi2_
[
k
]==
L
)&&Õ©s_[
j
]->pi2_[k]==
H
)) || ((pats_[i]->pi2_[k]==H)&&(pats_[j]->pi2_[k]==L)) ){

266 
com·tibË
 = 
çl£
;

271 ià((
·ts_
[
i
]->
µi_
!ğ
NULL
)&&(
com·tibË
 =ğ
Œue
)){

272 
k
=0; k<
Åpi_
; ++k){

273 ifĞ((
·ts_
[
i
]->
µi_
[
k
]==
L
)&&Õ©s_[
j
]->µi_[k]==
H
)) || ((pats_[i]->ppi_[k]==H)&&(pats_[j]->ppi_[k]==L)) ){

274 
com·tibË
 = 
çl£
;

279 ià((
·ts_
[
i
]->
si_
!ğ
NULL
)&&(
com·tibË
 =ğ
Œue
)){

280 
k
=0; k<
nsi_
; ++k){

281 ifĞ((
·ts_
[
i
]->
si_
[
k
]==
L
)&&Õ©s_[
j
]->si_[k]==
H
)) || ((pats_[i]->si_[k]==H)&&(pats_[j]->si_[k]==L)) ){

282 
com·tibË
 = 
çl£
;

288 ià(
com·tibË
 =ğ
Œue
){

289 
k
=0; k<
Åi_
; ++k){

290 
·ts_
[
i
]->
pi1_
[
k
] = (·ts_[i]->pi1_[k]<·ts_[
j
]->pi1_[k]) ?…ats_[i]->pi1_[k]:…ats_[j]->pi1_[k];

292 ià(
·ts_
[
i
]->
pi2_
!ğ
NULL
){

293 
k
=0; k<
Åi_
; ++k){

294 
·ts_
[
i
]->
pi2_
[
k
] = (·ts_[i]->pi2_[k]<·ts_[
j
]->pi2_[k]) ?…ats_[i]->pi2_[k]:…ats_[j]->pi2_[k];

297 ià(
·ts_
[
i
]->
µi_
!ğ
NULL
){

298 
k
=0; k<
Åpi_
; ++k){

299 
·ts_
[
i
]->
µi_
[
k
] = (·ts_[i]->µi_[k]<·ts_[
j
]->ppi_[k]) ?…ats_[i]->ppi_[k]:…ats_[j]->ppi_[k];

302 ià(
·ts_
[
i
]->
si_
!ğ
NULL
){

303 
k
=0; k<
nsi_
; ++k){

304 
·ts_
[
i
]->
si_
[
k
] = (·ts_[i]->si_[k]<·ts_[
j
]->si_[k]) ?…ats_[i]->si_[k]:…ats_[j]->si_[k];

308 
k
=0; k<
Åo_
; ++k){

309 
·ts_
[
i
]->
po1_
[
k
] = (·ts_[i]->po1_[k]<·ts_[
j
]->po1_[k]) ?…ats_[i]->po1_[k]:…ats_[j]->po1_[k];

311 ià(
·ts_
[
i
]->
po2_
!ğ
NULL
){

312 
k
=0; k<
Åo_
; ++k){

313 
·ts_
[
i
]->
po2_
[
k
] = (·ts_[i]->po2_[k]<·ts_[
j
]->po2_[k]) ?…ats_[i]->po2_[k]:…ats_[j]->po2_[k];

316 ià(
·ts_
[
i
]->
µo_
!ğ
NULL
){

317 
k
=0; k<
Åpi_
; ++k){

318 
·ts_
[
i
]->
µo_
[
k
] = (·ts_[i]->µo_[k]<·ts_[
j
]->ppo_[k]) ?…ats_[i]->ppo_[k]:…ats_[j]->ppo_[k];

322 
m”geRecÜd
[
j
] = 
Œue
;

328 
P©‹ºVec
 
compP©‹º
;

329 
i
=0; i<()
·ts_
.
	`size
(); ++i){

330 ià(
m”geRecÜd
[
i
]==
çl£
){

331 
compP©‹º
.
	`push_back
(
·ts_
[
i
]);

334 
·ts_
 = 
compP©‹º
;

336 
	}
}

338 
šlše
 
	gP©‹ºProûssÜ
::
	$¿ndomFl
(
P©‹º
 *
·t
){

339 
size_t
 
nb™_¥ec
 = 0;

341 
	`¤ªd
(0);

342  
i
 = 0 ; i < 
Åi_
 ; i++ ) {

343 ifĞ
·t
->
pi1_
[
i
] =ğ
X
 ) {

344 
·t
->
pi1_
[
i
] = 
	`¿nd
()%2;

346 
nb™_¥ec
++;

348  
i
 = 0 ; i < 
Åpi_
 ; i++ ) {

349 ifĞ
·t
->
µi_
[
i
] =ğ
X
 ) {

350 
·t
->
µi_
[
i
] = 
	`¿nd
()%2;

352 
nb™_¥ec
++;

354 if(
·t
->
pi2_
!=
NULL
) {

355  
i
 = 0 ; i < 
Åi_
 ; i++ ) {

356 ifĞ
·t
->
pi2_
[
i
] =ğ
X
 ) {

357 
·t
->
pi2_
[
i
] = 
	`¿nd
()%2;

359 
nb™_¥ec
++;

362 if(
·t
->
si_
!=
NULL
) {

363 ifĞ
·t
->
si_
[0] =ğ
X
 ) {

364 
·t
->
si_
[0] = 
	`¿nd
()%2;

366 
nb™_¥ec
++;

369 
nb™_¥ec_
+=
nb™_¥ec
;

370 ià(
nb™_¥ec
>
nb™_¥ec_max
)

371 
nb™_¥ec_max
 = 
nb™_¥ec
;

372 
	}
}

376 şas 
	cV”‹x
 {

377 
	gpublic
:

378 
V”‹x
();

379 
V”‹x
(
V®ue
 *
d©a
, 
FauÉ
 *
çuÉ
);

380 ~
V”‹x
();

381 
V®ue
 *
	gd©a_
;

382 
FauÉLi¡
 
	gçuÉ_
;

386 
šlše
 
	gV”‹x
::
	$V”‹x
() {

387 
d©a_
 = 
NULL
;

388 
	}
}

390 
šlše
 
	gV”‹x
::
	$V”‹x
(
V®ue
 *
d©a
, 
FauÉ
 *
çuÉ
) {

391 
d©a_
 = 
d©a
;

392 
çuÉ_
.
	`push_back
(
çuÉ
);

393 
	}
}

395 
šlše
 
	gV”‹x
::~
	$V”‹x
() {

396 
d–‘e
 [] 
d©a_
;

397 
çuÉ_
.
	`ş—r
();

399 
	}
}

	@core/src/pattern_rw.cpp

8 
	~"·‰”n_rw.h
"

10 
usšg
 
Çme¥aû
 
	g¡d
;

11 
usšg
 
Çme¥aû
 
	gIÁfNs
;

12 
usšg
 
Çme¥aû
 
	gCÜeNs
;

18 
	gP©‹ºR—d”
::
	$£tPiOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
pis
) {

19 ià(!
sucûss_
)

21 ià(!
cœ_
 || !cœ_->
Æ_
) {

22 
sucûss_
 = 
çl£
;

25 
pcŞl_
->
Åi_
 = 0;

26 
P©Names
 *
pi
 = 
pis
->
h—d
;

27 
pi
) {

28 
pcŞl_
->
Åi_
++;

29 
pi
 =…i->
Ãxt
;

31 
d–‘e
 [] 
pcŞl_
->
piOrd”_
;

32 
pcŞl_
->
piOrd”_
 = 
Ãw
 [pcŞl_->
Åi_
];

33 
pi
 = 
pis
->
h—d
;

34 
i
 = 0;

35 
pi
) {

36 
PÜt
 *
p
 = 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
pi
->
Çme
);

37 ià(!
p
) {

38 
	`årštf
(
¡d”r
, "**ERROR PatternReader::setPiOrder():…ort ");

39 
	`årštf
(
¡d”r
, "`%s'‚Ù found\n", 
pi
->
Çme
);

40 
sucûss_
 = 
çl£
;

41 
d–‘e
 [] 
pcŞl_
->
piOrd”_
;

42 
pcŞl_
->
piOrd”_
 = 
NULL
;

45 
pcŞl_
->
piOrd”_
[
i
] = 
cœ_
->
pÜtToG©e_
[
p
->
id_
];

46 
i
++;

47 
pi
 =…i->
Ãxt
;

49 
	}
}

51 
	gP©‹ºR—d”
::
	$£tPpiOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
µis
) {

52 ià(!
sucûss_
)

54 ià(!
cœ_
 || !cœ_->
Æ_
) {

55 
sucûss_
 = 
çl£
;

58 
pcŞl_
->
Åpi_
 = 0;

59 
P©Names
 *
µi
 = 
µis
->
h—d
;

60 
µi
) {

61 
pcŞl_
->
Åpi_
++;

62 
µi
 =…pi->
Ãxt
;

64 
d–‘e
 [] 
pcŞl_
->
µiOrd”_
;

65 
pcŞl_
->
µiOrd”_
 = 
Ãw
 [pcŞl_->
Åpi_
];

66 
µi
 = 
µis
->
h—d
;

67 
i
 = 0;

68 
µi
) {

69 
C–l
 *
c
 = 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘C–l
(
µi
->
Çme
);

70 ià(!
c
) {

71 
	`årštf
(
¡d”r
, "**ERROR PatternReader::setPpiOrder(): gate ");

72 
	`årštf
(
¡d”r
, "`%s'‚Ù found\n", 
µi
->
Çme
);

73 
sucûss_
 = 
çl£
;

74 
d–‘e
 [] 
pcŞl_
->
µiOrd”_
;

75 
pcŞl_
->
µiOrd”_
 = 
NULL
;

78 
pcŞl_
->
µiOrd”_
[
i
] = 
cœ_
->
ûÎToG©e_
[
c
->
id_
];

79 
i
++;

80 
µi
 =…pi->
Ãxt
;

82 
	}
}

84 
	gP©‹ºR—d”
::
	$£tPoOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
pos
) {

85 ià(!
sucûss_
)

87 ià(!
cœ_
 || !cœ_->
Æ_
) {

88 
sucûss_
 = 
çl£
;

91 
pcŞl_
->
Åo_
 = 0;

92 
P©Names
 *
po
 = 
pos
->
h—d
;

93 
po
) {

94 
pcŞl_
->
Åo_
++;

95 
po
 =…o->
Ãxt
;

97 
d–‘e
 [] 
pcŞl_
->
poOrd”_
;

98 
pcŞl_
->
poOrd”_
 = 
Ãw
 [pcŞl_->
Åo_
];

99 
po
 = 
pos
->
h—d
;

100 
i
 = 0;

101 
po
) {

102 
PÜt
 *
p
 = 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
po
->
Çme
);

103 ià(!
p
) {

104 
	`årštf
(
¡d”r
, "**ERROR PatternReader::setPoOrder():…ort ");

105 
	`årštf
(
¡d”r
, "`%s'‚Ù found\n", 
po
->
Çme
);

106 
sucûss_
 = 
çl£
;

107 
d–‘e
 [] 
pcŞl_
->
poOrd”_
;

108 
pcŞl_
->
poOrd”_
 = 
NULL
;

111 
pcŞl_
->
poOrd”_
[
i
] = 
cœ_
->
pÜtToG©e_
[
p
->
id_
];

112 
i
++;

113 
po
 =…o->
Ãxt
;

115 
	}
}

117 
	gP©‹ºR—d”
::
	$£tP©‹ºTy³
(cÚ¡ 
P©Ty³
 &
ty³
) {

118 ià(!
sucûss_
)

120 
ty³
) {

121 
IÁfNs
::
BASIC_SCAN
:

122 
pcŞl_
->
ty³_
 = 
P©‹ºProûssÜ
::
BASIC_SCAN
;

124 
IÁfNs
::
LAUNCH_CAPTURE
:

125 
pcŞl_
->
ty³_
 = 
P©‹ºProûssÜ
::
LAUNCH_CAPTURE
;

127 
IÁfNs
::
LAUNCH_SHIFT
:

128 
pcŞl_
->
ty³_
 = 
P©‹ºProûssÜ
::
LAUNCH_SHIFT
;

129 
pcŞl_
->
nsi_
 = 1;

132 
	}
}

134 
	gP©‹ºR—d”
::
	$£tP©‹ºNum
(cÚ¡ &
num
) {

135 ià(!
sucûss_
)

137 
pcŞl_
->
·ts_
.
	`»size
((
size_t
)
num
);

138 
P©‹º
 *
·ts
 = 
Ãw
 P©‹º[
pcŞl_
->
·ts_
.
	`size
()];

139 
size_t
 
i
 = 0; i < 
pcŞl_
->
·ts_
.
	`size
(); ++i)

140 
pcŞl_
->
·ts_
[
i
] = &
·ts
[i];

141 
curP©_
 = 0;

142 
	}
}

145 
	gP©‹ºR—d”
::
	$addP©‹º
(cÚ¡ * cÚ¡ 
pi1
,

146 cÚ¡ * cÚ¡ 
pi2
,

147 cÚ¡ * cÚ¡ 
µi
,

148 cÚ¡ * cÚ¡ 
si
,

149 cÚ¡ * cÚ¡ 
po1
,

150 cÚ¡ * cÚ¡ 
po2
,

151 cÚ¡ * cÚ¡ 
µo
) {

152 ià(!
sucûss_
)

154 ià(
pi1
 && 
curP©_
 < ()
pcŞl_
->
·ts_
.
	`size
()) {

155 
pcŞl_
->
·ts_
[
curP©_
]->
pi1_
 = 
Ãw
 
V®ue
[pcŞl_->
Åi_
];

156 
	`assignV®ue
(
pcŞl_
->
·ts_
[
curP©_
]->
pi1_
, 
pi1
,…cŞl_->
Åi_
);

158 ià(
pi2
 && 
curP©_
 < ()
pcŞl_
->
·ts_
.
	`size
()) {

159 
pcŞl_
->
·ts_
[
curP©_
]->
pi2_
 = 
Ãw
 
V®ue
[pcŞl_->
Åi_
];

160 
	`assignV®ue
(
pcŞl_
->
·ts_
[
curP©_
]->
pi2_
, 
pi2
,…cŞl_->
Åi_
);

162 ià(
µi
 && 
curP©_
 < ()
pcŞl_
->
·ts_
.
	`size
()) {

163 
pcŞl_
->
·ts_
[
curP©_
]->
µi_
 = 
Ãw
 
V®ue
[pcŞl_->
Åpi_
];

164 
	`assignV®ue
(
pcŞl_
->
·ts_
[
curP©_
]->
µi_
, 
µi
,…cŞl_->
Åpi_
);

166 ià(
si
 && 
curP©_
 < ()
pcŞl_
->
·ts_
.
	`size
()) {

167 
pcŞl_
->
·ts_
[
curP©_
]->
si_
 = 
Ãw
 
V®ue
[pcŞl_->
nsi_
];

168 
	`assignV®ue
(
pcŞl_
->
·ts_
[
curP©_
]->
si_
, 
si
,…cŞl_->
nsi_
);

170 ià(
po1
 && 
curP©_
 < ()
pcŞl_
->
·ts_
.
	`size
()) {

171 
pcŞl_
->
·ts_
[
curP©_
]->
po1_
 = 
Ãw
 
V®ue
[pcŞl_->
Åo_
];

172 
	`assignV®ue
(
pcŞl_
->
·ts_
[
curP©_
]->
po1_
, 
po1
,…cŞl_->
Åo_
);

174 ià(
po2
 && 
curP©_
 < ()
pcŞl_
->
·ts_
.
	`size
()) {

175 
pcŞl_
->
·ts_
[
curP©_
]->
po2_
 = 
Ãw
 
V®ue
[pcŞl_->
Åo_
];

176 
	`assignV®ue
(
pcŞl_
->
·ts_
[
curP©_
]->
po2_
, 
po2
,…cŞl_->
Åo_
);

178 ià(
µo
 && 
curP©_
 < ()
pcŞl_
->
·ts_
.
	`size
()) {

179 
pcŞl_
->
·ts_
[
curP©_
]->
µo_
 = 
Ãw
 
V®ue
[pcŞl_->
Åpi_
];

180 
	`assignV®ue
(
pcŞl_
->
·ts_
[
curP©_
]->
µo_
, 
µo
,…cŞl_->
Åpi_
);

182 
curP©_
++;

183 
	}
}

185 
	gP©‹ºR—d”
::
	$assignV®ue
(
V®ue
 *
v
, cÚ¡ * cÚ¡ 
·t
,

186 cÚ¡ &
size
) {

187 
i
 = 0; i < 
size
; ++i) {

188 ià(
·t
[
i
] == '0')

189 
v
[
i
] = 
L
;

190 ià(
·t
[
i
] == '1')

191 
v
[
i
] = 
H
;

193 
v
[
i
] = 
X
;

195 
	}
}

203 
boŞ
 
	gP©‹ºWr™”
::
	$wr™eP©
(cÚ¡ * cÚ¡ 
âame
) {

204 
FILE
 *
fout
 = 
	`fİ’
(
âame
, "w");

205 ià(!
fout
) {

206 
	`årštf
(
¡d”r
, "**ERROR PatternWriter::writePat(): file");

207 
	`årštf
(
¡d”r
, "`%s' cªnÙ bİ’ed\n", 
âame
);

208  
çl£
;

211 
i
 = 0; i < 
cœ_
->
Åi_
; ++i) {

212 
	`årštf
(
fout
, "%s ",

213 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(cœ_->
g©es_
[
i
].
cid_
)->
Çme_
);

215 
	`årštf
(
fout
, " |\n");

217 
i
 = 
cœ_
->
Åi_
; i < cœ_->Åi_ + cœ_->
Åpi_
; ++i) {

218 
	`årštf
(
fout
, "%s ",

219 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘C–l
(cœ_->
g©es_
[
i
].
cid_
)->
Çme_
);

221 
	`årštf
(
fout
, " |\n");

223 
¡¬t
 = 
cœ_
->
Åi_
 + cœ_->
Åpi_
 + cœ_->
ncomb_
;

224 
i
 = 
¡¬t
; i < s¹ + 
cœ_
->
Åo_
; ++i) {

225 
	`årštf
(
fout
, "%s ",

226 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(cœ_->
g©es_
[
i
].
cid_
)->
Çme_
);

228 
	`årštf
(
fout
, "\n");

230 
pcŞl_
->
ty³_
) {

231 
P©‹ºProûssÜ
::
BASIC_SCAN
:

232 
	`årštf
(
fout
, "BASIC_SCAN\n");

234 
P©‹ºProûssÜ
::
LAUNCH_CAPTURE
:

235 
	`årštf
(
fout
, "LAUNCH_ON_CAPTURE\n");

237 
P©‹ºProûssÜ
::
LAUNCH_SHIFT
:

238 
	`årštf
(
fout
, "LAUNCH_ON_SHIFT\n");

242 
	`årštf
(
fout
, "_num_of_·‰”n_%d\n", ()
pcŞl_
->
·ts_
.
	`size
());

244 
i
 = 0; i < ()
pcŞl_
->
·ts_
.
	`size
(); ++i) {

245 
	`årštf
(
fout
, "_·‰”n_%d ", 
i
 + 1);

246 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
) {

247 
j
 = 0; j < 
pcŞl_
->
Åi_
; ++j) {

248 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
[
j
] =ğ
L
)

249 
	`årštf
(
fout
, "0");

250 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
[
j
] =ğ
H
)

251 
	`årštf
(
fout
, "1");

253 
	`årštf
(
fout
, "X");

256 
	`årštf
(
fout
, " | ");

257 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
) {

258 
j
 = 0; j < 
pcŞl_
->
Åi_
; ++j) {

259 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
[
j
] =ğ
L
)

260 
	`årštf
(
fout
, "0");

261 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
[
j
] =ğ
H
)

262 
	`årštf
(
fout
, "1");

264 
	`årštf
(
fout
, "X");

267 
	`årštf
(
fout
, " | ");

268 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
) {

269 
j
 = 0; j < 
pcŞl_
->
Åpi_
; ++j) {

270 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
[
j
] =ğ
L
)

271 
	`årštf
(
fout
, "0");

272 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
[
j
] =ğ
H
)

273 
	`årštf
(
fout
, "1");

275 
	`årštf
(
fout
, "X");

278 
	`årštf
(
fout
, " | ");

279 ià(
pcŞl_
->
·ts_
[
i
]->
si_
) {

280 
j
 = 0; j < 
pcŞl_
->
nsi_
; ++j) {

281 ià(
pcŞl_
->
·ts_
[
i
]->
si_
[
j
] =ğ
L
)

282 
	`årštf
(
fout
, "0");

283 ià(
pcŞl_
->
·ts_
[
i
]->
si_
[
j
] =ğ
H
)

284 
	`årštf
(
fout
, "1");

286 
	`årštf
(
fout
, "X");

289 
	`årštf
(
fout
, " | ");

290 ià(
pcŞl_
->
·ts_
[
i
]->
po1_
) {

291 
j
 = 0; j < 
pcŞl_
->
Åo_
; ++j) {

292 ià(
pcŞl_
->
·ts_
[
i
]->
po1_
[
j
] =ğ
L
)

293 
	`årštf
(
fout
, "0");

294 ià(
pcŞl_
->
·ts_
[
i
]->
po1_
[
j
] =ğ
H
)

295 
	`årštf
(
fout
, "1");

297 
	`årštf
(
fout
, "X");

300 
	`årštf
(
fout
, " | ");

301 ià(
pcŞl_
->
·ts_
[
i
]->
po2_
) {

302 
j
 = 0; j < 
pcŞl_
->
Åo_
; ++j) {

303 ià(
pcŞl_
->
·ts_
[
i
]->
po2_
[
j
] =ğ
L
)

304 
	`årštf
(
fout
, "0");

305 ià(
pcŞl_
->
·ts_
[
i
]->
po2_
[
j
] =ğ
H
)

306 
	`årštf
(
fout
, "1");

308 
	`årštf
(
fout
, "X");

311 
	`årštf
(
fout
, " | ");

312 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
) {

313 
j
 = 0; j < 
pcŞl_
->
Åpi_
; ++j) {

314 ià(
pcŞl_
->
·ts_
[
i
]->
µo_
[
j
] =ğ
L
)

315 
	`årštf
(
fout
, "0");

316 ià(
pcŞl_
->
·ts_
[
i
]->
µo_
[
j
] =ğ
H
)

317 
	`årštf
(
fout
, "1");

319 
	`årštf
(
fout
, "X");

322 
	`årštf
(
fout
, "\n");

324 
	`årštf
(
fout
, "\n");

325 
	`fşo£
(
fout
);

327  
Œue
;

328 
	}
}

335 
boŞ
 
	gP©‹ºWr™”
::
	$wr™eLht
(cÚ¡ * cÚ¡ 
âame
) {

336 
FILE
 *
fout
 = 
	`fİ’
(
âame
, "w");

337 ià(!
fout
) {

338 
	`årštf
(
¡d”r
, "**ERROR PatternWriter::writePat(): file");

339 
	`årštf
(
¡d”r
, "`%s' cªnÙ bİ’ed\n", 
âame
);

340  
çl£
;

343 
size_t
 
i
 = 0; i < 
pcŞl_
->
·ts_
.
	`size
(); ++i) {

344 
	`årštf
(
fout
, "%d: ", ()
i
 + 1);

345 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
) {

346 
j
 = 0; j < 
pcŞl_
->
Åi_
; ++j) {

347 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
[
j
] =ğ
L
)

348 
	`årštf
(
fout
, "0");

349 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
[
j
] =ğ
H
)

350 
	`årštf
(
fout
, "1");

352 
	`årštf
(
fout
, "X");

355 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
) {

356 
	`årštf
(
fout
, "->");

357 
j
 = 0; j < 
pcŞl_
->
Åi_
; ++j) {

358 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
[
j
] =ğ
L
)

359 
	`årštf
(
fout
, "0");

360 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
[
j
] =ğ
H
)

361 
	`årštf
(
fout
, "1");

363 
	`årštf
(
fout
, "X");

366 
	`årštf
(
fout
, "_");

367 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
) {

368 
	`årštf
(
fout
, "->");

369 
j
 = 0; j < 
pcŞl_
->
Åpi_
; ++j) {

370 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
[
j
] =ğ
L
)

371 
	`årštf
(
fout
, "0");

372 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
[
j
] =ğ
H
)

373 
	`årštf
(
fout
, "1");

375 
	`årštf
(
fout
, "X");

378 ià(
pcŞl_
->
·ts_
[
i
]->
si_
) {

379 
	`årštf
(
fout
, "@");

380 
j
 = 0; j < 
pcŞl_
->
nsi_
; ++j) {

381 ià(
pcŞl_
->
·ts_
[
i
]->
si_
[
j
] =ğ
L
)

382 
	`årštf
(
fout
, "0");

383 ià(
pcŞl_
->
·ts_
[
i
]->
si_
[
j
] =ğ
H
)

384 
	`årštf
(
fout
, "1");

386 
	`årštf
(
fout
, "X");

389 
	`årštf
(
fout
, " | ");

390 ià(
pcŞl_
->
·ts_
[
i
]->
po1_


391 && 
pcŞl_
->
ty³_
 =ğ
P©‹ºProûssÜ
::
BASIC_SCAN
) {

392 
j
 = 0; j < 
pcŞl_
->
Åo_
; ++j) {

393 ià(
pcŞl_
->
·ts_
[
i
]->
po1_
[
j
] =ğ
L
)

394 
	`årštf
(
fout
, "0");

395 ià(
pcŞl_
->
·ts_
[
i
]->
po1_
[
j
] =ğ
H
)

396 
	`årštf
(
fout
, "1");

398 
	`årštf
(
fout
, "X");

401 ià(
pcŞl_
->
·ts_
[
i
]->
po2_


402 && (
pcŞl_
->
ty³_
 =ğ
P©‹ºProûssÜ
::
LAUNCH_CAPTURE


403 ||
pcŞl_
->
ty³_
 =ğ
P©‹ºProûssÜ
::
LAUNCH_SHIFT
)) {

404 
j
 = 0; j < 
pcŞl_
->
Åo_
; ++j) {

405 ià(
pcŞl_
->
·ts_
[
i
]->
po2_
[
j
] =ğ
L
)

406 
	`årštf
(
fout
, "0");

407 ià(
pcŞl_
->
·ts_
[
i
]->
po2_
[
j
] =ğ
H
)

408 
	`årštf
(
fout
, "1");

410 
	`årštf
(
fout
, "X");

413 
	`årštf
(
fout
, "_");

414 ià(
pcŞl_
->
·ts_
[
i
]->
µo_
) {

415 
	`årštf
(
fout
, "->");

416 
j
 = 0; j < 
pcŞl_
->
Åpi_
; ++j) {

417 ià(
pcŞl_
->
·ts_
[
i
]->
µo_
[
j
] =ğ
L
)

418 
	`årštf
(
fout
, "0");

419 ià(
pcŞl_
->
·ts_
[
i
]->
µo_
[
j
] =ğ
H
)

420 
	`årštf
(
fout
, "1");

422 
	`årštf
(
fout
, "X");

425 
	`årštf
(
fout
, "\n");

427 
	`årštf
(
fout
, "\n");

428 
	`fşo£
(
fout
);

430  
Œue
;

431 
	}
}

436 
boŞ
 
	gP©‹ºWr™”
::
	$wr™eAscii
(cÚ¡ * cÚ¡ 
âame
) {

437 
FILE
 *
fout
 = 
	`fİ’
(
âame
, "w");

438 
fœ¡_æag
 = 1;

439 
£qCœcu™Check
 = 0;

440 ià(!
fout
) {

441 
	`årštf
(
¡d”r
, "**ERROR PatternWriter::writePat(): file");

442 
	`årštf
(
¡d”r
, "`%s' cªnÙ bİ’ed\n", 
âame
);

443  
çl£
;

445 
	`årštf
(
fout
, "ASCII_PATTERN_FILE_VERSION = 2;\n");

446 
	`årštf
(
fout
, "SETUP =\n");

449 
	`årštf
(
fout
, "declare input bus \"PI\" = ");

451 
size_t
 
i
 = 0; i < 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘NPÜt
(); ++i) {

452 
PÜt
 *
p
 = 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
i
);

453 ià(
p
->
ty³_
 !ğ
PÜt
::
INPUT
) ;

454 ià(
fœ¡_æag
) {

455 
	`årštf
(
fout
, "\"/%s\"",

456 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
i
)->
Çme_
);

457 
fœ¡_æag
 = 0;

459 
	`årštf
(
fout
, ", \"/%s\"",

460 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
i
)->
Çme_
);

462 ià(!
	`¡rcmp
(
p
->
Çme_
,"CK"))

463 
£qCœcu™Check
 = 1;

465 
	`årštf
(
fout
, ";\n");

466 
fœ¡_æag
 = 1;

468 
	`årštf
(
fout
, "declare output bus \"PO\" = ");

469 
size_t
 
i
 = 0; i < 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘NPÜt
(); ++i) {

470 
PÜt
 *
p
 = 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
i
);

471 ià(
p
->
ty³_
 !ğ
PÜt
::
OUTPUT
) ;

472 ià(
fœ¡_æag
) {

473 
	`årštf
(
fout
, "\"/%s\"",

474 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
i
)->
Çme_
);

475 
fœ¡_æag
 = 0;

477 
	`årštf
(
fout
, ", \"/%s\"",

478 
cœ_
->
Æ_
->
	`g‘Tİ
()->
	`g‘PÜt
(
i
)->
Çme_
);

481 
	`årštf
(
fout
, ";\n");

484 ià(
£qCœcu™Check
) {

485 
	`årštf
(
fout
, "clock \"/CK\" =\n");

486 
	`årštf
(
fout
, " off_state = 0;\n");

487 
	`årštf
(
fout
, "…ulse_width = 1;\n");

488 
	`årštf
(
fout
, "end;\n");

491 
	`årštf
(
fout
, "procedureest_setup \"test_setup\" =\n");

492 
	`årštf
(
fout
, " force \"/CK\" 0 0;\n");

493 
	`årštf
(
fout
, " force \"/test_si\" 0 0;\n");

494 
	`årštf
(
fout
, " force \"/test_se\" 0 0;\n");

495 
	`årštf
(
fout
, "end;\n");

498 
	`årštf
(
fout
, "scan_group \"group1\" =\n");

499 
	`årštf
(
fout
, " scan_chain \"chain1\" =\n");

500 
	`årštf
(
fout
, " scan_in = \"/test_si\";\n");

501 
	`årštf
(
fout
, " scan_out = \"/test_so\";\n");

502 
	`årštf
(
fout
, "†’gth = %d;\n", 
cœ_
->
Åpi_
);

503 
	`årštf
(
fout
, "ƒnd;\n");

505 
	`årštf
(
fout
, "…rocedure shift \"group1_load_shift\" =\n");

506 
	`årštf
(
fout
, " force_sci \"chain1\" 0;\n");

507 
	`årštf
(
fout
, " force \"/CK\" 1 16;\n");

508 
	`årštf
(
fout
, " force \"/CK\" 0 19;\n");

509 
	`årštf
(
fout
, "…eriod 32;\n");

510 
	`årštf
(
fout
, "ƒnd;\n");

512 
	`årštf
(
fout
, "…rocedure shift \"group1_unload_shift\" =\n");

513 
	`årštf
(
fout
, " measure_sco \"chain1\" 0;\n");

514 
	`årštf
(
fout
, " force \"/CK\" 1 16;\n");

515 
	`årštf
(
fout
, " force \"/CK\" 0 19;\n");

516 
	`årštf
(
fout
, "…eriod 32;\n");

517 
	`årštf
(
fout
, "ƒnd;\n");

519 
	`årštf
(
fout
, "…rocedure†oad \"group1_load\" =\n");

520 
	`årštf
(
fout
, " force \"/CK\" 0 0;\n");

521 
	`årštf
(
fout
, " force \"/test_se\" 1 0;\n");

522 
	`årštf
(
fout
, " force \"/test_si\" 0 0;\n");

523 
	`årštf
(
fout
, "‡µly \"group1_lßd_shiá\" %d 32;\n", 
cœ_
->
Åpi_
);

524 
	`årštf
(
fout
, "ƒnd;\n");

526 
	`årštf
(
fout
, "…rocedure unload \"group1_unload\" =\n");

527 
	`årštf
(
fout
, " force \"/CK\" 0 0;\n");

528 
	`årštf
(
fout
, " force \"/test_se\" 1 0;\n");

529 
	`årštf
(
fout
, " force \"/test_si\" 0 0;\n");

530 
	`årštf
(
fout
, "‡µly \"group1_uÆßd_shiá\" %d 32;\n", 
cœ_
->
Åpi_
);

531 
	`årštf
(
fout
, "ƒnd;\n");

533 
	`årštf
(
fout
, "end;\n");

535 
	`årštf
(
fout
, "end;\n\n");

537 
	`årštf
(
fout
, "SCAN_TEST =\n");

540 
i
 = 0; i < ()
pcŞl_
->
·ts_
.
	`size
(); ++i) {

541 
	`årštf
(
fout
, "·‰”Àğ%d", 
i
);

542 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
)

543 
	`årštf
(
fout
, " clock_sequential;\n");

545 
	`årštf
(
fout
, ";\n");

547 ià(
pcŞl_
->
Åpi_
) {

548 
	`årštf
(
fout
, "apply \"group1_load\" 0 =\n");

549 
	`årštf
(
fout
, "chain \"chain1\" = \"");

550 
j
 = 
pcŞl_
->
Åpi_
 -1; j >= 0; --j) {

551 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
[
j
] =ğ
L
)

552 
	`årštf
(
fout
, "0");

553 ià(
pcŞl_
->
·ts_
[
i
]->
µi_
[
j
] =ğ
H
)

554 
	`årštf
(
fout
, "1");

556 
	`årštf
(
fout
, "X");

558 
	`årštf
(
fout
, "\";\n");

559 
	`årštf
(
fout
, "end;\n");

561 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
) {

562 
	`årštf
(
fout
, "force \"PI\" \"");

563 ià(
£qCœcu™Check
)

564 
	`årštf
(
fout
, "000");

565 
j
 = 0; j < 
pcŞl_
->
Åi_
; ++j) {

566 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
[
j
] =ğ
L
)

567 
	`årštf
(
fout
, "0");

568 ià(
pcŞl_
->
·ts_
[
i
]->
pi1_
[
j
] =ğ
H
)

569 
	`årštf
(
fout
, "1");

571 
	`årštf
(
fout
, "X");

573 
	`årštf
(
fout
, "\" 1;\n");

576 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
) {

577 ià(
£qCœcu™Check
)

578 
	`årštf
(
fout
, "pulse \"/CK\" 2;\n");

579 
	`årštf
(
fout
, "force \"PI\" \"");

580 ià(
£qCœcu™Check
)

581 
	`årštf
(
fout
, "000");

582 
j
 = 0; j < 
pcŞl_
->
Åi_
; ++j) {

583 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
[
j
] =ğ
L
)

584 
	`årštf
(
fout
, "0");

585 ià(
pcŞl_
->
·ts_
[
i
]->
pi2_
[
j
] =ğ
H
)

586 
	`årštf
(
fout
, "1");

588 
	`årštf
(
fout
, "X");

590 
	`årštf
(
fout
, "\" 3;\n");

592 ià(
pcŞl_
->
·ts_
[
i
]->
po2_
) {

593 
	`årštf
(
fout
, "measure \"PO\" \"");

594 ià(
£qCœcu™Check
)

595 
	`årštf
(
fout
, "X");

596 
j
 = 0; j < 
pcŞl_
->
Åo_
; ++j) {

597 ià(
pcŞl_
->
·ts_
[
i
]->
po2_
[
j
] =ğ
L
)

598 
	`årštf
(
fout
, "0");

599 ià(
pcŞl_
->
·ts_
[
i
]->
po2_
[
j
] =ğ
H
)

600 
	`årštf
(
fout
, "1");

602 
	`årštf
(
fout
, "X");

604 
	`årštf
(
fout
, "\" 4;\n");

606 ià(
pcŞl_
->
·ts_
[
i
]->
po1_
) {

607 
	`årštf
(
fout
, "measure \"PO\" \"");

608 ià(
£qCœcu™Check
)

609 
	`årštf
(
fout
, "X");

610 
j
 = 0; j < 
pcŞl_
->
Åo_
; ++j) {

611 ià(
pcŞl_
->
·ts_
[
i
]->
po1_
[
j
] =ğ
L
)

612 
	`årštf
(
fout
, "0");

613 ià(
pcŞl_
->
·ts_
[
i
]->
po1_
[
j
] =ğ
H
)

614 
	`årštf
(
fout
, "1");

616 
	`årštf
(
fout
, "X");

618 
	`årštf
(
fout
, "\" 4;\n");

636 ià(
pcŞl_
->
Åpi_
) {

637 
	`årštf
(
fout
, "pulse \"/CK\" 5;\n");

638 
	`årštf
(
fout
, "apply \"group1_unload\" 6 =\n");

639 
	`årštf
(
fout
, "chain \"chain1\" = \"");

640 
j
 = 
pcŞl_
->
Åpi_
 - 1; j >= 0; --j) {

641 ià(
pcŞl_
->
·ts_
[
i
]->
µo_
[
j
] =ğ
L
)

642 
	`årštf
(
fout
, "0");

643 ià(
pcŞl_
->
·ts_
[
i
]->
µo_
[
j
] =ğ
H
)

644 
	`årštf
(
fout
, "1");

646 
	`årštf
(
fout
, "X");

648 
	`årštf
(
fout
, "\";\n");

649 
	`årštf
(
fout
, "end;\n");

652 
	`årštf
(
fout
, "end;\n");

655 if(
£qCœcu™Check
) {

656 
	`årštf
(
fout
, "SCAN_CELLS =\n");

657 
	`årštf
(
fout
, "scan_group \"group1\" =\n");

658 
	`årštf
(
fout
, "scan_chain \"chain1\" =\n");

659 
i
 = 
cœ_
->
Åi_
 + cœ_->
Åpi_
 - 1; i >= cir_->npi_; --i) {

660 
	`årštf
(
fout
,

662 
cœ_
->
Åi_
 + cœ_->
Åpi_
 - 1 - 
i
, cœ_->
Æ_
->
	`g‘Tİ
()->
	`g‘C–l
(cœ_->
g©es_
[i].
cid_
)->
Çme_
);

666 
	`årštf
(
fout
, "end;\n");

667 
	`årštf
(
fout
, "end;\n");

668 
	`årštf
(
fout
, "end;\n");

670 
	`årštf
(
fout
, "\n");

671 
	`fşo£
(
fout
);

673  
Œue
;

674 
	}
}

676 
boŞ
 
	gProûdu»Wr™”
::
	$wr™eProc
(cÚ¡ * cÚ¡ 
âame
) {

677 
FILE
 *
fout
 = 
	`fİ’
(
âame
, "w");

678 ià(!
fout
) {

679 
	`årštf
(
¡d”r
, "**ERROR PatternWriter::writePat(): file");

680 
	`årštf
(
¡d”r
, "`%s' cªnÙ bİ’ed\n", 
âame
);

681  
çl£
;

684 
	`årštf
(
fout
, "setime scale 1.000000‚s ;\n");

685 
	`årštf
(
fout
, "set strobe_windowime 3 ;\n\n");

686 
	`årštf
(
fout
, "timeplate _default_WFT_ =\n");

687 
	`årštf
(
fout
, "force_pi 0 ;\n");

688 
	`årštf
(
fout
, "measure_po 29 ;\n");

689 
	`årštf
(
fout
, "pulse CK 16 3;\n");

690 
	`årštf
(
fout
, "period 32 ;\n");

691 
	`årštf
(
fout
, "end;\n\n");

692 
	`årštf
(
fout
, "procedure shift =\n");

693 
	`årštf
(
fout
, "scan_group group1 ;\n");

694 
	`årštf
(
fout
, "timeplate _default_WFT_ ;\n");

695 
	`årštf
(
fout
, "cycle =\n");

696 
	`årštf
(
fout
, "force_sci ;\n");

697 
	`årštf
(
fout
, "pulse CK ;\n");

698 
	`årštf
(
fout
, "measure_sco ;\n");

699 
	`årštf
(
fout
, "end;\n");

700 
	`årštf
(
fout
, "end;\n\n");

701 
	`årštf
(
fout
, "procedure†oad_unload =\n");

702 
	`årštf
(
fout
, "scan_group group1 ;\n");

703 
	`årštf
(
fout
, "timeplate _default_WFT_ ;\n");

704 
	`årštf
(
fout
, "cycle =\n");

705 
	`årštf
(
fout
, "force CK 0 ;\n");

706 
	`årštf
(
fout
, "forceest_se 1 ;\n");

707 
	`årštf
(
fout
, "forceest_si 0 ;\n");

708 
	`årštf
(
fout
, "measure_sco ;\n");

709 
	`årštf
(
fout
, "end ;\n");

710 
	`årštf
(
fout
, "­¶y shiá %d;\n", 
cœ_
->
Åpi_
);

711 
	`årštf
(
fout
, "end;\n");

712 
	`årštf
(
fout
, "procedureest_setup =\n");

713 
	`årštf
(
fout
, "timeplate _default_WFT_ ;\n");

714 
	`årštf
(
fout
, "cycle =\n");

715 
	`årštf
(
fout
, "force CK 0 ;\n");

716 
	`årštf
(
fout
, "forceest_se 0 ;\n");

717 
	`årštf
(
fout
, "end;\n");

718 
	`årštf
(
fout
, "end;\n");

719 
	`fşo£
(
fout
);

720  
Œue
;

721 
	}
}

	@core/src/pattern_rw.h

8 #iâdeà
_CORE_PATTERN_RW_H_


9 
	#_CORE_PATTERN_RW_H_


	)

11 
	~"š‹rçû/·t_fe.h
"

13 
	~"cœcu™.h
"

14 
	~"·‰”n.h
"

16 
Çme¥aû
 
	gCÜeNs
 {

20 şas 
	cP©‹ºR—d”
 : 
public
 
IÁfNs
::
P©Fe
 {

21 
public
:

22 
P©‹ºR—d”
(
P©‹ºProûssÜ
 *
pcŞl
, 
Cœcu™
 *
cœ
);

23 ~
P©‹ºR—d”
();

24 
vœtu®
 
£tPiOrd”
(cÚ¡ 
IÁfNs
::
P©Names
 * cÚ¡ 
pis
);

25 
vœtu®
 
£tPpiOrd”
(cÚ¡ 
IÁfNs
::
P©Names
 * cÚ¡ 
µis
);

26 
vœtu®
 
£tPoOrd”
(cÚ¡ 
IÁfNs
::
P©Names
 * cÚ¡ 
pos
);

27 
vœtu®
 
£tP©‹ºTy³
(cÚ¡ 
IÁfNs
::
P©Ty³
 &
ty³
);

28 
vœtu®
 
£tP©‹ºNum
(cÚ¡ &
num
);

29 
vœtu®
 
addP©‹º
(cÚ¡ * cÚ¡ 
pi1
, cÚ¡ * cÚ¡ 
pi2
,

30 cÚ¡ * cÚ¡ 
µi
, cÚ¡ * cÚ¡ 
si
,

31 cÚ¡ * cÚ¡ 
po1
, cÚ¡ * cÚ¡ 
po2
,

32 cÚ¡ * cÚ¡ 
µo
);

34 
	g´Ùeùed
:

35 
assignV®ue
(
V®ue
 *
v
, cÚ¡ * cÚ¡ 
·t
,

36 cÚ¡ &
size
);

37 
	gcurP©_
;

38 
P©‹ºProûssÜ
 *
	gpcŞl_
;

39 
Cœcu™
 *
	gcœ_
;

42 
šlše
 
	gP©‹ºR—d”
::
	$P©‹ºR—d”
(
P©‹ºProûssÜ
 *
pcŞl
, 
Cœcu™
 *
cœ
) {

43 
curP©_
 = 0;

44 
pcŞl_
 = 
pcŞl
;

45 
cœ_
 = 
cœ
;

46 
	}
}

48 
šlše
 
	gP©‹ºR—d”
::~
	$P©‹ºR—d”
(è{
	}
}

51 şas 
	cP©‹ºWr™”
 {

52 
public
:

53 
P©‹ºWr™”
(
P©‹ºProûssÜ
 *
pcŞl
, 
Cœcu™
 *
cœ
);

54 ~
P©‹ºWr™”
();

56 
boŞ
 
wr™eP©
(cÚ¡ * cÚ¡ 
âame
);

57 
boŞ
 
wr™eLht
(cÚ¡ * cÚ¡ 
âame
);

58 
boŞ
 
wr™eAscii
(cÚ¡ * cÚ¡ 
âame
);

60 
	g´Ùeùed
:

61 
P©‹ºProûssÜ
 *
pcŞl_
;

62 
Cœcu™
 *
	gcœ_
;

65 
šlše
 
	gP©‹ºWr™”
::
	$P©‹ºWr™”
(
P©‹ºProûssÜ
 *
pcŞl
, 
Cœcu™
 *
cœ
) {

66 
pcŞl_
 = 
pcŞl
;

67 
cœ_
 = 
cœ
;

68 
	}
}

70 
šlše
 
	gP©‹ºWr™”
::~
	$P©‹ºWr™”
(è{
	}
}

73 şas 
	cProûdu»Wr™”
 {

74 
public
:

75 
Proûdu»Wr™”
(
Cœcu™
 *
cœ
);

76 ~
Proûdu»Wr™”
();

77 
boŞ
 
wr™eProc
(cÚ¡ * cÚ¡ 
âame
);

78 
	g´Ùeùed
:

79 
Cœcu™
 *
cœ_
;

82 
šlše
 
	gProûdu»Wr™”
::
	$Proûdu»Wr™”
(
Cœcu™
 *
cœ
) {

83 
cœ_
 = 
cœ
;

84 
	}
}

86 
šlše
 
	gProûdu»Wr™”
::~
	$Proûdu»Wr™”
(è{
	}
}

	@core/src/simulator.cpp

8 
	~"simuÏtÜ.h
"

10 
usšg
 
Çme¥aû
 
	g¡d
;

11 
usšg
 
Çme¥aû
 
	gIÁfNs
;

12 
usšg
 
Çme¥aû
 
	gCÜeNs
;

25 
	gSimuÏtÜ
::
	$µGoodSim
(
P©‹ºProûssÜ
 *
pcŞl
) {

26 
i
 = 0; i < ()
pcŞl
->
·ts_
.
	`size
(); i +ğ
WORD_SIZE
) {

27 
	`µS‘P©‹º
(
pcŞl
, 
i
);

28 
	`goodSim
();

30 
	}
}

46 
	gSimuÏtÜ
::
	$ev’tFauÉSim
() {

47 
i
 = 0; i < 
cœ_
->
vl_
; ++i) {

48 !
ev’ts_
[
i
].
	`em±y
()) {

49 
gid
 = 
ev’ts_
[
i
].
	`tİ
();

50 
ev’ts_
[
i
].
	`pİ
();

51 
´oûs£d_
[
gid
] = 
çl£
;

52 
	`çuÉEv®
(
gid
);

53 
»cov”_
[
Äecov”_
] = 
gid
;

54 
Äecov”_
++;

57 ià(
cœ_
->
g©es_
[
gid
].
æ_
 =ğcœ_->g©es_[gid].
gl_


58 && 
cœ_
->
g©es_
[
gid
].
fh_
 =ğcœ_->g©es_[gid].
gh_
)

62 
j
 = 0; j < 
cœ_
->
g©es_
[
gid
].
nfo_
; ++j) {

63 
foid
 = 
cœ_
->
g©es_
[
gid
].
fos_
[
j
];

64 ià(
´oûs£d_
[
foid
])

66 
ev’ts_
[
cœ_
->
g©es_
[
foid
].
lvl_
].
	`push
(foid);

67 
´oûs£d_
[
foid
] = 
Œue
;

71 
	}
}

84 
	gSimuÏtÜ
::
	$pfFauÉSim
(
P©‹ºProûssÜ
 *
pcŞl
, 
FauÉLi¡ExŒaù
 *
fLi¡ExŒaù
) {

86 
FauÉLi¡
 
»maš
;

87 
FauÉLi¡I‹r
 
™
 = 
fLi¡ExŒaù
->
cu¼’t_
.
	`begš
();

88  ; 
™
 !ğ
fLi¡ExŒaù
->
cu¼’t_
.
	`’d
(); ++it)

89 ià((*
™
)->
¡©e_
 !ğ
FauÉ
::
DT
 && (*™)->¡©e_ !ğFauÉ::
RE
 && (*™)->
lše_
 >= 0)

90 
»maš
.
	`push_back
(*
™
);

93 
size_t
 
i
 = 0; i < 
pcŞl
->
·ts_
.
	`size
(); ++i) {

94 ià(
»maš
.
	`size
() == 0)

98 
	`assignP©‹ºToPi
Ğ
pcŞl
->
·ts_
[
i
] );

99 
	`pfFauÉSim
(
»maš
);

102 
	}
}

115 
	gSimuÏtÜ
::
	$pfFauÉSim
(cÚ¡ 
P©‹º
 * cÚ¡ 
p
, 
FauÉLi¡
 &
»maš
) {

118 
	`assignP©‹ºToPi
Ğ
p
 );

120  
	`pfFauÉSim
(
»maš
);

122 
	}
}

134 
	gSimuÏtÜ
::
	$pfFauÉSim
(
FauÉLi¡
 &
»maš
) {

135 ià(
»maš
.
	`size
() == 0)

138 
»t
 = 0;

141 
	`goodSimCİyToFauÉ
();

146 
FauÉLi¡I‹r
 
™
 = 
»maš
.
	`begš
();

149 ià(
	`pfCheckAùiv©iÚ
(*
™
)) {

150 
	`pfInjeù
(*
™
, 
nšjeùed_
);

151 
šjeùed_
[
nšjeùed_
] = 
™
;

152 
nšjeùed_
++;

154 
™
++;

157 ià(
nšjeùed_
 =ğ()
WORD_SIZE


158 || (
™
 =ğ
»maš
.
	`’d
(è&& 
nšjeùed_
 > 0)) {

159 
	`ev’tFauÉSim
();

160 
»t
+=
	`pfCheckD‘eùiÚ
(
»maš
);

161 
	`pfRe£t
();

164 } 
™
 !ğ
»maš
.
	`’d
());

166  
»t
;

167 
	}
}

180 
boŞ
 
	gSimuÏtÜ
::
	$pfCheckAùiv©iÚ
(cÚ¡ 
FauÉ
 * cÚ¡ 
f
) {

181 cÚ¡ &
fg
 = 
f
->
lše_
 =ğ0 ? f->
g©e_
 :

182 
cœ_
->
g©es_
[
f
->
g©e_
].
fis_
[f->
lše_
 - 1];

183 cÚ¡ 
P¬aV®ue
 &
gl
 = 
cœ_
->
g©es_
[
fg
].
gl_
;

184 cÚ¡ 
P¬aV®ue
 &
gh
 = 
cœ_
->
g©es_
[
fg
].
gh_
;

186 
f
->
ty³_
) {

187 
FauÉ
::
SA0
:

188  
gh
 !ğ
PARA_L
;

190 
FauÉ
::
SA1
:

191  
gl
 !ğ
PARA_L
;

193 
FauÉ
::
STR
:

194 ià(
cœ_
->
näame_
 < 2)

195  
çl£
;

196  (
gl
 & 
cœ_
->
g©es_
[
fg
 + cœ_->
ng©e_
].
gh_
è!ğ
PARA_L
;

198 
FauÉ
::
STF
:

199 ià(
cœ_
->
näame_
 < 2)

200  
çl£
;

201  (
gh
 & 
cœ_
->
g©es_
[
fg
 + cœ_->
ng©e_
].
gl_
è!ğ
PARA_L
;

206  
çl£
;

207 
	}
}

219 
	gSimuÏtÜ
::
	$pfInjeù
(cÚ¡ 
FauÉ
 * cÚ¡ 
f
, cÚ¡ 
size_t
 &
i
) {

220 
fg
 = 
f
->
g©e_
;

221 
f
->
ty³_
) {

222 
FauÉ
::
SA0
:

223 
	`£tB™V®ue
(
çuÉInjeùL_
[
fg
][
f
->
lše_
], 
i
, 
H
);

225 
FauÉ
::
SA1
:

226 
	`£tB™V®ue
(
çuÉInjeùH_
[
fg
][
f
->
lše_
], 
i
, 
H
);

228 
FauÉ
::
STR
:

229 
fg
 +ğ
cœ_
->
ng©e_
;

230 
	`£tB™V®ue
(
çuÉInjeùL_
[
fg
][
f
->
lše_
], 
i
, 
H
);

232 
FauÉ
::
STF
:

233 
fg
 +ğ
cœ_
->
ng©e_
;

234 
	`£tB™V®ue
(
çuÉInjeùH_
[
fg
][
f
->
lše_
], 
i
, 
H
);

241 ià(!
´oûs£d_
[
fg
]) {

242 
ev’ts_
[
cœ_
->
g©es_
[
fg
].
lvl_
].
	`push
(fg);

243 
´oûs£d_
[
fg
] = 
Œue
;

245 
	}
}

258 
	gSimuÏtÜ
::
	$pfCheckD‘eùiÚ
(
FauÉLi¡
 &
»maš
) {

259 
»t
 = 0;

260 
P¬aV®ue
 
d‘eùed
 = 
PARA_L
;

261 
¡¬t
 = 
cœ_
->
tg©e_
 - cœ_->
Åo_
 - cœ_->
Åpi_
;

262 
i
 = 
¡¬t
; i < 
cœ_
->
tg©e_
; ++i)

263 
d‘eùed
 |ğ((
cœ_
->
g©es_
[
i
].
gl_
 & cœ_->g©es_[i].
fh_
)

264 | (
cœ_
->
g©es_
[
i
].
gh_
 & cœ_->g©es_[i].
æ_
));

267 
i
 = 0; i < 
nšjeùed_
; ++i) {

268 ià(
	`g‘B™V®ue
(
d‘eùed
, (
size_t
)
i
è=ğ
L
)

270 (*
šjeùed_
[
i
])->
d‘_
++;

271 ià((*
šjeùed_
[
i
])->
d‘_
 >ğ
nd‘_
) {

272 ià((*
šjeùed_
[
i
])->
¡©e_
==
FauÉ
::
AU
) {

274 (*
šjeùed_
[
i
])->
	`´št
();

275 (*
šjeùed_
[
i
])->
¡©e_
 = 
FauÉ
::
PT
;

278 (*
šjeùed_
[
i
])->
¡©e_
 = 
FauÉ
::
DT
;

280 
»maš
.
	`”a£
(
šjeùed_
[
i
]);

281 
»t
++;

285  
»t
;

286 
	}
}

298 
	gSimuÏtÜ
::
	$µFauÉSim
(
P©‹ºProûssÜ
 *
pcŞl
, 
FauÉLi¡ExŒaù
 *
fLi¡ExŒaù
) {

300 
FauÉLi¡
 
»maš
;

301 
FauÉLi¡I‹r
 
™
 = 
fLi¡ExŒaù
->
cu¼’t_
.
	`begš
();

302  ; 
™
 !ğ
fLi¡ExŒaù
->
cu¼’t_
.
	`’d
(); ++it)

303 ià((*
™
)->
¡©e_
 !ğ
FauÉ
::
DT
 && (*™)->¡©e_ !ğFauÉ::
RE
 && (*™)->
lše_
 >= 0)

304 
»maš
.
	`push_back
(*
™
);

307 
i
 = 0; i < ()
pcŞl
->
·ts_
.
	`size
(); i +ğ
WORD_SIZE
) {

308 
	`µS‘P©‹º
(
pcŞl
, 
i
);

309 
	`µFauÉSim
(
»maš
);

311 
	}
}

323 
	gSimuÏtÜ
::
	$µFauÉSim
(
FauÉLi¡
 &
»maš
) {

324 ià(
»maš
.
	`size
() == 0)

328 
	`goodSimCİyToFauÉ
();

330 
FauÉLi¡I‹r
 
™
 = 
»maš
.
	`begš
();

332 ià(
	`µCheckAùiv©iÚ
((*
™
))) {

333 
	`µInjeù
((*
™
));

334 
	`ev’tFauÉSim
();

335 
	`µCheckD‘eùiÚ
((*
™
));

336 
	`µRe£t
();

338 ià((*
™
)->
¡©e_
 =ğ
FauÉ
::
DT
)

339 
™
 = 
»maš
.
	`”a£
(it);

341 
™
++;

342 } 
™
 !ğ
»maš
.
	`’d
());

343 
	}
}

355 
boŞ
 
	gSimuÏtÜ
::
	$µCheckAùiv©iÚ
(cÚ¡ 
FauÉ
 * cÚ¡ 
f
) {

356 cÚ¡ &
fg
 = 
f
->
lše_
 =ğ0 ? f->
g©e_
 :

357 
cœ_
->
g©es_
[
f
->
g©e_
].
fis_
[f->
lše_
 - 1];

358 cÚ¡ 
P¬aV®ue
 &
gl
 = 
cœ_
->
g©es_
[
fg
].
gl_
;

359 cÚ¡ 
P¬aV®ue
 &
gh
 = 
cœ_
->
g©es_
[
fg
].
gh_
;

361 
f
->
ty³_
) {

362 
FauÉ
::
SA0
:

363 
aùiv©ed_
 = 
gh
;

364  
aùiv©ed_
 !ğ
PARA_L
;

366 
FauÉ
::
SA1
:

367 
aùiv©ed_
 = 
gl
;

368  
aùiv©ed_
 !ğ
PARA_L
;

370 
FauÉ
::
STR
:

371 ià(
cœ_
->
näame_
 < 2)

372  
çl£
;

373 
aùiv©ed_
 = (
gl
 & 
cœ_
->
g©es_
[
fg
 + cœ_->
ng©e_
].
gh_
);

374  
aùiv©ed_
 !ğ
PARA_L
;

376 
FauÉ
::
STF
:

377 ià(
cœ_
->
näame_
 < 2)

378  
çl£
;

379 
aùiv©ed_
 = (
gh
 & 
cœ_
->
g©es_
[
fg
 + cœ_->
ng©e_
].
gl_
);

380  
aùiv©ed_
 !ğ
PARA_L
;

385  
çl£
;

386 
	}
}

398 
	gSimuÏtÜ
::
	$µInjeù
(cÚ¡ 
FauÉ
 * cÚ¡ 
f
) {

399 
fg
 = 
f
->
g©e_
;

400 
f
->
ty³_
) {

401 
FauÉ
::
SA0
:

402 
çuÉInjeùL_
[
fg
][
f
->
lše_
] = 
PARA_H
;

404 
FauÉ
::
SA1
:

405 
çuÉInjeùH_
[
fg
][
f
->
lše_
] = 
PARA_H
;

407 
FauÉ
::
STR
:

408 
fg
 +ğ
cœ_
->
ng©e_
;

409 
çuÉInjeùL_
[
fg
][
f
->
lše_
] = 
PARA_H
;

411 
FauÉ
::
STF
:

412 
fg
 +ğ
cœ_
->
ng©e_
;

413 
çuÉInjeùH_
[
fg
][
f
->
lše_
] = 
PARA_H
;

420 ià(!
´oûs£d_
[
fg
]) {

421 
ev’ts_
[
cœ_
->
g©es_
[
fg
].
lvl_
].
	`push
(fg);

422 
´oûs£d_
[
fg
] = 
Œue
;

424 
	}
}

437 
	gSimuÏtÜ
::
	$µCheckD‘eùiÚ
(
FauÉ
 * cÚ¡ 
f
) {

438 
P¬aV®ue
 
d‘eùed
 = 
PARA_L
;

439 
¡¬t
 = 
cœ_
->
tg©e_
 - cœ_->
Åo_
 - cœ_->
Åpi_
;

440 
i
 = 
¡¬t
; i < 
cœ_
->
tg©e_
; ++i)

441 
d‘eùed
 |ğ((
cœ_
->
g©es_
[
i
].
gl_
 & cœ_->g©es_[i].
fh_
)

442 | (
cœ_
->
g©es_
[
i
].
gh_
 & cœ_->g©es_[i].
æ_
));

443 
d‘eùed
 &ğ
aùiv©ed_
;

446 
size_t
 
i
 = 0; i < 
WORD_SIZE
; ++i) {

447 ià(
	`g‘B™V®ue
(
d‘eùed
, 
i
è=ğ
L
)

449 
f
->
d‘_
++;

450 ià(
f
->
d‘_
 >ğ
nd‘_
) {

451 
f
->
¡©e_
 = 
FauÉ
::
DT
;

455 
	}
}

468 
	gSimuÏtÜ
::
	$µS‘P©‹º
(
P©‹ºProûssÜ
 *
pcŞl
, cÚ¡ &
i
) {

470 
j
 = 0; j < 
cœ_
->
Åi_
 + cœ_->
Åpi_
; ++j) {

471 
k
 = 0; k < 
cœ_
->
näame_
; ++k) {

472 
cœ_
->
g©es_
[
j
 + 
k
 * cœ_->
ng©e_
].
gl_
 = 
PARA_L
;

473 
cœ_
->
g©es_
[
j
 + 
k
 * cœ_->
ng©e_
].
gh_
 = 
PARA_L
;

478 
’d·t
 = ()
pcŞl
->
·ts_
.
	`size
();

479 ià(
i
 + ()
WORD_SIZE
 <ğ()
pcŞl
->
·ts_
.
	`size
())

480 
’d·t
 = 
i
 + 
WORD_SIZE
;

481 
j
 = 
i
; j < 
’d·t
; ++j) {

483 ià(
pcŞl
->
·ts_
[
j
]->
pi1_
) {

484 
k
 = 0; k < 
pcŞl
->
Åi_
; ++k) {

485 ià(
pcŞl
->
·ts_
[
j
]->
pi1_
[
k
] =ğ
L
)

486 
	`£tB™V®ue
(
cœ_
->
g©es_
[
k
].
gl_
, 
j
 - 
i
, 
H
);

487 ià(
pcŞl
->
·ts_
[
j
]->
pi1_
[
k
] =ğ
H
)

488 
	`£tB™V®ue
(
cœ_
->
g©es_
[
k
].
gh_
, 
j
 - 
i
, 
H
);

491 ià(
pcŞl
->
·ts_
[
j
]->
pi2_
 && 
cœ_
->
näame_
 > 1) {

492 
k
 = 0; k < 
pcŞl
->
Åi_
; ++k) {

493 
šdex
 = 
k
 + 
cœ_
->
ng©e_
;

494 ià(
pcŞl
->
·ts_
[
j
]->
pi2_
[
k
] =ğ
L
)

495 
	`£tB™V®ue
(
cœ_
->
g©es_
[
šdex
].
gl_
, 
j
 - 
i
, 
H
);

496 ià(
pcŞl
->
·ts_
[
j
]->
pi2_
[
k
] =ğ
H
)

497 
	`£tB™V®ue
(
cœ_
->
g©es_
[
šdex
].
gh_
, 
j
 - 
i
, 
H
);

501 ià(
pcŞl
->
·ts_
[
j
]->
µi_
) {

502 
k
 = 0; k < 
pcŞl
->
Åpi_
; ++k) {

503 
šdex
 = 
k
 + 
cœ_
->
Åi_
;

504 ià(
pcŞl
->
·ts_
[
j
]->
µi_
[
k
] =ğ
L
)

505 
	`£tB™V®ue
(
cœ_
->
g©es_
[
šdex
].
gl_
, 
j
 - 
i
, 
H
);

506 ià(
pcŞl
->
·ts_
[
j
]->
µi_
[
k
] =ğ
H
)

507 
	`£tB™V®ue
(
cœ_
->
g©es_
[
šdex
].
gh_
, 
j
 - 
i
, 
H
);

511 ià(
pcŞl
->
·ts_
[
j
]->
si_
 && 
cœ_
->
näame_
 > 1 && cœ_->
cÚnTy³_
 =ğ
Cœcu™
::
SHIFT
) {

512 
šdex
 = 
cœ_
->
ng©e_
 + cœ_->
Åi_
;

513 ià(
pcŞl
->
·ts_
[
j
]->
si_
[0] =ğ
L
)

514 
	`£tB™V®ue
(
cœ_
->
g©es_
[
šdex
].
gl_
, 
j
 - 
i
, 
H
);

515 ià(
pcŞl
->
·ts_
[
j
]->
si_
[0] =ğ
H
)

516 
	`£tB™V®ue
(
cœ_
->
g©es_
[
šdex
].
gh_
, 
j
 - 
i
, 
H
);

519 
	}
}

	@core/src/simulator.h

9 #iâdeà
_CORE_SIMULATOR_H_


10 
	#_CORE_SIMULATOR_H_


	)

12 
	~<¡ack
>

14 
	~"·‰”n.h
"

15 
	~"çuÉ.h
"

17 
Çme¥aû
 
	gCÜeNs
 {

19 şas 
	cSimuÏtÜ
 {

20 
	gpublic
:

21 
SimuÏtÜ
(
Cœcu™
 *
cœ
);

22 ~
SimuÏtÜ
();

25 
£tNd‘
(cÚ¡ &
nd‘
);

26 
ev’tFauÉSim
();

27 
goodSim
();

28 
goodSimCİyToFauÉ
();

29 
goodEv®
(cÚ¡ &
i
);

30 
çuÉEv®
(cÚ¡ &
i
);

31 
assignP©‹ºToPi
(cÚ¡ 
P©‹º
 *cÚ¡ 
p
);

34 
pfFauÉSim
(
P©‹ºProûssÜ
 *
pcŞl
, 
FauÉLi¡ExŒaù
 *
fLi¡ExŒaù
);

35 
pfFauÉSim
(cÚ¡ 
P©‹º
 * cÚ¡ 
p
, 
FauÉLi¡
 &
»maš
);

36 
pfFauÉSim
(
FauÉLi¡
 &
»maš
);

39 
µGoodSim
(
P©‹ºProûssÜ
 *
pcŞl
);

40 
µFauÉSim
(
P©‹ºProûssÜ
 *
pcŞl
, 
FauÉLi¡ExŒaù
 *
fLi¡ExŒaù
);

41 
µFauÉSim
(
FauÉLi¡
 &
»maš
);

43 
	g´Ùeùed
:

45 
Cœcu™
 *
cœ_
;

46 
	gnd‘_
;

47 
	g¡d
::
¡ack
<> *
ev’ts_
;

48 
boŞ
 *
	g´oûs£d_
;

49 *
	g»cov”_
;

50 
	gÄecov”_
;

53 
P¬aV®ue
 (*
çuÉInjeùL_
)[5];

54 
P¬aV®ue
 (*
çuÉInjeùH_
)[5];

57 
pfRe£t
();

58 
boŞ
 
pfCheckAùiv©iÚ
(cÚ¡ 
FauÉ
 * cÚ¡ 
f
);

59 
pfInjeù
(cÚ¡ 
FauÉ
 * cÚ¡ 
f
, cÚ¡ 
size_t
 &
i
);

60 
pfCheckD‘eùiÚ
(
FauÉLi¡
 &
»maš
);

61 
FauÉLi¡I‹r
 
	gšjeùed_
[
WORD_SIZE
];

62 
	gnšjeùed_
;

65 
µRe£t
();

66 
boŞ
 
µCheckAùiv©iÚ
(cÚ¡ 
FauÉ
 * cÚ¡ 
f
);

67 
µInjeù
(cÚ¡ 
FauÉ
 * cÚ¡ 
f
);

68 
µCheckD‘eùiÚ
(
FauÉ
 * cÚ¡ 
f
);

69 
µS‘P©‹º
(
P©‹ºProûssÜ
 *
pcŞl
, cÚ¡ &
i
);

70 
P¬aV®ue
 
	gaùiv©ed_
;

74 
šlše
 
	gSimuÏtÜ
::
	$SimuÏtÜ
(
Cœcu™
 *
cœ
) {

76 
cœ_
 = 
cœ
;

77 
nd‘_
 = 1;

78 
ev’ts_
 = 
Ãw
 
¡d
::
¡ack
<>[
cœ_
->
vl_
];

79 
´oûs£d_
 = 
Ãw
 
boŞ
[
cœ_
->
tg©e_
];

80 
»cov”_
 = 
Ãw
 [
cœ_
->
tg©e_
];

81 
Äecov”_
 = 0;

82 
çuÉInjeùL_
 = 
Ãw
 
P¬aV®ue
[
cœ_
->
tg©e_
][5];

83 
çuÉInjeùH_
 = 
Ãw
 
P¬aV®ue
[
cœ_
->
tg©e_
][5];

85 
	`mem£t
(
´oûs£d_
, 0, 
cœ_
->
tg©e_
 * (
boŞ
));

86 
	`mem£t
(
çuÉInjeùL_
, 0, 
cœ_
->
tg©e_
 * 5 * (
P¬aV®ue
));

87 
	`mem£t
(
çuÉInjeùH_
, 0, 
cœ_
->
tg©e_
 * 5 * (
P¬aV®ue
));

90 
nšjeùed_
 = 0;

93 
aùiv©ed_
 = 
PARA_L
;

94 
	}
}

96 
šlše
 
	gSimuÏtÜ
::~
	$SimuÏtÜ
() {

97 
d–‘e
 [] 
ev’ts_
;

98 
d–‘e
 [] 
´oûs£d_
;

99 
d–‘e
 [] 
»cov”_
;

100 
d–‘e
 [] 
çuÉInjeùL_
;

101 
d–‘e
 [] 
çuÉInjeùH_
;

102 
	}
}

114 
šlše
 
	gSimuÏtÜ
::
	$assignP©‹ºToPi
(cÚ¡ 
P©‹º
 *cÚ¡ 
·t
)

117 
j
 = 0; j < 
cœ_
->
Åi_
; ++j) {

118 
cœ_
->
g©es_
[
j
].
gl_
 = 
PARA_L
;

119 
cœ_
->
g©es_
[
j
].
gh_
 = 
PARA_L
;

120 ià(
·t
->
pi1_
) {

121 ià(
·t
->
pi1_
[
j
] =ğ
L
)

122 
cœ_
->
g©es_
[
j
].
gl_
 = 
PARA_H
;

123 ià(
·t
->
pi1_
[
j
] =ğ
H
)

124 
cœ_
->
g©es_
[
j
].
gh_
 = 
PARA_H
;

126 ià(
cœ_
->
näame_
 > 1) {

127 
cœ_
->
g©es_
[
j
 + cœ_->
ng©e_
].
gl_
 = 
PARA_L
;

128 
cœ_
->
g©es_
[
j
 + cœ_->
ng©e_
].
gh_
 = 
PARA_L
;

129 ià(
·t
->
pi2_
) {

130 ià(
·t
->
pi2_
[
j
] =ğ
L
)

131 
cœ_
->
g©es_
[
j
 + cœ_->
ng©e_
].
gl_
 = 
PARA_H
;

132 ià(
·t
->
pi2_
[
j
] =ğ
H
)

133 
cœ_
->
g©es_
[
j
 + cœ_->
ng©e_
].
gh_
 = 
PARA_H
;

139 
j
 = 
cœ_
->
Åi_
; j < cœ_->Åi_+ cœ_->
Åpi_
; ++j) {

140 
cœ_
->
g©es_
[
j
].
gl_
 = 
PARA_L
;

141 
cœ_
->
g©es_
[
j
].
gh_
 = 
PARA_L
;

142 ià(
·t
->
µi_
) {

143 ià(
·t
->
µi_
[
j
 - 
cœ_
->
Åi_
] =ğ
L
)

144 
cœ_
->
g©es_
[
j
].
gl_
 = 
PARA_H
;

145 ià(
·t
->
µi_
[
j
 - 
cœ_
->
Åi_
] =ğ
H
)

146 
cœ_
->
g©es_
[
j
].
gh_
 = 
PARA_H
;

148 ià(
cœ_
->
cÚnTy³_
 =ğ
Cœcu™
::
SHIFT
 && cœ_->
näame_
 > 1) {

149 
k
 = 1 ; k < 
cœ_
->
näame_
; ++k){

150 
cœ_
->
g©es_
[
j
 + cœ_->
ng©e_
*
k
].
gl_
 = 
PARA_L
;

151 
cœ_
->
g©es_
[
j
 + cœ_->
ng©e_
*
k
].
gh_
 = 
PARA_L
;

152 ià(
j
 =ğ
cœ_
->
Åi_
){

153 ià(
·t
->
si_
) {

154 ià(
·t
->
si_
[
k
-1] =ğ
L
)

155 
cœ_
->
g©es_
[
j
 + cœ_->
ng©e_
*
k
].
gl_
 = 
PARA_H
;

156 ià(
·t
->
si_
[
k
-1] =ğ
H
)

157 
cœ_
->
g©es_
[
j
 + cœ_->
ng©e_
*
k
].
gh_
 = 
PARA_H
;

166 
	}
}

176 
šlše
 
	gSimuÏtÜ
::
	$£tNd‘
(cÚ¡ &
nd‘
) {

177 
nd‘_
 = 
nd‘
;

178 
	}
}

189 
šlše
 
	gSimuÏtÜ
::
	$goodSim
() {

190 
i
 = 0; i < 
cœ_
->
tg©e_
; ++i)

191 
	`goodEv®
(
i
);

192 
	}
}

204 
šlše
 
	gSimuÏtÜ
::
	$goodSimCİyToFauÉ
() {

205 
i
 = 0; i < 
cœ_
->
tg©e_
; ++i) {

206 
	`goodEv®
(
i
);

207 
cœ_
->
g©es_
[
i
].
æ_
 = cœ_->g©es_[i].
gl_
;

208 
cœ_
->
g©es_
[
i
].
fh_
 = cœ_->g©es_[i].
gh_
;

210 
	}
}

222 
šlše
 
	gSimuÏtÜ
::
	$pfRe£t
() {

223 
i
 = 0; i < 
Äecov”_
; ++i) {

224 
cœ_
->
g©es_
[
»cov”_
[
i
]].
æ_
 = cœ_->g©es_[»cov”_[i]].
gl_
;

225 
cœ_
->
g©es_
[
»cov”_
[
i
]].
fh_
 = cœ_->g©es_[»cov”_[i]].
gh_
;

227 
Äecov”_
 = 0;

228 
	`mem£t
(
´oûs£d_
, 0, 
cœ_
->
tg©e_
 * (
boŞ
));

229 
	`mem£t
(
çuÉInjeùL_
, 0, 
cœ_
->
tg©e_
 * 5 * (
P¬aV®ue
));

230 
	`mem£t
(
çuÉInjeùH_
, 0, 
cœ_
->
tg©e_
 * 5 * (
P¬aV®ue
));

232 
nšjeùed_
 = 0;

233 
	}
}

244 
šlše
 
	gSimuÏtÜ
::
	$µRe£t
() {

245 
i
 = 0; i < 
Äecov”_
; ++i) {

246 
cœ_
->
g©es_
[
»cov”_
[
i
]].
æ_
 = cœ_->g©es_[»cov”_[i]].
gl_
;

247 
cœ_
->
g©es_
[
»cov”_
[
i
]].
fh_
 = cœ_->g©es_[»cov”_[i]].
gh_
;

249 
Äecov”_
 = 0;

250 
	`mem£t
(
´oûs£d_
, 0, 
cœ_
->
tg©e_
 * (
boŞ
));

251 
	`mem£t
(
çuÉInjeùL_
, 0, 
cœ_
->
tg©e_
 * 5 * (
P¬aV®ue
));

252 
	`mem£t
(
çuÉInjeùH_
, 0, 
cœ_
->
tg©e_
 * 5 * (
P¬aV®ue
));

254 
aùiv©ed_
 = 
PARA_L
;

255 
	}
}

271 
šlše
 
	gSimuÏtÜ
::
	$goodEv®
(cÚ¡ &
i
) {

273 cÚ¡ 
fi1
 = 
cœ_
->
g©es_
[
i
].
nfi_
 > 0 ? cœ_->g©es_[i].
fis_
[0] : 0;

274 cÚ¡ 
fi2
 = 
cœ_
->
g©es_
[
i
].
nfi_
 > 1 ? cœ_->g©es_[i].
fis_
[1] : 0;

275 cÚ¡ 
fi3
 = 
cœ_
->
g©es_
[
i
].
nfi_
 > 2 ? cœ_->g©es_[i].
fis_
[2] : 0;

276 cÚ¡ 
fi4
 = 
cœ_
->
g©es_
[
i
].
nfi_
 > 3 ? cœ_->g©es_[i].
fis_
[3] : 0;

278 cÚ¡ 
P¬aV®ue
 &
l1
 = 
cœ_
->
g©es_
[
fi1
].
gl_
;

279 cÚ¡ 
P¬aV®ue
 &
h1
 = 
cœ_
->
g©es_
[
fi1
].
gh_
;

280 cÚ¡ 
P¬aV®ue
 &
l2
 = 
cœ_
->
g©es_
[
fi2
].
gl_
;

281 cÚ¡ 
P¬aV®ue
 &
h2
 = 
cœ_
->
g©es_
[
fi2
].
gh_
;

282 cÚ¡ 
P¬aV®ue
 &
l3
 = 
cœ_
->
g©es_
[
fi3
].
gl_
;

283 cÚ¡ 
P¬aV®ue
 &
h3
 = 
cœ_
->
g©es_
[
fi3
].
gh_
;

284 cÚ¡ 
P¬aV®ue
 &
l4
 = 
cœ_
->
g©es_
[
fi4
].
gl_
;

285 cÚ¡ 
P¬aV®ue
 &
h4
 = 
cœ_
->
g©es_
[
fi4
].
gh_
;

287 
cœ_
->
g©es_
[
i
].
ty³_
) {

288 
G©e
::
INV
:

289 
cœ_
->
g©es_
[
i
].
gl_
 = 
h1
;

290 
cœ_
->
g©es_
[
i
].
gh_
 = 
l1
;

292 
G©e
::
PO
:

293 
G©e
::
PPO
:

294 
G©e
::
BUF
:

295 
cœ_
->
g©es_
[
i
].
gl_
 = 
l1
;

296 
cœ_
->
g©es_
[
i
].
gh_
 = 
h1
;

298 
G©e
::
AND2
:

299 
cœ_
->
g©es_
[
i
].
gl_
 = 
l1
 | 
l2
;

300 
cœ_
->
g©es_
[
i
].
gh_
 = 
h1
 & 
h2
;

302 
G©e
::
AND3
:

303 
cœ_
->
g©es_
[
i
].
gl_
 = 
l1
 | 
l2
 | 
l3
;

304 
cœ_
->
g©es_
[
i
].
gh_
 = 
h1
 & 
h2
 & 
h3
;

306 
G©e
::
AND4
:

307 
cœ_
->
g©es_
[
i
].
gl_
 = 
l1
 | 
l2
 | 
l3
 | 
l4
;

308 
cœ_
->
g©es_
[
i
].
gh_
 = 
h1
 & 
h2
 & 
h3
 & 
h4
;

310 
G©e
::
NAND2
:

311 
cœ_
->
g©es_
[
i
].
gl_
 = 
h1
 & 
h2
;

312 
cœ_
->
g©es_
[
i
].
gh_
 = 
l1
 | 
l2
;

314 
G©e
::
NAND3
:

315 
cœ_
->
g©es_
[
i
].
gl_
 = 
h1
 & 
h2
 & 
h3
;

316 
cœ_
->
g©es_
[
i
].
gh_
 = 
l1
 | 
l2
 | 
l3
;

318 
G©e
::
NAND4
:

319 
cœ_
->
g©es_
[
i
].
gl_
 = 
h1
 & 
h2
 & 
h3
 & 
h4
;

320 
cœ_
->
g©es_
[
i
].
gh_
 = 
l1
 | 
l2
 | 
l3
 | 
l4
;

322 
G©e
::
OR2
:

323 
cœ_
->
g©es_
[
i
].
gl_
 = 
l1
 & 
l2
;

324 
cœ_
->
g©es_
[
i
].
gh_
 = 
h1
 | 
h2
;

326 
G©e
::
OR3
:

327 
cœ_
->
g©es_
[
i
].
gl_
 = 
l1
 & 
l2
 & 
l3
;

328 
cœ_
->
g©es_
[
i
].
gh_
 = 
h1
 | 
h2
 | 
h3
;

330 
G©e
::
OR4
:

331 
cœ_
->
g©es_
[
i
].
gl_
 = 
l1
 & 
l2
 & 
l3
 & 
l4
;

332 
cœ_
->
g©es_
[
i
].
gh_
 = 
h1
 | 
h2
 | 
h3
 | 
h4
;

334 
G©e
::
NOR2
:

335 
cœ_
->
g©es_
[
i
].
gl_
 = 
h1
 | 
h2
;

336 
cœ_
->
g©es_
[
i
].
gh_
 = 
l1
 & 
l2
;

338 
G©e
::
NOR3
:

339 
cœ_
->
g©es_
[
i
].
gl_
 = 
h1
 | 
h2
 | 
h3
;

340 
cœ_
->
g©es_
[
i
].
gh_
 = 
l1
 & 
l2
 & 
l3
;

342 
G©e
::
NOR4
:

343 
cœ_
->
g©es_
[
i
].
gl_
 = 
h1
 | 
h2
 | 
h3
 | 
h4
;

344 
cœ_
->
g©es_
[
i
].
gh_
 = 
l1
 & 
l2
 & 
l3
 & 
l4
;

346 
G©e
::
XOR2
:

347 
cœ_
->
g©es_
[
i
].
gl_
 = (
l1
 & 
l2
è| (
h1
 & 
h2
);

348 
cœ_
->
g©es_
[
i
].
gh_
 = (
l1
 & 
h2
è| (
h1
 & 
l2
);

350 
G©e
::
XOR3
:

351 
cœ_
->
g©es_
[
i
].
gl_
 = (
l1
 & 
l2
è| (
h1
 & 
h2
);

352 
cœ_
->
g©es_
[
i
].
gl_
 = (cœ_->g©es_[i].gl_ & 
l3
)

353 | (
cœ_
->
g©es_
[
i
].
gh_
 & 
h3
);

354 
cœ_
->
g©es_
[
i
].
gh_
 = (
l1
 & 
h2
è| (
h1
 & 
l2
);

355 
cœ_
->
g©es_
[
i
].
gh_
 = (cœ_->g©es_[i].
gl_
 & 
h3
)

356 | (
cœ_
->
g©es_
[
i
].
gh_
 & 
l3
);

358 
G©e
::
XNOR2
:

359 
cœ_
->
g©es_
[
i
].
gl_
 = (
l1
 & 
h2
è| (
h1
 & 
l2
);

360 
cœ_
->
g©es_
[
i
].
gh_
 = (
l1
 & 
l2
è| (
h1
 & 
h2
);

362 
G©e
::
XNOR3
:

363 
cœ_
->
g©es_
[
i
].
gl_
 = (
l1
 & 
l2
è| (
h1
 & 
h2
);

364 
cœ_
->
g©es_
[
i
].
gl_
 = (cœ_->g©es_[i].gl_ & 
h3
)

365 | (
cœ_
->
g©es_
[
i
].
gh_
 & 
l3
);

366 
cœ_
->
g©es_
[
i
].
gh_
 = (
l1
 & 
h2
è| (
h1
 & 
l2
);

367 
cœ_
->
g©es_
[
i
].
gh_
 = (cœ_->g©es_[i].
gl_
 & 
l3
)

368 | (
cœ_
->
g©es_
[
i
].
gh_
 & 
h3
);

370 
G©e
::
TIE1
:

371 
cœ_
->
g©es_
[
i
].
gl_
 = 
PARA_L
;

372 
cœ_
->
g©es_
[
i
].
gh_
 = 
PARA_H
;

374 
G©e
::
TIE0
:

375 
cœ_
->
g©es_
[
i
].
gl_
 = 
PARA_H
;

376 
cœ_
->
g©es_
[
i
].
gh_
 = 
PARA_L
;

378 
G©e
::
PPI
:

379 if(
cœ_
->
cÚnTy³_
 =ğ
Cœcu™
::
CAPTURE
 && cœ_->
g©es_
[
i
].
äame_
 > 0){

380 
cœ_
->
g©es_
[
i
].
gl_
 = 
l1
;

381 
cœ_
->
g©es_
[
i
].
gh_
 = 
h1
;

387 
	}
}

400 
šlše
 
	gSimuÏtÜ
::
	$çuÉEv®
(cÚ¡ &
i
) {

402 cÚ¡ 
fi1
 = 
cœ_
->
g©es_
[
i
].
nfi_
 > 0 ? cœ_->g©es_[i].
fis_
[0] : 0;

403 cÚ¡ 
fi2
 = 
cœ_
->
g©es_
[
i
].
nfi_
 > 1 ? cœ_->g©es_[i].
fis_
[1] : 0;

404 cÚ¡ 
fi3
 = 
cœ_
->
g©es_
[
i
].
nfi_
 > 2 ? cœ_->g©es_[i].
fis_
[2] : 0;

405 cÚ¡ 
fi4
 = 
cœ_
->
g©es_
[
i
].
nfi_
 > 3 ? cœ_->g©es_[i].
fis_
[3] : 0;

407 cÚ¡ 
P¬aV®ue
 
l1
 = (
cœ_
->
g©es_
[
fi1
].
æ_
 & ~
çuÉInjeùH_
[
i
][1])

408 | 
çuÉInjeùL_
[
i
][1];

409 cÚ¡ 
P¬aV®ue
 
h1
 = (
cœ_
->
g©es_
[
fi1
].
fh_
 & ~
çuÉInjeùL_
[
i
][1])

410 | 
çuÉInjeùH_
[
i
][1];

411 cÚ¡ 
P¬aV®ue
 
l2
 = (
cœ_
->
g©es_
[
fi2
].
æ_
 & ~
çuÉInjeùH_
[
i
][2])

412 | 
çuÉInjeùL_
[
i
][2];

413 cÚ¡ 
P¬aV®ue
 
h2
 = (
cœ_
->
g©es_
[
fi2
].
fh_
 & ~
çuÉInjeùL_
[
i
][2])

414 | 
çuÉInjeùH_
[
i
][2];

415 cÚ¡ 
P¬aV®ue
 
l3
 = (
cœ_
->
g©es_
[
fi3
].
æ_
 & ~
çuÉInjeùH_
[
i
][3])

416 | 
çuÉInjeùL_
[
i
][3];

417 cÚ¡ 
P¬aV®ue
 
h3
 = (
cœ_
->
g©es_
[
fi3
].
fh_
 & ~
çuÉInjeùL_
[
i
][3])

418 | 
çuÉInjeùH_
[
i
][3];

419 cÚ¡ 
P¬aV®ue
 
l4
 = (
cœ_
->
g©es_
[
fi4
].
æ_
 & ~
çuÉInjeùH_
[
i
][4])

420 | 
çuÉInjeùL_
[
i
][4];

421 cÚ¡ 
P¬aV®ue
 
h4
 = (
cœ_
->
g©es_
[
fi4
].
fh_
 & ~
çuÉInjeùL_
[
i
][4])

422 | 
çuÉInjeùH_
[
i
][4];

424 
cœ_
->
g©es_
[
i
].
ty³_
) {

425 
G©e
::
INV
:

426 
cœ_
->
g©es_
[
i
].
æ_
 = 
h1
;

427 
cœ_
->
g©es_
[
i
].
fh_
 = 
l1
;

429 
G©e
::
PO
:

430 
G©e
::
PPO
:

431 
G©e
::
BUF
:

432 
cœ_
->
g©es_
[
i
].
æ_
 = 
l1
;

433 
cœ_
->
g©es_
[
i
].
fh_
 = 
h1
;

435 
G©e
::
AND2
:

436 
cœ_
->
g©es_
[
i
].
æ_
 = 
l1
 | 
l2
;

437 
cœ_
->
g©es_
[
i
].
fh_
 = 
h1
 & 
h2
;

439 
G©e
::
AND3
:

440 
cœ_
->
g©es_
[
i
].
æ_
 = 
l1
 | 
l2
 | 
l3
;

441 
cœ_
->
g©es_
[
i
].
fh_
 = 
h1
 & 
h2
 & 
h3
;

443 
G©e
::
AND4
:

444 
cœ_
->
g©es_
[
i
].
æ_
 = 
l1
 | 
l2
 | 
l3
 | 
l4
;

445 
cœ_
->
g©es_
[
i
].
fh_
 = 
h1
 & 
h2
 & 
h3
 & 
h4
;

447 
G©e
::
NAND2
:

448 
cœ_
->
g©es_
[
i
].
æ_
 = 
h1
 & 
h2
;

449 
cœ_
->
g©es_
[
i
].
fh_
 = 
l1
 | 
l2
;

451 
G©e
::
NAND3
:

452 
cœ_
->
g©es_
[
i
].
æ_
 = 
h1
 & 
h2
 & 
h3
;

453 
cœ_
->
g©es_
[
i
].
fh_
 = 
l1
 | 
l2
 | 
l3
;

455 
G©e
::
NAND4
:

456 
cœ_
->
g©es_
[
i
].
æ_
 = 
h1
 & 
h2
 & 
h3
 & 
h4
;

457 
cœ_
->
g©es_
[
i
].
fh_
 = 
l1
 | 
l2
 | 
l3
 | 
l4
;

459 
G©e
::
OR2
:

460 
cœ_
->
g©es_
[
i
].
æ_
 = 
l1
 & 
l2
;

461 
cœ_
->
g©es_
[
i
].
fh_
 = 
h1
 | 
h2
;

463 
G©e
::
OR3
:

464 
cœ_
->
g©es_
[
i
].
æ_
 = 
l1
 & 
l2
 & 
l3
;

465 
cœ_
->
g©es_
[
i
].
fh_
 = 
h1
 | 
h2
 | 
h3
;

467 
G©e
::
OR4
:

468 
cœ_
->
g©es_
[
i
].
æ_
 = 
l1
 & 
l2
 & 
l3
 & 
l4
;

469 
cœ_
->
g©es_
[
i
].
fh_
 = 
h1
 | 
h2
 | 
h3
 | 
h4
;

471 
G©e
::
NOR2
:

472 
cœ_
->
g©es_
[
i
].
æ_
 = 
h1
 | 
h2
;

473 
cœ_
->
g©es_
[
i
].
fh_
 = 
l1
 & 
l2
;

475 
G©e
::
NOR3
:

476 
cœ_
->
g©es_
[
i
].
æ_
 = 
h1
 | 
h2
 | 
h3
;

477 
cœ_
->
g©es_
[
i
].
fh_
 = 
l1
 & 
l2
 & 
l3
;

479 
G©e
::
NOR4
:

480 
cœ_
->
g©es_
[
i
].
æ_
 = 
h1
 | 
h2
 | 
h3
 | 
h4
;

481 
cœ_
->
g©es_
[
i
].
fh_
 = 
l1
 & 
l2
 & 
l3
 & 
l4
;

483 
G©e
::
XOR2
:

484 
cœ_
->
g©es_
[
i
].
æ_
 = (
l1
 & 
l2
è| (
h1
 & 
h2
);

485 
cœ_
->
g©es_
[
i
].
fh_
 = (
l1
 & 
h2
è| (
h1
 & 
l2
);

487 
G©e
::
XOR3
:

488 
cœ_
->
g©es_
[
i
].
æ_
 = (
l1
 & 
l2
è| (
h1
 & 
h2
);

489 
cœ_
->
g©es_
[
i
].
æ_
 = (cœ_->g©es_[i].æ_ & 
l3
)

490 | (
cœ_
->
g©es_
[
i
].
fh_
 & 
h3
);

491 
cœ_
->
g©es_
[
i
].
fh_
 = (
l1
 & 
h2
è| (
h1
 & 
l2
);

492 
cœ_
->
g©es_
[
i
].
fh_
 = (cœ_->g©es_[i].
æ_
 & 
h3
)

493 | (
cœ_
->
g©es_
[
i
].
fh_
 & 
l3
);

495 
G©e
::
XNOR2
:

496 
cœ_
->
g©es_
[
i
].
æ_
 = (
l1
 & 
h2
è| (
h1
 & 
l2
);

497 
cœ_
->
g©es_
[
i
].
fh_
 = (
l1
 & 
l2
è| (
h1
 & 
h2
);

499 
G©e
::
XNOR3
:

500 
cœ_
->
g©es_
[
i
].
æ_
 = (
l1
 & 
l2
è| (
h1
 & 
h2
);

501 
cœ_
->
g©es_
[
i
].
æ_
 = (cœ_->g©es_[i].æ_ & 
h3
)

502 | (
cœ_
->
g©es_
[
i
].
fh_
 & 
l3
);

503 
cœ_
->
g©es_
[
i
].
fh_
 = (
l1
 & 
h2
è| (
h1
 & 
l2
);

504 
cœ_
->
g©es_
[
i
].
fh_
 = (cœ_->g©es_[i].
æ_
 & 
l3
)

505 | (
cœ_
->
g©es_
[
i
].
fh_
 & 
h3
);

507 
G©e
::
TIE1
:

508 
cœ_
->
g©es_
[
i
].
æ_
 = 
PARA_L
;

509 
cœ_
->
g©es_
[
i
].
fh_
 = 
PARA_H
;

511 
G©e
::
TIE0
:

512 
cœ_
->
g©es_
[
i
].
æ_
 = 
PARA_H
;

513 
cœ_
->
g©es_
[
i
].
fh_
 = 
PARA_L
;

515 
G©e
::
PPI
:

516 if(
cœ_
->
cÚnTy³_
 =ğ
Cœcu™
::
CAPTURE
 && cœ_->
g©es_
[
i
].
äame_
 > 0){

517 
cœ_
->
g©es_
[
i
].
æ_
 = 
l1
;

518 
cœ_
->
g©es_
[
i
].
fh_
 = 
h1
;

524 
cœ_
->
g©es_
[
i
].
æ_
 = (cœ_->g©es_[i].æ_ & ~
çuÉInjeùH_
[i][0])

525 | 
çuÉInjeùL_
[
i
][0];

526 
cœ_
->
g©es_
[
i
].
fh_
 = (cœ_->g©es_[i].fh_ & ~
çuÉInjeùL_
[i][0])

527 | 
çuÉInjeùH_
[
i
][0];

528 
	}
}

	@interface/src/cell.cpp

8 
	~<queue
>

10 
	~"ûÎ.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

16 
C–lS‘
 
	gC–l
::
	$g‘Fªout
(cÚ¡ 
size_t
 &
i
) const {

17 
C–lS‘
 
fo
;

18 ià(
i
 >ğ
ûÎs_
.
	`size
())

19  
fo
;

20 
C–l
 *
c
 = 
ûÎs_
[
i
];

21 
N‘S‘
 
eqvs
;

22 
size_t
 
i
 = 0; i < 
c
->
	`g‘NPÜt
(); ++i) {

23 ià(
c
->
	`g‘PÜt
(
i
)->
ty³_
 !ğ
PÜt
::
OUTPUT
 || !c->g‘PÜt(i)->
exN‘_
)

25 
N‘S‘
 
eqv
 = 
	`g‘EqvN‘s
(
c
->
	`g‘PÜt
(
i
)->
exN‘_
->
id_
);

26 
eqvs
.
	`š£¹
(
eqv
.
	`begš
(),ƒqv.
	`’d
());

28 
N‘S‘
::
™”©Ü
 
™
 = 
eqvs
.
	`begš
();

29  ; 
™
 !ğ
eqvs
.
	`’d
(); ++it) {

30 
N‘
 *
n
 = *
™
;

31 
size_t
 
j
 = 0; j < 
n
->
	`g‘NPÜt
(); ++j) {

32 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(
j
);

33 ià(
p
->
tİ_
 !ğ
this
 &&…->
ty³_
 =ğ
PÜt
::
INPUT
)

34 
fo
.
	`š£¹
(
p
->
tİ_
);

37  
fo
;

38 
	}
}

40 
C–lS‘
 
	gC–l
::
	$g‘Fªout
(cÚ¡ * cÚ¡ 
Çme
) const {

41 
C–l
 *
c
 = 
	`g‘C–l
(
Çme
);

42 ià(!
c
) {

43 
C–lS‘
 
fo
;

44  
fo
;

46  (
	`g‘Fªout
(
c
->
id_
));

47 
	}
}

49 
C–lS‘
 
	gC–l
::
	$g‘Fªš
(cÚ¡ 
size_t
 &
i
) const {

50 
C–lS‘
 
fi
;

51 ià(
i
 >ğ
ûÎs_
.
	`size
())

52  
fi
;

53 
C–l
 *
c
 = 
ûÎs_
[
i
];

54 
N‘S‘
 
eqvs
;

55 
size_t
 
i
 = 0; i < 
c
->
	`g‘NPÜt
(); ++i) {

56 ià(
c
->
	`g‘PÜt
(
i
)->
ty³_
 !ğ
PÜt
::
INPUT
 || !c->g‘PÜt(i)->
exN‘_
)

58 
N‘S‘
 
eqv
 = 
	`g‘EqvN‘s
(
c
->
	`g‘PÜt
(
i
)->
exN‘_
->
id_
);

59 
eqvs
.
	`š£¹
(
eqv
.
	`begš
(),ƒqv.
	`’d
());

61 
N‘S‘
::
™”©Ü
 
™
 = 
eqvs
.
	`begš
();

62  ; 
™
 !ğ
eqvs
.
	`’d
(); ++it) {

63 
N‘
 *
n
 = *
™
;

64 
size_t
 
j
 = 0; j < 
n
->
	`g‘NPÜt
(); ++j) {

65 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(
j
);

66 ià(
p
->
tİ_
 !ğ
this
 &&…->
ty³_
 =ğ
PÜt
::
OUTPUT
)

67 
fi
.
	`š£¹
(
p
->
tİ_
);

70  
fi
;

71 
	}
}

73 
C–lS‘
 
	gC–l
::
	$g‘Fªš
(cÚ¡ * cÚ¡ 
Çme
) const {

74 
C–l
 *
c
 = 
	`g‘C–l
(
Çme
);

75 ià(!
c
) {

76 
C–lS‘
 
fi
;

77  
fi
;

79  (
	`g‘Fªš
(
c
->
id_
));

80 
	}
}

82 
PÜtS‘
 
	gC–l
::
	$g‘FªoutPÜt
(cÚ¡ 
size_t
 &
i
) const {

83 
PÜtS‘
 
fo
;

84 ià(
i
 >ğ
ûÎs_
.
	`size
())

85  
fo
;

86 
C–l
 *
c
 = 
ûÎs_
[
i
];

87 
N‘S‘
 
eqvs
;

88 
size_t
 
i
 = 0; i < 
c
->
	`g‘NPÜt
(); ++i) {

89 ià(
c
->
	`g‘PÜt
(
i
)->
ty³_
 !ğ
PÜt
::
OUTPUT
 || !c->g‘PÜt(i)->
exN‘_
)

91 
N‘S‘
 
eqv
 = 
	`g‘EqvN‘s
(
c
->
	`g‘PÜt
(
i
)->
exN‘_
->
id_
);

92 
eqvs
.
	`š£¹
(
eqv
.
	`begš
(),ƒqv.
	`’d
());

94 
N‘S‘
::
™”©Ü
 
™
 = 
eqvs
.
	`begš
();

95  ; 
™
 !ğ
eqvs
.
	`’d
(); ++it) {

96 
N‘
 *
n
 = *
™
;

97 
size_t
 
j
 = 0; j < 
n
->
	`g‘NPÜt
(); ++j) {

98 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(
j
);

99 ià(
p
->
tİ_
 =ğ
c
->tİ_ &&…->
ty³_
 =ğ
PÜt
::
OUTPUT
)

100 
fo
.
	`š£¹
(
p
);

104  
fo
;

105 
	}
}

107 
PÜtS‘
 
	gC–l
::
	$g‘FªoutPÜt
(cÚ¡ * cÚ¡ 
Çme
) const {

108 
C–l
 *
c
 = 
	`g‘C–l
(
Çme
);

109 ià(!
c
) {

110 
PÜtS‘
 
fo
;

111  
fo
;

113  (
	`g‘FªoutPÜt
(
c
->
id_
));

114 
	}
}

116 
PÜtS‘
 
	gC–l
::
	$g‘FªšPÜt
(cÚ¡ 
size_t
 &
i
) const {

117 
PÜtS‘
 
fi
;

118 ià(
i
 >ğ
ûÎs_
.
	`size
())

119  
fi
;

120 
C–l
 *
c
 = 
ûÎs_
[
i
];

121 
N‘S‘
 
eqvs
;

122 
size_t
 
i
 = 0; i < 
c
->
	`g‘NPÜt
(); ++i) {

123 ià(
c
->
	`g‘PÜt
(
i
)->
ty³_
 !ğ
PÜt
::
INPUT
 || !c->g‘PÜt(i)->
exN‘_
)

125 
N‘S‘
 
eqv
 = 
	`g‘EqvN‘s
(
c
->
	`g‘PÜt
(
i
)->
exN‘_
->
id_
);

126 
eqvs
.
	`š£¹
(
eqv
.
	`begš
(),ƒqv.
	`’d
());

128 
N‘S‘
::
™”©Ü
 
™
 = 
eqvs
.
	`begš
();

129  ; 
™
 !ğ
eqvs
.
	`’d
(); ++it) {

130 
N‘
 *
n
 = *
™
;

131 
size_t
 
j
 = 0; j < 
n
->
	`g‘NPÜt
(); ++j) {

132 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(
j
);

133 ià(
p
->
tİ_
 =ğ
c
->tİ_ &&…->
ty³_
 =ğ
PÜt
::
INPUT
)

134 
fi
.
	`š£¹
(
p
);

137  
fi
;

138 
	}
}

140 
PÜtS‘
 
	gC–l
::
	$g‘FªšPÜt
(cÚ¡ * cÚ¡ 
Çme
) const {

141 
C–l
 *
c
 = 
	`g‘C–l
(
Çme
);

142 ià(!
c
) {

143 
PÜtS‘
 
fi
;

144  
fi
;

146  (
	`g‘FªšPÜt
(
c
->
id_
));

147 
	}
}

150 
N‘S‘
 
	gC–l
::
	$g‘EqvN‘s
(cÚ¡ 
size_t
 &
i
) const {

151 
N‘S‘
 
eqvs
;

152 ià(
i
 >ğ
Ãts_
.
	`size
())

153  
eqvs
;

154 
eqvs
.
	`š£¹
(
Ãts_
[
i
]);

155 
queue
<
N‘
 *> 
nQue
;

156 
nQue
.
	`push
(
Ãts_
[
i
]);

157 !
nQue
.
	`em±y
()) {

158 
N‘
 *
n
 = 
nQue
.
	`äÚt
();

159 
nQue
.
	`pİ
();

160 
size_t
 
idx
 = 0; idx < 
n
->
	`g‘NEqv
(); ++idx) {

161 
N‘
 *
eqv
 = 
n
->
	`g‘Eqv
(
idx
);

162 ià(
eqvs
.
	`couÁ
(
eqv
) == 0) {

163 
eqvs
.
	`š£¹
(
eqv
);

164 
nQue
.
	`push
(
eqv
);

168  
eqvs
;

169 
	}
}

171 
N‘S‘
 
	gC–l
::
	$g‘EqvN‘s
(cÚ¡ *cÚ¡ 
Çme
) const {

172 
N‘
 *
n
 = 
	`g‘N‘
(
Çme
);

173 ià(!
n
) {

174 
N‘S‘
 
eqvs
;

175  
eqvs
;

177  (
	`g‘EqvN‘s
(
n
->
id_
));

178 
	}
}

181 
PÜtS‘
 
	gC–l
::
	$g‘N‘PÜts
(cÚ¡ 
size_t
 &
i
) const {

182 
PÜtS‘
 
pÜts
;

183 ià(
i
 >ğ
Ãts_
.
	`size
())

184  
pÜts
;

185 
N‘S‘
 
eqv
 = 
	`g‘EqvN‘s
(
i
);

186 
N‘S‘
::
™”©Ü
 
™
 = 
eqv
.
	`begš
(); iˆ!ğeqv.
	`’d
(); ++it)

187 
size_t
 
i
 = 0; i < (*
™
)->
	`g‘NPÜt
(); ++i)

188 
pÜts
.
	`š£¹
((*
™
)->
	`g‘PÜt
(
i
));

189  
pÜts
;

190 
	}
}

193 
PÜtS‘
 
	gC–l
::
	$g‘N‘PÜts
(cÚ¡ * cÚ¡ 
Çme
) const {

194 
N‘
 *
n
 = 
	`g‘N‘
(
Çme
);

195 ià(!
n
) {

196 
PÜtS‘
 
pÜts
;

197  
pÜts
;

199  (
	`g‘N‘PÜts
(
n
->
id_
));

200 
	}
}

203 
C–lS‘
 
	gC–l
::
	$g‘N‘C–ls
(cÚ¡ 
size_t
 &
i
) const {

204 
C–lS‘
 
ûÎs
;

205 ià(
i
 >ğ
Ãts_
.
	`size
())

206  
ûÎs
;

207 
N‘S‘
 
eqv
 = 
	`g‘EqvN‘s
(
i
);

208 
N‘S‘
::
™”©Ü
 
™
 = 
eqv
.
	`begš
(); iˆ!ğeqv.
	`’d
(); ++it)

209 
size_t
 
i
 = 0; i < (*
™
)->
	`g‘NPÜt
(); ++i)

210 ià((*
™
)->
	`g‘PÜt
(
i
)->
tİ_
 !ğ
this
)

211 
ûÎs
.
	`š£¹
((*
™
)->
	`g‘PÜt
(
i
)->
tİ_
);

212  
ûÎs
;

213 
	}
}

215 
C–lS‘
 
	gC–l
::
	$g‘N‘C–ls
(cÚ¡ * cÚ¡ 
Çme
) const {

216 
N‘
 *
n
 = 
	`g‘N‘
(
Çme
);

217 ià(!
n
) {

218 
C–lS‘
 
ûÎs
;

219  
ûÎs
;

221  (
	`g‘N‘C–ls
(
n
->
id_
));

222 
	}
}

224 
C–lS‘
 
	gC–l
::
	$g‘N‘C–ls
(cÚ¡ 
size_t
 &
i
, cÚ¡ 
boŞ
 &
šput
) const {

225 
C–lS‘
 
ûÎs
;

226 ià(
i
 >ğ
Ãts_
.
	`size
())

227  
ûÎs
;

228 
N‘S‘
 
eqv
 = 
	`g‘EqvN‘s
(
i
);

229 
N‘S‘
::
™”©Ü
 
™
 = 
eqv
.
	`begš
(); iˆ!ğeqv.
	`’d
(); ++it) {

230 
size_t
 
i
 = 0; i < (*
™
)->
	`g‘NPÜt
(); ++i) {

231 
PÜt
 *
p
 = (*
™
)->
	`g‘PÜt
(
i
);

232 ià(
p
->
tİ_
 !ğ
this
 && 
šput
 &&…->
ty³_
 =ğ
PÜt
::
INPUT
)

233 
ûÎs
.
	`š£¹
(
p
->
tİ_
);

234 ià(
p
->
tİ_
 !ğ
this
 && !
šput
 &&…->
ty³_
 =ğ
PÜt
::
OUTPUT
)

235 
ûÎs
.
	`š£¹
(
p
->
tİ_
);

238  
ûÎs
;

239 
	}
}

241 
C–lS‘
 
	gC–l
::
	$g‘N‘C–ls
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
boŞ
 &
šput
) const {

242 
N‘
 *
n
 = 
	`g‘N‘
(
Çme
);

243 ià(!
n
) {

244 
C–lS‘
 
ûÎs
;

245  
ûÎs
;

247  (
	`g‘N‘C–ls
(
n
->
id_
, 
šput
));

248 
	}
}

251 
C–lS‘
 
	gC–l
::
	$g‘PÜtC–ls
(cÚ¡ 
size_t
 &
i
) const {

252 
C–lS‘
 
ûÎs
;

253 ià(
i
 >ğ
pÜts_
.
	`size
())

254  
ûÎs
;

255 
N‘
 *
n
 = 
pÜts_
[
i
]->
šN‘_
;

256 ià(!
n
)

257  
ûÎs
;

258 
N‘S‘
 
eqv
 = 
	`g‘EqvN‘s
(
n
->
id_
);

259 
N‘S‘
::
™”©Ü
 
™
 = 
eqv
.
	`begš
(è; iˆ!ğeqv.
	`’d
(); ++it) {

260 
N‘
 *
n
 = *
™
;

261 
size_t
 
i
 = 0; i < 
n
->
	`g‘NPÜt
(); ++i) {

262 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(
i
);

263 ià(
p
->
tİ_
 !ğ
this
)

264 
ûÎs
.
	`š£¹
(
p
->
tİ_
);

267  
ûÎs
;

268 
	}
}

270 
C–lS‘
 
	gC–l
::
	$g‘PÜtC–ls
(cÚ¡ * cÚ¡ 
Çme
) const {

271 
PÜt
 *
p
 = 
	`g‘PÜt
(
Çme
);

272 ià(!
p
) {

273 
C–lS‘
 
ûÎs
;

274  
ûÎs
;

276  (
	`g‘PÜtC–ls
(
p
->
id_
));

277 
	}
}

	@interface/src/cell.h

8 #iâdeà
_INTF_CELL_H_


9 
	#_INTF_CELL_H_


	)

11 
	~<£t
>

12 
	~<veùÜ
>

13 
	~<m­
>

15 
	~"glob®.h
"

17 
Çme¥aû
 
	gIÁfNs
 {

19 
şass
 
	gC–l
;

20 
şass
 
	gPÜt
;

21 
şass
 
	gN‘
;

23 
	g¡d
::
	tveùÜ
<
	tC–l
 *> 
	tC–lVec
;

24 
	g¡d
::
	t£t
<
	tC–l
 *> 
	tC–lS‘
;

25 
	g¡d
::
	tm­
<
	tNameKey
, 
	tC–l
 *> 
	tC–lM­
;

27 
	g¡d
::
	tveùÜ
<
	tPÜt
 *> 
	tPÜtVec
;

28 
	g¡d
::
	t£t
<
	tPÜt
 *> 
	tPÜtS‘
;

29 
	g¡d
::
	tm­
<
	tNameKey
, 
	tPÜt
 *> 
	tPÜtM­
;

31 
	g¡d
::
	tveùÜ
<
	tN‘
 *> 
	tN‘Vec
;

32 
	g¡d
::
	t£t
<
	tN‘
 *> 
	tN‘S‘
;

33 
	g¡d
::
	tm­
<
	tNameKey
, 
	tN‘
 *> 
	tN‘M­
;

36 şas 
	cPÜt
 {

37 
	gpublic
:

39 
PÜt
(cÚ¡ * cÚ¡ 
Çme
);

40 ~
PÜt
();

42 
	eTy³
 { 
	gNA
 = -1, 
	gINPUT
, 
	gOUTPUT
, 
	gINOUT
 };

44 
	gÇme_
[
NAME_LEN
];

45 
Ty³
 
	gty³_
;

46 
	gid_
;

47 
C–l
 *
	gtİ_
;

48 
N‘
 *
	gšN‘_
;

49 
N‘
 *
	gexN‘_
;

53 şas 
	cN‘
 {

54 
	gpublic
:

55 
N‘
(cÚ¡ * cÚ¡ 
Çme
);

56 ~
N‘
();

58 
size_t
 
g‘NPÜt
() const;

59 
PÜt
 *
g‘PÜt
(cÚ¡ 
size_t
 &
i
) const;

60 
boŞ
 
addPÜt
(
PÜt
 * cÚ¡ 
p
);

61 
boŞ
 
»movePÜt
(cÚ¡ 
size_t
 &
i
);

62 
boŞ
 
»movePÜt
(
PÜt
 * cÚ¡ 
p
);

63 
ş—rPÜts
();

65 
size_t
 
g‘NEqv
() const;

66 
N‘
 *
g‘Eqv
(cÚ¡ 
size_t
 &
i
) const;

67 
boŞ
 
addEqv
(
N‘
 * cÚ¡ 
n
);

68 
boŞ
 
isEqv
(
N‘
 * cÚ¡ 
n
) const;

70 
	gÇme_
[
NAME_LEN
];

71 
	gid_
;

72 
C–l
 *
	gtİ_
;

74 
	g´Ùeùed
:

75 
N‘Vec
 
eqvs_
;

76 
PÜtVec
 
	gpÜts_
;

80 şas 
	cC–l
 {

81 
	gpublic
:

82 
C–l
(cÚ¡ * cÚ¡ 
Çme
);

83 
	gvœtu®
 ~
C–l
();

86 
C–lVec
 *
g‘C–ls
();

87 
size_t
 
g‘NC–l
() const;

88 
C–l
 *
g‘C–l
(cÚ¡ 
size_t
 &
i
) const;

89 
C–l
 *
g‘C–l
(cÚ¡ * cÚ¡ 
Çme
) const;

90 
boŞ
 
addC–l
(
C–l
 * cÚ¡ 
c
);

91 
C–lS‘
 
g‘Fªout
(cÚ¡ 
size_t
 &
i
) const;

92 
C–lS‘
 
g‘Fªout
(cÚ¡ * cÚ¡ 
Çme
) const;

93 
C–lS‘
 
g‘Fªš
(cÚ¡ 
size_t
 &
i
) const;

94 
C–lS‘
 
g‘Fªš
(cÚ¡ * cÚ¡ 
Çme
) const;

96 
PÜtS‘
 
g‘FªoutPÜt
(cÚ¡ 
size_t
 &
i
) const;

97 
PÜtS‘
 
g‘FªoutPÜt
(cÚ¡ * cÚ¡ 
Çme
) const;

98 
PÜtS‘
 
g‘FªšPÜt
(cÚ¡ 
size_t
 &
i
) const;

99 
PÜtS‘
 
g‘FªšPÜt
(cÚ¡ * cÚ¡ 
Çme
) const;

102 
size_t
 
g‘NN‘
() const;

103 
N‘
 *
g‘N‘
(cÚ¡ 
size_t
 &
i
) const;

104 
N‘
 *
g‘N‘
(cÚ¡ * cÚ¡ 
Çme
) const;

105 
boŞ
 
addN‘
(
N‘
 * cÚ¡ 
n
);

106 
boŞ
 
»moveN‘
(cÚ¡ 
size_t
 &
i
);

107 
boŞ
 
»moveN‘
(cÚ¡ * cÚ¡ 
Çme
);

108 
N‘S‘
 
g‘EqvN‘s
(cÚ¡ 
size_t
 &
i
) const;

109 
N‘S‘
 
g‘EqvN‘s
(cÚ¡ * cÚ¡ 
Çme
) const;

110 
PÜtS‘
 
g‘N‘PÜts
(cÚ¡ 
size_t
 &
i
) const;

111 
PÜtS‘
 
g‘N‘PÜts
(cÚ¡ * cÚ¡ 
Çme
) const;

112 
C–lS‘
 
g‘N‘C–ls
(cÚ¡ 
size_t
 &
i
) const;

113 
C–lS‘
 
g‘N‘C–ls
(cÚ¡ * cÚ¡ 
Çme
) const;

114 
C–lS‘
 
g‘N‘C–ls
(cÚ¡ 
size_t
 &
i
,

115 cÚ¡ 
boŞ
 &
šput
) const;

116 
C–lS‘
 
g‘N‘C–ls
(cÚ¡ * cÚ¡ 
Çme
,

117 cÚ¡ 
boŞ
 &
šput
) const;

120 
size_t
 
g‘NPÜt
() const;

121 
PÜt
 *
g‘PÜt
(cÚ¡ 
size_t
 &
i
) const;

122 
PÜt
 *
g‘PÜt
(cÚ¡ * cÚ¡ 
Çme
) const;

123 
boŞ
 
addPÜt
(
PÜt
 * cÚ¡ 
p
);

124 
ş—rPÜts
();

125 
C–lS‘
 
g‘PÜtC–ls
(cÚ¡ 
size_t
 &
i
) const;

126 
C–lS‘
 
g‘PÜtC–ls
(cÚ¡ * cÚ¡ 
Çme
) const;

128 
	gÇme_
[
NAME_LEN
];

129 
	gty³Name_
[
NAME_LEN
];

130 
	gid_
;

131 
	glvl_
;

132 
C–l
 *
	gtİ_
;

133 
C–l
 *
	glibc_
;

134 
boŞ
 
	gisPmt_
;

135 
boŞ
 
	gšLib_
;

137 
	g´Ùeùed
:

138 
C–lVec
 
ûÎs_
;

139 
C–lM­
 
	gÇmeToC–l_
;

140 
N‘Vec
 
	gÃts_
;

141 
N‘M­
 
	gÇmeToN‘_
;

142 
PÜtVec
 
	gpÜts_
;

143 
PÜtM­
 
	gÇmeToPÜt_
;

149 
šlše
 
	gPÜt
::
	$PÜt
(cÚ¡ * cÚ¡ 
Çme
) {

150 
	`¡rıy
(
Çme_
, 
Çme
);

151 
id_
 = -1;

152 
ty³_
 = 
NA
;

153 
tİ_
 = 
NULL
;

154 
šN‘_
 = 
NULL
;

155 
exN‘_
 = 
NULL
;

156 
	}
}

158 
šlše
 
	gPÜt
::~
	$PÜt
(è{
	}
}

161 
šlše
 
N‘
::
	$N‘
(cÚ¡ * cÚ¡ 
Çme
) {

162 
	`¡rıy
(
Çme_
, 
Çme
);

163 
id_
 = -1;

164 
tİ_
 = 
NULL
;

165 
	}
}

167 
šlše
 
	gN‘
::~
	$N‘
(è{
	}
}

169 
šlše
 
size_t
 
N‘
::
	$g‘NPÜt
() const {

170  
pÜts_
.
	`size
();

171 
	}
}

173 
šlše
 
PÜt
 *
	gN‘
::
	$g‘PÜt
(cÚ¡ 
size_t
 &
i
) const {

174  
i
 < 
pÜts_
.
	`size
(è?…Üts_[i] : 
NULL
;

175 
	}
}

177 
šlše
 
boŞ
 
	gN‘
::
	$addPÜt
(
PÜt
 * cÚ¡ 
p
) {

178 
size_t
 
i
 = 0; i < 
pÜts_
.
	`size
(); ++i)

179 ià(
p
 =ğ
pÜts_
[
i
])

180  
çl£
;

181 
pÜts_
.
	`push_back
(
p
);

182  
Œue
;

183 
	}
}

185 
šlše
 
boŞ
 
	gN‘
::
	$»movePÜt
(cÚ¡ 
size_t
 &
i
) {

186 ià(
i
 >ğ
pÜts_
.
	`size
())

187  
çl£
;

188 
pÜts_
.
	`”a£
ÕÜts_.
	`begš
(è+ 
i
);

189  
Œue
;

190 
	}
}

192 
šlše
 
boŞ
 
	gN‘
::
	$»movePÜt
(
PÜt
 * cÚ¡ 
p
) {

193 
size_t
 
i
 = 0; i < 
pÜts_
.
	`size
(); ++i) {

194 ià(
p
 =ğ
pÜts_
[
i
]) {

195 
pÜts_
.
	`”a£
ÕÜts_.
	`begš
(è+ 
i
);

196  
Œue
;

199  
çl£
;

200 
	}
}

202 
šlše
 
	gN‘
::
	$ş—rPÜts
() {

203 
pÜts_
.
	`ş—r
();

204 
	}
}

206 
šlše
 
size_t
 
	gN‘
::
	$g‘NEqv
() const {

207  
eqvs_
.
	`size
();

208 
	}
}

210 
šlše
 
N‘
 *
	gN‘
::
	$g‘Eqv
(cÚ¡ 
size_t
 &
i
) const {

211  
i
 < 
eqvs_
.
	`size
(è?ƒqvs_[i] : 
NULL
;

212 
	}
}

214 
šlše
 
boŞ
 
	gN‘
::
	$isEqv
(
N‘
 * cÚ¡ 
n
) const {

215 
size_t
 
i
 = 0; i < 
eqvs_
.
	`size
(); ++i)

216 ià(
eqvs_
[
i
] =ğ
this
)

217  
Œue
;

218  
çl£
;

219 
	}
}

221 
šlše
 
boŞ
 
	gN‘
::
	$addEqv
(
N‘
 * cÚ¡ 
n
) {

222 
size_t
 
i
 = 0; i < 
eqvs_
.
	`size
(); ++i)

223 ià(
n
 =ğ
eqvs_
[
i
])

224  
çl£
;

225 
eqvs_
.
	`push_back
(
n
);

226  
Œue
;

227 
	}
}

230 
šlše
 
	gC–l
::
	$C–l
(cÚ¡ * cÚ¡ 
Çme
) {

231 
	`¡rıy
(
Çme_
, 
Çme
);

232 
ty³Name_
[0] = '\0';

233 
id_
 = -1;

234 
lvl_
 = -1;

235 
tİ_
 = 
NULL
;

236 
libc_
 = 
NULL
;

237 
isPmt_
 = 
çl£
;

238 
šLib_
 = 
Œue
;

239 
	}
}

241 
šlše
 
	gC–l
::~
	$C–l
(è{
	}
}

243 
šlše
 
C–lVec
 *
C–l
::
	$g‘C–ls
() {

244  &
ûÎs_
;

245 
	}
}

247 
šlše
 
size_t
 
	gC–l
::
	$g‘NC–l
() const {

248  
ûÎs_
.
	`size
();

249 
	}
}

251 
šlše
 
C–l
 *
	gC–l
::
	$g‘C–l
(cÚ¡ * cÚ¡ 
Çme
) const {

252 
C–lM­
::
cÚ¡_™”©Ü
 
™
 = 
ÇmeToC–l_
.
	`fšd
(
Çme
);

253  
™
 =ğ
ÇmeToC–l_
.
	`’d
(è? 
NULL
 : it->
£cÚd
;

254 
	}
}

256 
šlše
 
C–l
 *
	gC–l
::
	$g‘C–l
(cÚ¡ 
size_t
 &
i
) const {

257  
i
 < 
ûÎs_
.
	`size
(è? c–ls_[i] : 
NULL
;

258 
	}
}

260 
šlše
 
boŞ
 
	gC–l
::
	$addC–l
(
C–l
 * cÚ¡ 
c
) {

261 
C–lM­
::
™”©Ü
 
™
 = 
ÇmeToC–l_
.
	`fšd
(
c
->
Çme_
);

262 ià(
™
 !ğ
ÇmeToC–l_
.
	`’d
())

263  
çl£
;

264 
ûÎs_
.
	`push_back
(
c
);

265 
ÇmeToC–l_
[
c
->
Çme_
] = c;

266 
c
->
id_
 = 
ûÎs_
.
	`size
() - 1;

267 
c
->
tİ_
 = 
this
;

268  
Œue
;

269 
	}
}

271 
šlše
 
size_t
 
	gC–l
::
	$g‘NN‘
() const {

272  
Ãts_
.
	`size
();

273 
	}
}

275 
šlše
 
N‘
 *
	gC–l
::
	$g‘N‘
(cÚ¡ 
size_t
 &
i
) const {

276  
i
 < 
Ãts_
.
	`size
(è?‚‘s_[i] : 
NULL
;

277 
	}
}

279 
šlše
 
N‘
 *
	gC–l
::
	$g‘N‘
(cÚ¡ * cÚ¡ 
Çme
) const {

280 
N‘M­
::
cÚ¡_™”©Ü
 
™
 = 
ÇmeToN‘_
.
	`fšd
(
Çme
);

281  
™
 =ğ
ÇmeToN‘_
.
	`’d
(è? 
NULL
 : it->
£cÚd
;

282 
	}
}

284 
šlše
 
boŞ
 
	gC–l
::
	$addN‘
(
N‘
 * cÚ¡ 
n
) {

285 
N‘M­
::
™”©Ü
 
™
 = 
ÇmeToN‘_
.
	`fšd
(
n
->
Çme_
);

286 ià(
™
 !ğ
ÇmeToN‘_
.
	`’d
())

287  
çl£
;

288 
Ãts_
.
	`push_back
(
n
);

289 
ÇmeToN‘_
[
n
->
Çme_
] =‚;

290 
n
->
id_
 = 
Ãts_
.
	`size
() - 1;

291 
n
->
tİ_
 = 
this
;

292  
Œue
;

293 
	}
}

295 
šlše
 
boŞ
 
	gC–l
::
	$»moveN‘
(cÚ¡ 
size_t
 &
i
) {

296 ià(
i
 >ğ
Ãts_
.
	`size
())

297  
çl£
;

298 
ÇmeToN‘_
.
	`”a£
(
Ãts_
[
i
]->
Çme_
);

299 
Ãts_
.
	`”a£
Ò‘s_.
	`begš
(è+ 
i
);

300 
size_t
 
idx
 = 
i
; idx < 
Ãts_
.
	`size
(); ++idx)

301 
Ãts_
[
idx
]->
id_
--;

302  
Œue
;

303 
	}
}

305 
šlše
 
boŞ
 
	gC–l
::
	$»moveN‘
(cÚ¡ * cÚ¡ 
Çme
) {

306 
¡d
::
m­
<
NameKey
, 
N‘
 *>::
™”©Ü
 
™
 = 
ÇmeToN‘_
.
	`fšd
(
Çme
);

307 ià(
™
 =ğ
ÇmeToN‘_
.
	`’d
())

308  
çl£
;

309  
	`»moveN‘
(
™
->
£cÚd
->
id_
);

310 
	}
}

312 
šlše
 
size_t
 
	gC–l
::
	$g‘NPÜt
() const {

313  
pÜts_
.
	`size
();

314 
	}
}

316 
šlše
 
PÜt
 *
	gC–l
::
	$g‘PÜt
(cÚ¡ 
size_t
 &
i
) const {

317  
i
 < 
pÜts_
.
	`size
(è?…Üts_[i] : 
NULL
;

318 
	}
}

320 
šlše
 
PÜt
 *
	gC–l
::
	$g‘PÜt
(cÚ¡ * cÚ¡ 
Çme
) const {

321 
PÜtM­
::
cÚ¡_™”©Ü
 
™
 = 
ÇmeToPÜt_
.
	`fšd
(
Çme
);

322  
™
 =ğ
ÇmeToPÜt_
.
	`’d
(è? 
NULL
 : it->
£cÚd
;

323 
	}
}

325 
šlše
 
boŞ
 
	gC–l
::
	$addPÜt
(
PÜt
 * cÚ¡ 
p
) {

326 
PÜtM­
::
™”©Ü
 
™
 = 
ÇmeToPÜt_
.
	`fšd
(
p
->
Çme_
);

327 ià(
™
 !ğ
ÇmeToPÜt_
.
	`’d
())

328  
çl£
;

329 
pÜts_
.
	`push_back
(
p
);

330 
ÇmeToPÜt_
[
p
->
Çme_
] =…;

331 
p
->
id_
 = 
pÜts_
.
	`size
() - 1;

332 
p
->
tİ_
 = 
this
;

333  
Œue
;

334 
	}
}

336 
šlše
 
	gC–l
::
	$ş—rPÜts
() {

337 
pÜts_
.
	`ş—r
();

338 
ÇmeToPÜt_
.
	`ş—r
();

339 
	}
}

343 
šlše
 
boŞ
 
	$cmpC–lLvl
(cÚ¡ 
C–l
 * cÚ¡ 
i
, cÚ¡ C–È* cÚ¡ 
j
) {

344  
i
->
lvl_
 < 
j
->lvl_;

345 
	}
}

	@interface/src/global.h

8 #iâdeà
_INTF_GLOBAL_H_


9 
	#_INTF_GLOBAL_H_


	)

11 
	~<c¡ršg
>

13 
Çme¥aû
 
	gIÁfNs
 {

15 cÚ¡ 
	gNAME_LEN
 = 256;

17 
	sNameKey
 {

18 
NameKey
(cÚ¡ NameKey &
key
);

19 
NameKey
(cÚ¡ * cÚ¡ 
v®
);

20 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gNameKey
 &
	gkey
) const;

21 
	gv®_
[
NAME_LEN
];

24 
šlše
 
	gNameKey
::
NameKey
(cÚ¡ NameKey &
key
) {

25 
¡d
::
memmove
(
v®_
, 
key
.v®_, 
NAME_LEN
);

28 
šlše
 
	gNameKey
::
NameKey
(cÚ¡ * cÚ¡ 
v®
) {

29 
¡d
::
mem£t
(
v®_
, '\0', 
NAME_LEN
);

30 ià(
	gv®
)

31 
¡ºıy
(
v®_
, 
v®
, 
NAME_LEN
 - 1);

34 
šlše
 
boŞ
 
	gNameKey
::
İ”©Ü
<(cÚ¡ 
NameKey
 &
key
) const {

35  
¡rcmp
(
v®_
, 
key
.val_) < 0;

	@interface/src/lht_pat_file.cpp

8 
	~<c¡dio
>

10 
	~"lht_·t_fe.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

15 
lht_·t_f•¬£
(*);

16 
FILE
 *
lht_·t_feš
;

18 
boŞ
 
	gLhtP©Fe
::
	$»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ 
boŞ
 &
v”bo£
) {

19 
v”bo£_
 = 
v”bo£
;

20 
lht_·t_feš
 = 
	`fİ’
(
âame
, "r");

21 ià(!
lht_·t_feš
) {

22 
	`årštf
(
¡d”r
, "**ERROR LhtPatFile::read(): cannot open…attern ");

23 
	`årštf
(
¡d”r
, "f`%s'\n", 
âame
);

24  
çl£
;

27 
sucûss_
 = 
Œue
;

28 
»s
 = 
	`lht_·t_f•¬£
(
this
);

29 ià(
»s
 != 0) {

30 
	`årštf
(
¡d”r
, "**ERROR LhtPatFile::read(): wrong input format\n");

31  
çl£
;

33 
	`fşo£
(
lht_·t_feš
);

35  
sucûss_
;

36 
	}
}

38 
	gLhtP©Fe
::
	$£tP©‹ºTy³
(cÚ¡ 
P©Ty³
 &
ty³
) {

39 ià(
v”bo£_
) {

40 
	`´štf
("set…atternype: ");

41 
ty³
) {

42 
BASIC_SCAN
:

43 
	`´štf
("BASIC_SCAN\n");

45 
LAUNCH_CAPTURE
:

46 
	`´štf
("LAUNCH_CAPTURE\n");

48 
LAUNCH_SHIFT
:

49 
	`´štf
("LAUNCH_SHIFT\n");

53 
	}
}

55 
	gLhtP©Fe
::
	$addP©‹º
(cÚ¡ * cÚ¡ 
pi1
, cÚ¡ * cÚ¡ 
pi2
,

56 cÚ¡ * cÚ¡ 
µi
, cÚ¡ * cÚ¡ 
si
,

57 cÚ¡ * cÚ¡ 
po1
, cÚ¡ * cÚ¡ 
po2
,

58 cÚ¡ * cÚ¡ 
µo
) {

59 ià(
v”bo£_
) {

60 cÚ¡ *
ıi1
 = 
pi1
 ?…i1 : "\0";

61 cÚ¡ *
ıi2
 = 
pi2
 ?…i2 : "\0";

62 cÚ¡ *
ıpi
 = 
µi
 ?…pi : "\0";

63 cÚ¡ *
csi
 = 
si
 ? si : "\0";

64 cÚ¡ *
ıo1
 = 
po1
 ?…o1 : "\0";

65 cÚ¡ *
ıo2
 = 
po2
 ?…o2 : "\0";

66 cÚ¡ *
ıpo
 = 
µo
 ?…po : "\0";

67 
	`´štf
("add…©‹º: % | % | % | % | ", 
ıi1
, 
ıi2
, 
ıpi
, 
csi
);

68 
	`´štf
("% | % | %s\n", 
ıo1
, 
ıo2
, 
ıpo
);

70 
	}
}

	@interface/src/lht_pat_file.h

8 #iâdeà
_INTF_LHT_PAT_FILE_H_


9 
	#_INTF_LHT_PAT_FILE_H_


	)

11 
	~"·t_fe.h
"

13 
Çme¥aû
 
	gIÁfNs
 {

15 şas 
	cLhtP©Fe
 {

16 
	gpublic
:

17 
LhtP©Fe
();

18 
	gvœtu®
 ~
LhtP©Fe
();

20 
vœtu®
 
boŞ
 
»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ boŞ &
v”bo£
 = 
çl£
);

21 
vœtu®
 
£tP©‹ºTy³
(cÚ¡ 
P©Ty³
 &
ty³
);

22 
vœtu®
 
addP©‹º
(cÚ¡ * cÚ¡ 
pi1
, cÚ¡ * cÚ¡ 
pi2
,

23 cÚ¡ * cÚ¡ 
µi
, cÚ¡ * cÚ¡ 
si
,

24 cÚ¡ * cÚ¡ 
po1
, cÚ¡ * cÚ¡ 
po2
,

25 cÚ¡ * cÚ¡ 
µo
);

27 
	g´Ùeùed
:

28 
boŞ
 
sucûss_
;

29 
boŞ
 
	gv”bo£_
;

32 
šlše
 
	gLhtP©Fe
::
	$LhtP©Fe
() {

33 
sucûss_
 = 
Œue
;

34 
v”bo£_
 = 
çl£
;

35 
	}
}

36 
šlše
 
	gLhtP©Fe
::~
	$LhtP©Fe
(è{
	}
}

	@interface/src/lht_pat_test.cpp

9 
	~<c¡dio
>

10 
	~<c¡dlib
>

12 
	~"lht_·t_fe.h
"

14 
usšg
 
Çme¥aû
 
	g¡d
;

15 
usšg
 
Çme¥aû
 
	gIÁfNs
;

18 
	$maš
(
¬gc
, **
¬gv
) {

19 ià(
¬gc
 < 2) {

20 
	`årštf
(
¡d”r
, "**ERROR main():…lease…rovide input…attern\n");

21 
	`ex™
(0);

24 
LhtP©Fe
 *
·t
 = 
Ãw
 LhtPatFile;

25 ià(!
·t
->
	`»ad
(
¬gv
[1], 
Œue
)) {

26 
	`årštf
(
¡d”r
, "**ERROR main():…attern…arser failed\n");

27 
	`ex™
(0);

30 
d–‘e
 
·t
;

33 
	}
}

	@interface/src/mdt_file.cpp

8 
	~<c¡dio
>

10 
	~"mdt_fe.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

15 
mdt_f•¬£
(*);

16 
mdt_few¬nšg
;

17 
FILE
 *
mdt_feš
;

19 
boŞ
 
	gMdtFe
::
	$»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ 
boŞ
 &
v”bo£
) {

20 
v”bo£_
 = 
v”bo£
;

22 ià(
v”bo£_
)

23 
mdt_few¬nšg
 = 1;

25 
mdt_few¬nšg
 = 0;

27 
mdt_feš
 = 
	`fİ’
(
âame
, "r");

28 ià(!
mdt_feš
) {

29 
	`årštf
(
¡d”r
, "**ERROR MdtFile::read(): cannot open‚etlist file");

30 
	`årštf
(
¡d”r
, "`%s'\n", 
âame
);

31  
çl£
;

34 
sucûss_
 = 
Œue
;

35 
»s
 = 
	`mdt_f•¬£
(
this
);

36 ià(
»s
 != 0) {

37 
	`årštf
(
¡d”r
, "**ERROR MdtFile::read(): wrong input format\n");

38  
çl£
;

40 
	`fşo£
(
mdt_feš
);

42  
sucûss_
;

43 
	}
}

45 
	gMdtFe
::
	$addMod–
(cÚ¡ * cÚ¡ 
Çme
) {

46 ià(
v”bo£_
)

47 
	`´štf
("add mod–: %s\n", 
Çme
);

48 
	}
}

50 
	gMdtFe
::
	$addPÜts
(
MdtNames
 * cÚ¡ 
pÜts
) {

51 ià(
v”bo£_
) {

52 
	`´štf
("add…orts: ");

53 
MdtNames
 *
pÜt
 = 
pÜts
->
h—d
;

54 
pÜt
) {

55 
	`´štf
("%s", 
pÜt
->
Çme
);

56 
pÜt
 =…Üt->
Ãxt
;

57 ià(
pÜt
)

58 
	`´štf
(", ");

61 
	`´štf
("\n");

63 
	}
}

65 
	gMdtFe
::
	$£tIÅutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

66 ià(
v”bo£_
) {

67 
	`´štf
("set input‚ets: ");

68 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

69 
Ãt
) {

70 
	`´štf
("%s", 
Ãt
->
Çme
);

71 
Ãt
 =‚‘->
Ãxt
;

72 ià(
Ãt
)

73 
	`´štf
(", ");

75 
	`´štf
("\n");

77 
	}
}

79 
	gMdtFe
::
	$£tOuutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

80 ià(
v”bo£_
) {

81 
	`´štf
("set output‚ets: ");

82 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

83 
Ãt
) {

84 
	`´štf
("%s", 
Ãt
->
Çme
);

85 
Ãt
 =‚‘->
Ãxt
;

86 ià(
Ãt
)

87 
	`´štf
(", ");

89 
	`´štf
("\n");

91 
	}
}

93 
	gMdtFe
::
	$£tInoutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

94 ià(
v”bo£_
) {

95 
	`´štf
("set inout‚ets: ");

96 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

97 
Ãt
) {

98 
	`´štf
("%s", 
Ãt
->
Çme
);

99 
Ãt
 =‚‘->
Ãxt
;

100 ià(
Ãt
)

101 
	`´štf
(", ");

103 
	`´štf
("\n");

105 
	}
}

107 
	gMdtFe
::
	$£tIÁ”nN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

108 ià(
v”bo£_
) {

109 
	`´štf
("set intern‚ets: ");

110 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

111 
Ãt
) {

112 
	`´štf
("%s", 
Ãt
->
Çme
);

113 
Ãt
 =‚‘->
Ãxt
;

114 ià(
Ãt
)

115 
	`´štf
(", ");

117 
	`´štf
("\n");

119 
	}
}

121 
	gMdtFe
::
	$addPrim™ive
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

122 
MdtNames
 * cÚ¡ 
pÜts
) {

123 ià(
v”bo£_
) {

124 
	`´štf
("add…rim™ive: % % (", 
ty³
, 
Çme
);

125 
MdtNames
 *
pÜt
 = 
pÜts
->
h—d
;

126 
pÜt
) {

127 
	`´štf
("%s", 
pÜt
->
Çme
);

128 
pÜt
 =…Üt->
Ãxt
;

129 ià(
pÜt
)

130 
	`´štf
(", ");

132 
	`´štf
(")\n");

134 
	}
}

136 
	gMdtFe
::
	$addIn¡ªû
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

137 
MdtNames
 * cÚ¡ 
pÜts
) {

138 ià(
v”bo£_
) {

139 
	`´štf
("add in¡ªû: % % (", 
ty³
, 
Çme
);

140 
MdtNames
 *
pÜt
 = 
pÜts
->
h—d
;

141 
pÜt
) {

142 
	`´štf
("%s", 
pÜt
->
Çme
);

143 
pÜt
 =…Üt->
Ãxt
;

144 ià(
pÜt
)

145 
	`´štf
(", ");

147 
	`´štf
(")\n");

149 
	}
}

151 
	gMdtFe
::
	$addIn¡ªû
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

152 
MdtPÜtToN‘
 * cÚ¡ 
pÜtToN‘
) {

153 ià(
v”bo£_
) {

154 
	`´štf
("add in¡ªû: % % (", 
ty³
, 
Çme
);

155 
MdtPÜtToN‘
 *
p2n
 = 
pÜtToN‘
->
h—d
;

156 
p2n
) {

157 
	`´štf
(".%s(%s)", 
p2n
->
pÜt
,…2n->
Ãt
);

158 
p2n
 =…2n->
Ãxt
;

159 ià(
p2n
)

160 
	`´štf
(", ");

162 
	`´štf
(")\n");

164 
	}
}

	@interface/src/mdt_file.h

8 #iâdeà
_INTF_MDT_FILE_H_


9 
	#_INTF_MDT_FILE_H_


	)

11 
	~"glob®.h
"

13 
Çme¥aû
 
	gIÁfNs
 {

15 
	eMdtPÜtTy³
 { 
	gMDT_PORT_INPUT
, 
	gMDT_PORT_OUTPUT
, 
	gMDT_PORT_INOUT
,

16 
	gMDT_PORT_INTERN
 };

18 
	sMdtNames
 {

19 
	gÇme
[
NAME_LEN
];

20 
MdtNames
 *
	gÃxt
;

21 
MdtNames
 *
	gh—d
;

24 
	sMdtPÜtToN‘
 {

25 
	gpÜt
[
NAME_LEN
];

26 
	gÃt
[
NAME_LEN
];

27 
MdtPÜtToN‘
 *
	gÃxt
;

28 
MdtPÜtToN‘
 *
	gh—d
;

31 şas 
	cMdtFe
 {

32 
	gpublic
:

33 
MdtFe
();

34 
	gvœtu®
 ~
MdtFe
();

36 
vœtu®
 
boŞ
 
»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ boŞ &
v”bo£
 = 
çl£
);

38 
vœtu®
 
addMod–
(cÚ¡ * cÚ¡ 
Çme
);

39 
vœtu®
 
addPÜts
(
MdtNames
 * cÚ¡ 
pÜts
);

40 
vœtu®
 
£tIÅutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

41 
vœtu®
 
£tOuutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

42 
vœtu®
 
£tInoutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

43 
vœtu®
 
£tIÁ”nN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

44 
vœtu®
 
addPrim™ive
(cÚ¡ * cÚ¡ 
ty³
,

45 cÚ¡ * cÚ¡ 
Çme
,

46 
MdtNames
 * cÚ¡ 
pÜts
);

47 
vœtu®
 
addIn¡ªû
(cÚ¡ * cÚ¡ 
ty³
,

48 cÚ¡ * cÚ¡ 
Çme
,

49 
MdtNames
 * cÚ¡ 
pÜts
);

50 
vœtu®
 
addIn¡ªû
(cÚ¡ * cÚ¡ 
ty³
,

51 cÚ¡ * cÚ¡ 
Çme
,

52 
MdtPÜtToN‘
 * cÚ¡ 
pÜtToN‘
);

54 
	g´Ùeùed
:

55 
boŞ
 
sucûss_
;

56 
boŞ
 
	gv”bo£_
;

59 
šlše
 
	gMdtFe
::
	$MdtFe
() {

60 
sucûss_
 = 
Œue
;

61 
v”bo£_
 = 
çl£
;

62 
	}
}

63 
šlše
 
	gMdtFe
::~
	$MdtFe
(è{
	}
}

	@interface/src/mdt_test.cpp

8 
	~<c¡dlib
>

9 
	~<io¡»am
>

11 
	~"mdt_fe.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

14 
usšg
 
Çme¥aû
 
	gIÁfNs
;

17 
	$maš
(
¬gc
, **
¬gv
) {

18 
mdt_few¬nšg
;

19 
mdt_few¬nšg
 = 1;

20 ià(
¬gc
 < 2) {

21 
û¼
 << "**ERROR maš():…Ëa£…rovidm’tÜ mdˆlib" << 
’dl
;

22 
	`ex™
(0);

25 
MdtFe
 *
mdt
 = 
Ãw
 MdtFile;

26 ià(!
mdt
->
	`»ad
(
¬gv
[1], 
Œue
)) {

27 
û¼
 << "**ERROR maš(): mdˆlib…¬£ faed" << 
’dl
;

28 
	`ex™
(0);

31 
d–‘e
 
mdt
;

34 
	}
}

	@interface/src/netlist.cpp

8 
	~<®gÜ™hm
>

10 
	~"Ãi¡.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

17 
boŞ
 
	gN‘li¡
::
	$check
(cÚ¡ 
boŞ
 &
v”bo£
) const {

18 ià(!
tİ_
) {

19 
	`årštf
(
¡d”r
, "**ERROR Netlist::check():op module‚ot set\n");

20  
çl£
;

23 
boŞ
 
»s
 = 
Œue
;

25 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NPÜt
(); ++i) {

26 
PÜt
 *
p
 = 
tİ_
->
	`g‘PÜt
(
i
);

27 ià(
p
->
ty³_
 =ğ
PÜt
::
NA
) {

28 ià(
v”bo£
) {

29 
	`årštf
(
¡d”r
, "**WARN Netlist::check(): ");

30 
	`årštf
(
¡d”r
, "pÜˆ`%s/%s' ", 
tİ_
->
Çme_
, 
p
->name_);

31 
	`årštf
(
¡d”r
, "has‚oype\n");

34 ià(
p
->
tİ_
 !=op_) {

35 
»s
 = 
çl£
;

36 ià(
v”bo£
) {

37 ià(!
p
->
tİ_
) {

38 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): ");

39 
	`årštf
(
¡d”r
, "pÜˆ`%s/%s' ", 
tİ_
->
Çme_
, 
p
->name_);

40 
	`årštf
(
¡d”r
, "has‚oop cell\n");

43 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): ");

44 
	`årštf
(
¡d”r
, "pÜˆ`%s/%s' ", 
tİ_
->
Çme_
, 
p
->name_);

45 
	`årštf
(
¡d”r
, "has invalicop cell ");

46 
	`årštf
(
¡d”r
, "`%s'\n", 
p
->
tİ_
->
Çme_
);

50 
N‘
 *
n
 = 
p
->
šN‘_
;

51 ià(!
n
) {

52 ià(
v”bo£
) {

53 
	`årštf
(
¡d”r
, "**WARN Netlist::check(): ");

54 
	`årštf
(
¡d”r
, "pÜˆ`%s/%s' ", 
tİ_
->
Çme_
, 
p
->name_);

55 
	`årštf
(
¡d”r
, "unconnected\n");

58 ià(!
tİ_
->
	`g‘N‘
(
n
->
Çme_
)) {

59 
»s
 = 
çl£
;

60 ià(
v”bo£
) {

61 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): ");

62 
	`årštf
(
¡d”r
, "pÜˆ`%s/%s' ", 
tİ_
->
Çme_
, 
p
->name_);

63 
	`årštf
(
¡d”r
, "cÚÃùedØšv®id‚‘ `%s'\n", 
n
->
Çme_
);

68 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NN‘
(); ++i) {

69 
N‘
 *
n
 = 
tİ_
->
	`g‘N‘
(
i
);

70 ià(
n
->
	`g‘NPÜt
() == 0) {

72 ià(
v”bo£
) {

73 
	`årštf
(
¡d”r
, "**WARN Netlist::check():‚et ");

74 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
n
->name_);

75 
	`årštf
(
¡d”r
, "is unconnected\n");

79 ià(
n
->
	`g‘NPÜt
(è=ğ1 &&‚->
	`g‘NEqv
() == 0) {

80 ià(
v”bo£
) {

81 
	`årštf
(
¡d”r
, "**WARN Netlist::check():‚et ");

82 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
n
->name_);

83 
	`årštf
(
¡d”r
, "is floating\n");

87 ià(
n
->
tİ_
 !=op_) {

88 
»s
 = 
çl£
;

89 ià(
v”bo£
) {

90 ià(!
n
->
tİ_
) {

91 
	`årštf
(
¡d”r
, "**ERROR Netlist::check():‚et ");

92 
	`årštf
(
¡d”r
, "`%s/%s' ",
tİ_
->
Çme_
, 
n
->name_);

93 
	`årštf
(
¡d”r
, "has‚oop cell\n");

96 
	`årštf
(
¡d”r
, "**ERROR Netlist::check():‚et ");

97 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
n
->name_);

98 
	`årštf
(
¡d”r
, "has invalidop cell ");

99 
	`årštf
(
¡d”r
, "`%s'\n", 
n
->
tİ_
->
Çme_
);

103 
boŞ
 
hasIn
 = 
çl£
;

104 
boŞ
 
hasOut
 = 
çl£
;

105 
N‘S‘
 
eqvs
 = 
n
->
tİ_
->
	`g‘EqvN‘s
Ò->
id_
);

106 
N‘S‘
::
™”©Ü
 
™
 = 
eqvs
.
	`begš
();

107  ; 
™
 !ğ
eqvs
.
	`’d
(); ++it) {

108 
N‘
 *
eqv
 = (*
™
);

109 
size_t
 
k
 = 0; k < 
eqv
->
	`g‘NPÜt
(); ++k) {

110 
PÜt
 *
p
 = 
eqv
->
	`g‘PÜt
(
k
);

111 ià((
p
->
tİ_
 !ğtİ_ &&…->
ty³_
 =ğ
PÜt
::
OUTPUT
)

112 || (
p
->
tİ_
 =ğtİ_ &&…->
ty³_
 =ğ
PÜt
::
INPUT
))

113 
hasIn
 = 
Œue
;

114 ià((
p
->
tİ_
 !ğtİ_ &&…->
ty³_
 =ğ
PÜt
::
INPUT
)

115 || (
p
->
tİ_
 =ğtİ_ &&…->
ty³_
 =ğ
PÜt
::
OUTPUT
))

116 
hasOut
 = 
Œue
;

117 ià((
p
->
tİ_
 !ğ
eqv
->tİ_ &&…->
exN‘_
 !=ƒqv)

118 || (
p
->
tİ_
 =ğ
eqv
->tİ_ &&…->
šN‘_
 !=ƒqv)) {

119 
»s
 = 
çl£
;

120 ià(
v”bo£
) {

121 
	`årštf
(
¡d”r
, "**ERROR Netlist::check():‚et ");

122 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
n
->name_);

123 
	`årštf
(
¡d”r
, "not connectedo…ort ");

124 
	`årštf
(
¡d”r
, "`%s/%s'\n", 
tİ_
->
Çme_
, 
p
->name_);

129 ià(!
hasIn
) {

130 
»s
 = 
çl£
;

131 ià(
v”bo£
) {

132 
	`årštf
(
¡d”r
, "**ERROR Netlist::check():‚et ");

133 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
n
->name_);

134 
	`årštf
(
¡d”r
, "has‚o driver\n");

137 ià(!
hasOut
) {

138 
»s
 = 
çl£
;

139 ià(
v”bo£
) {

140 
	`årštf
(
¡d”r
, "**ERROR Netlist::check():‚et ");

141 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
n
->name_);

142 
	`årštf
(
¡d”r
, "drives‚o cell\n");

148 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NC–l
(); ++i) {

149 
C–l
 *
c
 = 
tİ_
->
	`g‘C–l
(
i
);

150 ià(!
c
->
libc_
 && 
v”bo£
) {

151 
	`årštf
(
¡d”r
, "**WARN Netlist::check(): cell ");

152 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

153 
	`årštf
(
¡d”r
, "isreated‡s blackbox\n");

155 ià(
c
->
libc_
) {

156 ià(
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
TSL
)

157 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
TSLI
)

158 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
TSH
)

159 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
TSHI
)) {

160 
»s
 = 
çl£
;

161 ià(
v”bo£
) {

162 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): cell ");

163 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

164 
	`årštf
(
¡d”r
, "containsristate…rimitives\n");

167 ià(
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
DELAY
)) {

168 
»s
 = 
çl£
;

169 ià(
v”bo£
) {

170 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): cell ");

171 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

172 
	`årštf
(
¡d”r
, "contains delay…rimitives\n");

175 ià(
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
WIRE
)) {

176 
»s
 = 
çl£
;

177 ià(
v”bo£
) {

178 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): cell ");

179 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

180 
	`årštf
(
¡d”r
, "contains wire…rimitives\n");

183 ià(
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
PULL
)) {

184 
»s
 = 
çl£
;

185 ià(
v”bo£
) {

186 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): cell ");

187 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

188 
	`årštf
(
¡d”r
, "contains…ull…rimitives\n");

191 ià(
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
UNDEF
)) {

192 
»s
 = 
çl£
;

193 ià(
v”bo£
) {

194 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): cell ");

195 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

196 
	`årštf
(
¡d”r
, "contains undefined…rimitives\n");

199 ià(
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
NMOS
)

200 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
PMOS
)

201 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
RNMOS
)

202 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
RPMOS
)

203 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
NMOSF
)

204 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
PMOSF
)

205 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
CMOS1
)

206 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
CMOS2
)

207 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
RCMOS1
)

208 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
RCMOS2
)

209 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
CMOS1F
)

210 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
CMOS2F
)) {

211 
»s
 = 
çl£
;

212 ià(
v”bo£
) {

213 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): cell ");

214 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

215 
	`årštf
(
¡d”r
, "contains MOS…rimitives\n");

218 ià(
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
TIE1
)

219 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
TIE0
)

220 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
TIEX
)

221 || 
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
TIEZ
)) {

222 ià(
v”bo£
) {

223 
	`årštf
(
¡d”r
, "**WARN Netlist::check(): cell ");

224 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

225 
	`årštf
(
¡d”r
, "containsie cell…rimitives\n");

229 ià(
c
->
tİ_
 !=op_) {

230 
»s
 = 
çl£
;

231 ià(
v”bo£
) {

232 ià(!
c
->
tİ_
) {

233 
	`årštf
(
¡d”r
, "**ERROR Netlist::check(): cell ");

234 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

235 
	`årštf
(
¡d”r
, "has‚oop cell\n");

238 
	`årštf
(
¡d”r
, "**ERROR Techlib::check(): cell ");

239 
	`årštf
(
¡d”r
, "`%s/%s' ", 
tİ_
->
Çme_
, 
c
->name_);

240 
	`årštf
(
¡d”r
, "has invalidop cell ");

241 
	`årštf
(
¡d”r
, "`%s'\n", 
c
->
tİ_
->
Çme_
);

245 
size_t
 
j
 = 0; j < 
c
->
	`g‘NPÜt
(); ++j) {

246 
PÜt
 *
p
 = 
c
->
	`g‘PÜt
(
j
);

247 ià(!
p
->
exN‘_
) {

248 ià(
v”bo£
) {

249 
	`årštf
(
¡d”r
, "**WARN Techlib::check():…ort ");

250 
	`årštf
(
¡d”r
, "`%s/", 
tİ_
->
Çme_
);

251 
	`årštf
(
¡d”r
, "%s/%s' ", 
c
->
Çme_
, 
p
->name_);

252 
	`årštf
(
¡d”r
, "unconnected\n");

255 ià(
p
->
exN‘_
->
tİ_
 !=op_) {

256 
»s
 = 
çl£
;

257 ià(
v”bo£
) {

258 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():…ort ");

259 
	`årštf
(
¡d”r
, "`%s/", 
tİ_
->
Çme_
);

260 
	`årštf
(
¡d”r
, "%s/%s' ", 
c
->
Çme_
, 
p
->name_);

261 
	`årštf
(
¡d”r
, "connectedo invalid‚et ");

262 
	`årštf
(
¡d”r
, "`%s'\n", 
p
->
exN‘_
->
Çme_
);

269  
»s
;

270 
	}
}

274 
boŞ
 
	gN‘li¡
::
	$»moveFlßtšgN‘s
() {

275 ià(!
tİ_
) {

276 
	`årštf
(
¡d”r
, "**ERROR Netlist::removeFloatingNets(): ");

277 
	`årštf
(
¡d”r
, "top module‚ot set\n");

278  
çl£
;

281 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NN‘
(); ++i) {

282 
N‘
 *
n
 = 
tİ_
->
	`g‘N‘
(
i
);

283 ià(
n
->
	`g‘NPÜt
(è< 2 &&‚->
	`g‘NEqv
() == 0) {

284 ià(
n
->
	`g‘NPÜt
() == 1) {

285 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(0);

286 ià(
p
->
tİ_
 ==op_)

287 
p
->
šN‘_
 = 
NULL
;

289 
p
->
exN‘_
 = 
NULL
;

291 
tİ_
->
	`»moveN‘
(
i
);

292 
d–‘e
 
n
;

293 
i
--;

296  
Œue
;

297 
	}
}

299 
boŞ
 
	gN‘li¡
::
	$Ëv–ize
() {

300 ià(!
tİ_
) {

301 
	`årštf
(
¡d”r
, "**ERROR Netlist::levelize():op module‚ot set\n");

302  
çl£
;

304 ià(!
lib_
) {

305 
	`årštf
(
¡d”r
, "**ERROR Netlist::levelize():echnology†ibrary ");

306 
	`årštf
(
¡d”r
, "not set\n");

307  
çl£
;

310 
boŞ
 
´oûs£d
[
tİ_
->
	`g‘NC–l
()];

311 
boŞ
 
Ëv–ized
[
tİ_
->
	`g‘NC–l
()];

312 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NC–l
(); ++i) {

313 
´oûs£d
[
i
] = 
çl£
;

314 
Ëv–ized
[
i
] = 
çl£
;

317 
queue
<
C–l
 *> 
cque
;

320 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NC–l
(); ++i) {

321 
C–l
 *
c
 = 
tİ_
->
	`g‘C–l
(
i
);

322 ià(
c
->
libc_
) {

323 ià(!
lib_
->
	`hasPmt
(
c
->
libc_
->
id_
, 
Pmt
::
DFF
))

325 
c
->
lvl_
 = 0;

326 
´oûs£d
[
i
] = 
Œue
;

327 
Ëv–ized
[
i
] = 
Œue
;

328 
C–lS‘
 
ûÎs
 = 
tİ_
->
	`g‘Fªout
(
i
);

329 
C–lS‘
::
™”©Ü
 
™
 = 
ûÎs
.
	`begš
(); iˆ!ğûÎs.
	`’d
(); ++it) {

330 ià(
´oûs£d
[(*
™
)->
id_
]

331 || 
lib_
->
	`hasPmt
((*
™
)->
libc_
->
id_
, 
Pmt
::
DFF
))

333 
´oûs£d
[(*
™
)->
id_
] = 
Œue
;

334 
cque
.
	`push
((*
™
));

338 ià(
	`¡rcmp
(
c
->
ty³Name_
, "dff")!=0)

340 
c
->
lvl_
 = 0;

341 
´oûs£d
[
i
] = 
Œue
;

342 
Ëv–ized
[
i
] = 
Œue
;

343 
C–lS‘
 
ûÎs
 = 
tİ_
->
	`g‘Fªout
(
i
);

344 
C–lS‘
::
™”©Ü
 
™
 = 
ûÎs
.
	`begš
(); iˆ!ğûÎs.
	`’d
(); ++it) {

345 ià(
´oûs£d
[(*
™
)->
id_
]

346 || 
	`¡rcmp
((*
™
)->
ty³Name_
, "dff")==0)

348 
´oûs£d
[(*
™
)->
id_
] = 
Œue
;

349 
cque
.
	`push
((*
™
));

355 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NC–l
(); ++i) {

356 
C–l
 *
c
 = 
tİ_
->
	`g‘C–l
(
i
);

357 
boŞ
 
hasIÅut
 = 
çl£
;

358 
size_t
 
j
 = 0; j < 
c
->
	`g‘NPÜt
(); ++j) {

359 ià(
c
->
	`g‘PÜt
(
j
)->
ty³_
 =ğ
PÜt
::
INPUT
) {

360 
hasIÅut
 = 
Œue
;

364 ià(
hasIÅut
)

366 
c
->
lvl_
 = 0;

367 
´oûs£d
[
i
] = 
Œue
;

368 
Ëv–ized
[
i
] = 
Œue
;

369 
C–lS‘
 
ûÎs
 = 
tİ_
->
	`g‘Fªout
(
i
);

370 
C–lS‘
::
™”©Ü
 
™
 = 
ûÎs
.
	`begš
(); iˆ!ğûÎs.
	`’d
(); ++it) {

371 ià(
´oûs£d
[(*
™
)->
id_
])

373 
´oûs£d
[(*
™
)->
id_
] = 
Œue
;

374 
cque
.
	`push
((*
™
));

379 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NPÜt
(); ++i) {

380 
PÜt
 *
p
 = 
tİ_
->
	`g‘PÜt
(
i
);

381 ià(
p
->
ty³_
 !ğ
PÜt
::
INPUT
)

383 
C–lS‘
 
ûÎs
 = 
tİ_
->
	`g‘PÜtC–ls
(
i
);

384 
C–lS‘
::
™”©Ü
 
™
 = 
ûÎs
.
	`begš
(); iˆ!ğûÎs.
	`’d
(); ++it) {

385 ià(
´oûs£d
[(*
™
)->
id_
])

387 
´oûs£d
[(*
™
)->
id_
] = 
Œue
;

388 
cque
.
	`push
((*
™
));

392 !
cque
.
	`em±y
()) {

393 
C–l
 *
c
 = 
cque
.
	`äÚt
();

394 
cque
.
	`pİ
();

397 
maxLvl
 = 0;

398 
boŞ
 
»ady
 = 
Œue
;

399 
C–lS‘
 
fis
 = 
tİ_
->
	`g‘Fªš
(
c
->
id_
);

400 
C–lS‘
::
™”©Ü
 
™
 = 
fis
.
	`begš
(); iˆ!ğfis.
	`’d
(); ++it) {

401 ià(!
Ëv–ized
[(*
™
)->
id_
]) {

402 
»ady
 = 
çl£
;

405 ià((*
™
)->
lvl_
 > 
maxLvl
)

406 
maxLvl
 = (*
™
)->
lvl_
;

408 ià(!
»ady
) {

409 
cque
.
	`push
(
c
);

414 
c
->
lvl_
 = 
maxLvl
 + 1;

415 
Ëv–ized
[
c
->
id_
] = 
Œue
;

418 
C–lS‘
 
fos
 = 
tİ_
->
	`g‘Fªout
(
c
->
id_
);

419 
C–lS‘
::
™”©Ü
 
™
 = 
fos
.
	`begš
(); iˆ!ğfos.
	`’d
(); ++it) {

420 ià(
´oûs£d
[(*
™
)->
id_
])

422 
cque
.
	`push
((*
™
));

423 
´oûs£d
[(*
™
)->
id_
] = 
Œue
;

428 
	`¡abË_sÜt
(
tİ_
->
	`g‘C–ls
()->
	`begš
(),İ_->g‘C–ls()->
	`’d
(),

429 
cmpC–lLvl
);

432 
size_t
 
i
 = 0; i < 
tİ_
->
	`g‘NC–l
(); ++i)

433 
tİ_
->
	`g‘C–l
(
i
)->
id_
 = i;

435  
Œue
;

436 
	}
}

	@interface/src/netlist.h

8 #iâdeà
_INTF_NETLIST_H_


9 
	#_INTF_NETLIST_H_


	)

11 
	~"ûÎ.h
"

12 
	~"‹chlib.h
"

14 
Çme¥aû
 
	gIÁfNs
 {

16 şas 
	cN‘li¡
 {

17 
	gpublic
:

19 
N‘li¡
();

20 ~
N‘li¡
();

23 
boŞ
 
check
(cÚ¡ boŞ &
v”bo£
 = 
çl£
) const;

24 
boŞ
 
£tTechlib
(
Techlib
 * cÚ¡ 
lib
);

25 
Techlib
 *
g‘Techlib
() const;

28 
C–l
 *
g‘Tİ
() const;

29 
boŞ
 
£tTİ
(cÚ¡ 
size_t
 &
i
);

30 
boŞ
 
£tTİ
(cÚ¡ * cÚ¡ 
Çme
);

33 
boŞ
 
addModuË
(
C–l
 *
m
);

34 
size_t
 
g‘NModuË
() const;

35 
C–l
 *
g‘ModuË
(cÚ¡ * cÚ¡ 
Çme
) const;

36 
C–l
 *
g‘ModuË
(cÚ¡ 
size_t
 &
i
) const;

39 
boŞ
 
»moveFlßtšgN‘s
();

40 
boŞ
 
Ëv–ize
();

42 
	g´iv©e
:

43 
C–l
 *
tİ_
;

44 
C–lVec
 
	gmoduËs_
;

45 
C–lM­
 
	gÇmeToModuË_
;

46 
Techlib
 *
	glib_
;

47 
	glvl_
;

52 
šlše
 
	gN‘li¡
::
	$N‘li¡
() {

53 
tİ_
 = 
NULL
;

54 
lib_
 = 
NULL
;

55 
lvl_
 = -1;

56 
	}
}

58 
šlše
 
	gN‘li¡
::~
	$N‘li¡
() {

59 
	}
}

61 
šlše
 
boŞ
 
N‘li¡
::
	$£tTechlib
(
Techlib
 * cÚ¡ 
lib
) {

62 
lib_
 = 
lib
;

63  
Œue
;

64 
	}
}

66 
šlše
 
Techlib
 *
	gN‘li¡
::
	$g‘Techlib
() const {

67  
lib_
;

68 
	}
}

70 
šlše
 
C–l
 *
	gN‘li¡
::
	$g‘Tİ
() const {

71  
tİ_
;

72 
	}
}

74 
šlše
 
boŞ
 
	gN‘li¡
::
	$£tTİ
(cÚ¡ * cÚ¡ 
Çme
) {

75 
C–lM­
::
cÚ¡_™”©Ü
 
™
 = 
ÇmeToModuË_
.
	`fšd
(
Çme
);

76 ià(
™
 !ğ
ÇmeToModuË_
.
	`’d
()) {

77 
tİ_
 = 
™
->
£cÚd
;

78 
lvl_
 = -1;

80  
™
 !ğ
ÇmeToModuË_
.
	`’d
();

81 
	}
}

83 
šlše
 
boŞ
 
	gN‘li¡
::
	$£tTİ
(cÚ¡ 
size_t
 &
i
) {

84 ià(
i
 < 
moduËs_
.
	`size
()) {

85 
tİ_
 = 
moduËs_
[
i
];

86 
lvl_
 = -1;

88  
i
 < 
moduËs_
.
	`size
();

89 
	}
}

91 
šlše
 
boŞ
 
	gN‘li¡
::
	$addModuË
(
C–l
 *
m
) {

92 
C–lM­
::
™”©Ü
 
™
 = 
ÇmeToModuË_
.
	`fšd
(
m
->
Çme_
);

93 ià(
™
 !ğ
ÇmeToModuË_
.
	`’d
())

94  
çl£
;

95 
moduËs_
.
	`push_back
(
m
);

96 
ÇmeToModuË_
[
m
->
Çme_
] = m;

97  
Œue
;

98 
	}
}

100 
šlše
 
size_t
 
	gN‘li¡
::
	$g‘NModuË
() const {

101  
moduËs_
.
	`size
();

102 
	}
}

104 
šlše
 
C–l
 *
	gN‘li¡
::
	$g‘ModuË
(cÚ¡ * cÚ¡ 
Çme
) const {

105 
C–lM­
::
cÚ¡_™”©Ü
 
™
 = 
ÇmeToModuË_
.
	`fšd
(
Çme
);

106  
™
 =ğ
ÇmeToModuË_
.
	`’d
(è? 
NULL
 : it->
£cÚd
;

107 
	}
}

109 
šlše
 
C–l
 *
	gN‘li¡
::
	$g‘ModuË
(cÚ¡ 
size_t
 &
i
) const {

110  
i
 < 
moduËs_
.
	`size
(è? moduËs_[i] : 
NULL
;

111 
	}
}

	@interface/src/netlist_builder.cpp

8 
	~<c¡dio
>

10 
	~"Ãi¡_bud”.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

15 
	gVlogNlBud”
::
	$addModuË
(cÚ¡ * cÚ¡ 
Çme
) {

16 ià(!
sucûss_
)

18 ià(!
Æ_
->
	`g‘Techlib
()) {

19 ià(
v”bo£_
) {

20 
	`årštf
(
¡d”r
, "**ERROR VlogNlBuilder::addModule(): ");

21 
	`årštf
(
¡d”r
, "technology†ibrary‚ot set\n");

23 
sucûss_
 = 
çl£
;

26 ià(
Æ_
->
	`g‘ModuË
(
Çme
)) {

27 ià(
v”bo£_
) {

28 
	`årštf
(
¡d”r
, "**ERROR VlogNlBuilder::addModule(): ");

29 
	`årštf
(
¡d”r
, "moduË `%s'‡Ì—dyƒxi¡s\n", 
Çme
);

31 
sucûss_
 = 
çl£
;

34 
curModuË_
 = 
Ãw
 
	`C–l
(
Çme
);

35 
Æ_
->
	`addModuË
(
curModuË_
);

36 
Æ_
->
	`£tTİ
(
Çme
);

37 
	}
}

39 
	gVlogNlBud”
::
	$addPÜts
(
VlogNames
 * cÚ¡ 
pÜts
) {

40 ià(!
sucûss_
)

42 
VlogNames
 *
pÜt
 = 
pÜts
->
h—d
;

43 
pÜt
) {

44 ià(
curModuË_
->
	`g‘PÜt
(
pÜt
->
Çme
)) {

45 ià(
v”bo£_
) {

46 
	`årštf
(
¡d”r
, "**ERROR VlogNlBuilder::addPorts():…ort ");

47 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curModuË_
->
Çme_
, 
pÜt
->
Çme
);

48 
	`årštf
(
¡d”r
, "alreadyƒxists\n");

50 
sucûss_
 = 
çl£
;

53 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
(
pÜt
->
Çme
);

54 
p
->
tİ_
 = 
curModuË_
;

55 
curModuË_
->
	`addPÜt
(
p
);

56 
pÜt
 =…Üt->
Ãxt
;

58 
	}
}

60 
	gVlogNlBud”
::
	$£tIÅutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

61 ià(!
sucûss_
)

63 ià(!
	`addPÜtN‘s
(
Ãts
->
h—d
)) {

64 
sucûss_
 = 
çl£
;

67 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

68 
Ãt
) {

69 
PÜt
 *
p
 = 
curModuË_
->
	`g‘PÜt
(
Ãt
->
Çme
);

70 
p
->
ty³_
 = 
PÜt
::
INPUT
;

71 
Ãt
 =‚‘->
Ãxt
;

73 
	}
}

75 
	gVlogNlBud”
::
	$£tOuutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

76 ià(!
sucûss_
)

78 ià(!
	`addPÜtN‘s
(
Ãts
->
h—d
)) {

79 
sucûss_
 = 
çl£
;

82 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

83 
Ãt
) {

84 
PÜt
 *
p
 = 
curModuË_
->
	`g‘PÜt
(
Ãt
->
Çme
);

85 
p
->
ty³_
 = 
PÜt
::
OUTPUT
;

86 
Ãt
 =‚‘->
Ãxt
;

88 
	}
}

90 
	gVlogNlBud”
::
	$£tInoutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

91 ià(!
sucûss_
)

93 ià(!
	`addPÜtN‘s
(
Ãts
->
h—d
)) {

94 
sucûss_
 = 
çl£
;

97 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

98 
Ãt
) {

99 
PÜt
 *
p
 = 
curModuË_
->
	`g‘PÜt
(
Ãt
->
Çme
);

100 
p
->
ty³_
 = 
PÜt
::
INOUT
;

101 
Ãt
 =‚‘->
Ãxt
;

103 
	}
}

105 
	gVlogNlBud”
::
	$£tWœeN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

106 ià(!
sucûss_
)

108 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

109 
Ãt
) {

110 ià(!
curModuË_
->
	`g‘N‘
(
Ãt
->
Çme
)) {

111 
N‘
 *
n
 = 
Ãw
 
	`N‘
(
Ãt
->
Çme
);

112 
curModuË_
->
	`addN‘
(
n
);

114 
Ãt
 =‚‘->
Ãxt
;

116 
	}
}

118 
	gVlogNlBud”
::
	$addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

119 
VlogPÜtToN‘
 * cÚ¡ 
pÜtToN‘
) {

120 ià(!
sucûss_
)

122 
úame
[
NAME_LEN
];

123 ià(!
	`¡rcmp
(
Çme
, ""))

124 
	`¥rštf
(
úame
, "LOO%d", ()
curModuË_
->
	`g‘NC–l
());

126 
	`¡rıy
(
úame
, 
Çme
);

127 ià(
curModuË_
->
	`g‘C–l
(
úame
)) {

128 ià(
v”bo£_
) {

129 
	`årštf
(
¡d”r
, "**ERROR VlogNlBuilder::addCell(): cell ");

130 
	`årštf
(
¡d”r
, "`%s/%s'\n", 
curModuË_
->
Çme_
, 
úame
);

132 
sucûss_
 = 
çl£
;

135 
C–l
 *
c
 = 
Ãw
 
	`C–l
(
úame
);

136 
c
->
tİ_
 = 
curModuË_
;

137 
	`¡rıy
(
c
->
ty³Name_
, 
ty³
);

138 
boŞ
 
hasLib
 = 
Æ_
->
	`g‘Techlib
(è&&‚l_->g‘Techlib()->
	`g‘C–l
(
ty³
);

139 ià(
hasLib
) {

140 
C–l
 *
libC–l
 = 
Æ_
->
	`g‘Techlib
()->
	`g‘C–l
(
ty³
);

141 
c
->
libc_
 = 
libC–l
;

142 
size_t
 
i
 = 0; i < 
libC–l
->
	`g‘NPÜt
(); ++i) {

143 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
(
libC–l
->
	`g‘PÜt
(
i
)->
Çme_
);

144 
p
->
tİ_
 = 
c
;

145 
p
->
ty³_
 = 
libC–l
->
	`g‘PÜt
(
i
)->type_;

146 
c
->
	`addPÜt
(
p
);

150 ià(
v”bo£_
) {

151 
	`årštf
(
¡d”r
, "**WARN VlogNlBuilder::addCell(): cell ");

152 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curModuË_
->
Çme_
, 
úame
);

153 
	`årštf
(
¡d”r
, "set‡s black box\n");

156 
VlogPÜtToN‘
 *
p2n
 = 
pÜtToN‘
->
h—d
;

157 
p2n
) {

158 
N‘
 *
n
 = 
curModuË_
->
	`g‘N‘
(
p2n
->
Ãt
);

159 ià(!
n
) {

160 ià(
v”bo£_
) {

161 
	`årštf
(
¡d”r
, "**WARN VlogNlBuilder::addCell():‚et ");

162 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curModuË_
->
Çme_
, 
p2n
->
Ãt
);

163 
	`årštf
(
¡d”r
, "set‡s wire\n");

165 
n
 = 
Ãw
 
	`N‘
(
p2n
->
Ãt
);

166 
n
->
tİ_
 = 
curModuË_
;

167 
curModuË_
->
	`addN‘
(
n
);

169 
PÜt
 *
p
;

170 ià(
hasLib
) {

171 
p
 = 
c
->
	`g‘PÜt
(
p2n
->
pÜt
);

172 ià(!
p
) {

173 ià(
v”bo£_
) {

174 
	`årštf
(
¡d”r
, "**ERROR VlogNlBuilder::addCell():…ort");

175 
	`årštf
(
¡d”r
, " `%s/ ", 
curModuË_
->
Çme_
);

176 
	`årštf
(
¡d”r
, "%s' ", 
p2n
->
pÜt
);

177 
	`årštf
(
¡d”r
, "does‚ot match†ibrary cell\n");

179 
sucûss_
 = 
çl£
;

184 
p
 = 
Ãw
 
	`PÜt
(
p2n
->
pÜt
);

185 
p
->
tİ_
 = 
c
;

186 
c
->
	`addPÜt
(
p
);

188 
p
->
exN‘_
 = 
n
;

189 
n
->
	`addPÜt
(
p
);

191 
p2n
 =…2n->
Ãxt
;

194 
curModuË_
->
	`addC–l
(
c
);

195 
	}
}

198 
	gVlogNlBud”
::
	$addAssign
(cÚ¡ * cÚ¡ 
n1
, cÚ¡ * cÚ¡ 
n2
) {

199 ià(!
sucûss_
)

201 
N‘
 *
Ãt1
 = 
curModuË_
->
	`g‘N‘
(
n1
);

202 ià(!
Ãt1
) {

203 ià(
v”bo£_
) {

204 
	`årštf
(
¡d”r
, "**WARN VlogNlBuilder::addAssign():‚et ");

205 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curModuË_
->
Çme_
, 
n1
);

206 
	`årštf
(
¡d”r
, "set‡s wire\n");

208 
Ãt1
 = 
Ãw
 
	`N‘
(
n1
);

209 
Ãt1
->
tİ_
 = 
curModuË_
;

210 
curModuË_
->
	`addN‘
(
Ãt1
);

212 
N‘
 *
Ãt2
 = 
curModuË_
->
	`g‘N‘
(
n2
);

213 ià(!
Ãt2
) {

214 ià(
v”bo£_
) {

215 
	`årštf
(
¡d”r
, "**WARN VlogNlBuilder::addAssign():‚et ");

216 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curModuË_
->
Çme_
, 
n2
);

217 
	`årštf
(
¡d”r
, "set‡s wire\n");

219 
Ãt2
 = 
Ãw
 
	`N‘
(
n2
);

220 
Ãt2
->
tİ_
 = 
curModuË_
;

221 
curModuË_
->
	`addN‘
(
Ãt2
);

223 
Ãt1
->
	`addEqv
(
Ãt2
);

224 
Ãt2
->
	`addEqv
(
Ãt1
);

225 
	}
}

227 
boŞ
 
	gVlogNlBud”
::
	$addPÜtN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

228 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

229 
Ãt
) {

230 
PÜt
 *
p
 = 
curModuË_
->
	`g‘PÜt
(
Ãt
->
Çme
);

231 ià(!
p
) {

232 ià(
v”bo£_
) {

233 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addPortNets():…ort");

234 
	`årštf
(
¡d”r
, " `%s/%s' ", 
curModuË_
->
Çme_
, 
Ãt
->
Çme
);

235 
	`årštf
(
¡d”r
, "does‚otƒxist\n");

237  
çl£
;

239 
N‘
 *
n
 = 
curModuË_
->
	`g‘N‘
(
Ãt
->
Çme
);

240 ià(!
n
) {

241 
n
 = 
Ãw
 
	`N‘
(
Ãt
->
Çme
);

242 
n
->
tİ_
 = 
curModuË_
;

243 
curModuË_
->
	`addN‘
(
n
);

245 
n
->
	`addPÜt
(
p
);

246 
p
->
šN‘_
 = 
n
;

247 
Ãt
 =‚‘->
Ãxt
;

249  
Œue
;

250 
	}
}

252 
	gVlogNlBud”
::
	$£tRegN‘s
(
VlogNames
 * cÚ¡ 
Ãts
è{
	}
}

253 
VlogNlBud”
::
	$£tSuµlyLN‘s
(
VlogNames
 * cÚ¡ 
Ãts
è{
	}
}

254 
VlogNlBud”
::
	$£tSuµlyHN‘s
(
VlogNames
 * cÚ¡ 
Ãts
è{
	}
}

255 
VlogNlBud”
::
	$addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

256 
VlogNames
 * cÚ¡ 
pÜts
) {

257 ià(!
sucûss_
)

260 
úame
[
NAME_LEN
];

261 ià(!
	`¡rcmp
(
Çme
, ""))

262 
	`¥rštf
(
úame
, "LOO%d", ()
curModuË_
->
	`g‘NC–l
());

264 
	`¡rıy
(
úame
, 
Çme
);

265 ià(
curModuË_
->
	`g‘C–l
(
úame
)) {

266 ià(
v”bo£_
) {

267 
	`årštf
(
¡d”r
, "**ERROR VlogNlBuilder::addCell(): cell ");

268 
	`årštf
(
¡d”r
, "`%s/%s'\n", 
curModuË_
->
Çme_
, 
úame
);

270 
sucûss_
 = 
çl£
;

273 
C–l
 *
c
 = 
Ãw
 
	`C–l
(
úame
);

274 
c
->
tİ_
 = 
curModuË_
;

275 
	`¡rıy
(
c
->
ty³Name_
, 
ty³
);

278 
boŞ
 
isDff
 = 
çl£
;

279 if(!
	`¡rcmp
(
c
->
ty³Name_
, "dff"))

280 
isDff
 = 
Œue
;

283 
VlogNames
 *
p2n
 = 
pÜts
->
h—d
;

284 
ÅÜt
 = 0;

285 
p2n
) {

286 
N‘
 *
n
 = 
curModuË_
->
	`g‘N‘
(
p2n
->
Çme
);

287 ià(!
n
) {

288 ià(
v”bo£_
) {

289 
	`årštf
(
¡d”r
, "**WARN VlogNlBuilder::addCell():‚et ");

290 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curModuË_
->
Çme_
, 
p2n
->
Çme
);

291 
	`årštf
(
¡d”r
, "set‡s wire\n");

293 
n
 = 
Ãw
 
	`N‘
(
p2n
->
Çme
);

294 
n
->
tİ_
 = 
curModuË_
;

295 
curModuË_
->
	`addN‘
(
n
);

298 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
("");

299 
²ame
[
NAME_LEN
];

300 ià(!
isDff
) {

301 ià(
ÅÜt
<1) {

302 
	`¡rıy
(
²ame
, "Y");

303 
p
->
ty³_
 = 
PÜt
::
OUTPUT
;

306 
	`¡rıy
(
²ame
, "A");

307 
²ame
[0] +ğ(
ÅÜt
 - 1);

308 
p
->
ty³_
 = 
PÜt
::
INPUT
;

312 ià(
ÅÜt
==0) {

313 
	`¡rıy
(
²ame
, "CK");

314 
p
->
ty³_
 = 
PÜt
::
INPUT
;

316 ià(
ÅÜt
==1) {

317 
	`¡rıy
(
²ame
, "Q");

318 
p
->
ty³_
 = 
PÜt
::
OUTPUT
;

320 ià(
ÅÜt
==2) {

321 
	`¡rıy
(
²ame
, "D");

322 
p
->
ty³_
 = 
PÜt
::
INPUT
;

325 ià(
v”bo£_
) {

326 
	`årštf
(
¡d”r
, "**ERROR VlogNlBuilder::addCell():…ort");

327 
	`årštf
(
¡d”r
, " `%s/ ", 
curModuË_
->
Çme_
);

328 
	`årštf
(
¡d”r
, "%s' ", 
p2n
->
Çme
);

329 
	`årštf
(
¡d”r
, "does‚ot match†ibrary cell\n");

331 
sucûss_
 = 
çl£
;

336 
	`¡rıy
(
p
->
Çme_
, 
²ame
);

337 
p
->
tİ_
 = 
c
;

338 
c
->
	`addPÜt
(
p
);

340 
p
->
exN‘_
 = 
n
;

341 
n
->
	`addPÜt
(
p
);

343 
p2n
 =…2n->
Ãxt
;

344 
ÅÜt
++;

347 
curModuË_
->
	`addC–l
(
c
);

348 
	}
}

350 
	gVlogNlBud”
::
	$addC–l
(cÚ¡ * cÚ¡ 
ty³
,

351 
VlogNames
 * cÚ¡ 
¡»ngths
,

352 cÚ¡ * cÚ¡ 
Çme
,

353 
VlogNames
 * cÚ¡ 
pÜts
è{
	}
}

	@interface/src/netlist_builder.h

8 #iâdeà
_INTF_NETLIST_BUILDER_H_


9 
	#_INTF_NETLIST_BUILDER_H_


	)

11 
	~"vlog_fe.h
"

12 
	~"Ãi¡.h
"

14 
Çme¥aû
 
	gIÁfNs
 {

16 şas 
	cVlogNlBud”
 : 
public
 
VlogFe
 {

17 
public
:

18 
VlogNlBud”
(
N‘li¡
 * cÚ¡ 
Æ
);

19 
	gvœtu®
 ~
VlogNlBud”
();

21 
vœtu®
 
addModuË
(cÚ¡ * cÚ¡ 
Çme
);

22 
vœtu®
 
addPÜts
(
VlogNames
 * cÚ¡ 
pÜts
);

23 
vœtu®
 
£tIÅutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

24 
vœtu®
 
£tOuutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

25 
vœtu®
 
£tInoutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

26 
vœtu®
 
£tWœeN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

27 
vœtu®
 
£tRegN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

28 
vœtu®
 
£tSuµlyLN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

29 
vœtu®
 
£tSuµlyHN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

30 
vœtu®
 
addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

31 
VlogNames
 * cÚ¡ 
pÜts
);

32 
vœtu®
 
addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

33 
VlogPÜtToN‘
 * cÚ¡ 
pÜtToN‘
);

34 
vœtu®
 
addC–l
(cÚ¡ * cÚ¡ 
ty³
,

35 
VlogNames
 * cÚ¡ 
¡»ngths
,

36 cÚ¡ * cÚ¡ 
Çme
,

37 
VlogNames
 * cÚ¡ 
pÜts
);

38 
vœtu®
 
addAssign
(cÚ¡ * cÚ¡ 
n1
, cÚ¡ * cÚ¡ 
n2
);

40 
	g´Ùeùed
:

41 
boŞ
 
addPÜtN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

42 
N‘li¡
 *
	gÆ_
;

43 
C–l
 *
	gcurModuË_
;

47 
šlše
 
	gVlogNlBud”
::
	$VlogNlBud”
(
N‘li¡
 *
Æ
) {

48 
Æ_
 = 
Æ
;

49 
curModuË_
 = 
NULL
;

50 
	}
}

52 
šlše
 
	gVlogNlBud”
::~
	$VlogNlBud”
(è{
	}
}

	@interface/src/pat_file.cpp

8 
	~<c¡dio
>

10 
	~"·t_fe.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

15 
·t_f•¬£
(*);

16 
FILE
 *
·t_feš
;

18 
boŞ
 
	gP©Fe
::
	$»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ 
boŞ
 &
v”bo£
) {

19 
v”bo£_
 = 
v”bo£
;

20 
·t_feš
 = 
	`fİ’
(
âame
, "r");

21 ià(!
·t_feš
) {

22 
	`årštf
(
¡d”r
, "**ERROR PatFile::read(): cannot open…attern file ");

23 
	`årštf
(
¡d”r
, "`%s'\n", 
âame
);

24  
çl£
;

27 
sucûss_
 = 
Œue
;

28 
»s
 = 
	`·t_f•¬£
(
this
);

29 ià(
»s
 != 0) {

30 
	`årštf
(
¡d”r
, "**ERROR PatFile::read(): wrong input format\n");

31  
çl£
;

33 
	`fşo£
(
·t_feš
);

35  
sucûss_
;

36 
	}
}

38 
	gP©Fe
::
	$£tPiOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
pis
) {

39 ià(
v”bo£_
) {

40 
	`´štf
("set PI order: ");

41 
P©Names
 *
pi
 = 
pis
->
h—d
;

42 
pi
) {

43 
	`´štf
("%s", 
pi
->
Çme
);

44 
pi
 =…i->
Ãxt
;

45 ià(
pi
)

46 
	`´štf
(", ");

48 
	`´štf
("\n");

50 
	}
}

52 
	gP©Fe
::
	$£tPpiOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
µis
) {

53 ià(
v”bo£_
) {

54 
	`´štf
("set PPI order: ");

55 
P©Names
 *
µi
 = 
µis
->
h—d
;

56 
µi
) {

57 
	`´štf
("%s", 
µi
->
Çme
);

58 
µi
 =…pi->
Ãxt
;

59 ià(
µi
)

60 
	`´štf
(", ");

62 
	`´štf
("\n");

64 
	}
}

66 
	gP©Fe
::
	$£tPoOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
pos
) {

67 ià(
v”bo£_
) {

68 
	`´štf
("set PO order: ");

69 
P©Names
 *
po
 = 
pos
->
h—d
;

70 
po
) {

71 
	`´štf
("%s", 
po
->
Çme
);

72 
po
 =…o->
Ãxt
;

73 ià(
po
)

74 
	`´štf
(", ");

76 
	`´štf
("\n");

78 
	}
}

80 
	gP©Fe
::
	$£tP©‹ºTy³
(cÚ¡ 
P©Ty³
 &
ty³
) {

81 ià(
v”bo£_
) {

82 
	`´štf
("set…atternype: ");

83 
ty³
) {

84 
BASIC_SCAN
:

85 
	`´štf
("BASIC_SCAN\n");

87 
LAUNCH_CAPTURE
:

88 
	`´štf
("LAUNCH_CAPTURE\n");

90 
LAUNCH_SHIFT
:

91 
	`´štf
("LAUNCH_SHIFT\n");

95 
	}
}

97 
	gP©Fe
::
	$£tP©‹ºNum
(cÚ¡ &
num
) {

98 ià(
v”bo£_
)

99 
	`´štf
("£ˆ·‰”Ànum: %d\n", 
num
);

100 
	}
}

102 
	gP©Fe
::
	$addP©‹º
(cÚ¡ * cÚ¡ 
pi1
, cÚ¡ * cÚ¡ 
pi2
,

103 cÚ¡ * cÚ¡ 
µi
, cÚ¡ * cÚ¡ 
si
,

104 cÚ¡ * cÚ¡ 
po1
, cÚ¡ * cÚ¡ 
po2
,

105 cÚ¡ * cÚ¡ 
µo
) {

106 ià(
v”bo£_
) {

107 cÚ¡ *
ıi1
 = 
pi1
 ?…i1 : "\0";

108 cÚ¡ *
ıi2
 = 
pi2
 ?…i2 : "\0";

109 cÚ¡ *
ıpi
 = 
µi
 ?…pi : "\0";

110 cÚ¡ *
csi
 = 
si
 ? si : "\0";

111 cÚ¡ *
ıo1
 = 
po1
 ?…o1 : "\0";

112 cÚ¡ *
ıo2
 = 
po2
 ?…o2 : "\0";

113 cÚ¡ *
ıpo
 = 
µo
 ?…po : "\0";

114 
	`´štf
("add…©‹º: % | % | % | % | ", 
ıi1
, 
ıi2
, 
ıpi
, 
csi
);

115 
	`´štf
("% | % | %s\n", 
ıo1
, 
ıo2
, 
ıpo
);

117 
	}
}

	@interface/src/pat_file.h

8 #iâdeà
_INTF_PAT_FILE_H_


9 
	#_INTF_PAT_FILE_H_


	)

11 
	~"glob®.h
"

13 
Çme¥aû
 
	gIÁfNs
 {

15 
	eP©Ty³
 { 
	gBASIC_SCAN
, 
	gLAUNCH_CAPTURE
, 
	gLAUNCH_SHIFT
 };

17 
	sP©Names
 {

18 
	gÇme
[
NAME_LEN
];

19 
P©Names
 *
	gÃxt
;

20 
P©Names
 *
	gh—d
;

23 şas 
	cP©Fe
 {

24 
	gpublic
:

25 
P©Fe
();

26 
	gvœtu®
 ~
P©Fe
();

28 
vœtu®
 
boŞ
 
»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ boŞ &
v”bo£
 = 
çl£
);

29 
vœtu®
 
£tPiOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
pis
);

30 
vœtu®
 
£tPpiOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
µis
);

31 
vœtu®
 
£tPoOrd”
(cÚ¡ 
P©Names
 * cÚ¡ 
pos
);

32 
vœtu®
 
£tP©‹ºTy³
(cÚ¡ 
P©Ty³
 &
ty³
);

33 
vœtu®
 
£tP©‹ºNum
(cÚ¡ &
num
);

34 
vœtu®
 
addP©‹º
(cÚ¡ * cÚ¡ 
pi1
, cÚ¡ * cÚ¡ 
pi2
,

35 cÚ¡ * cÚ¡ 
µi
, cÚ¡ * cÚ¡ 
si
,

36 cÚ¡ * cÚ¡ 
po1
, cÚ¡ * cÚ¡ 
po2
,

37 cÚ¡ * cÚ¡ 
µo
);

39 
	g´Ùeùed
:

40 
boŞ
 
sucûss_
;

41 
boŞ
 
	gv”bo£_
;

44 
šlše
 
	gP©Fe
::
	$P©Fe
() {

45 
sucûss_
 = 
Œue
;

46 
v”bo£_
 = 
çl£
;

47 
	}
}

48 
šlše
 
	gP©Fe
::~
	$P©Fe
(è{
	}
}

	@interface/src/pat_test.cpp

8 
	~<c¡dio
>

9 
	~<c¡dlib
>

11 
	~"·t_fe.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

14 
usšg
 
Çme¥aû
 
	gIÁfNs
;

17 
	$maš
(
¬gc
, **
¬gv
) {

18 ià(
¬gc
 < 2) {

19 
	`årštf
(
¡d”r
, "**ERROR main():…lease…rovide input…attern\n");

20 
	`ex™
(0);

23 
P©Fe
 *
·t
 = 
Ãw
 PatFile;

24 ià(!
·t
->
	`»ad
(
¬gv
[1], 
Œue
)) {

25 
	`årštf
(
¡d”r
, "**ERROR main():…attern…arser failed\n");

26 
	`ex™
(0);

29 
d–‘e
 
·t
;

32 
	}
}

	@interface/src/primitive.cpp

8 
	~"´im™ive.h
"

10 
usšg
 
Çme¥aû
 
	g¡d
;

11 
usšg
 
Çme¥aû
 
	gIÁfNs
;

	@interface/src/primitive.h

8 #iâdeà
_INTF_PRIMITIVE_H_


9 
	#_INTF_PRIMITIVE_H_


	)

11 
	~<c¡dio
>

12 
	~"ûÎ.h
"

14 
Çme¥aû
 
	gIÁfNs
 {

17 şas 
	cPmt
 : 
public
 
C–l
 {

18 
public
:

19 
Pmt
(cÚ¡ * cÚ¡ 
Çme
);

20 ~
Pmt
();

22 
	eTy³
 { 
	gNA
,

23 
	gAND
, 
	gNAND
, 
	gOR
, 
	gNOR
, 
	gINV
, 
	gBUF
, 
	gBUFZ
, 
	gXOR
, 
	gXNOR
,

24 
	gTSL
, 
	gTSLI
, 
	gTSH
, 
	gTSHI
,

25 
	gMUX
, 
	gDFF
, 
	gDLAT
, 
	gDELAY
, 
	gINVF
, 
	gWIRE
, 
	gPULL
,

26 
	gTIE1
, 
	gTIE0
, 
	gTIEX
, 
	gTIEZ
, 
	gUNDEF
,

27 
	gNMOS
, 
	gPMOS
, 
	gRNMOS
, 
	gRPMOS
, 
	gNMOSF
, 
	gPMOSF
,

28 
	gCMOS1
, 
	gCMOS2
, 
	gRCMOS1
, 
	gRCMOS2
, 
	gCMOS1F
, 
	gCMOS2F


31 
Ty³
 
	gty³_
;

35 şas 
	cPmtAnd
 : 
public
 
Pmt
 {

36 
public
:

37 
PmtAnd
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
);

38 ~
PmtAnd
();

41 şas 
	cPmtNªd
 : 
public
 
Pmt
 {

42 
public
:

43 
PmtNªd
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
);

44 ~
PmtNªd
();

47 şas 
	cPmtOr
 : 
public
 
Pmt
 {

48 
public
:

49 
PmtOr
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
);

50 ~
PmtOr
();

53 şas 
	cPmtNÜ
 : 
public
 
Pmt
 {

54 
public
:

55 
PmtNÜ
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
);

56 ~
PmtNÜ
();

59 şas 
	cPmtInv
 : 
public
 
Pmt
 {

60 
public
:

61 
PmtInv
(cÚ¡ * cÚ¡ 
Çme
);

62 ~
PmtInv
();

65 şas 
	cPmtBuf
 : 
public
 
Pmt
 {

66 
public
:

67 
PmtBuf
(cÚ¡ * cÚ¡ 
Çme
);

68 ~
PmtBuf
();

71 şas 
	cPmtBufz
 : 
public
 
Pmt
 {

72 
public
:

73 
PmtBufz
(cÚ¡ * cÚ¡ 
Çme
);

74 ~
PmtBufz
();

77 şas 
	cPmtXÜ
 : 
public
 
Pmt
 {

78 
public
:

79 
PmtXÜ
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
);

80 ~
PmtXÜ
();

83 şas 
	cPmtXnÜ
 : 
public
 
Pmt
 {

84 
public
:

85 
PmtXnÜ
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
);

86 ~
PmtXnÜ
();

89 şas 
	cPmtT¦
 : 
public
 
Pmt
 {

90 
public
:

91 
PmtT¦
(cÚ¡ * cÚ¡ 
Çme
);

92 ~
PmtT¦
();

95 şas 
	cPmtT¦i
 : 
public
 
Pmt
 {

96 
public
:

97 
PmtT¦i
(cÚ¡ * cÚ¡ 
Çme
);

98 ~
PmtT¦i
();

101 şas 
	cPmtTsh
 : 
public
 
Pmt
 {

102 
public
:

103 
PmtTsh
(cÚ¡ * cÚ¡ 
Çme
);

104 ~
PmtTsh
();

107 şas 
	cPmtTshi
 : 
public
 
Pmt
 {

108 
public
:

109 
PmtTshi
(cÚ¡ * cÚ¡ 
Çme
);

110 ~
PmtTshi
();

113 şas 
	cPmtMux
 : 
public
 
Pmt
 {

114 
public
:

115 
PmtMux
(cÚ¡ * cÚ¡ 
Çme
);

116 ~
PmtMux
();

119 şas 
	cPmtDff
 : 
public
 
Pmt
 {

120 
public
:

121 
PmtDff
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nClk
 = 1);

122 ~
PmtDff
();

125 şas 
	cPmtDÏt
 : 
public
 
Pmt
 {

126 
public
:

127 
PmtDÏt
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nClk
 = 1);

128 ~
PmtDÏt
();

131 şas 
	cPmtD–ay
 : 
public
 
Pmt
 {

132 
public
:

133 
PmtD–ay
(cÚ¡ * cÚ¡ 
Çme
);

134 ~
PmtD–ay
();

137 şas 
	cPmtInvf
 : 
public
 
Pmt
 {

138 
public
:

139 
PmtInvf
(cÚ¡ * cÚ¡ 
Çme
);

140 ~
PmtInvf
();

143 şas 
	cPmtWœe
 : 
public
 
Pmt
 {

144 
public
:

145 
PmtWœe
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
);

146 ~
PmtWœe
();

149 şas 
	cPmtPuÎ
 : 
public
 
Pmt
 {

150 
public
:

151 
PmtPuÎ
(cÚ¡ * cÚ¡ 
Çme
);

152 ~
PmtPuÎ
();

155 şas 
	cPmtT›1
 : 
public
 
Pmt
 {

156 
public
:

157 
PmtT›1
(cÚ¡ * cÚ¡ 
Çme
);

158 ~
PmtT›1
();

161 şas 
	cPmtT›0
 : 
public
 
Pmt
 {

162 
public
:

163 
PmtT›0
(cÚ¡ * cÚ¡ 
Çme
);

164 ~
PmtT›0
();

167 şas 
	cPmtT›X
 : 
public
 
Pmt
 {

168 
public
:

169 
PmtT›X
(cÚ¡ * cÚ¡ 
Çme
);

170 ~
PmtT›X
();

173 şas 
	cPmtT›Z
 : 
public
 
Pmt
 {

174 
public
:

175 
PmtT›Z
(cÚ¡ * cÚ¡ 
Çme
);

176 ~
PmtT›Z
();

179 şas 
	cPmtUndefšed
 : 
public
 
Pmt
 {

180 
public
:

181 
PmtUndefšed
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
);

182 ~
PmtUndefšed
();

185 şas 
	cPmtNmos
 : 
public
 
Pmt
 {

186 
public
:

187 
PmtNmos
(cÚ¡ * cÚ¡ 
Çme
);

188 ~
PmtNmos
();

191 şas 
	cPmtPmos
 : 
public
 
Pmt
 {

192 
public
:

193 
PmtPmos
(cÚ¡ * cÚ¡ 
Çme
);

194 ~
PmtPmos
();

197 şas 
	cPmtRnmos
 : 
public
 
Pmt
 {

198 
public
:

199 
PmtRnmos
(cÚ¡ * cÚ¡ 
Çme
);

200 ~
PmtRnmos
();

203 şas 
	cPmtRpmos
 : 
public
 
Pmt
 {

204 
public
:

205 
PmtRpmos
(cÚ¡ * cÚ¡ 
Çme
);

206 ~
PmtRpmos
();

209 şas 
	cPmtNmosf
 : 
public
 
Pmt
 {

210 
public
:

211 
PmtNmosf
(cÚ¡ * cÚ¡ 
Çme
);

212 ~
PmtNmosf
();

215 şas 
	cPmtPmosf
 : 
public
 
Pmt
 {

216 
public
:

217 
PmtPmosf
(cÚ¡ * cÚ¡ 
Çme
);

218 ~
PmtPmosf
();

221 şas 
	cPmtCmos1
 : 
public
 
Pmt
 {

222 
public
:

223 
PmtCmos1
(cÚ¡ * cÚ¡ 
Çme
);

224 ~
PmtCmos1
();

227 şas 
	cPmtCmos2
 : 
public
 
Pmt
 {

228 
public
:

229 
PmtCmos2
(cÚ¡ * cÚ¡ 
Çme
);

230 ~
PmtCmos2
();

233 şas 
	cPmtRcmos1
 : 
public
 
Pmt
 {

234 
public
:

235 
PmtRcmos1
(cÚ¡ * cÚ¡ 
Çme
);

236 ~
PmtRcmos1
();

239 şas 
	cPmtRcmos2
 : 
public
 
Pmt
 {

240 
public
:

241 
PmtRcmos2
(cÚ¡ * cÚ¡ 
Çme
);

242 ~
PmtRcmos2
();

245 şas 
	cPmtCmos1f
 : 
public
 
Pmt
 {

246 
public
:

247 
PmtCmos1f
(cÚ¡ * cÚ¡ 
Çme
);

248 ~
PmtCmos1f
();

251 şas 
	cPmtCmos2f
 : 
public
 
Pmt
 {

252 
public
:

253 
PmtCmos2f
(cÚ¡ * cÚ¡ 
Çme
);

254 ~
PmtCmos2f
();

260 
šlše
 
	gPmt
::
	$Pmt
(cÚ¡ * cÚ¡ 
Çme
è: 
	$C–l
(
Çme
) {

261 
ty³_
 = 
NA
;

262 
isPmt_
 = 
Œue
;

263 
	}
}

264 
šlše
 
	gPmt
::~
	$Pmt
(è{
	}
}

268 
šlše
 
PmtAnd
::
	$PmtAnd
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
) :

269 
	$Pmt
(
Çme
) {

270 
ty³_
 = 
AND
;

271 
	`¡rıy
(
ty³Name_
, "AND");

273 
²ame
[
NAME_LEN
];

274 
size_t
 
i
 = 0; i < 
nIn
; ++i) {

275 
	`¥rštf
(
²ame
, "IN %d", ()
i
);

276 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

277 
š
->
ty³_
 = 
PÜt
::
INPUT
;

278 
	`addPÜt
(
š
);

280 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

281 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

282 
	`addPÜt
(
out
);

283 
	}
}

285 
šlše
 
	gPmtAnd
::~
	$PmtAnd
(è{
	}
}

288 
šlše
 
PmtNªd
::
	$PmtNªd
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
) :

289 
	$Pmt
(
Çme
) {

290 
ty³_
 = 
NAND
;

291 
	`¡rıy
(
ty³Name_
, "NAND");

293 
²ame
[
NAME_LEN
];

294 
size_t
 
i
 = 0; i < 
nIn
; ++i) {

295 
	`¥rštf
(
²ame
, "IN%d", ()
i
);

296 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

297 
š
->
ty³_
 = 
PÜt
::
INPUT
;

298 
	`addPÜt
(
š
);

300 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

301 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

302 
	`addPÜt
(
out
);

303 
	}
}

305 
šlše
 
	gPmtNªd
::~
	$PmtNªd
(è{
	}
}

308 
šlše
 
PmtOr
::
	$PmtOr
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
) :

309 
	$Pmt
(
Çme
) {

310 
ty³_
 = 
OR
;

311 
	`¡rıy
(
ty³Name_
, "OR");

313 
²ame
[
NAME_LEN
];

314 
size_t
 
i
 = 0; i < 
nIn
; ++i) {

315 
	`¥rštf
(
²ame
, "IN%d", ()
i
);

316 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

317 
š
->
ty³_
 = 
PÜt
::
INPUT
;

318 
	`addPÜt
(
š
);

320 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

321 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

322 
	`addPÜt
(
out
);

323 
	}
}

325 
šlše
 
	gPmtOr
::~
	$PmtOr
(è{
	}
}

328 
šlše
 
PmtNÜ
::
	$PmtNÜ
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
) :

329 
	$Pmt
(
Çme
) {

330 
ty³_
 = 
NOR
;

331 
	`¡rıy
(
ty³Name_
, "NOR");

333 
²ame
[
NAME_LEN
];

334 
size_t
 
i
 = 0; i < 
nIn
; ++i) {

335 
	`¥rštf
(
²ame
, "IN%d", ()
i
);

336 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

337 
š
->
ty³_
 = 
PÜt
::
INPUT
;

338 
	`addPÜt
(
š
);

340 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

341 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

342 
	`addPÜt
(
out
);

343 
	}
}

345 
šlše
 
	gPmtNÜ
::~
	$PmtNÜ
(è{
	}
}

348 
šlše
 
PmtInv
::
	$PmtInv
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

349 
ty³_
 = 
INV
;

350 
	`¡rıy
(
ty³Name_
, "INV");

352 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

353 
š
->
ty³_
 = 
PÜt
::
INPUT
;

354 
	`addPÜt
(
š
);

355 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

356 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

357 
	`addPÜt
(
out
);

358 
	}
}

360 
šlše
 
	gPmtInv
::~
	$PmtInv
(è{
	}
}

363 
šlše
 
PmtBuf
::
	$PmtBuf
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

364 
ty³_
 = 
BUF
;

365 
	`¡rıy
(
ty³Name_
, "BUF");

367 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

368 
š
->
ty³_
 = 
PÜt
::
INPUT
;

369 
	`addPÜt
(
š
);

370 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

371 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

372 
	`addPÜt
(
out
);

373 
	}
}

375 
šlše
 
	gPmtBuf
::~
	$PmtBuf
(è{
	}
}

378 
šlše
 
PmtBufz
::
	$PmtBufz
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

379 
ty³_
 = 
BUFZ
;

380 
	`¡rıy
(
ty³Name_
, "BUFZ");

382 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

383 
š
->
ty³_
 = 
PÜt
::
INPUT
;

384 
	`addPÜt
(
š
);

385 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

386 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

387 
	`addPÜt
(
out
);

388 
	}
}

390 
šlše
 
	gPmtBufz
::~
	$PmtBufz
(è{
	}
}

393 
šlše
 
PmtXÜ
::
	$PmtXÜ
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
) :

394 
	$Pmt
(
Çme
) {

395 
ty³_
 = 
XOR
;

396 
	`¡rıy
(
ty³Name_
, "XOR");

398 
²ame
[
NAME_LEN
];

399 
size_t
 
i
 = 0; i < 
nIn
; ++i) {

400 
	`¥rštf
(
²ame
, "IN%d", ()
i
);

401 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

402 
š
->
ty³_
 = 
PÜt
::
INPUT
;

403 
	`addPÜt
(
š
);

405 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

406 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

407 
	`addPÜt
(
out
);

408 
	}
}

410 
šlše
 
	gPmtXÜ
::~
	$PmtXÜ
(è{
	}
}

413 
šlše
 
PmtXnÜ
::
	$PmtXnÜ
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
) :

414 
	$Pmt
(
Çme
) {

415 
ty³_
 = 
XNOR
;

416 
	`¡rıy
(
ty³Name_
, "XNOR");

418 
²ame
[
NAME_LEN
];

419 
size_t
 
i
 = 0; i < 
nIn
; ++i) {

420 
	`¥rštf
(
²ame
, "IN%d", ()
i
);

421 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

422 
š
->
ty³_
 = 
PÜt
::
INPUT
;

423 
	`addPÜt
(
š
);

425 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

426 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

427 
	`addPÜt
(
out
);

428 
	}
}

430 
šlše
 
	gPmtXnÜ
::~
	$PmtXnÜ
(è{
	}
}

433 
šlše
 
PmtT¦
::
	$PmtT¦
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

434 
ty³_
 = 
TSL
;

435 
	`¡rıy
(
ty³Name_
, "TSL");

437 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

438 
š
->
ty³_
 = 
PÜt
::
INPUT
;

439 
	`addPÜt
(
š
);

440 
PÜt
 *
út
 = 
Ãw
 
	`PÜt
("CNT");

441 
út
->
ty³_
 = 
PÜt
::
INPUT
;

442 
	`addPÜt
(
út
);

443 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

444 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

445 
	`addPÜt
(
out
);

446 
	}
}

448 
šlše
 
	gPmtT¦
::~
	$PmtT¦
(è{
	}
}

451 
šlše
 
PmtT¦i
::
	$PmtT¦i
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

452 
ty³_
 = 
TSLI
;

453 
	`¡rıy
(
ty³Name_
, "TSLI");

455 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

456 
š
->
ty³_
 = 
PÜt
::
INPUT
;

457 
	`addPÜt
(
š
);

458 
PÜt
 *
út
 = 
Ãw
 
	`PÜt
("CNT");

459 
út
->
ty³_
 = 
PÜt
::
INPUT
;

460 
	`addPÜt
(
út
);

461 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

462 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

463 
	`addPÜt
(
out
);

464 
	}
}

466 
šlše
 
	gPmtT¦i
::~
	$PmtT¦i
(è{
	}
}

469 
šlše
 
PmtTsh
::
	$PmtTsh
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

470 
ty³_
 = 
TSH
;

471 
	`¡rıy
(
ty³Name_
, "TSH");

473 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

474 
š
->
ty³_
 = 
PÜt
::
INPUT
;

475 
	`addPÜt
(
š
);

476 
PÜt
 *
út
 = 
Ãw
 
	`PÜt
("CNT");

477 
út
->
ty³_
 = 
PÜt
::
INPUT
;

478 
	`addPÜt
(
út
);

479 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

480 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

481 
	`addPÜt
(
out
);

482 
	}
}

484 
šlše
 
	gPmtTsh
::~
	$PmtTsh
(è{
	}
}

487 
šlše
 
PmtTshi
::
	$PmtTshi
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

488 
ty³_
 = 
TSHI
;

489 
	`¡rıy
(
ty³Name_
, "TSHI");

491 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

492 
š
->
ty³_
 = 
PÜt
::
INPUT
;

493 
	`addPÜt
(
š
);

494 
PÜt
 *
út
 = 
Ãw
 
	`PÜt
("CNT");

495 
út
->
ty³_
 = 
PÜt
::
INPUT
;

496 
	`addPÜt
(
út
);

497 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

498 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

499 
	`addPÜt
(
out
);

500 
	}
}

502 
šlše
 
	gPmtTshi
::~
	$PmtTshi
(è{
	}
}

505 
šlše
 
PmtMux
::
	$PmtMux
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

506 
ty³_
 = 
MUX
;

507 
	`¡rıy
(
ty³Name_
, "MUX");

509 
PÜt
 *
š0
 = 
Ãw
 
	`PÜt
("IN0");

510 
š0
->
ty³_
 = 
PÜt
::
INPUT
;

511 
	`addPÜt
(
š0
);

512 
PÜt
 *
š1
 = 
Ãw
 
	`PÜt
("IN1");

513 
š1
->
ty³_
 = 
PÜt
::
INPUT
;

514 
	`addPÜt
(
š1
);

515 
PÜt
 *
út
 = 
Ãw
 
	`PÜt
("CNT");

516 
út
->
ty³_
 = 
PÜt
::
INPUT
;

517 
	`addPÜt
(
út
);

518 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

519 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

520 
	`addPÜt
(
out
);

521 
	}
}

523 
šlše
 
	gPmtMux
::~
	$PmtMux
(è{
	}
}

526 
šlše
 
PmtDff
::
	$PmtDff
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nClk
)

527 : 
	$Pmt
(
Çme
) {

528 
ty³_
 = 
DFF
;

529 
	`¡rıy
(
ty³Name_
, "DFF");

531 
PÜt
 *
£t
 = 
Ãw
 
	`PÜt
("SET");

532 
£t
->
ty³_
 = 
PÜt
::
INPUT
;

533 
	`addPÜt
(
£t
);

534 
PÜt
 *
»£t
 = 
Ãw
 
	`PÜt
("RESET");

535 
»£t
->
ty³_
 = 
PÜt
::
INPUT
;

536 
	`addPÜt
(
»£t
);

537 
²ame
[
NAME_LEN
];

538 
size_t
 
i
 = 0; i < 
nClk
; ++i) {

539 
	`¥rštf
(
²ame
, "CLK%d", ()
i
);

540 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

541 
š
->
ty³_
 = 
PÜt
::
INPUT
;

542 
	`addPÜt
(
š
);

543 
	`¥rštf
(
²ame
, "D%d", ()
i
);

544 
š
 = 
Ãw
 
	`PÜt
(
²ame
);

545 
š
->
ty³_
 = 
PÜt
::
INPUT
;

546 
	`addPÜt
(
š
);

548 
PÜt
 *
q
 = 
Ãw
 
	`PÜt
("Q");

549 
q
->
ty³_
 = 
PÜt
::
OUTPUT
;

550 
	`addPÜt
(
q
);

551 
PÜt
 *
qn
 = 
Ãw
 
	`PÜt
("QN");

552 
qn
->
ty³_
 = 
PÜt
::
OUTPUT
;

553 
	`addPÜt
(
qn
);

554 
	}
}

556 
šlše
 
	gPmtDff
::~
	$PmtDff
(è{
	}
}

559 
šlše
 
PmtDÏt
::
	$PmtDÏt
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nClk
)

560 : 
	$Pmt
(
Çme
) {

561 
ty³_
 = 
DLAT
;

562 
	`¡rıy
(
ty³Name_
, "DLAT");

564 
PÜt
 *
£t
 = 
Ãw
 
	`PÜt
("SET");

565 
£t
->
ty³_
 = 
PÜt
::
INPUT
;

566 
	`addPÜt
(
£t
);

567 
PÜt
 *
»£t
 = 
Ãw
 
	`PÜt
("RESET");

568 
»£t
->
ty³_
 = 
PÜt
::
INPUT
;

569 
	`addPÜt
(
»£t
);

570 
²ame
[
NAME_LEN
];

571 
size_t
 
i
 = 0; i < 
nClk
; ++i) {

572 
	`¥rštf
(
²ame
, "CLK%d", ()
i
);

573 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

574 
š
->
ty³_
 = 
PÜt
::
INPUT
;

575 
	`addPÜt
(
š
);

576 
	`¥rštf
(
²ame
, "D%d", ()
i
);

577 
š
 = 
Ãw
 
	`PÜt
(
²ame
);

578 
š
->
ty³_
 = 
PÜt
::
INPUT
;

579 
	`addPÜt
(
š
);

581 
PÜt
 *
q
 = 
Ãw
 
	`PÜt
("Q");

582 
q
->
ty³_
 = 
PÜt
::
OUTPUT
;

583 
	`addPÜt
(
q
);

584 
PÜt
 *
qn
 = 
Ãw
 
	`PÜt
("QN");

585 
qn
->
ty³_
 = 
PÜt
::
OUTPUT
;

586 
	`addPÜt
(
qn
);

587 
	}
}

589 
šlše
 
	gPmtDÏt
::~
	$PmtDÏt
(è{
	}
}

592 
šlše
 
PmtD–ay
::
	$PmtD–ay
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

593 
ty³_
 = 
DELAY
;

594 
	`¡rıy
(
ty³Name_
, "DELAY");

596 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

597 
š
->
ty³_
 = 
PÜt
::
INPUT
;

598 
	`addPÜt
(
š
);

599 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

600 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

601 
	`addPÜt
(
out
);

602 
	}
}

604 
šlše
 
	gPmtD–ay
::~
	$PmtD–ay
(è{
	}
}

607 
šlše
 
PmtInvf
::
	$PmtInvf
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

608 
ty³_
 = 
INVF
;

609 
	`¡rıy
(
ty³Name_
, "INVF");

611 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

612 
š
->
ty³_
 = 
PÜt
::
INPUT
;

613 
	`addPÜt
(
š
);

614 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

615 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

616 
	`addPÜt
(
out
);

617 
	}
}

619 
šlše
 
	gPmtInvf
::~
	$PmtInvf
(è{
	}
}

622 
šlše
 
PmtWœe
::
	$PmtWœe
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
) :

623 
	$Pmt
(
Çme
) {

624 
ty³_
 = 
WIRE
;

625 
	`¡rıy
(
ty³Name_
, "WIRE");

627 
²ame
[
NAME_LEN
];

628 
size_t
 
i
 = 0; i < 
nIn
; ++i) {

629 
	`¥rštf
(
²ame
, "IN%d", ()
i
);

630 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

631 
š
->
ty³_
 = 
PÜt
::
INPUT
;

632 
	`addPÜt
(
š
);

634 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

635 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

636 
	`addPÜt
(
out
);

637 
	}
}

639 
šlše
 
	gPmtWœe
::~
	$PmtWœe
(è{
	}
}

642 
šlše
 
PmtPuÎ
::
	$PmtPuÎ
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

643 
ty³_
 = 
PULL
;

644 
	`¡rıy
(
ty³Name_
, "PULL");

646 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
("IN");

647 
š
->
ty³_
 = 
PÜt
::
INPUT
;

648 
	`addPÜt
(
š
);

649 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

650 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

651 
	`addPÜt
(
out
);

652 
	}
}

654 
šlše
 
	gPmtPuÎ
::~
	$PmtPuÎ
(è{
	}
}

657 
šlše
 
PmtT›1
::
	$PmtT›1
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

658 
ty³_
 = 
TIE1
;

659 
	`¡rıy
(
ty³Name_
, "TIE1");

661 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("out");

662 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

663 
	`addPÜt
(
out
);

664 
	}
}

666 
šlše
 
	gPmtT›1
::~
	$PmtT›1
(è{
	}
}

669 
šlše
 
PmtT›0
::
	$PmtT›0
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

670 
ty³_
 = 
TIE0
;

671 
	`¡rıy
(
ty³Name_
, "TIE0");

673 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("out");

674 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

675 
	`addPÜt
(
out
);

676 
	}
}

678 
šlše
 
	gPmtT›0
::~
	$PmtT›0
(è{
	}
}

681 
šlše
 
PmtT›X
::
	$PmtT›X
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

682 
ty³_
 = 
TIEX
;

683 
	`¡rıy
(
ty³Name_
, "TIEX");

685 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("out");

686 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

687 
	`addPÜt
(
out
);

688 
	}
}

690 
šlše
 
	gPmtT›X
::~
	$PmtT›X
(è{
	}
}

693 
šlše
 
PmtT›Z
::
	$PmtT›Z
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

694 
ty³_
 = 
TIEZ
;

695 
	`¡rıy
(
ty³Name_
, "TIEZ");

697 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("out");

698 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

699 
	`addPÜt
(
out
);

700 
	}
}

702 
šlše
 
	gPmtT›Z
::~
	$PmtT›Z
(è{
	}
}

705 
šlše
 
PmtUndefšed
::
	$PmtUndefšed
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
size_t
 &
nIn
) :

706 
	$Pmt
(
Çme
) {

707 
ty³_
 = 
UNDEF
;

708 
	`¡rıy
(
ty³Name_
, "UNDEF");

710 
²ame
[
NAME_LEN
];

711 
size_t
 
i
 = 0; i < 
nIn
; ++i) {

712 
	`¥rštf
(
²ame
, "IN%d", ()
i
);

713 
PÜt
 *
š
 = 
Ãw
 
	`PÜt
(
²ame
);

714 
š
->
ty³_
 = 
PÜt
::
INPUT
;

715 
	`addPÜt
(
š
);

717 
PÜt
 *
out
 = 
Ãw
 
	`PÜt
("OUT");

718 
out
->
ty³_
 = 
PÜt
::
OUTPUT
;

719 
	`addPÜt
(
out
);

720 
	}
}

722 
šlše
 
	gPmtUndefšed
::~
	$PmtUndefšed
(è{
	}
}

725 
šlše
 
PmtNmos
::
	$PmtNmos
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

726 
ty³_
 = 
NMOS
;

727 
	`¡rıy
(
ty³Name_
, "NMOS");

729 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

730 
i
->
ty³_
 = 
PÜt
::
INPUT
;

731 
	`addPÜt
(
i
);

732 
PÜt
 *
’
 = 
Ãw
 
	`PÜt
("EN");

733 
’
->
ty³_
 = 
PÜt
::
INPUT
;

734 
	`addPÜt
(
’
);

735 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

736 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

737 
	`addPÜt
(
o
);

738 
	}
}

740 
šlše
 
	gPmtNmos
::~
	$PmtNmos
(è{
	}
}

743 
šlše
 
PmtPmos
::
	$PmtPmos
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

744 
ty³_
 = 
PMOS
;

745 
	`¡rıy
(
ty³Name_
, "PMOS");

747 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

748 
i
->
ty³_
 = 
PÜt
::
INPUT
;

749 
	`addPÜt
(
i
);

750 
PÜt
 *
’
 = 
Ãw
 
	`PÜt
("EN");

751 
’
->
ty³_
 = 
PÜt
::
INPUT
;

752 
	`addPÜt
(
’
);

753 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

754 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

755 
	`addPÜt
(
o
);

756 
	}
}

758 
šlše
 
	gPmtPmos
::~
	$PmtPmos
(è{
	}
}

761 
šlše
 
PmtRnmos
::
	$PmtRnmos
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

762 
ty³_
 = 
RNMOS
;

763 
	`¡rıy
(
ty³Name_
, "RNMOS");

765 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

766 
i
->
ty³_
 = 
PÜt
::
INPUT
;

767 
	`addPÜt
(
i
);

768 
PÜt
 *
’
 = 
Ãw
 
	`PÜt
("EN");

769 
’
->
ty³_
 = 
PÜt
::
INPUT
;

770 
	`addPÜt
(
’
);

771 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

772 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

773 
	`addPÜt
(
o
);

774 
	}
}

776 
šlše
 
	gPmtRnmos
::~
	$PmtRnmos
(è{
	}
}

779 
šlše
 
PmtRpmos
::
	$PmtRpmos
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

780 
ty³_
 = 
RPMOS
;

781 
	`¡rıy
(
ty³Name_
, "RPMOS");

783 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

784 
i
->
ty³_
 = 
PÜt
::
INPUT
;

785 
	`addPÜt
(
i
);

786 
PÜt
 *
pút
 = 
Ãw
 
	`PÜt
("PCNT");

787 
pút
->
ty³_
 = 
PÜt
::
INPUT
;

788 
	`addPÜt
(
pút
);

789 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

790 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

791 
	`addPÜt
(
o
);

792 
	}
}

794 
šlše
 
	gPmtRpmos
::~
	$PmtRpmos
(è{
	}
}

797 
šlše
 
PmtNmosf
::
	$PmtNmosf
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

798 
ty³_
 = 
NMOSF
;

799 
	`¡rıy
(
ty³Name_
, "NMOSF");

801 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

802 
i
->
ty³_
 = 
PÜt
::
INPUT
;

803 
	`addPÜt
(
i
);

804 
PÜt
 *
út
 = 
Ãw
 
	`PÜt
("CNT");

805 
út
->
ty³_
 = 
PÜt
::
INPUT
;

806 
	`addPÜt
(
út
);

807 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

808 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

809 
	`addPÜt
(
o
);

810 
	}
}

812 
šlše
 
	gPmtNmosf
::~
	$PmtNmosf
(è{
	}
}

815 
šlše
 
PmtPmosf
::
	$PmtPmosf
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

816 
ty³_
 = 
PMOSF
;

817 
	`¡rıy
(
ty³Name_
, "PMOSF");

819 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

820 
i
->
ty³_
 = 
PÜt
::
INPUT
;

821 
	`addPÜt
(
i
);

822 
PÜt
 *
út
 = 
Ãw
 
	`PÜt
("CNT");

823 
út
->
ty³_
 = 
PÜt
::
INPUT
;

824 
	`addPÜt
(
út
);

825 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

826 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

827 
	`addPÜt
(
o
);

828 
	}
}

830 
šlše
 
	gPmtPmosf
::~
	$PmtPmosf
(è{
	}
}

833 
šlše
 
PmtCmos1
::
	$PmtCmos1
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

834 
ty³_
 = 
CMOS1
;

835 
	`¡rıy
(
ty³Name_
, "CMOS1");

837 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

838 
i
->
ty³_
 = 
PÜt
::
INPUT
;

839 
	`addPÜt
(
i
);

840 
PÜt
 *
e
 = 
Ãw
 
	`PÜt
("E");

841 
e
->
ty³_
 = 
PÜt
::
INPUT
;

842 
	`addPÜt
(
e
);

843 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
("P");

844 
p
->
ty³_
 = 
PÜt
::
INPUT
;

845 
	`addPÜt
(
p
);

846 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

847 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

848 
	`addPÜt
(
o
);

849 
	}
}

851 
šlše
 
	gPmtCmos1
::~
	$PmtCmos1
(è{
	}
}

854 
šlše
 
PmtCmos2
::
	$PmtCmos2
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

855 
ty³_
 = 
CMOS2
;

856 
	`¡rıy
(
ty³Name_
, "CMOS2");

858 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

859 
i
->
ty³_
 = 
PÜt
::
INPUT
;

860 
	`addPÜt
(
i
);

861 
PÜt
 *
e
 = 
Ãw
 
	`PÜt
("E");

862 
e
->
ty³_
 = 
PÜt
::
INPUT
;

863 
	`addPÜt
(
e
);

864 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
("P");

865 
p
->
ty³_
 = 
PÜt
::
INPUT
;

866 
	`addPÜt
(
p
);

867 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

868 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

869 
	`addPÜt
(
o
);

870 
	}
}

872 
šlše
 
	gPmtCmos2
::~
	$PmtCmos2
(è{
	}
}

875 
šlše
 
PmtRcmos1
::
	$PmtRcmos1
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

876 
ty³_
 = 
RCMOS1
;

877 
	`¡rıy
(
ty³Name_
, "RCMOS1");

879 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

880 
i
->
ty³_
 = 
PÜt
::
INPUT
;

881 
	`addPÜt
(
i
);

882 
PÜt
 *
e
 = 
Ãw
 
	`PÜt
("E");

883 
e
->
ty³_
 = 
PÜt
::
INPUT
;

884 
	`addPÜt
(
e
);

885 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
("P");

886 
p
->
ty³_
 = 
PÜt
::
INPUT
;

887 
	`addPÜt
(
p
);

888 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

889 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

890 
	`addPÜt
(
o
);

891 
	}
}

893 
šlše
 
	gPmtRcmos1
::~
	$PmtRcmos1
(è{
	}
}

896 
šlše
 
PmtRcmos2
::
	$PmtRcmos2
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

897 
ty³_
 = 
RCMOS2
;

898 
	`¡rıy
(
ty³Name_
, "RCMOS2");

900 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

901 
i
->
ty³_
 = 
PÜt
::
INPUT
;

902 
	`addPÜt
(
i
);

903 
PÜt
 *
e
 = 
Ãw
 
	`PÜt
("E");

904 
e
->
ty³_
 = 
PÜt
::
INPUT
;

905 
	`addPÜt
(
e
);

906 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
("P");

907 
p
->
ty³_
 = 
PÜt
::
INPUT
;

908 
	`addPÜt
(
p
);

909 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

910 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

911 
	`addPÜt
(
o
);

912 
	}
}

914 
šlše
 
	gPmtRcmos2
::~
	$PmtRcmos2
(è{
	}
}

917 
šlše
 
PmtCmos1f
::
	$PmtCmos1f
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

918 
ty³_
 = 
CMOS1F
;

919 
	`¡rıy
(
ty³Name_
, "CMOS1F");

921 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

922 
i
->
ty³_
 = 
PÜt
::
INPUT
;

923 
	`addPÜt
(
i
);

924 
PÜt
 *
nút
 = 
Ãw
 
	`PÜt
("NCNT");

925 
nút
->
ty³_
 = 
PÜt
::
INPUT
;

926 
	`addPÜt
(
nút
);

927 
PÜt
 *
pút
 = 
Ãw
 
	`PÜt
("PCNT");

928 
pút
->
ty³_
 = 
PÜt
::
INPUT
;

929 
	`addPÜt
(
pút
);

930 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

931 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

932 
	`addPÜt
(
o
);

933 
	}
}

935 
šlše
 
	gPmtCmos1f
::~
	$PmtCmos1f
(è{
	}
}

938 
šlše
 
PmtCmos2f
::
	$PmtCmos2f
(cÚ¡ * cÚ¡ 
Çme
è: 
	$Pmt
(
Çme
) {

939 
ty³_
 = 
CMOS2F
;

940 
	`¡rıy
(
ty³Name_
, "CMOS2F");

942 
PÜt
 *
i
 = 
Ãw
 
	`PÜt
("I");

943 
i
->
ty³_
 = 
PÜt
::
INPUT
;

944 
	`addPÜt
(
i
);

945 
PÜt
 *
nút
 = 
Ãw
 
	`PÜt
("NCNT");

946 
nút
->
ty³_
 = 
PÜt
::
INPUT
;

947 
	`addPÜt
(
nút
);

948 
PÜt
 *
pút
 = 
Ãw
 
	`PÜt
("PCNT");

949 
pút
->
ty³_
 = 
PÜt
::
INPUT
;

950 
	`addPÜt
(
pút
);

951 
PÜt
 *
o
 = 
Ãw
 
	`PÜt
("O");

952 
o
->
ty³_
 = 
PÜt
::
OUTPUT
;

953 
	`addPÜt
(
o
);

954 
	}
}

956 
šlše
 
	gPmtCmos2f
::~
	$PmtCmos2f
(è{
	}
}

	@interface/src/sdf_file.cpp

8 
	~<c¡dio
>

10 
	~"sdf_fe.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

15 
sdf_f•¬£
(*);

16 
FILE
 *
sdf_feš
;

18 
boŞ
 
	gSdfFe
::
	$»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ 
boŞ
 &
v”bo£
) {

19 
v”bo£_
 = 
v”bo£
;

20 
sdf_feš
 = 
	`fİ’
(
âame
, "r");

21 ià(!
sdf_feš
) {

22 
	`årštf
(
¡d”r
, "**ERROR SdfFile::read(): cannot open‚etlist file");

23 
	`årštf
(
¡d”r
, "`%s'\n", 
âame
);

24  
çl£
;

27 
sucûss_
 = 
Œue
;

28 
»s
 = 
	`sdf_f•¬£
(
this
);

29 ià(
»s
 != 0) {

30 
	`årštf
(
¡d”r
, "**ERROR SdfFile::read(): wrong input format\n");

31  
çl£
;

33 
	`fşo£
(
sdf_feš
);

35  
sucûss_
;

36 
	}
}

38 
boŞ
 
	gSdfFe
::
	$addV”siÚ
(cÚ¡ * cÚ¡ 
v”siÚ
) {

39 ià(
v”bo£_
)

40 
	`´štf
("add v”siÚ: %s\n", 
v”siÚ
);

41  
Œue
;

42 
	}
}

44 
boŞ
 
	gSdfFe
::
	$addDesign
(cÚ¡ * cÚ¡ 
design
) {

45 ià(
v”bo£_
)

46 
	`´štf
("add design: %s\n", 
design
);

47  
Œue
;

48 
	}
}

50 
boŞ
 
	gSdfFe
::
	$addD©e
(cÚ¡ * cÚ¡ 
d©e
) {

51 ià(
v”bo£_
)

52 
	`´štf
("add d©e: %s\n", 
d©e
);

53  
Œue
;

54 
	}
}

56 
boŞ
 
	gSdfFe
::
	$addV’dÜ
(cÚ¡ * cÚ¡ 
v’dÜ
) {

57 ià(
v”bo£_
)

58 
	`´štf
("add v’dÜ: %s\n", 
v’dÜ
);

59  
Œue
;

60 
	}
}

62 
boŞ
 
	gSdfFe
::
	$addProgName
(cÚ¡ * cÚ¡ 
Çme
) {

63 ià(
v”bo£_
)

64 
	`´štf
("add…rog¿m‚ame: %s\n", 
Çme
);

65  
Œue
;

66 
	}
}

68 
boŞ
 
	gSdfFe
::
	$addProgV”siÚ
(cÚ¡ * cÚ¡ 
v”siÚ
) {

69 ià(
v”bo£_
)

70 
	`´štf
("add…rog¿m v”siÚ: %s\n", 
v”siÚ
);

71  
Œue
;

72 
	}
}

74 
boŞ
 
	gSdfFe
::
	$addH›rCh¬
(cÚ¡ &
h›r
) {

75 ià(
v”bo£_
)

76 
	`´štf
("add h›¸ch¬: %c\n", 
h›r
);

77  
Œue
;

78 
	}
}

80 
boŞ
 
	gSdfFe
::
	$addVŞge
(cÚ¡ 
SdfV®ue
 &
vŞt
) {

81 ià(
v”bo£_
) {

82 
	`´štf
("add voltages:");

83 
i
 = 0; i < 
vŞt
.
n
; ++i)

84 
	`´štf
(" %f", 
vŞt
.
v
[
i
]);

85 
	`´štf
("\n");

87  
Œue
;

88 
	}
}

90 
boŞ
 
	gSdfFe
::
	$addProûss
(cÚ¡ * cÚ¡ 
´oc
) {

91 ià(
v”bo£_
)

92 
	`´štf
("add…roûss: %s\n", 
´oc
);

93  
Œue
;

94 
	}
}

96 
boŞ
 
	gSdfFe
::
	$addTem³¿tu»
(cÚ¡ 
SdfV®ue
 &
‹mp
) {

97 ià(
v”bo£_
) {

98 
	`´štf
("addemperature:");

99 
i
 = 0; i < 
‹mp
.
n
; ++i)

100 
	`´štf
(" %f", 
‹mp
.
v
[
i
]);

101 
	`´štf
("\n");

103  
Œue
;

104 
	}
}

106 
boŞ
 
	gSdfFe
::
	$addTimeSÿË
(cÚ¡ &
num
, cÚ¡ * cÚ¡ 
un™
) {

107 ià(
v”bo£_
)

108 
	`´štf
("addimsÿË: %à%s\n", 
num
, 
un™
);

109  
Œue
;

110 
	}
}

112 
boŞ
 
	gSdfFe
::
	$addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
) {

113 ià(
v”bo£_
)

114 
	`´štf
("add c–l: % %s\n", 
ty³
, 
Çme
);

115  
Œue
;

116 
	}
}

118 
boŞ
 
	gSdfFe
::
	$addIoD–ay
(cÚ¡ 
SdfD–ayTy³
 &
ty³
, cÚ¡ 
SdfPÜtS³c
 &
¥ec
,

119 cÚ¡ * cÚ¡ 
pÜt
, cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
) {

120 ià(
v”bo£_
) {

121 
	`´štf
("add io delay: ");

122 ià(
ty³
 =ğ
DELAY_ABSOLUTE
)

123 
	`´štf
("ABSOLUTE ");

125 
	`´štf
("INCREMENT ");

126 
¥ec
.
ty³
) {

127 
SdfPÜtS³c
::
EDGE_NA
:

129 
SdfPÜtS³c
::
EDGE_01
:

130 
	`´štf
("edge 01 ");

132 
SdfPÜtS³c
::
EDGE_10
:

133 
	`´štf
("edge 10 ");

135 
SdfPÜtS³c
::
EDGE_0Z
:

136 
	`´štf
("edge 0Z ");

138 
SdfPÜtS³c
::
EDGE_Z1
:

139 
	`´štf
("edge Z1 ");

141 
SdfPÜtS³c
::
EDGE_1Z
:

142 
	`´štf
("edge 1Z ");

144 
SdfPÜtS³c
::
EDGE_Z0
:

145 
	`´štf
("edge Z0 ");

148 
	`´štf
("% ", 
¥ec
.
pÜt
);

149 
	`´štf
("% ", 
pÜt
);

150 
i
 = 0; i < 
v
.
n
; ++i) {

151 
	`´štf
("{");

152 
j
 = 0; j < 
v
.v[
i
].
n
; ++j) {

153 
	`´štf
("(");

154 
k
 = 0; k < 
v
.v[
i
].v[
j
].
n
; ++k)

155 
	`´štf
("%à", 
v
.v[
i
].v[
j
].v[
k
]);

156 
	`´štf
(") ");

158 
	`´štf
("} ");

160 
	`´štf
("\n");

162  
Œue
;

163 
	}
}

165 
boŞ
 
	gSdfFe
::
	$addIoR‘aš
(cÚ¡ 
SdfD–ayTy³
 &
ty³
, cÚ¡ 
SdfPÜtS³c
 &
¥ec
,

166 cÚ¡ * cÚ¡ 
pÜt
, cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
) {

167 ià(
v”bo£_
) {

168 
	`´štf
("add io„etain: ");

169 ià(
ty³
 =ğ
DELAY_ABSOLUTE
)

170 
	`´štf
("ABSOLUTE ");

172 
	`´štf
("INCREMENT ");

173 
¥ec
.
ty³
) {

174 
SdfPÜtS³c
::
EDGE_NA
:

176 
SdfPÜtS³c
::
EDGE_01
:

177 
	`´štf
("edge 01 ");

179 
SdfPÜtS³c
::
EDGE_10
:

180 
	`´štf
("edge 10 ");

182 
SdfPÜtS³c
::
EDGE_0Z
:

183 
	`´štf
("edge 0Z ");

185 
SdfPÜtS³c
::
EDGE_Z1
:

186 
	`´štf
("edge Z1 ");

188 
SdfPÜtS³c
::
EDGE_1Z
:

189 
	`´štf
("edge 1Z ");

191 
SdfPÜtS³c
::
EDGE_Z0
:

192 
	`´štf
("edge Z0 ");

195 
	`´štf
("% ", 
¥ec
.
pÜt
);

196 
	`´štf
("% ", 
pÜt
);

197 
i
 = 0; i < 
v
.
n
; ++i) {

198 
	`´štf
("{");

199 
j
 = 0; j < 
v
.v[
i
].
n
; ++j) {

200 
	`´štf
("(");

201 
k
 = 0; k < 
v
.v[
i
].v[
j
].
n
; ++k)

202 
	`´štf
("%à", 
v
.v[
i
].v[
j
].v[
k
]);

203 
	`´štf
(") ");

205 
	`´štf
("} ");

207 
	`´štf
("\n");

209  
Œue
;

210 
	}
}

212 
boŞ
 
	gSdfFe
::
	$addPÜtD–ay
(cÚ¡ 
SdfD–ayTy³
 &
ty³
, cÚ¡ * cÚ¡ 
pÜt
,

213 cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
) {

214 ià(
v”bo£_
) {

215 
	`´štf
("add…ort delay: ");

216 ià(
ty³
 =ğ
DELAY_ABSOLUTE
)

217 
	`´štf
("ABSOLUTE ");

219 
	`´štf
("INCREMENT ");

220 
	`´štf
("% ", 
pÜt
);

221 
i
 = 0; i < 
v
.
n
; ++i) {

222 
	`´štf
("{");

223 
j
 = 0; j < 
v
.v[
i
].
n
; ++j) {

224 
	`´štf
("(");

225 
k
 = 0; k < 
v
.v[
i
].v[
j
].
n
; ++k)

226 
	`´štf
("%à", 
v
.v[
i
].v[
j
].v[
k
]);

227 
	`´štf
(") ");

229 
	`´štf
("} ");

231 
	`´štf
("\n");

233  
Œue
;

234 
	}
}

236 
boŞ
 
	gSdfFe
::
	$addIÁ”cÚÃùD–ay
(cÚ¡ 
SdfD–ayTy³
 &
ty³
,

237 cÚ¡ * cÚ¡ 
äom
,

238 cÚ¡ * cÚ¡ 
to
,

239 cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
) {

240 ià(
v”bo£_
) {

241 
	`´štf
("add interconnect delay: ");

242 ià(
ty³
 =ğ
DELAY_ABSOLUTE
)

243 
	`´štf
("ABSOLUTE ");

245 
	`´štf
("INCREMENT ");

246 
	`´štf
("% tØ% ", 
äom
, 
to
);

247 
i
 = 0; i < 
v
.
n
; ++i) {

248 
	`´štf
("{");

249 
j
 = 0; j < 
v
.v[
i
].
n
; ++j) {

250 
	`´štf
("(");

251 
k
 = 0; k < 
v
.v[
i
].v[
j
].
n
; ++k)

252 
	`´štf
("%à", 
v
.v[
i
].v[
j
].v[
k
]);

253 
	`´štf
(") ");

255 
	`´štf
("} ");

257 
	`´štf
("\n");

259  
Œue
;

260 
	}
}

262 
boŞ
 
	gSdfFe
::
	$addDeviûD–ay
(cÚ¡ 
SdfD–ayTy³
 &
ty³
, cÚ¡ * cÚ¡ 
dev
,

263 cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
) {

264 ià(
v”bo£_
) {

265 
	`´štf
("add device delay: ");

266 ià(
ty³
 =ğ
DELAY_ABSOLUTE
)

267 
	`´štf
("ABSOLUTE ");

269 
	`´štf
("INCREMENT ");

270 
	`´štf
("% ", 
dev
);

271 
i
 = 0; i < 
v
.
n
; ++i) {

272 
	`´štf
("{");

273 
j
 = 0; j < 
v
.v[
i
].
n
; ++j) {

274 
	`´štf
("(");

275 
k
 = 0; k < 
v
.v[
i
].v[
j
].
n
; ++k)

276 
	`´štf
("%à", 
v
.v[
i
].v[
j
].v[
k
]);

277 
	`´štf
(") ");

279 
	`´štf
("} ");

281 
	`´štf
("\n");

283  
Œue
;

284 
	}
}

	@interface/src/sdf_file.h

9 #iâdeà
_INTF_SDF_FILE_H_


10 
	#_INTF_SDF_FILE_H_


	)

12 
	~"glob®.h
"

14 
Çme¥aû
 
	gIÁfNs
 {

16 
	eSdfD–ayTy³
 { 
	gDELAY_ABSOLUTE
, 
	gDELAY_INCREMENT
 };

18 
	sSdfPÜtS³c
 {

19 
	eEdgeTy³
 { 
	gEDGE_NA
, 
	gEDGE_01
, 
	gEDGE_10
, 
	gEDGE_0Z
, 
	gEDGE_Z1
,

20 
	gEDGE_1Z
, 
	gEDGE_Z0
 };

22 
EdgeTy³
 
	gty³
;

23 
	gpÜt
[
NAME_LEN
];

26 
	sSdfIoP©h
 {

27 
	gš
[
NAME_LEN
];

28 
	gout
[
NAME_LEN
];

31 
	sSdfV®ue
 {

32 
	gn
;

33 
	gv
[3];

36 
	sSdfD–ayV®ue
 {

37 
	gn
;

38 
SdfV®ue
 
	gv
[3];

41 
	sSdfD–ayV®ueLi¡
 {

42 
	gn
;

43 
SdfD–ayV®ue
 
	gv
[12];

46 
	sSdfD–ayDef
 {

47 
	eTy³
 { 
	gIO_DELAY
, 
	gIO_RETAIN
, 
	gPORT_DELAY
, 
	gINTER_DELAY
,

48 
	gDEVICE_DELAY
 };

49 
Ty³
 
	gty³
;

50 
SdfPÜtS³c
 
	gp¥ec
;

51 
	gp1
[
NAME_LEN
];

52 
	gp2
[
NAME_LEN
];

53 
SdfD–ayV®ueLi¡
 
	gvli¡
;

54 
SdfD–ayDef
 *
	gÃxt
;

55 
SdfD–ayDef
 *
	gh—d
;

58 şas 
	cSdfFe
 {

59 
	gpublic
:

60 
SdfFe
();

61 
	gvœtu®
 ~
SdfFe
();

62 
vœtu®
 
boŞ
 
»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ boŞ &
v”bo£
 = 
çl£
);

64 
vœtu®
 
boŞ
 
addV”siÚ
(cÚ¡ * cÚ¡ 
v”siÚ
);

65 
vœtu®
 
boŞ
 
addD©e
(cÚ¡ * cÚ¡ 
d©e
);

66 
vœtu®
 
boŞ
 
addDesign
(cÚ¡ * cÚ¡ 
design
);

67 
vœtu®
 
boŞ
 
addV’dÜ
(cÚ¡ * cÚ¡ 
v’dÜ
);

68 
vœtu®
 
boŞ
 
addProgName
(cÚ¡ * cÚ¡ 
Çme
);

69 
vœtu®
 
boŞ
 
addProgV”siÚ
(cÚ¡ * cÚ¡ 
v”siÚ
);

70 
vœtu®
 
boŞ
 
addH›rCh¬
(cÚ¡ &
h›r
);

71 
vœtu®
 
boŞ
 
addVŞge
(cÚ¡ 
SdfV®ue
 &
vŞt
);

72 
vœtu®
 
boŞ
 
addProûss
(cÚ¡ * cÚ¡ 
c
);

73 
vœtu®
 
boŞ
 
addTem³¿tu»
(cÚ¡ 
SdfV®ue
 &
‹mp
);

74 
vœtu®
 
boŞ
 
addTimeSÿË
(cÚ¡ &
num
, cÚ¡ * cÚ¡ 
un™
);

75 
vœtu®
 
boŞ
 
addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
);

76 
vœtu®
 
boŞ
 
addIoD–ay
(cÚ¡ 
SdfD–ayTy³
 &
ty³
,

77 cÚ¡ 
SdfPÜtS³c
 &
¥ec
,

78 cÚ¡ * cÚ¡ 
pÜt
,

79 cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
);

80 
vœtu®
 
boŞ
 
addIoR‘aš
(cÚ¡ 
SdfD–ayTy³
 &
ty³
,

81 cÚ¡ 
SdfPÜtS³c
 &
¥ec
,

82 cÚ¡ * cÚ¡ 
pÜt
,

83 cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
);

84 
vœtu®
 
boŞ
 
addPÜtD–ay
(cÚ¡ 
SdfD–ayTy³
 &
ty³
,

85 cÚ¡ * cÚ¡ 
pÜt
,

86 cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
);

87 
vœtu®
 
boŞ
 
addIÁ”cÚÃùD–ay
(cÚ¡ 
SdfD–ayTy³
 &
ty³
,

88 cÚ¡ * cÚ¡ 
äom
,

89 cÚ¡ * cÚ¡ 
to
,

90 cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
);

91 
vœtu®
 
boŞ
 
addDeviûD–ay
(cÚ¡ 
SdfD–ayTy³
 &
ty³
,

92 cÚ¡ * cÚ¡ 
dev
,

93 cÚ¡ 
SdfD–ayV®ueLi¡
 &
v
);

94 
	g´Ùeùed
:

95 
boŞ
 
sucûss_
;

96 
boŞ
 
	gv”bo£_
;

99 
šlše
 
	gSdfFe
::
	$SdfFe
(è{
	}
}

100 
šlše
 
SdfFe
::~
	$SdfFe
(è{
	}
}

102 
šlše
 
	$sdfV®ueCİy
(
SdfV®ue
 &
v1
, SdfV®u&
v2
) {

103 
v1
.
n
 = 
v2
.n;

104 
v1
.
v
[0] = 
v2
.v[0];

105 
v1
.
v
[1] = 
v2
.v[1];

106 
v1
.
v
[2] = 
v2
.v[2];

107 
	}
}

109 
šlše
 
	$sdfD–ayV®ueCİy
(
SdfD–ayV®ue
 &
v1
, SdfD–ayV®u&
v2
) {

110 
v1
.
n
 = 
v2
.n;

111 
	`sdfV®ueCİy
(
v1
.
v
[0], 
v2
.v[0]);

112 
	`sdfV®ueCİy
(
v1
.
v
[1], 
v2
.v[1]);

113 
	`sdfV®ueCİy
(
v1
.
v
[2], 
v2
.v[2]);

114 
	}
}

116 
šlše
 
	$sdfD–ayV®ueLi¡Cİy
(
SdfD–ayV®ueLi¡
 &
v1
,

117 
SdfD–ayV®ueLi¡
 &
v2
) {

118 
v1
.
n
 = 
v2
.n;

119 
i
 = 0; i < 12; ++i)

120 
	`sdfD–ayV®ueCİy
(
v1
.
v
[
i
], 
v2
.v[i]);

121 
	}
}

	@interface/src/sdf_test.cpp

8 
	~<c¡dio
>

9 
	~<c¡dlib
>

11 
	~"sdf_fe.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

14 
usšg
 
Çme¥aû
 
	gIÁfNs
;

17 
	$maš
(
¬gc
, **
¬gv
) {

18 ià(
¬gc
 < 2) {

19 
	`årštf
(
¡d”r
, "**ERROR main():…lease…rovide input verilog\n");

20 
	`ex™
(0);

23 
SdfFe
 *
sdf
 = 
Ãw
 SdfFile;

24 ià(!
sdf
->
	`»ad
(
¬gv
[1], 
Œue
)) {

25 
	`årštf
(
¡d”r
, "**ERROR main(): SDF…arser failed\n");

26 
	`ex™
(0);

29 
d–‘e
 
sdf
;

32 
	}
}

	@interface/src/techlib.cpp

8 
	~<iomª
>

9 
	~<®gÜ™hm
>

11 
	~"‹chlib.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

14 
usšg
 
Çme¥aû
 
	gIÁfNs
;

17 
boŞ
 
	gTechlib
::
	$check
(cÚ¡ 
boŞ
 &
v”bo£
) const {

18 
boŞ
 
»s
 = 
Œue
;

19 
size_t
 
i
 = 0; i < 
	`g‘NC–l
(); ++i) {

20 
C–l
 *
c
 = 
ûÎs_
[
i
];

22 
size_t
 
i
 = 0; i < 
c
->
	`g‘NPÜt
(); ++i) {

23 
PÜt
 *
p
 = 
c
->
	`g‘PÜt
(
i
);

24 ià(
p
->
ty³_
 =ğ
PÜt
::
NA
) {

25 ià(
v”bo£
) {

26 
	`årštf
(
¡d”r
, "**WARN Techlib::check():…ort ");

27 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
p
->name_);

28 
	`årštf
(
¡d”r
, "has‚oype\n");

31 ià(
p
->
tİ_
 !ğ
c
) {

32 
»s
 = 
çl£
;

33 ià(
v”bo£
) {

34 ià(!
p
->
tİ_
) {

35 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():…ort ");

36 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
p
->name_);

37 
	`årštf
(
¡d”r
, "has‚oop cell\n");

40 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():…ort ");

41 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
p
->name_);

42 
	`årštf
(
¡d”r
, "has invalidop cell ");

43 
	`årštf
(
¡d”r
, "`%s'\n", 
p
->
tİ_
->
Çme_
);

47 
N‘
 *
n
 = 
p
->
šN‘_
;

48 ià(!
n
) {

49 ià(
v”bo£
) {

50 
	`årštf
(
¡d”r
, "**WARN Techlib::check():…ort ");

51 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
p
->name_);

52 
	`årštf
(
¡d”r
, "unconnected\n");

55 ià(!
c
->
	`g‘N‘
(
n
->
Çme_
)) {

56 
»s
 = 
çl£
;

57 ià(
v”bo£
) {

58 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():…ort ");

59 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
p
->name_);

60 
	`årštf
(
¡d”r
, "connectedo invalid‚et ");

61 
	`årštf
(
¡d”r
, "`%s'\n", 
n
->
Çme_
);

66 
size_t
 
i
 = 0; i < 
c
->
	`g‘NN‘
(); ++i) {

67 
N‘
 *
n
 = 
c
->
	`g‘N‘
(
i
);

68 ià(
n
->
	`g‘NPÜt
() < 2) {

69 
»s
 = 
çl£
;

70 ià(
v”bo£
) {

71 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():‚et ");

72 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
n
->name_);

73 
	`årštf
(
¡d”r
, "is floating\n");

76 ià(
n
->
tİ_
 !ğ
c
) {

77 
»s
 = 
çl£
;

78 ià(
v”bo£
) {

79 ià(!
n
->
tİ_
) {

80 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():‚et ");

81 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
n
->name_);

82 
	`årštf
(
¡d”r
, "has‚oop cell\n");

85 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():‚et ");

86 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
n
->name_);

87 
	`årštf
(
¡d”r
, "has invalidop cell ");

88 
	`årštf
(
¡d”r
, "`%s'\n", 
n
->
tİ_
->
Çme_
);

92 
size_t
 
j
 = 0; j < 
n
->
	`g‘NPÜt
(); ++j) {

93 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(
j
);

94 ià((
p
->
tİ_
 !ğ
n
->tİ_ &&…->
exN‘_
 !=‚)

95 || (
p
->
tİ_
 =ğ
n
->tİ_ &&…->
šN‘_
 !=‚)) {

96 
»s
 = 
çl£
;

97 ià(
v”bo£
) {

98 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():‚et ");

99 
	`årštf
(
¡d”r
, "`%s/%s' ", 
c
->
Çme_
, 
n
->name_);

100 
	`årštf
(
¡d”r
, "not connectedo…ort ");

101 
	`årštf
(
¡d”r
, "`%s/%s'\n", 
c
->
Çme_
, 
p
->name_);

107 
size_t
 
i
 = 0; i < 
c
->
	`g‘NC–l
(); ++i) {

108 
C–l
 *
pmt
 = 
c
->
	`g‘C–l
(
i
);

109 ià(
pmt
->
tİ_
 !ğ
c
) {

110 
»s
 = 
çl£
;

111 ià(
v”bo£
) {

112 ià(!
pmt
->
tİ_
) {

113 
	`årštf
(
¡d”r
, "**ERROR Techlib::check(): ");

114 
	`årštf
(
¡d”r
, "´im™iv`%s/", 
c
->
Çme_
);

115 
	`årštf
(
¡d”r
, "%s' ", 
pmt
->
Çme_
);

116 
	`årštf
(
¡d”r
, "has‚oop cell\n");

119 
	`årštf
(
¡d”r
, "**ERROR Techlib::check(): ");

120 
	`årštf
(
¡d”r
, "´im™iv`%s/", 
c
->
Çme_
);

121 
	`årštf
(
¡d”r
, "%s' ", 
pmt
->
Çme_
);

122 
	`årštf
(
¡d”r
, "has invalidop cell ");

123 
	`årštf
(
¡d”r
, "`%s'\n", 
pmt
->
tİ_
->
Çme_
);

127 
size_t
 
j
 = 0; j < 
pmt
->
	`g‘NPÜt
(); ++j) {

128 
PÜt
 *
p
 = 
pmt
->
	`g‘PÜt
(
j
);

129 ià(!
p
->
exN‘_
) {

130 ià(
v”bo£
) {

131 
	`årštf
(
¡d”r
, "**WARN Techlib::check():…ort ");

132 
	`årštf
(
¡d”r
, "`%s/%s", 
c
->
Çme_
, 
pmt
->name_);

133 
	`årštf
(
¡d”r
, "/%s' uncÚÃùed\n", 
p
->
Çme_
);

136 ià(
p
->
exN‘_
->
tİ_
 !ğ
c
) {

137 
»s
 = 
çl£
;

138 ià(
v”bo£
) {

139 
	`årštf
(
¡d”r
, "**ERROR Techlib::check():…ort ");

140 
	`årštf
(
¡d”r
, "`%s/%s", 
c
->
Çme_
, 
pmt
->name_);

141 
	`årštf
(
¡d”r
, "/%s' ", 
p
->
Çme_
);

142 
	`årštf
(
¡d”r
, "connectedo invalid‚et ");

143 
	`årštf
(
¡d”r
, "`%s'\n", 
p
->
exN‘_
->
Çme_
);

151  
»s
;

152 
	}
}

154 
boŞ
 
	gTechlib
::
	$Ëv–ize
() {

155 
size_t
 
maxNPmt
 = 0;

156 
size_t
 
i
 = 0; i < 
ûÎs_
.
	`size
(); ++i)

157 ià(
ûÎs_
[
i
]->
	`g‘NC–l
(è> 
maxNPmt
)

158 
maxNPmt
 = 
ûÎs_
[
i
]->
	`g‘NC–l
();

160 
boŞ
 
´oûs£d
[
maxNPmt
];

161 
boŞ
 
Ëv–ized
[
maxNPmt
];

163 
size_t
 
i
 = 0; i < 
ûÎs_
.
	`size
(); ++i) {

164 ià(
	`hasPmt
(
i
, 
Pmt
::
DFF
è|| hasPmt(i, Pmt::
DLAT
))

166 
C–l
 *
tİ
 = 
ûÎs_
[
i
];

168 
size_t
 
j
 = 0; j < 
maxNPmt
; ++j) {

169 
´oûs£d
[
j
] = 
çl£
;

170 
Ëv–ized
[
j
] = 
çl£
;

173 
queue
<
C–l
 *> 
cque
;

176 
size_t
 
j
 = 0; j < 
tİ
->
	`g‘NPÜt
(); ++j) {

177 
PÜt
 *
p
 = 
tİ
->
	`g‘PÜt
(
j
);

178 ià(
p
->
ty³_
 !ğ
PÜt
::
INPUT
)

180 
C–lS‘
 
ûÎs
 = 
tİ
->
	`g‘PÜtC–ls
(
j
);

181 
C–lS‘
::
™”©Ü
 
™
 = 
ûÎs
.
	`begš
();

182  ; 
™
 !ğ
ûÎs
.
	`’d
(); ++it) {

183 ià(
´oûs£d
[(*
™
)->
id_
])

185 
´oûs£d
[(*
™
)->
id_
] = 
Œue
;

186 
cque
.
	`push
((*
™
));

191 
size_t
 
i
 = 0; i < 
tİ
->
	`g‘NC–l
(); ++i) {

192 
C–l
 *
c
 = 
tİ
->
	`g‘C–l
(
i
);

193 
boŞ
 
hasIÅut
 = 
çl£
;

194 
size_t
 
j
 = 0; j < 
c
->
	`g‘NPÜt
(); ++j) {

195 ià(
c
->
	`g‘PÜt
(
j
)->
ty³_
 =ğ
PÜt
::
INPUT
) {

196 
hasIÅut
 = 
Œue
;

200 ià(
hasIÅut
)

202 
c
->
lvl_
 = 0;

203 
´oûs£d
[
i
] = 
Œue
;

204 
Ëv–ized
[
i
] = 
Œue
;

205 
C–lS‘
 
ûÎs
 = 
tİ
->
	`g‘Fªout
(
i
);

206 
C–lS‘
::
™”©Ü
 
™
 = 
ûÎs
.
	`begš
(); iˆ!ğûÎs.
	`’d
();

207 ++
™
) {

208 ià(
´oûs£d
[(*
™
)->
id_
])

210 
´oûs£d
[(*
™
)->
id_
] = 
Œue
;

211 
cque
.
	`push
((*
™
));

215 !
cque
.
	`em±y
()) {

216 
C–l
 *
c
 = 
cque
.
	`äÚt
();

217 
cque
.
	`pİ
();

220 
maxLvl
 = 0;

221 
boŞ
 
»ady
 = 
Œue
;

222 
C–lS‘
 
fis
 = 
tİ
->
	`g‘Fªš
(
c
->
id_
);

223 
C–lS‘
::
™”©Ü
 
™
 = 
fis
.
	`begš
(); iˆ!ğfis.
	`’d
(); ++it) {

224 ià(!
Ëv–ized
[(*
™
)->
id_
]) {

225 
»ady
 = 
çl£
;

228 ià((*
™
)->
lvl_
 > 
maxLvl
)

229 
maxLvl
 = (*
™
)->
lvl_
;

231 ià(!
»ady
) {

232 
cque
.
	`push
(
c
);

237 
c
->
lvl_
 = 
maxLvl
 + 1;

238 
Ëv–ized
[
c
->
id_
] = 
Œue
;

241 
C–lS‘
 
fos
 = 
tİ
->
	`g‘Fªout
(
c
->
id_
);

242 
C–lS‘
::
™”©Ü
 
™
 = 
fos
.
	`begš
(); iˆ!ğfos.
	`’d
(); ++it) {

243 ià(
´oûs£d
[(*
™
)->
id_
])

245 
cque
.
	`push
((*
™
));

246 
´oûs£d
[(*
™
)->
id_
] = 
Œue
;

251 
	`¡abË_sÜt
(
tİ
->
	`g‘C–ls
()->
	`begš
(),İ->g‘C–ls()->
	`’d
(),

252 
cmpC–lLvl
);

255 
size_t
 
i
 = 0; i < 
tİ
->
	`g‘NC–l
(); ++i)

256 
tİ
->
	`g‘C–l
(
i
)->
id_
 = i;

260  
Œue
;

261 
	}
}

	@interface/src/techlib.h

8 #iâdeà
_INTF_TECHLIB_H_


9 
	#_INTF_TECHLIB_H_


	)

11 
	~<queue
>

13 
	~"´im™ive.h
"

15 
Çme¥aû
 
	gIÁfNs
 {

17 şas 
	cTechlib
 {

18 
	gpublic
:

19 
Techlib
();

20 ~
Techlib
();

22 
boŞ
 
addC–l
(
C–l
 *
c
);

23 
size_t
 
g‘NC–l
() const;

24 
C–l
 *
g‘C–l
(cÚ¡ 
size_t
 &
i
) const;

25 
C–l
 *
g‘C–l
(cÚ¡ * cÚ¡ 
Çme
) const;

27 
boŞ
 
hasPmt
(cÚ¡ 
size_t
 &
i
, cÚ¡ 
Pmt
::
Ty³
 &
ty³
) const;

28 
boŞ
 
hasPmt
(cÚ¡ * cÚ¡ 
Çme
, cÚ¡ 
Pmt
::
Ty³
 &
ty³
) const;

30 
boŞ
 
check
(cÚ¡ boŞ &
v”bo£
 = 
çl£
) const;

31 
boŞ
 
Ëv–ize
();

33 
	g´iv©e
:

34 
C–lVec
 
ûÎs_
;

35 
C–lM­
 
	gÇmeToC–l_
;

39 
šlše
 
	gTechlib
::
	$Techlib
(è{
	}
}

41 
šlše
 
Techlib
::~
	$Techlib
(è{
	}
}

43 
šlše
 
boŞ
 
Techlib
::
	$addC–l
(
C–l
 *
c
) {

44 
C–lM­
::
™”©Ü
 
™
 = 
ÇmeToC–l_
.
	`fšd
(
c
->
Çme_
);

45 ià(
™
 !ğ
ÇmeToC–l_
.
	`’d
())

46  
çl£
;

47 
ûÎs_
.
	`push_back
(
c
);

48 
ÇmeToC–l_
[
c
->
Çme_
] = c;

49 
c
->
id_
 = 
ûÎs_
.
	`size
() - 1;

50  
Œue
;

51 
	}
}

53 
šlše
 
size_t
 
	gTechlib
::
	$g‘NC–l
() const {

54  
ûÎs_
.
	`size
();

55 
	}
}

57 
šlše
 
C–l
 *
	gTechlib
::
	$g‘C–l
(cÚ¡ 
size_t
 &
i
) const {

58  
i
 < 
ûÎs_
.
	`size
(è? c–ls_[i] : 
NULL
;

59 
	}
}

61 
šlše
 
C–l
 *
	gTechlib
::
	$g‘C–l
(cÚ¡ * cÚ¡ 
Çme
) const {

62 
C–lM­
::
cÚ¡_™”©Ü
 
™
 = 
ÇmeToC–l_
.
	`fšd
(
Çme
);

63  
™
 =ğ
ÇmeToC–l_
.
	`’d
(è? 
NULL
 : it->
£cÚd
;

64 
	}
}

66 
šlše
 
boŞ
 
	gTechlib
::
	$hasPmt
(cÚ¡ 
size_t
 &
i
, cÚ¡ 
Pmt
::
Ty³
 &
ty³
) const {

67 ià(
i
 >ğ
ûÎs_
.
	`size
())

68  
çl£
;

69 
¡d
::
queue
<
C–l
 *> 
cque
;

70 
cque
.
	`push
(
ûÎs_
[
i
]);

71 !
cque
.
	`em±y
()) {

72 
C–l
 *
c
 = 
cque
.
	`äÚt
();

73 
cque
.
	`pİ
();

74 
size_t
 
j
 = 0; j < 
c
->
	`g‘NC–l
(); ++j) {

75 ià(
c
->
	`g‘C–l
(
j
)->
libc_
)

76 
cque
.
	`push
(
c
->
	`g‘C–l
(
j
)->
libc_
);

78 ià(((
Pmt
 *)
c
->
	`g‘C–l
(
j
))->
ty³_
 =ğ
ty³
)

79  
Œue
;

82  
çl£
;

83 
	}
}

85 
šlše
 
boŞ
 
	gTechlib
::
	$hasPmt
(cÚ¡ * cÚ¡ 
Çme
,

86 cÚ¡ 
Pmt
::
Ty³
 &
ty³
) const {

87 
C–lM­
::
cÚ¡_™”©Ü
 
™
 = 
ÇmeToC–l_
.
	`fšd
(
Çme
);

88 ià(
™
 =ğ
ÇmeToC–l_
.
	`’d
())

89  
çl£
;

90  
	`hasPmt
(
™
->
£cÚd
->
id_
, 
ty³
);

91 
	}
}

	@interface/src/techlib_builder.cpp

8 
	~"‹chlib_bud”.h
"

10 
usšg
 
Çme¥aû
 
	g¡d
;

11 
usšg
 
Çme¥aû
 
	gIÁfNs
;

14 
boŞ
 
	gMdtLibBud”
::
	$»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ 
boŞ
 &
v”bo£
) {

15 ià(!
MdtFe
::
	`»ad
(
âame
, 
v”bo£
))

16  
çl£
;

17 ià(!
	`checkIn¡ªûs
())

18  
çl£
;

19 
	`»moveFlßtšgN‘s
();

20  
Œue
;

21 
	}
}

23 
	gMdtLibBud”
::
	$addMod–
(cÚ¡ * cÚ¡ 
Çme
) {

24 ià(!
sucûss_
)

26 ià(
lib_
->
	`g‘C–l
(
Çme
)) {

27 ià(
v”bo£_
) {

28 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addModel(): cell ");

29 
	`årštf
(
¡d”r
, "`%s'‡Ì—dyƒxi¡s\n", 
Çme
);

31 
sucûss_
 = 
çl£
;

34 
curC–l_
 = 
Ãw
 
	`C–l
(
Çme
);

35 
lib_
->
	`addC–l
(
curC–l_
);

36 
	}
}

38 
	gMdtLibBud”
::
	$addPÜts
(
MdtNames
 * cÚ¡ 
pÜts
) {

39 ià(!
sucûss_
)

41 
MdtNames
 *
pÜt
 = 
pÜts
->
h—d
;

42 
pÜt
) {

43 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
(
pÜt
->
Çme
);

44 
p
->
tİ_
 = 
curC–l_
;

45 ià(!
curC–l_
->
	`addPÜt
(
p
)) {

46 ià(
v”bo£_
) {

47 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addPorts():…ort ");

48 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curC–l_
->
Çme_
, 
pÜt
->
Çme
);

49 
	`årštf
(
¡d”r
, "alreadyƒxists\n");

51 
sucûss_
 = 
çl£
;

54 
pÜt
 =…Üt->
Ãxt
;

56 
	}
}

58 
	gMdtLibBud”
::
	$£tIÅutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

59 ià(!
sucûss_
)

61 ià(!
	`addPÜtN‘s
(
Ãts
)) {

62 
sucûss_
 = 
çl£
;

65 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

66 
Ãt
) {

67 
PÜt
 *
p
 = 
curC–l_
->
	`g‘PÜt
(
Ãt
->
Çme
);

68 
p
->
ty³_
 = 
PÜt
::
INPUT
;

69 
Ãt
 =‚‘->
Ãxt
;

71 
	}
}

73 
	gMdtLibBud”
::
	$£tOuutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

74 ià(!
sucûss_
)

76 ià(!
	`addPÜtN‘s
(
Ãts
)) {

77 
sucûss_
 = 
çl£
;

80 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

81 
Ãt
) {

82 
PÜt
 *
p
 = 
curC–l_
->
	`g‘PÜt
(
Ãt
->
Çme
);

83 
p
->
ty³_
 = 
PÜt
::
OUTPUT
;

84 
Ãt
 =‚‘->
Ãxt
;

86 
	}
}

88 
	gMdtLibBud”
::
	$£tInoutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

89 ià(!
sucûss_
)

91 ià(!
	`addPÜtN‘s
(
Ãts
)) {

92 
sucûss_
 = 
çl£
;

95 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

96 
Ãt
) {

97 
PÜt
 *
p
 = 
curC–l_
->
	`g‘PÜt
(
Ãt
->
Çme
);

98 
p
->
ty³_
 = 
PÜt
::
OUTPUT
;

99 
Ãt
 =‚‘->
Ãxt
;

101 
	}
}

103 
	gMdtLibBud”
::
	$£tIÁ”nN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

104 ià(!
sucûss_
)

106 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

107 
Ãt
) {

108 
N‘
 *
n
 = 
Ãw
 
	`N‘
(
Ãt
->
Çme
);

109 
n
->
tİ_
 = 
curC–l_
;

110 ià(!
curC–l_
->
	`addN‘
(
n
)) {

111 ià(
v”bo£_
) {

112 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::setInternNets(): ");

113 
	`årštf
(
¡d”r
, "Ãˆ`%s/%s' ", 
curC–l_
->
Çme_
, 
Ãt
->
Çme
);

114 
	`årštf
(
¡d”r
, "alreadyƒxists\n");

116 
sucûss_
 = 
çl£
;

119 
Ãt
 =‚‘->
Ãxt
;

121 
	}
}

123 
	gMdtLibBud”
::
	$addPrim™ive
(cÚ¡ * cÚ¡ 
ty³
,

124 cÚ¡ * cÚ¡ 
Çme
,

125 
MdtNames
 * cÚ¡ 
pÜts
) {

126 ià(!
sucûss_
)

128 
úame
[
NAME_LEN
];

129 ià(!
	`¡rcmp
(
Çme
, ""))

130 
	`¥rštf
(
úame
, "LOO%d", ()
curC–l_
->
	`g‘NC–l
());

132 
	`¡rıy
(
úame
, 
Çme
);

133 ià(
curC–l_
->
	`g‘C–l
(
úame
)) {

134 ià(
v”bo£_
) {

135 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addPrimitive(): ");

136 
	`årštf
(
¡d”r
, "´im™iv`%s/%s' ", 
curC–l_
->
Çme_
, 
úame
);

137 
	`årštf
(
¡d”r
, "alreadyƒxists\n");

139 
sucûss_
 = 
çl£
;

142 
MdtNames
 *
pÜt
 = 
pÜts
->
h—d
;

143 
size_t
 
pÜtSize
 = 0;

144 
pÜt
) {

145 
pÜtSize
++;

146 
pÜt
 =…Üt->
Ãxt
;

149 
Pmt
 *
pmt
 = 
NULL
;

150 ià(!
	`¡rcmp
(
ty³
, "_and"))

151 
pmt
 = 
Ãw
 
	`PmtAnd
(
úame
, 
pÜtSize
 - 1);

152 ià(!
	`¡rcmp
(
ty³
, "_nand"))

153 
pmt
 = 
Ãw
 
	`PmtNªd
(
úame
, 
pÜtSize
 - 1);

154 ià(!
	`¡rcmp
(
ty³
, "_or"))

155 
pmt
 = 
Ãw
 
	`PmtOr
(
úame
, 
pÜtSize
 - 1);

156 ià(!
	`¡rcmp
(
ty³
, "_nor"))

157 
pmt
 = 
Ãw
 
	`PmtNÜ
(
úame
, 
pÜtSize
 - 1);

158 ià(!
	`¡rcmp
(
ty³
, "_inv"))

159 
pmt
 = 
Ãw
 
	`PmtInv
(
úame
);

160 ià(!
	`¡rcmp
(
ty³
, "_buf"))

161 
pmt
 = 
Ãw
 
	`PmtBuf
(
úame
);

162 ià(!
	`¡rcmp
(
ty³
, "_bufz"))

163 
pmt
 = 
Ãw
 
	`PmtBufz
(
úame
);

164 ià(!
	`¡rcmp
(
ty³
, "_xor"))

165 
pmt
 = 
Ãw
 
	`PmtXÜ
(
úame
, 
pÜtSize
 - 1);

166 ià(!
	`¡rcmp
(
ty³
, "_xnor"))

167 
pmt
 = 
Ãw
 
	`PmtXnÜ
(
úame
, 
pÜtSize
 - 1);

168 ià(!
	`¡rcmp
(
ty³
, "_tsl"))

169 
pmt
 = 
Ãw
 
	`PmtT¦
(
úame
);

170 ià(!
	`¡rcmp
(
ty³
, "_tsli"))

171 
pmt
 = 
Ãw
 
	`PmtT¦i
(
úame
);

172 ià(!
	`¡rcmp
(
ty³
, "_tsh"))

173 
pmt
 = 
Ãw
 
	`PmtTsh
(
úame
);

174 ià(!
	`¡rcmp
(
ty³
, "_tshi"))

175 
pmt
 = 
Ãw
 
	`PmtTshi
(
úame
);

176 ià(!
	`¡rcmp
(
ty³
, "_mux"))

177 
pmt
 = 
Ãw
 
	`PmtMux
(
úame
);

178 ià(!
	`¡rcmp
(
ty³
, "_dff"))

179 
pmt
 = 
Ãw
 
	`PmtDff
(
úame
, (
pÜtSize
 - 4)/2);

180 ià(!
	`¡rcmp
(
ty³
, "_dlat"))

181 
pmt
 = 
Ãw
 
	`PmtDÏt
(
úame
, (
pÜtSize
 - 4)/2);

182 ià(!
	`¡rcmp
(
ty³
, "_delay"))

183 
pmt
 = 
Ãw
 
	`PmtD–ay
(
úame
);

184 ià(!
	`¡rcmp
(
ty³
, "_invf"))

185 
pmt
 = 
Ãw
 
	`PmtInvf
(
úame
);

186 ià(!
	`¡rcmp
(
ty³
, "_wire"))

187 
pmt
 = 
Ãw
 
	`PmtWœe
(
úame
, 
pÜtSize
 - 1);

188 ià(!
	`¡rcmp
(
ty³
, "_pull"))

189 
pmt
 = 
Ãw
 
	`PmtPuÎ
(
úame
);

190 ià(!
	`¡rcmp
(
ty³
, "_tie1"))

191 
pmt
 = 
Ãw
 
	`PmtT›1
(
úame
);

192 ià(!
	`¡rcmp
(
ty³
, "_tie0"))

193 
pmt
 = 
Ãw
 
	`PmtT›0
(
úame
);

194 ià(!
	`¡rcmp
(
ty³
, "_tiex"))

195 
pmt
 = 
Ãw
 
	`PmtT›X
(
úame
);

196 ià(!
	`¡rcmp
(
ty³
, "_tiez"))

197 
pmt
 = 
Ãw
 
	`PmtT›Z
(
úame
);

198 ià(!
	`¡rcmp
(
ty³
, "_undefined"))

199 
pmt
 = 
Ãw
 
	`PmtUndefšed
(
úame
, 
pÜtSize
 - 1);

200 ià(!
	`¡rcmp
(
ty³
, "_nmos"))

201 
pmt
 = 
Ãw
 
	`PmtNmos
(
úame
);

202 ià(!
	`¡rcmp
(
ty³
, "_pmos"))

203 
pmt
 = 
Ãw
 
	`PmtPmos
(
úame
);

204 ià(!
	`¡rcmp
(
ty³
, "_rnmos"))

205 
pmt
 = 
Ãw
 
	`PmtRnmos
(
úame
);

206 ià(!
	`¡rcmp
(
ty³
, "_rpmos"))

207 
pmt
 = 
Ãw
 
	`PmtRpmos
(
úame
);

208 ià(!
	`¡rcmp
(
ty³
, "_nmosf"))

209 
pmt
 = 
Ãw
 
	`PmtNmosf
(
úame
);

210 ià(!
	`¡rcmp
(
ty³
, "_pmosf"))

211 
pmt
 = 
Ãw
 
	`PmtPmosf
(
úame
);

212 ià(!
	`¡rcmp
(
ty³
, "_cmos1"))

213 
pmt
 = 
Ãw
 
	`PmtCmos1
(
úame
);

214 ià(!
	`¡rcmp
(
ty³
, "_cmos2"))

215 
pmt
 = 
Ãw
 
	`PmtCmos2
(
úame
);

216 ià(!
	`¡rcmp
(
ty³
, "_rcmos1"))

217 
pmt
 = 
Ãw
 
	`PmtRcmos1
(
úame
);

218 ià(!
	`¡rcmp
(
ty³
, "_rcmos2"))

219 
pmt
 = 
Ãw
 
	`PmtRcmos2
(
úame
);

220 ià(!
	`¡rcmp
(
ty³
, "_cmos1f"))

221 
pmt
 = 
Ãw
 
	`PmtCmos1f
(
úame
);

222 ià(!
	`¡rcmp
(
ty³
, "_cmos2f"))

223 
pmt
 = 
Ãw
 
	`PmtCmos2f
(
úame
);

225 ià(!
pmt
) {

226 ià(
v”bo£_
) {

227 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addPrimitive(): ");

228 
	`årštf
(
¡d”r
, "šv®id…rim™iv`%s/", 
curC–l_
->
Çme_
);

229 
	`årštf
(
¡d”r
, "%s'\n", 
úame
);

231 
sucûss_
 = 
çl£
;

234 
pmt
->
tİ_
 = 
curC–l_
;

236 ià(
pÜtSize
 !ğ
pmt
->
	`g‘NPÜt
()) {

237 ià(
v”bo£_
) {

238 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addPrimitive(): ");

239 
	`årštf
(
¡d”r
, "´im™iv`%s/%s' ", 
curC–l_
->
Çme_
, 
úame
);

240 
	`årštf
(
¡d”r
, "has incorrect…ort size\n");

242 
sucûss_
 = 
çl£
;

246 
curC–l_
->
	`addC–l
(
pmt
);

247 
pÜt
 = 
pÜts
->
h—d
;

248 
size_t
 
pÜtNo
 = 0;

249 
pÜt
) {

250 ià(
	`¡¾’
(
pÜt
->
Çme
) == 0) {

251 
pÜt
 =…Üt->
Ãxt
;

252 
pÜtNo
++;

255 
PÜt
 *
p
 = 
pmt
->
	`g‘PÜt
(
pÜtNo
);

257 
N‘
 *
n
 = 
curC–l_
->
	`g‘N‘
(
pÜt
->
Çme
);

258 ià(!
n
) {

259 ià(
v”bo£_
) {

260 
	`årštf
(
¡d”r
, "**WARN MdtLibBuilder::addPrimitive():‚et ");

261 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curC–l_
->
Çme_
, 
pÜt
->
Çme
);

262 
	`årštf
(
¡d”r
, "set‡s wire\n");

264 
n
 = 
Ãw
 
	`N‘
(
pÜt
->
Çme
);

265 
n
->
tİ_
 = 
curC–l_
;

266 
curC–l_
->
	`addN‘
(
n
);

268 
p
->
exN‘_
 = 
n
;

269 
n
->
	`addPÜt
(
p
);

271 
pÜt
 =…Üt->
Ãxt
;

272 
pÜtNo
++;

274 
	}
}

276 
	gMdtLibBud”
::
	$addIn¡ªû
(cÚ¡ * cÚ¡ 
ty³
,

277 cÚ¡ * cÚ¡ 
Çme
,

278 
MdtNames
 * cÚ¡ 
pÜts
) {

279 ià(!
sucûss_
)

281 
úame
[
NAME_LEN
];

282 ià(!
	`¡rcmp
(
Çme
, ""))

283 
	`¥rštf
(
úame
, "LOO%d", ()
curC–l_
->
	`g‘NC–l
());

285 
	`¡rıy
(
úame
, 
Çme
);

286 ià(
curC–l_
->
	`g‘C–l
(
úame
)) {

287 ià(
v”bo£_
) {

288 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addPrimitive(): ");

289 
	`årštf
(
¡d”r
, "´im™iv`%s/%s' ", 
curC–l_
->
Çme_
, 
úame
);

290 
	`årštf
(
¡d”r
, "alreadyƒxists\n");

292 
sucûss_
 = 
çl£
;

295 
C–l
 *
c
 = 
Ãw
 
	`C–l
(
úame
);

296 
c
->
tİ_
 = 
curC–l_
;

297 
	`¡rıy
(
c
->
ty³Name_
, 
ty³
);

298 
curC–l_
->
	`addC–l
(
c
);

300 
MdtNames
 *
pÜt
 = 
pÜts
->
h—d
;

301 
size_t
 
pÜtNo
 = 0;

302 
²ame
[
NAME_LEN
];

303 
pÜt
) {

304 
	`¥rštf
(
²ame
, "P%d", ()
pÜtNo
);

305 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
(
²ame
);

306 
p
->
tİ_
 = 
c
;

307 
c
->
	`addPÜt
(
p
);

309 ià(
	`¡¾’
(
pÜt
->
Çme
) == 0) {

310 
pÜt
 =…Üt->
Ãxt
;

311 
pÜtNo
++;

315 
N‘
 *
n
 = 
curC–l_
->
	`g‘N‘
(
pÜt
->
Çme
);

316 ià(!
n
) {

317 ià(
v”bo£_
) {

318 
	`årštf
(
¡d”r
, "**WARN MdtLibBuilder::addPrimitive():‚et ");

319 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curC–l_
->
Çme_
, 
pÜt
->
Çme
);

320 
	`årštf
(
¡d”r
, "set‡s wire\n");

322 
n
 = 
Ãw
 
	`N‘
(
pÜt
->
Çme
);

323 
n
->
tİ_
 = 
curC–l_
;

324 
curC–l_
->
	`addN‘
(
n
);

326 
p
->
exN‘_
 = 
n
;

327 
n
->
	`addPÜt
(
p
);

329 
pÜt
 =…Üt->
Ãxt
;

330 
pÜtNo
++;

332 
	}
}

334 
	gMdtLibBud”
::
	$addIn¡ªû
(cÚ¡ * cÚ¡ 
ty³
,

335 cÚ¡ * cÚ¡ 
Çme
,

336 
MdtPÜtToN‘
 * cÚ¡ 
pÜtToN‘
) {

337 ià(!
sucûss_
)

339 
úame
[
NAME_LEN
];

340 ià(!
	`¡rcmp
(
Çme
, ""))

341 
	`¥rštf
(
úame
, "LOO%d", ()
curC–l_
->
	`g‘NC–l
());

343 
	`¡rıy
(
úame
, 
Çme
);

344 ià(
curC–l_
->
	`g‘C–l
(
úame
)) {

345 ià(
v”bo£_
) {

346 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addPrimitive(): ");

347 
	`årštf
(
¡d”r
, "´im™iv`%s/%s' ", 
curC–l_
->
Çme_
, 
úame
);

348 
	`årštf
(
¡d”r
, "alreadyƒxists\n");

350 
sucûss_
 = 
çl£
;

353 
C–l
 *
c
 = 
Ãw
 
	`C–l
(
úame
);

354 
c
->
tİ_
 = 
curC–l_
;

355 
	`¡rıy
(
c
->
ty³Name_
, 
ty³
);

356 
curC–l_
->
	`addC–l
(
c
);

358 
MdtPÜtToN‘
 *
p2n
 = 
pÜtToN‘
->
h—d
;

359 
p2n
) {

360 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
(
p2n
->
pÜt
);

361 
p
->
tİ_
 = 
c
;

362 
c
->
	`addPÜt
(
p
);

364 
N‘
 *
n
 = 
curC–l_
->
	`g‘N‘
(
p2n
->
Ãt
);

365 ià(!
n
) {

366 ià(
v”bo£_
) {

367 
	`årštf
(
¡d”r
, "**WARN MdtLibBuilder::addPrimitive():‚et ");

368 
	`årštf
(
¡d”r
, "`%s/%s' ", 
curC–l_
->
Çme_
, 
p2n
->
Ãt
);

369 
	`årštf
(
¡d”r
, "set‡s wire\n");

371 
n
 = 
Ãw
 
	`N‘
(
p2n
->
Ãt
);

372 
n
->
tİ_
 = 
curC–l_
;

373 
curC–l_
->
	`addN‘
(
n
);

375 
p
->
exN‘_
 = 
n
;

376 
n
->
	`addPÜt
(
p
);

378 
p2n
 =…2n->
Ãxt
;

380 
	}
}

382 
boŞ
 
	gMdtLibBud”
::
	$addPÜtN‘s
(
MdtNames
 * cÚ¡ 
Ãts
) {

383 
MdtNames
 *
Ãt
 = 
Ãts
->
h—d
;

384 
Ãt
) {

385 
PÜt
 *
p
 = 
curC–l_
->
	`g‘PÜt
(
Ãt
->
Çme
);

386 ià(!
p
) {

387 ià(
v”bo£_
) {

388 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::addPortNets(): ");

389 
	`årštf
(
¡d”r
, "pÜˆ`%s/%s' ", 
curC–l_
->
Çme_
, 
Ãt
->
Çme
);

390 
	`årštf
(
¡d”r
, "does‚otƒxist\n");

392  
çl£
;

394 
N‘
 *
n
 = 
curC–l_
->
	`g‘N‘
(
Ãt
->
Çme
);

395 ià(!
n
) {

396 
n
 = 
Ãw
 
	`N‘
(
Ãt
->
Çme
);

397 
n
->
tİ_
 = 
curC–l_
;

398 
curC–l_
->
	`addN‘
(
n
);

400 
n
->
	`addPÜt
(
p
);

401 
p
->
šN‘_
 = 
n
;

402 
Ãt
 =‚‘->
Ãxt
;

404  
Œue
;

405 
	}
}

407 
boŞ
 
	gMdtLibBud”
::
	$checkIn¡ªûs
() {

408 
size_t
 
i
 = 0; i < 
lib_
->
	`g‘NC–l
(); ++i) {

409 
C–l
 *
c
 = 
lib_
->
	`g‘C–l
(
i
);

410 
size_t
 
j
 = 0; j < 
c
->
	`g‘NC–l
(); ++j) {

411 
C–l
 *
š¡
 = 
c
->
	`g‘C–l
(
j
);

412 ià(
š¡
->
isPmt_
)

414 
C–l
 *
š¡c
 = 
lib_
->
	`g‘C–l
(
š¡
->
ty³Name_
);

415 ià(!
š¡c
) {

416 
	`årštf
(
¡d”r
, "**ERROR MdtLibBuilder::checkInstances(): ");

417 
	`årštf
(
¡d”r
, "š¡ªû `%s' ", 
š¡
->
Çme_
);

418 
	`årštf
(
¡d”r
, "is‚ot inhe†ibrary\n");

419  
çl£
;

421 
š¡
->
libc_
 = 
š¡c
;

422 
N‘
 *
Ãts
[
š¡c
->
	`g‘NPÜt
()];

423 
size_t
 
k
 = 0; k < 
š¡
->
	`g‘NPÜt
(); ++k) {

424 
PÜt
 *
p
 = 
š¡
->
	`g‘PÜt
(
k
);

425 ià(
š¡c
->
	`g‘PÜt
(
p
->
Çme_
))

426 
Ãts
[
š¡c
->
	`g‘PÜt
(
p
->
Çme_
)->
id_
] =…->
exN‘_
;

428 
Ãts
[
k
] = 
p
->
exN‘_
;

429 ià(
p
->
exN‘_
)

430 
p
->
exN‘_
->
	`»movePÜt
(p);

431 
d–‘e
 
p
;

433 
š¡
->
	`ş—rPÜts
();

434 
size_t
 
k
 = 0; k < 
š¡c
->
	`g‘NPÜt
(); ++k) {

435 
PÜt
 *
p
 = 
Ãw
 
	`PÜt
(
š¡c
->
	`g‘PÜt
(
k
)->
Çme_
);

436 
p
->
tİ_
 = 
c
;

437 
p
->
ty³_
 = 
š¡c
->
	`g‘PÜt
(
k
)->type_;

438 
š¡
->
	`addPÜt
(
p
);

439 
p
->
exN‘_
 = 
Ãts
[
k
];

440 
Ãts
[
k
]->
	`addPÜt
(
p
);

444  
Œue
;

445 
	}
}

447 
boŞ
 
	gMdtLibBud”
::
	$»moveFlßtšgN‘s
() {

448 
size_t
 
i
 = 0; i < 
lib_
->
	`g‘NC–l
(); ++i) {

449 
C–l
 *
c
 = 
lib_
->
	`g‘C–l
(
i
);

450 
size_t
 
j
 = 0; j < 
c
->
	`g‘NN‘
(); ++j) {

451 
N‘
 *
n
 = 
c
->
	`g‘N‘
(
j
);

452 ià(
n
->
	`g‘NPÜt
(è< 2 &&‚->
	`g‘NEqv
() == 0) {

453 ià(
n
->
	`g‘NPÜt
() == 1) {

454 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(0);

455 ià(
p
->
tİ_
 =ğ
c
)

456 
p
->
šN‘_
 = 
NULL
;

458 
p
->
exN‘_
 = 
NULL
;

460 
c
->
	`»moveN‘
(
j
);

461 
d–‘e
 
n
;

462 
j
--;

466  
Œue
;

467 
	}
}

	@interface/src/techlib_builder.h

9 #iâdeà
_INTF_TECHLIB_BUILDER_H_


10 
	#_INTF_TECHLIB_BUILDER_H_


	)

12 
	~"mdt_fe.h
"

13 
	~"‹chlib.h
"

15 
Çme¥aû
 
	gIÁfNs
 {

17 şas 
	cMdtLibBud”
 : 
public
 
MdtFe
 {

18 
public
:

19 
MdtLibBud”
(
Techlib
 *
lib
);

20 
	gvœtu®
 ~
MdtLibBud”
();

22 
vœtu®
 
boŞ
 
»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ boŞ &
v”bo£
 = 
çl£
);

23 
vœtu®
 
addMod–
(cÚ¡ * cÚ¡ 
Çme
);

24 
vœtu®
 
addPÜts
(
MdtNames
 * cÚ¡ 
pÜts
);

25 
vœtu®
 
£tIÅutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

26 
vœtu®
 
£tOuutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

27 
vœtu®
 
£tInoutN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

28 
vœtu®
 
£tIÁ”nN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

29 
vœtu®
 
addPrim™ive
(cÚ¡ * cÚ¡ 
ty³
,

30 cÚ¡ * cÚ¡ 
Çme
,

31 
MdtNames
 * cÚ¡ 
pÜts
);

32 
vœtu®
 
addIn¡ªû
(cÚ¡ * cÚ¡ 
ty³
,

33 cÚ¡ * cÚ¡ 
Çme
,

34 
MdtNames
 * cÚ¡ 
pÜts
);

35 
vœtu®
 
addIn¡ªû
(cÚ¡ * cÚ¡ 
ty³
,

36 cÚ¡ * cÚ¡ 
Çme
,

37 
MdtPÜtToN‘
 * cÚ¡ 
pÜtToN‘
);

39 
	g´Ùeùed
:

40 
boŞ
 
addPÜtN‘s
(
MdtNames
 * cÚ¡ 
Ãts
);

41 
boŞ
 
checkIn¡ªûs
();

42 
boŞ
 
»moveFlßtšgN‘s
();

43 
C–l
 *
	gcurC–l_
;

44 
Techlib
 *
	glib_
;

47 
šlše
 
	gMdtLibBud”
::
	$MdtLibBud”
(
Techlib
 *
lib
) {

48 
curC–l_
 = 
NULL
;

49 
lib_
 = 
lib
;

50 
	}
}

51 
šlše
 
	gMdtLibBud”
::~
	$MdtLibBud”
(è{
	}
}

	@interface/src/vlog2pmt.cpp

8 
	~<c¡dlib
>

9 
	~<io¡»am
>

10 
	~<f¡»am
>

12 
	~"Ãi¡_bud”.h
"

13 
	~"‹chlib_bud”.h
"

15 
usšg
 
Çme¥aû
 
	g¡d
;

16 
usšg
 
Çme¥aû
 
	gIÁfNs
;

18 
´štC–l
(
C–l
 *
c
, 
of¡»am
 &
fout
);

19 
´štPmt
(
Pmt
 *
pmt
, 
C–l
 *
c
, 
of¡»am
 &
fout
);

20 
´štIn¡
(
C–l
 *
š¡
, C–È*
c
, 
of¡»am
 &
fout
);

22 
¡ršg
 
g‘PmtN‘Name
(
PÜt
 *
p
, 
Pmt
 *
pmt
, 
C–l
 *
c
);

23 
´štDff
(
C–l
 *
c
, 
of¡»am
 &
fout
);

25 cÚ¡ 
	gh›r
 = '/';

31 
	$maš
(
¬gc
, **
¬gv
) {

32 ià(
¬gc
 < 3) {

33 
û¼
 << "**ERROR main():‚eed‚etlist, MDT†ib";

34 
û¼
 << 
’dl
;

35 
	`ex™
(0);

49 
Techlib
 
lib
;

50 
MdtFe
 *
libBld”
 = 
Ãw
 
	`MdtLibBud”
(&
lib
);

52 
cout
 << "> R—dšgechnŞogy†ib¿ry..." << 
’dl
;

53 ià(!
libBld”
->
	`»ad
(
¬gv
[2], 
Œue
)) {

54 
û¼
 << "**ERROR maš(): MDT†ib bud”ƒ¼Ü" << 
’dl
;

55 
d–‘e
 
libBld”
;

56 
	`ex™
(0);

58 
cout
 << "> CheckšgechnŞogy†ib¿ry..." << 
’dl
;

59 ià(!
lib
.
	`check
(
Œue
)) {

60 
û¼
 << "**ERROR maš(): MDT†ibƒ¼Ü" << 
’dl
;

61 
d–‘e
 
libBld”
;

62 
	`ex™
(0);

66 
N‘li¡
 
Æ
;

67 
Æ
.
	`£tTechlib
(&
lib
);

68 
VlogFe
 *
ÆBld”
 = 
Ãw
 
	`VlogNlBud”
(&
Æ
);

70 
cout
 << "> R—dšg‚‘li¡..." << 
’dl
;

71 ià(!
ÆBld”
->
	`»ad
(
¬gv
[1], 
Œue
)) {

72 
û¼
 << "**ERROR maš(): v”og bud”ƒ¼Ü" << 
’dl
;

73 
d–‘e
 
ÆBld”
;

74 
	`ex™
(0);

77 
cout
 << "> Removšg flßtšg‚‘s..." << 
’dl
;

78 
Æ
.
	`»moveFlßtšgN‘s
();

80 
cout
 << "> Checkšg‚‘li¡..." << 
’dl
;

81 ià(!
Æ
.
	`check
(
Œue
)) {

82 
û¼
 << "**ERROR maš():‚‘li¡ƒ¼Ü" << 
’dl
;

83 
d–‘e
 
ÆBld”
;

84 
	`ex™
(0);

167 
d–‘e
 
ÆBld”
;

168 
d–‘e
 
libBld”
;

171 
	}
}

174 
	$´štC–l
(
C–l
 *
c
, 
of¡»am
 &
fout
) {

175 
C–l
 *
libc
 = 
c
->
libc_
;

176 
size_t
 
i
 = 0; i < 
libc
->
	`g‘NC–l
(); ++i) {

177 
C–l
 *
š
 = 
libc
->
	`g‘C–l
(
i
);

178 ià(
š
->
isPmt_
)

179 
	`´štPmt
((
Pmt
 *)
š
, 
c
, 
fout
);

181 
	`´štIn¡
(
š
, 
c
, 
fout
);

183 
	}
}

186 
	$´štPmt
(
Pmt
 *
pmt
, 
C–l
 *
c
, 
of¡»am
 &
fout
) {

187 
šSize
 = ()
pmt
->
	`g‘NPÜt
() - 1;

188 
buf
[8];

189 
pmt
->
ty³_
) {

190 
Pmt
::
BUF
:

191 
fout
 << "BUFX1";

193 
Pmt
::
INV
:

194 
Pmt
::
INVF
:

195 
fout
 << "INVX1";

197 
Pmt
::
AND
:

198 
fout
 << "AND";

199 
	`¥rštf
(
buf
, "%d", 
šSize
);

200 
fout
 << 
buf
 << "X1";

202 
Pmt
::
NAND
:

203 
fout
 << "NAND";

204 
	`¥rštf
(
buf
, "%d", 
šSize
);

205 
fout
 << 
buf
 << "X1";

207 
Pmt
::
OR
:

208 
fout
 << "OR";

209 
	`¥rštf
(
buf
, "%d", 
šSize
);

210 
fout
 << 
buf
 << "X1";

212 
Pmt
::
NOR
:

213 
fout
 << "NOR";

214 
	`¥rštf
(
buf
, "%d", 
šSize
);

215 
fout
 << 
buf
 << "X1";

217 
Pmt
::
XOR
:

218 
fout
 << "XOR";

219 
	`¥rštf
(
buf
, "%d", 
šSize
);

220 
fout
 << 
buf
 << "X1";

222 
Pmt
::
XNOR
:

223 
fout
 << "XNOR";

224 
	`¥rštf
(
buf
, "%d", 
šSize
);

225 
fout
 << 
buf
 << "X1";

228 
fout
 << "NA";

231 
fout
 << " " << 
c
->
Çme_
 << 
h›r
 << 
pmt
->name_ << " (";

233 
size_t
 
j
 = 0; j < 
pmt
->
	`g‘NPÜt
(); ++j) {

234 
fout
 << "." << 
pmt
->
	`g‘PÜt
(
j
)->
Çme_
 << "(";

235 
fout
 << 
	`g‘PmtN‘Name
(
pmt
->
	`g‘PÜt
(
j
),…mt, 
c
) << ")";

236 ià(
j
 + 1 !ğ
pmt
->
	`g‘NPÜt
())

237 
fout
 << ", ";

239 
fout
 << ");" << 
’dl
;

240 
	}
}

242 
	$´štIn¡
(
C–l
 *
š¡
, C–È*
c
, 
of¡»am
 &
fout
) {

243 
	}
}

246 
¡ršg
 
	$g‘PmtN‘Name
(
PÜt
 *
p
, 
Pmt
 *
pmt
, 
C–l
 *
c
) {

247 
C–l
 *
libc
 = 
c
->
libc_
;

248 
N‘
 *
n
 = 
p
->
exN‘_
;

249 ià(!
n
)

251 
boŞ
 
š‹º
 = 
Œue
;

252 
¡ršg
 
ÃtName
 = "";

253 
size_t
 
k
 = 0; k < 
n
->
	`g‘NPÜt
(); ++k) {

254 
PÜt
 *
p
 = 
n
->
	`g‘PÜt
(
k
);

255 ià(
p
->
tİ_
 =ğ
libc
) {

256 ià(
c
->
	`g‘PÜt
(
p
->
Çme_
)->
exN‘_
)

257 
ÃtName
 = 
c
->
	`g‘PÜt
(
p
->
Çme_
)->
exN‘_
->name_;

258 
š‹º
 = 
çl£
;

262 ià(
š‹º
)

263 
ÃtName
 = 
	`¡ršg
(
c
->
Çme_
è+ 
h›r
 + sŒšg(
n
->name_);

264  
ÃtName
;

265 
	}
}

267 
	$´štDff
(
C–l
 *
c
, 
of¡»am
 &
fout
) {

268 
fout
 << 
c
->
libc_
->
Çme_
 << " " << c->name_ << " (";

269 
boŞ
 
hasPÜt
 = 
çl£
;

270 
size_t
 
i
 = 0; i < 
c
->
	`g‘NPÜt
(); ++i) {

271 
N‘
 *
n
 = 
c
->
	`g‘PÜt
(
i
)->
exN‘_
;

272 ià(!
n
)

274 ià(
hasPÜt
)

275 
fout
 << ", " << 
æush
;

276 
fout
 << "." << 
c
->
	`g‘PÜt
(
i
)->
Çme_
 << "(";

277 
fout
 << 
n
->
Çme_
 << ")";

278 
hasPÜt
 = 
Œue
;

280 
fout
 << ");" << 
’dl
;

281 
	}
}

	@interface/src/vlog_file.cpp

8 
	~<c¡dio
>

10 
	~"vlog_fe.h
"

12 
usšg
 
Çme¥aû
 
	g¡d
;

13 
usšg
 
Çme¥aû
 
	gIÁfNs
;

15 
vlog_f•¬£
(*);

16 
FILE
 *
vlog_feš
;

18 
boŞ
 
	gVlogFe
::
	$»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ 
boŞ
 &
v”bo£
) {

19 
v”bo£_
 = 
v”bo£
;

20 
vlog_feš
 = 
	`fİ’
(
âame
, "r");

21 ià(!
vlog_feš
) {

22 
	`årštf
(
¡d”r
, "**ERROR VlogFile::read(): cannot open‚etlist file");

23 
	`årštf
(
¡d”r
, "`%s'\n", 
âame
);

24  
çl£
;

27 
sucûss_
 = 
Œue
;

28 
»s
 = 
	`vlog_f•¬£
(
this
);

29 ià(
»s
 != 0) {

30 
	`årštf
(
¡d”r
, "**ERROR VlogFile::read(): wrong input format\n");

31  
çl£
;

33 
	`fşo£
(
vlog_feš
);

35  
sucûss_
;

36 
	}
}

38 
	gVlogFe
::
	$addModuË
(cÚ¡ * cÚ¡ 
Çme
) {

39 ià(
v”bo£_
)

40 
	`´štf
("add moduË: %s\n", 
Çme
);

41 
	}
}

43 
	gVlogFe
::
	$addPÜts
(
VlogNames
 * cÚ¡ 
pÜts
) {

44 ià(
v”bo£_
) {

45 
	`´štf
("add…orts: ");

46 
VlogNames
 *
pÜt
 = 
pÜts
->
h—d
;

47 
pÜt
) {

48 
	`´štf
("%s", 
pÜt
->
Çme
);

49 
pÜt
 =…Üt->
Ãxt
;

50 ià(
pÜt
)

51 
	`´štf
(", ");

53 
	`´štf
("\n");

55 
	}
}

57 
	gVlogFe
::
	$£tIÅutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

58 ià(
v”bo£_
) {

59 
	`´štf
("set input‚ets: ");

60 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

61 
Ãt
) {

62 
	`´štf
("%s", 
Ãt
->
Çme
);

63 
Ãt
 =‚‘->
Ãxt
;

64 ià(
Ãt
)

65 
	`´štf
(", ");

67 
	`´štf
("\n");

69 
	}
}

71 
	gVlogFe
::
	$£tOuutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

72 ià(
v”bo£_
) {

73 
	`´štf
("set output‚ets: ");

74 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

75 
Ãt
) {

76 
	`´štf
("%s", 
Ãt
->
Çme
);

77 
Ãt
 =‚‘->
Ãxt
;

78 ià(
Ãt
)

79 
	`´štf
(", ");

81 
	`´štf
("\n");

83 
	}
}

85 
	gVlogFe
::
	$£tInoutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

86 ià(
v”bo£_
) {

87 
	`´štf
("set inout‚ets: ");

88 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

89 
Ãt
) {

90 
	`´štf
("%s", 
Ãt
->
Çme
);

91 
Ãt
 =‚‘->
Ãxt
;

92 ià(
Ãt
)

93 
	`´štf
(", ");

95 
	`´štf
("\n");

97 
	}
}

99 
	gVlogFe
::
	$£tWœeN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

100 ià(
v”bo£_
) {

101 
	`´štf
("set wire‚ets: ");

102 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

103 
Ãt
) {

104 
	`´štf
("%s", 
Ãt
->
Çme
);

105 
Ãt
 =‚‘->
Ãxt
;

106 ià(
Ãt
)

107 
	`´štf
(", ");

109 
	`´štf
("\n");

111 
	}
}

113 
	gVlogFe
::
	$£tRegN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

114 ià(
v”bo£_
) {

115 
	`´štf
("set„eg‚ets: ");

116 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

117 
Ãt
) {

118 
	`´štf
("%s", 
Ãt
->
Çme
);

119 
Ãt
 =‚‘->
Ãxt
;

120 ià(
Ãt
)

121 
	`´štf
(", ");

123 
	`´štf
("\n");

125 
	}
}

127 
	gVlogFe
::
	$£tSuµlyLN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

128 ià(
v”bo£_
) {

129 
	`´štf
("set supply L‚ets: ");

130 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

131 
Ãt
) {

132 
	`´štf
("%s", 
Ãt
->
Çme
);

133 
Ãt
 =‚‘->
Ãxt
;

134 ià(
Ãt
)

135 
	`´štf
(", ");

137 
	`´štf
("\n");

139 
	}
}

141 
	gVlogFe
::
	$£tSuµlyHN‘s
(
VlogNames
 * cÚ¡ 
Ãts
) {

142 ià(
v”bo£_
) {

143 
	`´štf
("set supply H‚ets: ");

144 
VlogNames
 *
Ãt
 = 
Ãts
->
h—d
;

145 
Ãt
) {

146 
	`´štf
("%s", 
Ãt
->
Çme
);

147 
Ãt
 =‚‘->
Ãxt
;

148 ià(
Ãt
)

149 
	`´štf
(", ");

151 
	`´štf
("\n");

153 
	}
}

155 
	gVlogFe
::
	$addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

156 
VlogNames
 * cÚ¡ 
pÜts
) {

157 ià(
v”bo£_
) {

158 
	`´štf
("add c–l: % % (", 
ty³
, 
Çme
);

159 
VlogNames
 *
pÜt
 = 
pÜts
->
h—d
;

160 
pÜt
) {

161 
	`´štf
("%s", 
pÜt
->
Çme
);

162 
pÜt
 =…Üt->
Ãxt
;

163 ià(
pÜt
)

164 
	`´štf
(", ");

166 
	`´štf
(")\n");

168 
	}
}

170 
	gVlogFe
::
	$addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

171 
VlogPÜtToN‘
 * cÚ¡ 
pÜtToN‘
) {

172 ià(
v”bo£_
) {

173 
	`´štf
("add c–l: % % (", 
ty³
, 
Çme
);

174 
VlogPÜtToN‘
 *
p2n
 = 
pÜtToN‘
->
h—d
;

175 
p2n
) {

176 
	`´štf
(".%s(%s)", 
p2n
->
pÜt
,…2n->
Ãt
);

177 
p2n
 =…2n->
Ãxt
;

178 ià(
p2n
)

179 
	`´štf
(", ");

181 
	`´štf
(")\n");

183 
	}
}

185 
	gVlogFe
::
	$addC–l
(cÚ¡ * cÚ¡ 
ty³
, 
VlogNames
 * cÚ¡ 
¡»ngths
,

186 cÚ¡ * cÚ¡ 
Çme
, 
VlogNames
 * cÚ¡ 
pÜts
) {

187 ià(
v”bo£_
) {

188 
	`´štf
("add c–l: % (", 
ty³
);

189 
VlogNames
 *
¡»ngth
 = 
¡»ngths
->
h—d
;

190 
¡»ngth
) {

191 
	`´štf
("%s", 
¡»ngth
->
Çme
);

192 
¡»ngth
 = sŒ’gth->
Ãxt
;

193 ià(
¡»ngth
)

194 
	`´štf
(", ");

196 
	`´štf
("è%s(", 
Çme
);

197 
VlogNames
 *
pÜt
 = 
pÜts
->
h—d
;

198 
pÜt
) {

199 
	`´štf
("%s", 
pÜt
->
Çme
);

200 
pÜt
 =…Üt->
Ãxt
;

201 ià(
pÜt
)

202 
	`´štf
(", ");

204 
	`´štf
(")\n");

206 
	}
}

209 
	gVlogFe
::
	$addAssign
(cÚ¡ * cÚ¡ 
n1
, cÚ¡ * cÚ¡ 
n2
) {

210 ià(
v”bo£_
)

211 
	`´štf
("add‡ssign: % ğ%s\n", 
n1
, 
n2
);

212 
	}
}

	@interface/src/vlog_file.h

9 #iâdeà
_INTF_VLOG_FILE_H_


10 
	#_INTF_VLOG_FILE_H_


	)

12 
	~"glob®.h
"

14 
Çme¥aû
 
	gIÁfNs
 {

16 
	eVlogN‘Ty³
 { 
	gVLOG_NET_INPUT
, 
	gVLOG_NET_OUTPUT
, 
	gVLOG_NET_INOUT
,

17 
	gVLOG_NET_WIRE
, 
	gVLOG_NET_REG
, 
	gVLOG_NET_SUPPLY_L
,

18 
	gVLOG_NET_SUPPLY_H
 };

20 
	sVlogNames
 {

21 
	gÇme
[
NAME_LEN
];

22 
VlogNames
 *
	gÃxt
;

23 
VlogNames
 *
	gh—d
;

26 
	sVlogPÜtToN‘
 {

27 
	gpÜt
[
NAME_LEN
];

28 
	gÃt
[
NAME_LEN
];

29 
VlogPÜtToN‘
 *
	gÃxt
;

30 
VlogPÜtToN‘
 *
	gh—d
;

33 şas 
	cVlogFe
 {

34 
	gpublic
:

35 
VlogFe
();

36 
	gvœtu®
 ~
VlogFe
();

38 
vœtu®
 
boŞ
 
»ad
(cÚ¡ * cÚ¡ 
âame
, cÚ¡ boŞ &
v”bo£
 = 
çl£
);

40 
vœtu®
 
addModuË
(cÚ¡ * cÚ¡ 
Çme
);

41 
vœtu®
 
addPÜts
(
VlogNames
 * cÚ¡ 
pÜts
);

42 
vœtu®
 
£tIÅutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

43 
vœtu®
 
£tOuutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

44 
vœtu®
 
£tInoutN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

45 
vœtu®
 
£tWœeN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

46 
vœtu®
 
£tRegN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

47 
vœtu®
 
£tSuµlyLN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

48 
vœtu®
 
£tSuµlyHN‘s
(
VlogNames
 * cÚ¡ 
Ãts
);

49 
vœtu®
 
addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

50 
VlogNames
 * cÚ¡ 
pÜts
);

51 
vœtu®
 
addC–l
(cÚ¡ * cÚ¡ 
ty³
, cÚ¡ * cÚ¡ 
Çme
,

52 
VlogPÜtToN‘
 * cÚ¡ 
pÜtToN‘
);

53 
vœtu®
 
addC–l
(cÚ¡ * cÚ¡ 
ty³
,

54 
VlogNames
 * cÚ¡ 
¡»ngths
,

55 cÚ¡ * cÚ¡ 
Çme
,

56 
VlogNames
 * cÚ¡ 
pÜts
);

57 
vœtu®
 
addAssign
(cÚ¡ * cÚ¡ 
n1
, cÚ¡ * cÚ¡ 
n2
);

59 
	g´Ùeùed
:

60 
boŞ
 
sucûss_
;

61 
boŞ
 
	gv”bo£_
;

64 
šlše
 
	gVlogFe
::
	$VlogFe
() {

65 
sucûss_
 = 
Œue
;

66 
v”bo£_
 = 
çl£
;

67 
	}
}

68 
šlše
 
	gVlogFe
::~
	$VlogFe
(è{
	}
}

	@interface/src/vlog_test.cpp

8 
	~<c¡dio
>

9 
	~<c¡dlib
>

11 
	~"vlog_fe.h
"

13 
usšg
 
Çme¥aû
 
	g¡d
;

14 
usšg
 
Çme¥aû
 
	gIÁfNs
;

17 
	$maš
(
¬gc
, **
¬gv
) {

18 ià(
¬gc
 < 2) {

19 
	`årštf
(
¡d”r
, "**ERROR main():…lease…rovide input verilog\n");

20 
	`ex™
(0);

23 
VlogFe
 *
vlog
 = 
Ãw
 VlogFile;

24 ià(!
vlog
->
	`»ad
(
¬gv
[1], 
Œue
)) {

25 
	`årštf
(
¡d”r
, "**ERROR main(): verilog…arser failed\n");

26 
	`ex™
(0);

29 
d–‘e
 
vlog
;

32 
	}
}

	@
1
.
0
72
1724
atpg/src/atpg_cmd.cpp
atpg/src/atpg_cmd.h
atpg/src/fan_mgr.h
atpg/src/main.cpp
atpg/src/misc_cmd.cpp
atpg/src/misc_cmd.h
atpg/src/setup_cmd.cpp
atpg/src/setup_cmd.h
common/src/ascii.h
common/src/cmd.cpp
common/src/cmd.h
common/src/common_test.cpp
common/src/get_opt.cpp
common/src/get_opt.h
common/src/sys_cmd.cpp
common/src/sys_cmd.h
common/src/tm_usage.cpp
common/src/tm_usage.h
common/src/tm_usage/tm_usage.cpp
common/src/tm_usage/tm_usage.h
common/src/tm_usage/tm_usage_test.cpp
common/src/vt100.h
core/src/atpg.cpp
core/src/atpg.h
core/src/atpg_mgr.cpp
core/src/atpg_mgr.h
core/src/circuit.cpp
core/src/circuit.h
core/src/d_decision_tree.h
core/src/decision_tree.h
core/src/fault.cpp
core/src/fault.h
core/src/gate.h
core/src/implicator.cpp
core/src/implicator.h
core/src/logic-hex.h
core/src/logic.cpp
core/src/logic.h
core/src/pattern.h
core/src/pattern_rw.cpp
core/src/pattern_rw.h
core/src/simulator.cpp
core/src/simulator.h
interface/src/cell.cpp
interface/src/cell.h
interface/src/global.h
interface/src/lht_pat_file.cpp
interface/src/lht_pat_file.h
interface/src/lht_pat_test.cpp
interface/src/mdt_file.cpp
interface/src/mdt_file.h
interface/src/mdt_test.cpp
interface/src/netlist.cpp
interface/src/netlist.h
interface/src/netlist_builder.cpp
interface/src/netlist_builder.h
interface/src/pat_file.cpp
interface/src/pat_file.h
interface/src/pat_test.cpp
interface/src/primitive.cpp
interface/src/primitive.h
interface/src/sdf_file.cpp
interface/src/sdf_file.h
interface/src/sdf_test.cpp
interface/src/techlib.cpp
interface/src/techlib.h
interface/src/techlib_builder.cpp
interface/src/techlib_builder.h
interface/src/vlog2pmt.cpp
interface/src/vlog_file.cpp
interface/src/vlog_file.h
interface/src/vlog_test.cpp
